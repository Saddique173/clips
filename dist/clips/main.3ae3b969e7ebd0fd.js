var eY=Object.defineProperty,tY=Object.defineProperties,nY=Object.getOwnPropertyDescriptors,tA=Object.getOwnPropertySymbols,y6=Object.prototype.hasOwnProperty,v6=Object.prototype.propertyIsEnumerable,_6=(it,Se,$)=>Se in it?eY(it,Se,{enumerable:!0,configurable:!0,writable:!0,value:$}):it[Se]=$,By=(it,Se)=>{for(var $ in Se||(Se={}))y6.call(Se,$)&&_6(it,$,Se[$]);if(tA)for(var $ of tA(Se))v6.call(Se,$)&&_6(it,$,Se[$]);return it},nA=(it,Se)=>tY(it,nY(Se)),b6=(it,Se)=>{var $={};for(var h in it)y6.call(it,h)&&Se.indexOf(h)<0&&($[h]=it[h]);if(null!=it&&tA)for(var h of tA(it))Se.indexOf(h)<0&&v6.call(it,h)&&($[h]=it[h]);return $};(self.webpackChunkclips=self.webpackChunkclips||[]).push([[179],{2011:(it,Se,$)=>{"use strict";$.d(Se,{Dh:()=>ye,GT:()=>ce,cc:()=>Re,hO:()=>Xe,on:()=>Y,pX:()=>re,xv:()=>De});var h=$(5e3),oe=$(9260),j=$(4976);it=$.hmd(it);const de=["ngOnDestroy"],re=(we,tt,ft,Ye={})=>new Proxy(we,{get:(Ce,je)=>ft.runOutsideAngular(()=>{var gt;if(we[je])return(null===(gt=null==Ye?void 0:Ye.spy)||void 0===gt?void 0:gt.get)&&Ye.spy.get(je,we[je]),we[je];if(de.indexOf(je)>-1)return()=>{};const st=tt.toPromise().then(W=>{const V=W&&W[je];return"function"==typeof V?V.bind(W):V&&V.then?V.then(Ie=>ft.run(()=>Ie)):ft.run(()=>V)});return new Proxy(()=>{},{get:(W,V)=>st[V],apply:(W,V,Ie)=>st.then(nt=>{var We;const mt=nt&&nt(...Ie);return(null===(We=null==Ye?void 0:Ye.spy)||void 0===We?void 0:We.apply)&&Ye.spy.apply(je,Ie,mt),mt})})})}),ce=(we,tt)=>{tt.forEach(ft=>{Object.getOwnPropertyNames(ft.prototype||ft).forEach(Ye=>{Object.defineProperty(we.prototype,Ye,Object.getOwnPropertyDescriptor(ft.prototype||ft,Ye))})})};class me{constructor(tt){return tt}}const ye=new h.OlP("angularfire2.app.options"),De=new h.OlP("angularfire2.app.name");function Y(we,tt,ft){const Ce="object"==typeof ft&&ft||{};Ce.name=Ce.name||"string"==typeof ft&&ft||"[DEFAULT]";const gt=oe.Z.apps.filter(st=>st&&st.name===Ce.name)[0]||tt.runOutsideAngular(()=>oe.Z.initializeApp(we,Ce));try{JSON.stringify(we)!==JSON.stringify(gt.options)&&se("error",`${gt.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(st){}return new me(gt)}const se=(we,...tt)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[we](...tt)},Q={provide:me,useFactory:Y,deps:[ye,h.R0b,[new h.FiY,De]]};let Xe=(()=>{class we{constructor(ft){oe.Z.registerVersion("angularfire",j.q4.full,"core"),oe.Z.registerVersion("angularfire",j.q4.full,"app-compat"),oe.Z.registerVersion("angular",h.q4F.full,ft.toString())}static initializeApp(ft,Ye){return{ngModule:we,providers:[{provide:ye,useValue:ft},{provide:De,useValue:Ye}]}}}return we.\u0275fac=function(ft){return new(ft||we)(h.LFG(h.Lbi))},we.\u0275mod=h.oAB({type:we}),we.\u0275inj=h.cJS({providers:[Q]}),we})();function Re(we,tt,ft,Ye,Ce){const[,je,gt]=globalThis.\u0275AngularfireInstanceCache.find(st=>st[0]===we)||[];if(je)return function Je(we,tt){try{return we.toString()===tt.toString()}catch(ft){return we===tt}}(Ce,gt)||(ze("error",`${tt} was already initialized on the ${ft} Firebase App with different settings.${Dt?" You may need to reload as Firebase is not HMR aware.":""}`),ze("warn",{is:Ce,was:gt})),je;{const st=Ye();return globalThis.\u0275AngularfireInstanceCache.push([we,st,Ce]),st}}const Dt=!!it.hot,ze=(we,...tt)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[we](...tt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(it,Se,$)=>{"use strict";$.d(Se,{q4:()=>_d,iC:()=>au,fc:()=>qp,HU:()=>sl,vb:()=>dc,JM:()=>Li});var h=$(5e3),oe=$(259),j=$(5861),de=$(6881),re=$(2090),ce=$(4859),me=$(1877);let De,Y;const Xe=new WeakMap,Re=new WeakMap,Je=new WeakMap,Dt=new WeakMap,ze=new WeakMap;let ft={get(S,k,F){if(S instanceof IDBTransaction){if("done"===k)return Re.get(S);if("objectStoreNames"===k)return S.objectStoreNames||Je.get(S);if("store"===k)return F.objectStoreNames[1]?void 0:F.objectStore(F.objectStoreNames[0])}return gt(S[k])},set:(S,k,F)=>(S[k]=F,!0),has:(S,k)=>S instanceof IDBTransaction&&("done"===k||"store"===k)||k in S};function je(S){return"function"==typeof S?function Ce(S){return S!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Q(){return Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(S)?function(...k){return S.apply(st(this),k),gt(Xe.get(this))}:function(...k){return gt(S.apply(st(this),k))}:function(k,...F){const J=S.call(st(this),k,...F);return Je.set(J,k.sort?k.sort():[k]),gt(J)}}(S):(S instanceof IDBTransaction&&function tt(S){if(Re.has(S))return;const k=new Promise((F,J)=>{const xe=()=>{S.removeEventListener("complete",Ne),S.removeEventListener("error",ot),S.removeEventListener("abort",ot)},Ne=()=>{F(),xe()},ot=()=>{J(S.error||new DOMException("AbortError","AbortError")),xe()};S.addEventListener("complete",Ne),S.addEventListener("error",ot),S.addEventListener("abort",ot)});Re.set(S,k)}(S),((S,k)=>k.some(F=>S instanceof F))(S,function se(){return De||(De=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(S,ft):S)}function gt(S){if(S instanceof IDBRequest)return function we(S){const k=new Promise((F,J)=>{const xe=()=>{S.removeEventListener("success",Ne),S.removeEventListener("error",ot)},Ne=()=>{F(gt(S.result)),xe()},ot=()=>{J(S.error),xe()};S.addEventListener("success",Ne),S.addEventListener("error",ot)});return k.then(F=>{F instanceof IDBCursor&&Xe.set(F,S)}).catch(()=>{}),ze.set(k,S),k}(S);if(Dt.has(S))return Dt.get(S);const k=je(S);return k!==S&&(Dt.set(S,k),ze.set(k,S)),k}const st=S=>ze.get(S),Ie=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],We=new Map;function mt(S,k){if(!(S instanceof IDBDatabase)||k in S||"string"!=typeof k)return;if(We.get(k))return We.get(k);const F=k.replace(/FromIndex$/,""),J=k!==F,xe=nt.includes(F);if(!(F in(J?IDBIndex:IDBObjectStore).prototype)||!xe&&!Ie.includes(F))return;const Ne=function(){var ot=(0,j.Z)(function*(Ft,...Pt){const Xt=this.transaction(Ft,xe?"readwrite":"readonly");let Tn=Xt.store;return J&&(Tn=Tn.index(Pt.shift())),(yield Promise.all([Tn[F](...Pt),xe&&Xt.done]))[0]});return function(Pt){return ot.apply(this,arguments)}}();return We.set(k,Ne),Ne}!function Ye(S){ft=S(ft)}(S=>nA(By({},S),{get:(k,F,J)=>mt(k,F)||S.get(k,F,J),has:(k,F)=>!!mt(k,F)||S.has(k,F)}));const he="@firebase/installations",rt="w:0.6.4",Z="FIS_v2",ut=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ot(S){return S instanceof re.ZR&&S.code.includes("request-failed")}function zt({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function kt(S){return{token:S.token,requestStatus:2,expiresIn:Rr(S.expiresIn),creationTime:Date.now()}}function ln(S,k){return $n.apply(this,arguments)}function $n(){return($n=(0,j.Z)(function*(S,k){const J=(yield k.json()).error;return ut.create("request-failed",{requestName:S,serverCode:J.code,serverMessage:J.message,serverStatus:J.status})})).apply(this,arguments)}function zn({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function ar(S,{refreshToken:k}){const F=zn(S);return F.append("Authorization",function Ut(S){return`${Z} ${S}`}(k)),F}function fn(S){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,j.Z)(function*(S){const k=yield S();return k.status>=500&&k.status<600?S():k})).apply(this,arguments)}function Rr(S){return Number(S.replace("s","000"))}function Co(S,k){return gr.apply(this,arguments)}function gr(){return(gr=(0,j.Z)(function*({appConfig:S,heartbeatServiceProvider:k},{fid:F}){const J=zt(S),xe=zn(S),Ne=k.getImmediate({optional:!0});if(Ne){const Xt=yield Ne.getHeartbeatsHeader();Xt&&xe.append("x-firebase-client",Xt)}const Ft={method:"POST",headers:xe,body:JSON.stringify({fid:F,authVersion:Z,appId:S.appId,sdkVersion:rt})},Pt=yield fn(()=>fetch(J,Ft));if(Pt.ok){const Xt=yield Pt.json();return{fid:Xt.fid||F,registrationStatus:2,refreshToken:Xt.refreshToken,authToken:kt(Xt.authToken)}}throw yield ln("Create Installation",Pt)})).apply(this,arguments)}function ur(S){return new Promise(k=>{setTimeout(k,S)})}const lr=/^[cdef][\w-]{21}$/;function or(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const F=function cr(S){return function So(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return lr.test(F)?F:""}catch(S){return""}}function wi(S){return`${S.appName}!${S.appId}`}const bn=new Map;function tn(S,k){const F=wi(S);Ys(F,k),function Sn(S,k){const F=function er(){return!Oi&&"BroadcastChannel"in self&&(Oi=new BroadcastChannel("[Firebase] FID Change"),Oi.onmessage=S=>{Ys(S.data.key,S.data.fid)}),Oi}();F&&F.postMessage({key:S,fid:k}),function Ci(){0===bn.size&&Oi&&(Oi.close(),Oi=null)}()}(F,k)}function Ys(S,k){const F=bn.get(S);if(F)for(const J of F)J(k)}let Oi=null;const Mn="firebase-installations-store";let qi=null;function zr(){return qi||(qi=function W(S,k,{blocked:F,upgrade:J,blocking:xe,terminated:Ne}={}){const ot=indexedDB.open(S,k),Ft=gt(ot);return J&&ot.addEventListener("upgradeneeded",Pt=>{J(gt(ot.result),Pt.oldVersion,Pt.newVersion,gt(ot.transaction))}),F&&ot.addEventListener("blocked",()=>F()),Ft.then(Pt=>{Ne&&Pt.addEventListener("close",()=>Ne()),xe&&Pt.addEventListener("versionchange",()=>xe())}).catch(()=>{}),Ft}("firebase-installations-database",1,{upgrade:(S,k)=>{0===k&&S.createObjectStore(Mn)}})),qi}function dr(S,k){return mr.apply(this,arguments)}function mr(){return(mr=(0,j.Z)(function*(S,k){const F=wi(S),xe=(yield zr()).transaction(Mn,"readwrite"),Ne=xe.objectStore(Mn),ot=yield Ne.get(F);return yield Ne.put(k,F),yield xe.done,(!ot||ot.fid!==k.fid)&&tn(S,k.fid),k})).apply(this,arguments)}function Rs(S){return _r.apply(this,arguments)}function _r(){return(_r=(0,j.Z)(function*(S){const k=wi(S),J=(yield zr()).transaction(Mn,"readwrite");yield J.objectStore(Mn).delete(k),yield J.done})).apply(this,arguments)}function rs(S,k){return ni.apply(this,arguments)}function ni(){return(ni=(0,j.Z)(function*(S,k){const F=wi(S),xe=(yield zr()).transaction(Mn,"readwrite"),Ne=xe.objectStore(Mn),ot=yield Ne.get(F),Ft=k(ot);return void 0===Ft?yield Ne.delete(F):yield Ne.put(Ft,F),yield xe.done,Ft&&(!ot||ot.fid!==Ft.fid)&&tn(S,Ft.fid),Ft})).apply(this,arguments)}function pe(S){return le.apply(this,arguments)}function le(){return(le=(0,j.Z)(function*(S){let k;const F=yield rs(S.appConfig,J=>{const xe=ke(J),Ne=yt(S,xe);return k=Ne.registrationPromise,Ne.installationEntry});return""===F.fid?{installationEntry:yield k}:{installationEntry:F,registrationPromise:k}})).apply(this,arguments)}function ke(S){return z(S||{fid:or(),registrationStatus:0})}function yt(S,k){if(0===k.registrationStatus){if(!navigator.onLine)return{installationEntry:k,registrationPromise:Promise.reject(ut.create("app-offline"))};const F={fid:k.fid,registrationStatus:1,registrationTime:Date.now()},J=function Ke(S,k){return Ht.apply(this,arguments)}(S,F);return{installationEntry:F,registrationPromise:J}}return 1===k.registrationStatus?{installationEntry:k,registrationPromise:mn(S)}:{installationEntry:k}}function Ht(){return(Ht=(0,j.Z)(function*(S,k){try{const F=yield Co(S,k);return dr(S.appConfig,F)}catch(F){throw Ot(F)&&409===F.customData.serverCode?yield Rs(S.appConfig):yield dr(S.appConfig,{fid:k.fid,registrationStatus:0}),F}})).apply(this,arguments)}function mn(S){return _n.apply(this,arguments)}function _n(){return(_n=(0,j.Z)(function*(S){let k=yield H(S.appConfig);for(;1===k.registrationStatus;)yield ur(100),k=yield H(S.appConfig);if(0===k.registrationStatus){const{installationEntry:F,registrationPromise:J}=yield pe(S);return J||F}return k})).apply(this,arguments)}function H(S){return rs(S,k=>{if(!k)throw ut.create("installation-not-found");return z(k)})}function z(S){return function ae(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function Ue(S,k){return xt.apply(this,arguments)}function xt(){return(xt=(0,j.Z)(function*({appConfig:S,heartbeatServiceProvider:k},F){const J=en(S,F),xe=ar(S,F),Ne=k.getImmediate({optional:!0});if(Ne){const Xt=yield Ne.getHeartbeatsHeader();Xt&&xe.append("x-firebase-client",Xt)}const Ft={method:"POST",headers:xe,body:JSON.stringify({installation:{sdkVersion:rt,appId:S.appId}})},Pt=yield fn(()=>fetch(J,Ft));if(Pt.ok)return kt(yield Pt.json());throw yield ln("Generate Auth Token",Pt)})).apply(this,arguments)}function en(S,{fid:k}){return`${zt(S)}/${k}/authTokens:generate`}function Pn(S){return yr.apply(this,arguments)}function yr(){return(yr=(0,j.Z)(function*(S,k=!1){let F;const J=yield rs(S.appConfig,Ne=>{if(!$t(Ne))throw ut.create("not-registered");const ot=Ne.authToken;if(!k&&un(ot))return Ne;if(1===ot.requestStatus)return F=Ze(S,k),Ne;{if(!navigator.onLine)throw ut.create("app-offline");const Ft=An(Ne);return F=lt(S,Ft),Ft}});return F?yield F:J.authToken})).apply(this,arguments)}function Ze(S,k){return He.apply(this,arguments)}function He(){return(He=(0,j.Z)(function*(S,k){let F=yield vt(S.appConfig);for(;1===F.authToken.requestStatus;)yield ur(100),F=yield vt(S.appConfig);const J=F.authToken;return 0===J.requestStatus?Pn(S,k):J})).apply(this,arguments)}function vt(S){return rs(S,k=>{if(!$t(k))throw ut.create("not-registered");return function qn(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(k.authToken)?Object.assign(Object.assign({},k),{authToken:{requestStatus:0}}):k})}function lt(S,k){return At.apply(this,arguments)}function At(){return(At=(0,j.Z)(function*(S,k){try{const F=yield Ue(S,k),J=Object.assign(Object.assign({},k),{authToken:F});return yield dr(S.appConfig,J),F}catch(F){if(!Ot(F)||401!==F.customData.serverCode&&404!==F.customData.serverCode){const J=Object.assign(Object.assign({},k),{authToken:{requestStatus:0}});yield dr(S.appConfig,J)}else yield Rs(S.appConfig);throw F}})).apply(this,arguments)}function $t(S){return void 0!==S&&2===S.registrationStatus}function un(S){return 2===S.requestStatus&&!function Qn(S){const k=Date.now();return k<S.creationTime||S.creationTime+S.expiresIn<k+36e5}(S)}function An(S){const k={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:k})}function Gi(){return(Gi=(0,j.Z)(function*(S){const k=S,{installationEntry:F,registrationPromise:J}=yield pe(k);return J?J.catch(console.error):Pn(k).catch(console.error),F.fid})).apply(this,arguments)}function In(){return(In=(0,j.Z)(function*(S,k=!1){const F=S;return yield Nl(F),(yield Pn(F,k)).token})).apply(this,arguments)}function Nl(S){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,j.Z)(function*(S){const{registrationPromise:k}=yield pe(S);k&&(yield k)})).apply(this,arguments)}function Au(S){return ut.create("missing-app-config-values",{valueName:S})}const gs="installations",wh=S=>{const k=S.getProvider("app").getImmediate(),F=function Eh(S){if(!S||!S.options)throw Au("App Configuration");if(!S.name)throw Au("App Name");const k=["projectId","apiKey","appId"];for(const F of k)if(!S.options[F])throw Au(F);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(k);return{app:k,appConfig:F,heartbeatServiceProvider:(0,de._getProvider)(k,"heartbeat"),_delete:()=>Promise.resolve()}},ba=S=>{const k=S.getProvider("app").getImmediate(),F=(0,de._getProvider)(k,gs).getImmediate();return{getId:()=>function Yn(S){return Gi.apply(this,arguments)}(F),getToken:xe=>function Ko(S){return In.apply(this,arguments)}(F,xe)}};(function ku(){(0,de._registerComponent)(new ce.wA(gs,wh,"PUBLIC")),(0,de._registerComponent)(new ce.wA("installations-internal",ba,"PRIVATE"))})(),(0,de.registerVersion)(he,"0.6.4"),(0,de.registerVersion)(he,"0.6.4","esm2017");const zi="@firebase/remote-config",Wi=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Do{constructor(k,F,J,xe){this.client=k,this.storage=F,this.storageCache=J,this.logger=xe}isCachedDataFresh(k,F){if(!F)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const J=Date.now()-F,xe=J<=k;return this.logger.debug(`Config fetch cache check. Cache age millis: ${J}. Cache max age millis (minimumFetchIntervalMillis setting): ${k}. Is cache hit: ${xe}.`),xe}fetch(k){var F=this;return(0,j.Z)(function*(){const[J,xe]=yield Promise.all([F.storage.getLastSuccessfulFetchTimestampMillis(),F.storage.getLastSuccessfulFetchResponse()]);if(xe&&F.isCachedDataFresh(k.cacheMaxAgeMillis,J))return xe;k.eTag=xe&&xe.eTag;const Ne=yield F.client.fetch(k),ot=[F.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ne.status&&ot.push(F.storage.setLastSuccessfulFetchResponse(Ne)),yield Promise.all(ot),Ne})()}}function Fl(S=navigator){return S.languages&&S.languages[0]||S.language}class Mu{constructor(k,F,J,xe,Ne,ot){this.firebaseInstallations=k,this.sdkVersion=F,this.namespace=J,this.projectId=xe,this.apiKey=Ne,this.appId=ot}fetch(k){var F=this;return(0,j.Z)(function*(){const[J,xe]=yield Promise.all([F.firebaseInstallations.getId(),F.firebaseInstallations.getToken()]),ot=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${F.projectId}/namespaces/${F.namespace}:fetch?key=${F.apiKey}`,Ft={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":k.eTag||"*"},Pt={sdk_version:F.sdkVersion,app_instance_id:J,app_instance_id_token:xe,app_id:F.appId,language_code:Fl()},Xt={method:"POST",headers:Ft,body:JSON.stringify(Pt)},Tn=fetch(ot,Xt),xn=new Promise((co,Zi)=>{k.signal.addEventListener(()=>{const Gp=new Error("The operation was aborted.");Gp.name="AbortError",Zi(Gp)})});let Di;try{yield Promise.race([Tn,xn]),Di=yield Tn}catch(co){let Zi="fetch-client-network";throw"AbortError"===(null==co?void 0:co.name)&&(Zi="fetch-timeout"),Wi.create(Zi,{originalErrorMessage:null==co?void 0:co.message})}let $r=Di.status;const uu=Di.headers.get("ETag")||void 0;let fc,Fi;if(200===Di.status){let co;try{co=yield Di.json()}catch(Zi){throw Wi.create("fetch-client-parse",{originalErrorMessage:null==Zi?void 0:Zi.message})}fc=co.entries,Fi=co.state}if("INSTANCE_STATE_UNSPECIFIED"===Fi?$r=500:"NO_CHANGE"===Fi?$r=304:("NO_TEMPLATE"===Fi||"EMPTY_CONFIG"===Fi)&&(fc={}),304!==$r&&200!==$r)throw Wi.create("fetch-status",{httpStatus:$r});return{status:$r,eTag:uu,config:fc}})()}}class Ul{constructor(k,F){this.client=k,this.storage=F}fetch(k){var F=this;return(0,j.Z)(function*(){const J=(yield F.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return F.attemptFetch(k,J)})()}attemptFetch(k,{throttleEndTimeMillis:F,backoffCount:J}){var xe=this;return(0,j.Z)(function*(){yield function km(S,k){return new Promise((F,J)=>{const xe=Math.max(k-Date.now(),0),Ne=setTimeout(F,xe);S.addEventListener(()=>{clearTimeout(Ne),J(Wi.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}(k.signal,F);try{const Ne=yield xe.client.fetch(k);return yield xe.storage.deleteThrottleMetadata(),Ne}catch(Ne){if(!function Cp(S){if(!(S instanceof re.ZR&&S.customData))return!1;const k=Number(S.customData.httpStatus);return 429===k||500===k||503===k||504===k}(Ne))throw Ne;const ot={throttleEndTimeMillis:Date.now()+(0,re.$s)(J),backoffCount:J+1};return yield xe.storage.setThrottleMetadata(ot),xe.attemptFetch(k,ot)}})()}}class Ih{constructor(k,F,J,xe,Ne){this.app=k,this._client=F,this._storageCache=J,this._storage=xe,this._logger=Ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Pu(S,k){const F=S.target.error||void 0;return Wi.create(k,{originalErrorMessage:F&&(null==F?void 0:F.message)})}const kr="app_namespace_store";class Fb{constructor(k,F,J,xe=function Ru(){return new Promise((S,k)=>{try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=J=>{k(Pu(J,"storage-open"))},F.onsuccess=J=>{S(J.target.result)},F.onupgradeneeded=J=>{0===J.oldVersion&&J.target.result.createObjectStore(kr,{keyPath:"compositeKey"})}}catch(F){k(Wi.create("storage-open",{originalErrorMessage:null==F?void 0:F.message}))}})}()){this.appId=k,this.appName=F,this.namespace=J,this.openDbPromise=xe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(k){return this.set("last_fetch_status",k)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(k){return this.set("last_successful_fetch_timestamp_millis",k)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(k){return this.set("last_successful_fetch_response",k)}getActiveConfig(){return this.get("active_config")}setActiveConfig(k){return this.set("active_config",k)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(k){return this.set("active_config_etag",k)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(k){return this.set("throttle_metadata",k)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(k){var F=this;return(0,j.Z)(function*(){const J=yield F.openDbPromise;return new Promise((xe,Ne)=>{const Ft=J.transaction([kr],"readonly").objectStore(kr),Pt=F.createCompositeKey(k);try{const Xt=Ft.get(Pt);Xt.onerror=Tn=>{Ne(Pu(Tn,"storage-get"))},Xt.onsuccess=Tn=>{const xn=Tn.target.result;xe(xn?xn.value:void 0)}}catch(Xt){Ne(Wi.create("storage-get",{originalErrorMessage:null==Xt?void 0:Xt.message}))}})})()}set(k,F){var J=this;return(0,j.Z)(function*(){const xe=yield J.openDbPromise;return new Promise((Ne,ot)=>{const Pt=xe.transaction([kr],"readwrite").objectStore(kr),Xt=J.createCompositeKey(k);try{const Tn=Pt.put({compositeKey:Xt,value:F});Tn.onerror=xn=>{ot(Pu(xn,"storage-set"))},Tn.onsuccess=()=>{Ne()}}catch(Tn){ot(Wi.create("storage-set",{originalErrorMessage:null==Tn?void 0:Tn.message}))}})})()}delete(k){var F=this;return(0,j.Z)(function*(){const J=yield F.openDbPromise;return new Promise((xe,Ne)=>{const Ft=J.transaction([kr],"readwrite").objectStore(kr),Pt=F.createCompositeKey(k);try{const Xt=Ft.delete(Pt);Xt.onerror=Tn=>{Ne(Pu(Tn,"storage-delete"))},Xt.onsuccess=()=>{xe()}}catch(Xt){Ne(Wi.create("storage-delete",{originalErrorMessage:null==Xt?void 0:Xt.message}))}})})()}createCompositeKey(k){return[this.appId,this.appName,this.namespace,k].join()}}class Ah{constructor(k){this.storage=k}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var k=this;return(0,j.Z)(function*(){const F=k.storage.getLastFetchStatus(),J=k.storage.getLastSuccessfulFetchTimestampMillis(),xe=k.storage.getActiveConfig(),Ne=yield F;Ne&&(k.lastFetchStatus=Ne);const ot=yield J;ot&&(k.lastSuccessfulFetchTimestampMillis=ot);const Ft=yield xe;Ft&&(k.activeConfig=Ft)})()}setLastFetchStatus(k){return this.lastFetchStatus=k,this.storage.setLastFetchStatus(k)}setLastSuccessfulFetchTimestampMillis(k){return this.lastSuccessfulFetchTimestampMillis=k,this.storage.setLastSuccessfulFetchTimestampMillis(k)}setActiveConfig(k){return this.activeConfig=k,this.storage.setActiveConfig(k)}}function jy(){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,j.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(S){return!1}})).apply(this,arguments)}let zc,tr;!function Qs(){(0,de._registerComponent)(new ce.wA("remote-config",function S(k,{instanceIdentifier:F}){const J=k.getProvider("app").getImmediate(),xe=k.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Wi.create("registration-window");if(!(0,re.hl)())throw Wi.create("indexed-db-unavailable");const{projectId:Ne,apiKey:ot,appId:Ft}=J.options;if(!Ne)throw Wi.create("registration-project-id");if(!ot)throw Wi.create("registration-api-key");if(!Ft)throw Wi.create("registration-app-id");const Pt=new Fb(Ft,J.name,F=F||"firebase"),Xt=new Ah(Pt),Tn=new me.Yd(zi);Tn.logLevel=me.in.ERROR;const xn=new Mu(xe,de.SDK_VERSION,F,Ne,ot,Ft),Di=new Ul(xn,Pt),$r=new Do(Di,Pt,Xt,Tn),uu=new Ih(J,$r,Xt,Pt,Tn);return function Tp(S){const k=(0,re.m9)(S);k._initializePromise||(k._initializePromise=k._storageCache.loadFromStorage().then(()=>{k._isInitializationComplete=!0}))}(uu),uu},"PUBLIC").setMultipleInstances(!0)),(0,de.registerVersion)(zi,"0.4.4"),(0,de.registerVersion)(zi,"0.4.4","esm2017")}();const Lu=new WeakMap,ii=new WeakMap,Wc=new WeakMap,Ni=new WeakMap,Xs=new WeakMap;let Js={get(S,k,F){if(S instanceof IDBTransaction){if("done"===k)return ii.get(S);if("objectStoreNames"===k)return S.objectStoreNames||Wc.get(S);if("store"===k)return F.objectStoreNames[1]?void 0:F.objectStore(F.objectStoreNames[0])}return is(S[k])},set:(S,k,F)=>(S[k]=F,!0),has:(S,k)=>S instanceof IDBTransaction&&("done"===k||"store"===k)||k in S};function Fu(S){return"function"==typeof S?function Ao(S){return S!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Nu(){return tr||(tr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(S)?function(...k){return S.apply(gn(this),k),is(Lu.get(this))}:function(...k){return is(S.apply(gn(this),k))}:function(k,...F){const J=S.call(gn(this),k,...F);return Wc.set(J,k.sort?k.sort():[k]),is(J)}}(S):(S instanceof IDBTransaction&&function qa(S){if(ii.has(S))return;const k=new Promise((F,J)=>{const xe=()=>{S.removeEventListener("complete",Ne),S.removeEventListener("error",ot),S.removeEventListener("abort",ot)},Ne=()=>{F(),xe()},ot=()=>{J(S.error||new DOMException("AbortError","AbortError")),xe()};S.addEventListener("complete",Ne),S.addEventListener("error",ot),S.addEventListener("abort",ot)});ii.set(S,k)}(S),((S,k)=>k.some(F=>S instanceof F))(S,function Pm(){return zc||(zc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(S,Js):S)}function is(S){if(S instanceof IDBRequest)return function _s(S){const k=new Promise((F,J)=>{const xe=()=>{S.removeEventListener("success",Ne),S.removeEventListener("error",ot)},Ne=()=>{F(is(S.result)),xe()},ot=()=>{J(S.error),xe()};S.addEventListener("success",Ne),S.addEventListener("error",ot)});return k.then(F=>{F instanceof IDBCursor&&Lu.set(F,S)}).catch(()=>{}),Xs.set(k,S),k}(S);if(Ni.has(S))return Ni.get(S);const k=Fu(S);return k!==S&&(Ni.set(S,k),Xs.set(k,S)),k}const gn=S=>Xs.get(S);function Ga(S,k,{blocked:F,upgrade:J,blocking:xe,terminated:Ne}={}){const ot=indexedDB.open(S,k),Ft=is(ot);return J&&ot.addEventListener("upgradeneeded",Pt=>{J(is(ot.result),Pt.oldVersion,Pt.newVersion,is(ot.transaction))}),F&&ot.addEventListener("blocked",()=>F()),Ft.then(Pt=>{Ne&&Pt.addEventListener("close",()=>Ne()),xe&&Pt.addEventListener("versionchange",()=>xe())}).catch(()=>{}),Ft}function Uu(S,{blocked:k}={}){const F=indexedDB.deleteDatabase(S);return k&&F.addEventListener("blocked",()=>k()),is(F).then(()=>{})}const Kc=["get","getKey","getAll","getAllKeys","count"],Sp=["put","add","delete","clear"],Vl=new Map;function Zc(S,k){if(!(S instanceof IDBDatabase)||k in S||"string"!=typeof k)return;if(Vl.get(k))return Vl.get(k);const F=k.replace(/FromIndex$/,""),J=k!==F,xe=Sp.includes(F);if(!(F in(J?IDBIndex:IDBObjectStore).prototype)||!xe&&!Kc.includes(F))return;const Ne=function(){var ot=(0,j.Z)(function*(Ft,...Pt){const Xt=this.transaction(Ft,xe?"readwrite":"readonly");let Tn=Xt.store;return J&&(Tn=Tn.index(Pt.shift())),(yield Promise.all([Tn[F](...Pt),xe&&Xt.done]))[0]});return function(Pt){return ot.apply(this,arguments)}}();return Vl.set(k,Ne),Ne}!function Mh(S){Js=S(Js)}(S=>nA(By({},S),{get:(k,F,J)=>Zc(k,F)||S.get(k,F,J),has:(k,F)=>!!Zc(k,F)||S.has(k,F)}));const Ph="/firebase-messaging-sw.js",za="/firebase-cloud-messaging-push-scope",Et="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Wa="google.c.a.c_id",Or="google.c.a.c_l",Yc="google.c.a.ts",Bu="google.c.a.e";var Ea=(()=>{return(S=Ea||(Ea={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",Ea;var S})();function ys(S){const k=new Uint8Array(S);return btoa(String.fromCharCode(...k)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jl(S){const F=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),J=atob(F),xe=new Uint8Array(J.length);for(let Ne=0;Ne<J.length;++Ne)xe[Ne]=J.charCodeAt(Ne);return xe}const $l="fcm_token_details_db",to="fcm_token_object_Store";function Ki(S){return vs.apply(this,arguments)}function vs(){return vs=(0,j.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ne=>Ne.name).includes($l))return null;let k=null;return(yield Ga($l,5,{upgrade:(J=(0,j.Z)(function*(xe,Ne,ot,Ft){var Pt;if(Ne<2||!xe.objectStoreNames.contains(to))return;const Xt=Ft.objectStore(to),Tn=yield Xt.index("fcmSenderId").get(S);if(yield Xt.clear(),Tn)if(2===Ne){const xn=Tn;if(!xn.auth||!xn.p256dh||!xn.endpoint)return;k={token:xn.fcmToken,createTime:null!==(Pt=xn.createTime)&&void 0!==Pt?Pt:Date.now(),subscriptionOptions:{auth:xn.auth,p256dh:xn.p256dh,endpoint:xn.endpoint,swScope:xn.swScope,vapidKey:"string"==typeof xn.vapidKey?xn.vapidKey:ys(xn.vapidKey)}}}else if(3===Ne){const xn=Tn;k={token:xn.fcmToken,createTime:xn.createTime,subscriptionOptions:{auth:ys(xn.auth),p256dh:ys(xn.p256dh),endpoint:xn.endpoint,swScope:xn.swScope,vapidKey:ys(xn.vapidKey)}}}else if(4===Ne){const xn=Tn;k={token:xn.fcmToken,createTime:xn.createTime,subscriptionOptions:{auth:ys(xn.auth),p256dh:ys(xn.p256dh),endpoint:xn.endpoint,swScope:xn.swScope,vapidKey:ys(xn.vapidKey)}}}}),function(Ne,ot,Ft,Pt){return J.apply(this,arguments)})})).close(),yield Uu($l),yield Uu("fcm_vapid_details_db"),yield Uu("undefined"),Dp(k)?k:null;var J}),vs.apply(this,arguments)}function Dp(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:k}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof k.auth&&k.auth.length>0&&"string"==typeof k.p256dh&&k.p256dh.length>0&&"string"==typeof k.endpoint&&k.endpoint.length>0&&"string"==typeof k.swScope&&k.swScope.length>0&&"string"==typeof k.vapidKey&&k.vapidKey.length>0}const Yo="firebase-messaging-store";let Hl=null;function ql(){return Hl||(Hl=Ga("firebase-messaging-database",1,{upgrade:(S,k)=>{0===k&&S.createObjectStore(Yo)}})),Hl}function Ip(S){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,j.Z)(function*(S){const k=ju(S),J=yield(yield ql()).transaction(Yo).objectStore(Yo).get(k);if(J)return J;{const xe=yield Ki(S.appConfig.senderId);if(xe)return yield Qc(S,xe),xe}})).apply(this,arguments)}function Qc(S,k){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,j.Z)(function*(S,k){const F=ju(S),xe=(yield ql()).transaction(Yo,"readwrite");return yield xe.objectStore(Yo).put(k,F),yield xe.done,k})).apply(this,arguments)}function Ap(S){return kp.apply(this,arguments)}function kp(){return(kp=(0,j.Z)(function*(S){const k=ju(S),J=(yield ql()).transaction(Yo,"readwrite");yield J.objectStore(Yo).delete(k),yield J.done})).apply(this,arguments)}function ju({appConfig:S}){return S.appId}const gi=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Rh(S,k){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,j.Z)(function*(S,k){const F=yield no(S),J=Mp(k),xe={method:"POST",headers:F,body:JSON.stringify(J)};let Ne;try{Ne=yield(yield fetch(Vr(S.appConfig),xe)).json()}catch(ot){throw gi.create("token-subscribe-failed",{errorInfo:null==ot?void 0:ot.toString()})}if(Ne.error)throw gi.create("token-subscribe-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw gi.create("token-subscribe-no-token");return Ne.token})).apply(this,arguments)}function Gl(S,k){return bs.apply(this,arguments)}function bs(){return(bs=(0,j.Z)(function*(S,k){const F=yield no(S),J=Mp(k.subscriptionOptions),xe={method:"PATCH",headers:F,body:JSON.stringify(J)};let Ne;try{Ne=yield(yield fetch(`${Vr(S.appConfig)}/${k.token}`,xe)).json()}catch(ot){throw gi.create("token-update-failed",{errorInfo:null==ot?void 0:ot.toString()})}if(Ne.error)throw gi.create("token-update-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw gi.create("token-update-no-token");return Ne.token})).apply(this,arguments)}function Jc(S,k){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,j.Z)(function*(S,k){const J={method:"DELETE",headers:yield no(S)};try{const Ne=yield(yield fetch(`${Vr(S.appConfig)}/${k}`,J)).json();if(Ne.error)throw gi.create("token-unsubscribe-failed",{errorInfo:Ne.error.message})}catch(xe){throw gi.create("token-unsubscribe-failed",{errorInfo:null==xe?void 0:xe.toString()})}})).apply(this,arguments)}function Vr({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function no(S){return br.apply(this,arguments)}function br(){return(br=(0,j.Z)(function*({appConfig:S,installations:k}){const F=yield k.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${F}`})})).apply(this,arguments)}function Mp({p256dh:S,auth:k,endpoint:F,vapidKey:J}){const xe={web:{endpoint:F,auth:k,p256dh:S}};return J!==Et&&(xe.web.applicationPubKey=J),xe}const Pp=6048e5;function Rp(S){return ed.apply(this,arguments)}function ed(){return(ed=(0,j.Z)(function*(S){const k=yield Lp(S.swRegistration,S.vapidKey),F={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:k.endpoint,auth:ys(k.getKey("auth")),p256dh:ys(k.getKey("p256dh"))},J=yield Ip(S.firebaseDependencies);if(J){if(Ya(J.subscriptionOptions,F))return Date.now()>=J.createTime+Pp?td(S,{token:J.token,createTime:Date.now(),subscriptionOptions:F}):J.token;try{yield Jc(S.firebaseDependencies,J.token)}catch(xe){console.warn(xe)}return zl(S.firebaseDependencies,F)}return zl(S.firebaseDependencies,F)})).apply(this,arguments)}function Op(S){return Np.apply(this,arguments)}function Np(){return(Np=(0,j.Z)(function*(S){const k=yield Ip(S.firebaseDependencies);k&&(yield Jc(S.firebaseDependencies,k.token),yield Ap(S.firebaseDependencies));const F=yield S.swRegistration.pushManager.getSubscription();return!F||F.unsubscribe()})).apply(this,arguments)}function td(S,k){return Za.apply(this,arguments)}function Za(){return(Za=(0,j.Z)(function*(S,k){try{const F=yield Gl(S.firebaseDependencies,k),J=Object.assign(Object.assign({},k),{token:F,createTime:Date.now()});return yield Qc(S.firebaseDependencies,J),F}catch(F){throw yield Op(S),F}})).apply(this,arguments)}function zl(S,k){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,j.Z)(function*(S,k){const J={token:yield Rh(S,k),createTime:Date.now(),subscriptionOptions:k};return yield Qc(S,J),J.token})).apply(this,arguments)}function Lp(S,k){return Fp.apply(this,arguments)}function Fp(){return(Fp=(0,j.Z)(function*(S,k){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:jl(k)})})).apply(this,arguments)}function Ya(S,k){return k.vapidKey===S.vapidKey&&k.endpoint===S.endpoint&&k.auth===S.auth&&k.p256dh===S.p256dh}function Wl(S){const k={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function $y(S,k){if(!k.notification)return;S.notification={};const F=k.notification.title;F&&(S.notification.title=F);const J=k.notification.body;J&&(S.notification.body=J);const xe=k.notification.image;xe&&(S.notification.image=xe);const Ne=k.notification.icon;Ne&&(S.notification.icon=Ne)}(k,S),function Up(S,k){!k.data||(S.data=k.data)}(k,S),function nd(S,k){var F,J,xe,Ne,ot;if(!k.fcmOptions&&!(null===(F=k.notification)||void 0===F?void 0:F.click_action))return;S.fcmOptions={};const Ft=null!==(xe=null===(J=k.fcmOptions)||void 0===J?void 0:J.link)&&void 0!==xe?xe:null===(Ne=k.notification)||void 0===Ne?void 0:Ne.click_action;Ft&&(S.fcmOptions.link=Ft);const Pt=null===(ot=k.fcmOptions)||void 0===ot?void 0:ot.analytics_label;Pt&&(S.fcmOptions.analyticsLabel=Pt)}(k,S),k}function Lh(S){return"object"==typeof S&&!!S&&Wa in S}function Rm(S,k){const F=[];for(let J=0;J<S.length;J++)F.push(S.charAt(J)),J<k.length&&F.push(k.charAt(J));return F.join("")}function $u(S){return gi.create("missing-app-config-values",{valueName:S})}Rm("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Rm("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class yn{constructor(k,F,J){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const xe=function Tr(S){if(!S||!S.options)throw $u("App Configuration Object");if(!S.name)throw $u("App Name");const k=["projectId","apiKey","appId","messagingSenderId"],{options:F}=S;for(const J of k)if(!F[J])throw $u(J);return{appName:S.name,projectId:F.projectId,apiKey:F.apiKey,appId:F.appId,senderId:F.messagingSenderId}}(k);this.firebaseDependencies={app:k,appConfig:xe,installations:F,analyticsProvider:J}}_delete(){return Promise.resolve()}}function ro(S){return ss.apply(this,arguments)}function ss(){return(ss=(0,j.Z)(function*(S){try{S.swRegistration=yield navigator.serviceWorker.register(Ph,{scope:za}),S.swRegistration.update().catch(()=>{})}catch(k){throw gi.create("failed-service-worker-registration",{browserErrorMessage:null==k?void 0:k.message})}})).apply(this,arguments)}function Ls(S,k){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,j.Z)(function*(S,k){if(!k&&!S.swRegistration&&(yield ro(S)),k||!S.swRegistration){if(!(k instanceof ServiceWorkerRegistration))throw gi.create("invalid-sw-registration");S.swRegistration=k}})).apply(this,arguments)}function Sa(S,k){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,j.Z)(function*(S,k){k?S.vapidKey=k:S.vapidKey||(S.vapidKey=Et)})).apply(this,arguments)}function rd(){return(rd=(0,j.Z)(function*(S,k){if(!navigator)throw gi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw gi.create("permission-blocked");return yield Sa(S,null==k?void 0:k.vapidKey),yield Ls(S,null==k?void 0:k.serviceWorkerRegistration),Rp(S)})).apply(this,arguments)}function qu(S,k,F){return xa.apply(this,arguments)}function xa(){return(xa=(0,j.Z)(function*(S,k,F){const J=vn(k);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(J,{message_id:F[Wa],message_name:F[Or],message_time:F[Yc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function vn(S){switch(S){case Ea.NOTIFICATION_CLICKED:return"notification_open";case Ea.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Gu(){return(Gu=(0,j.Z)(function*(S,k){const F=k.data;if(!F.isFirebaseMessaging)return;S.onMessageHandler&&F.messageType===Ea.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(Wl(F)):S.onMessageHandler.next(Wl(F)));const J=F.data;Lh(J)&&"1"===J[Bu]&&(yield qu(S,F.messageType,J))})).apply(this,arguments)}const zu="@firebase/messaging",Kr=S=>{const k=new yn(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",F=>function Hy(S,k){return Gu.apply(this,arguments)}(k,F)),k},Wu=S=>{const k=S.getProvider("messaging").getImmediate();return{getToken:J=>function Qa(S,k){return rd.apply(this,arguments)}(k,J)}};function id(){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,j.Z)(function*(){try{yield(0,re.eu)()}catch(S){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Kl(){(0,de._registerComponent)(new ce.wA("messaging",Kr,"PUBLIC")),(0,de._registerComponent)(new ce.wA("messaging-internal",Wu,"PRIVATE")),(0,de.registerVersion)(zu,"0.12.4"),(0,de.registerVersion)(zu,"0.12.4","esm2017")}();const fr="analytics",so="firebase_id",Yl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Da="https://www.googletagmanager.com/gtag/js",Ln=new me.Yd("@firebase/analytics"),Zr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function ea(S){if(!S.startsWith(Da)){const k=Zr.create("invalid-gtag-resource",{gtagURL:S});return Ln.warn(k.message),""}return S}function Fs(S){return Promise.all(S.map(k=>k.catch(F=>F)))}function Us(S,k){const F=function si(S,k){let F;return window.trustedTypes&&(F=window.trustedTypes.createPolicy(S,k)),F}("firebase-js-sdk-policy",{createScriptURL:ea}),J=document.createElement("script"),xe=`${Da}?l=${S}&id=${k}`;J.src=F?null==F?void 0:F.createScriptURL(xe):xe,J.async=!0,document.head.appendChild(J)}function Bs(S,k,F,J,xe,Ne){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,j.Z)(function*(S,k,F,J,xe,Ne){const ot=J[xe];try{if(ot)yield k[ot];else{const Pt=(yield Fs(F)).find(Xt=>Xt.measurementId===xe);Pt&&(yield k[Pt.appId])}}catch(Ft){Ln.error(Ft)}S("config",xe,Ne)})).apply(this,arguments)}function ud(S,k,F,J,xe){return xr.apply(this,arguments)}function xr(){return(xr=(0,j.Z)(function*(S,k,F,J,xe){try{let Ne=[];if(xe&&xe.send_to){let ot=xe.send_to;Array.isArray(ot)||(ot=[ot]);const Ft=yield Fs(F);for(const Pt of ot){const Xt=Ft.find(xn=>xn.measurementId===Pt),Tn=Xt&&k[Xt.appId];if(!Tn){Ne=[];break}Ne.push(Tn)}}0===Ne.length&&(Ne=Object.values(k)),yield Promise.all(Ne),S("event",J,xe||{})}catch(Ne){Ln.error(Ne)}})).apply(this,arguments)}function Ku(S){const k=window.document.getElementsByTagName("script");for(const F of Object.values(k))if(F.src&&F.src.includes(Da)&&F.src.includes(S))return F;return null}const Bh=new class Ts{constructor(k={},F=1e3){this.throttleMetadata=k,this.intervalMillis=F}getThrottleMetadata(k){return this.throttleMetadata[k]}setThrottleMetadata(k,F){this.throttleMetadata[k]=F}deleteThrottleMetadata(k){delete this.throttleMetadata[k]}};function ko(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function Lm(S){return jr.apply(this,arguments)}function jr(){return(jr=(0,j.Z)(function*(S){var k;const{appId:F,apiKey:J}=S,xe={method:"GET",headers:ko(J)},Ne=Yl.replace("{app-id}",F),ot=yield fetch(Ne,xe);if(200!==ot.status&&304!==ot.status){let Ft="";try{const Pt=yield ot.json();(null===(k=Pt.error)||void 0===k?void 0:k.message)&&(Ft=Pt.error.message)}catch(Pt){}throw Zr.create("config-fetch-failed",{httpStatus:ot.status,responseMessage:Ft})}return ot.json()})).apply(this,arguments)}function Vh(S){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,j.Z)(function*(S,k=Bh,F){const{appId:J,apiKey:xe,measurementId:Ne}=S.options;if(!J)throw Zr.create("no-app-id");if(!xe){if(Ne)return{measurementId:Ne,appId:J};throw Zr.create("no-api-key")}const ot=k.getThrottleMetadata(J)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ft=new $h;return setTimeout((0,j.Z)(function*(){Ft.abort()}),void 0!==F?F:6e4),Fm({appId:J,apiKey:xe,measurementId:Ne},ot,Ft,k)})).apply(this,arguments)}function Fm(S,k,F){return jh.apply(this,arguments)}function jh(){return(jh=(0,j.Z)(function*(S,{throttleEndTimeMillis:k,backoffCount:F},J,xe=Bh){var Ne;const{appId:ot,measurementId:Ft}=S;try{yield js(J,k)}catch(Pt){if(Ft)return Ln.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ft} provided in the "measurementId" field in the local Firebase config. [${null==Pt?void 0:Pt.message}]`),{appId:ot,measurementId:Ft};throw Pt}try{const Pt=yield Lm(S);return xe.deleteThrottleMetadata(ot),Pt}catch(Pt){const Xt=Pt;if(!Es(Xt)){if(xe.deleteThrottleMetadata(ot),Ft)return Ln.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ft} provided in the "measurementId" field in the local Firebase config. [${null==Xt?void 0:Xt.message}]`),{appId:ot,measurementId:Ft};throw Pt}const Tn=503===Number(null===(Ne=null==Xt?void 0:Xt.customData)||void 0===Ne?void 0:Ne.httpStatus)?(0,re.$s)(F,xe.intervalMillis,30):(0,re.$s)(F,xe.intervalMillis),xn={throttleEndTimeMillis:Date.now()+Tn,backoffCount:F+1};return xe.setThrottleMetadata(ot,xn),Ln.debug(`Calling attemptFetch again in ${Tn} millis`),Fm(S,xn,J,xe)}})).apply(this,arguments)}function js(S,k){return new Promise((F,J)=>{const xe=Math.max(k-Date.now(),0),Ne=setTimeout(F,xe);S.addEventListener(()=>{clearTimeout(Ne),J(Zr.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}function Es(S){if(!(S instanceof re.ZR&&S.customData))return!1;const k=Number(S.customData.httpStatus);return 429===k||500===k||503===k||504===k}class $h{constructor(){this.listeners=[]}addEventListener(k){this.listeners.push(k)}abort(){this.listeners.forEach(k=>k())}}let Zu,$s;function cd(){return(cd=(0,j.Z)(function*(S,k,F,J,xe){if(xe&&xe.global)S("event",F,J);else{const Ne=yield k;S("event",F,Object.assign(Object.assign({},J),{send_to:Ne}))}})).apply(this,arguments)}function tc(S){$s=S}function Qu(S){Zu=S}function dd(){return Vp.apply(this,arguments)}function Vp(){return(Vp=(0,j.Z)(function*(){if(!(0,re.hl)())return Ln.warn(Zr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(S){return Ln.warn(Zr.create("indexeddb-unavailable",{errorInfo:null==S?void 0:S.toString()}).message),!1}return!0})).apply(this,arguments)}function _i(){return(_i=(0,j.Z)(function*(S,k,F,J,xe,Ne,ot){var Ft;const Pt=Vh(S);Pt.then($r=>{F[$r.measurementId]=$r.appId,S.options.measurementId&&$r.measurementId!==S.options.measurementId&&Ln.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${$r.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch($r=>Ln.error($r)),k.push(Pt);const Xt=dd().then($r=>{if($r)return J.getId()}),[Tn,xn]=yield Promise.all([Pt,Xt]);Ku(Ne)||Us(Ne,Tn.measurementId),$s&&(xe("consent","default",$s),tc(void 0)),xe("js",new Date);const Di=null!==(Ft=null==ot?void 0:ot.config)&&void 0!==Ft?Ft:{};return Di.origin="firebase",Di.update=!0,null!=xn&&(Di[so]=xn),xe("config",Tn.measurementId,Di),Zu&&(xe("set",Zu),Qu(void 0)),Tn.measurementId})).apply(this,arguments)}class Ro{constructor(k){this.app=k}_delete(){return delete oo[this.app.options.appId],Promise.resolve()}}let oo={},tu=[];const nc={};let Hh,ao,nu="dataLayer",ic=!1;function Nn(S,k,F){!function uo(){const S=[];if((0,re.ru)()&&S.push("This is a browser extension environment."),(0,re.zI)()||S.push("Cookies are not available."),S.length>0){const k=S.map((J,xe)=>`(${xe+1}) ${J}`).join(" "),F=Zr.create("invalid-analytics-context",{errorInfo:k});Ln.warn(F.message)}}();const J=S.options.appId;if(!J)throw Zr.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw Zr.create("no-api-key");Ln.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=oo[J])throw Zr.create("already-exists",{id:J});if(!ic){!function oi(S){let k=[];Array.isArray(window[S])?k=window[S]:window[S]=k}(nu);const{wrappedGtag:Ne,gtagCore:ot}=function Nm(S,k,F,J,xe){let Ne=function(...ot){window[J].push(arguments)};return window[xe]&&"function"==typeof window[xe]&&(Ne=window[xe]),window[xe]=function ld(S,k,F,J){function Ne(){return(Ne=(0,j.Z)(function*(ot,...Ft){try{if("event"===ot){const[Pt,Xt]=Ft;yield ud(S,k,F,Pt,Xt)}else if("config"===ot){const[Pt,Xt]=Ft;yield Bs(S,k,F,J,Pt,Xt)}else if("consent"===ot){const[Pt]=Ft;S("consent","update",Pt)}else if("get"===ot){const[Pt,Xt,Tn]=Ft;S("get",Pt,Xt,Tn)}else if("set"===ot){const[Pt]=Ft;S("set",Pt)}else S(ot,...Ft)}catch(Pt){Ln.error(Pt)}})).apply(this,arguments)}return function xe(ot){return Ne.apply(this,arguments)}}(Ne,S,k,F),{gtagCore:Ne,wrappedGtag:window[xe]}}(oo,tu,nc,nu,"gtag");ao=Ne,Hh=ot,ic=!0}return oo[J]=function Yr(S,k,F,J,xe,Ne,ot){return _i.apply(this,arguments)}(S,tu,nc,k,Hh,nu,F),new Ro(S)}function Oo(){return qh.apply(this,arguments)}function qh(){return(qh=(0,j.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(S){return!1}})).apply(this,arguments)}const el="@firebase/analytics";!function gd(){(0,de._registerComponent)(new ce.wA(fr,(k,{options:F})=>Nn(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),F),"PUBLIC")),(0,de._registerComponent)(new ce.wA("analytics-internal",function S(k){try{const F=k.getProvider(fr).getImmediate();return{logEvent:(J,xe,Ne)=>function fd(S,k,F,J){S=(0,re.m9)(S),function Xl(S,k,F,J,xe){return cd.apply(this,arguments)}(ao,oo[S.app.options.appId],k,F,J).catch(xe=>Ln.error(xe))}(F,J,xe,Ne)}}catch(F){throw Zr.create("interop-component-reg-failed",{reason:F})}},"PRIVATE")),(0,de.registerVersion)(el,"0.10.0"),(0,de.registerVersion)(el,"0.10.0","esm2017")}();var tl=$(4408),Bm=$(7565);const rl=new class nl extends Bm.v{}(class jp extends tl.o{constructor(k,F){super(k,F),this.scheduler=k,this.work=F}schedule(k,F=0){return F>0?super.schedule(k,F):(this.delay=F,this.state=k,this.scheduler.flush(this),this)}execute(k,F){return F>0||this.closed?super.execute(k,F):this._execute(k,F)}requestAsyncId(k,F,J=0){return null!=J&&J>0||null==J&&this.delay>0?super.requestAsyncId(k,F,J):(k.flush(this),0)}});var zh=$(4986),Gy=$(8505),uc=$(5363),lc=$(9468);const _d=new h.GfV("7.6.1"),il="__angularfire_symbol__analyticsIsSupportedValue",ws="__angularfire_symbol__analyticsIsSupported",Ia="__angularfire_symbol__remoteConfigIsSupportedValue",cc="__angularfire_symbol__remoteConfigIsSupported",yd="__angularfire_symbol__messagingIsSupportedValue",Cs="__angularfire_symbol__messagingIsSupported";function Li(S,k,F){if(k){if(1===k.length)return k[0];const Ne=k.filter(ot=>ot.app===F);if(1===Ne.length)return Ne[0]}return F.container.getProvider(S).getImmediate({optional:!0})}globalThis[ws]||(globalThis[ws]=Oo().then(S=>globalThis[il]=S).catch(()=>globalThis[il]=!1)),globalThis[Cs]||(globalThis[Cs]=id().then(S=>globalThis[yd]=S).catch(()=>globalThis[yd]=!1)),globalThis[cc]||(globalThis[cc]=jy().then(S=>globalThis[Ia]=S).catch(()=>globalThis[Ia]=!1));const dc=(S,k)=>{const F=k?[k]:(0,oe.C6)(),J=[];return F.forEach(xe=>{xe.container.getProvider(S).instances.forEach(ot=>{J.includes(ot)||J.push(ot)})}),J};function No(){}class hc{constructor(k,F=rl){this.zone=k,this.delegate=F}now(){return this.delegate.now()}schedule(k,F,J){const xe=this.zone;return this.delegate.schedule(function(ot){xe.runGuarded(()=>{k.apply(this,[ot])})},F,J)}}class yi{constructor(k){this.zone=k,this.task=null}call(k,F){const J=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",No,{},No,No)),F.pipe((0,Gy.b)({next:J,complete:J,error:J})).subscribe(k).add(J)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let sl=(()=>{class S{constructor(F){this.ngZone=F,this.outsideAngular=F.runOutsideAngular(()=>new hc(Zone.current)),this.insideAngular=F.run(()=>new hc(Zone.current,zh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(F){return new(F||S)(h.LFG(h.R0b))},S.\u0275prov=h.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function Ss(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function qp(S){return S.pipe((0,uc.Q)(Ss().outsideAngular))}function au(S){return Ss(),function Kh(S){return function(F){return(F=F.lift(new yi(S.ngZone))).pipe((0,lc.R)(S.outsideAngular),(0,uc.Q)(S.insideAngular))}}(Ss())(S)}},3327:(it,Se,$)=>{"use strict";$.r(Se),$.d(Se,{defaultOptions:()=>j,fetchFile:()=>Y,getCreateFFmpegCore:()=>ye});const j={corePath:`https://unpkg.com/@ffmpeg/core@${$(3681).devDependencies["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`};var de=$(5861),re=$(6945),ce=$(3630);const me=function(){var se=(0,de.Z)(function*(Q,Xe){(0,re.log)("info",`fetch ${Q}`);const Re=yield(yield fetch(Q)).arrayBuffer();(0,re.log)("info",`${Q} file size = ${Re.byteLength} bytes`);const Je=new Blob([Re],{type:Xe}),Dt=URL.createObjectURL(Je);return(0,re.log)("info",`${Q} blob URL = ${Dt}`),Dt});return function(Xe,Re){return se.apply(this,arguments)}}(),ye=function(){var se=(0,de.Z)(function*({corePath:Q,workerPath:Xe,wasmPath:Re}){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){if("string"!=typeof Q)throw Error("corePath should be a string!");const tt=new URL(Q,"file:///C:/Users/admin/MyProj/clips/node_modules/@ffmpeg/ffmpeg/src/browser/getCreateFFmpegCore.js").href,ft=yield me(tt,"application/javascript"),Ye=yield me(void 0!==Re?Re:tt.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),Ce=yield me(void 0!==Xe?Xe:tt.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return"undefined"==typeof createFFmpegCore?new Promise(je=>{if(globalThis.importScripts(ft),"undefined"==typeof createFFmpegCore)throw Error((0,ce.CREATE_FFMPEG_CORE_IS_NOT_DEFINED)(tt));(0,re.log)("info","ffmpeg-core.js script loaded"),je({createFFmpegCore,corePath:ft,wasmPath:Ye,workerPath:Ce})}):((0,re.log)("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:ft,wasmPath:Ye,workerPath:Ce}))}if("string"!=typeof Q)throw Error("corePath should be a string!");const Je=new URL(Q,"file:///C:/Users/admin/MyProj/clips/node_modules/@ffmpeg/ffmpeg/src/browser/getCreateFFmpegCore.js").href,Dt=yield me(Je,"application/javascript"),ze=yield me(void 0!==Re?Re:Je.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),we=yield me(void 0!==Xe?Xe:Je.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return"undefined"==typeof createFFmpegCore?new Promise(tt=>{const ft=document.createElement("script"),Ye=()=>{if(ft.removeEventListener("load",Ye),"undefined"==typeof createFFmpegCore)throw Error((0,ce.CREATE_FFMPEG_CORE_IS_NOT_DEFINED)(Je));(0,re.log)("info","ffmpeg-core.js script loaded"),tt({createFFmpegCore,corePath:Dt,wasmPath:ze,workerPath:we})};ft.src=Dt,ft.type="text/javascript",ft.addEventListener("load",Ye),document.getElementsByTagName("head")[0].appendChild(ft)}):((0,re.log)("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:Dt,wasmPath:ze,workerPath:we}))});return function(Xe){return se.apply(this,arguments)}}(),Y=function(){var se=(0,de.Z)(function*(Q){let Xe=Q;return void 0===Q?new Uint8Array:("string"==typeof Q?Xe=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(Q)?atob(Q.split(",")[1]).split("").map(Re=>Re.charCodeAt(0)):yield(yield fetch(new URL(Q,"file:///C:/Users/admin/MyProj/clips/node_modules/@ffmpeg/ffmpeg/src/browser/fetchFile.js").href)).arrayBuffer():(Q instanceof File||Q instanceof Blob)&&(Xe=yield(se=>new Promise((Q,Xe)=>{const Re=new FileReader;Re.onload=()=>{Q(Re.result)},Re.onerror=({target:{error:{code:Je}}})=>{Xe(Error(`File could not be read! Code=${Je}`))},Re.readAsArrayBuffer(se)}))(Q)),new Uint8Array(Xe))});return function(Xe){return se.apply(this,arguments)}}()},6151:it=>{it.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}},9639:(it,Se,$)=>{var h=$(8926).default;const{defaultArgs:oe,baseOptions:j}=$(6151),de=$(8333),{defaultOptions:re,getCreateFFmpegCore:ce}=$(3327),{version:me}=$(3681),ye=Error("ffmpeg.wasm is not ready, make sure you have completed load().");it.exports=(De={})=>{const Ve=By(By(By({},j),re),De),{log:Y,progress:Q}=Ve,Xe=b6(Ve,["log","logger","progress"]);let Re=null,Je=null,Dt=null,ze=null,we=!1,tt=()=>{},ft=Y,Ye=Q,Ce=0,je=0,gt=!1,st=0;const V=(Oe,ve)=>{tt({type:Oe,message:ve}),ft&&console.log(`[${Oe}] ${ve}`)},Ie=Oe=>{const[ve,ut,Ot]=Oe.split(":");return 60*parseFloat(ve)*60+60*parseFloat(ut)+parseFloat(Ot)},We=({type:Oe,message:ve})=>{V(Oe,ve),((Oe,ve)=>{if("string"==typeof Oe)if(Oe.startsWith("  Duration")){const ut=Oe.split(", ")[0].split(": ")[1],Ot=Ie(ut);ve({duration:Ot,ratio:st}),(0===Ce||Ce>Ot)&&(Ce=Ot,gt=!0)}else if(gt&&Oe.startsWith("    Stream")){const ut=Oe.match(/([\d.]+) fps/);if(ut){const Ot=parseFloat(ut[1]);je=Ce*Ot}else je=0;gt=!1}else if(Oe.startsWith("frame")||Oe.startsWith("size")){const ut=Oe.split("time=")[1].split(" ")[0],Ot=Ie(ut),zt=Oe.match(/frame=\s*(\d+)/);if(je&&zt){const kt=parseFloat(zt[1]);st=Math.min(kt/je,1)}else st=Ot/Ce;ve({ratio:st,time:Ot})}else Oe.startsWith("video:")&&(ve({ratio:1}),Ce=0)})(ve,Ye),(Oe=>{"FFMPEG_END"===Oe&&null!==Dt&&(Dt(),Dt=null,ze=null,we=!1)})(ve)},mt=function(){var Oe=h(function*(){if(V("info","load ffmpeg-core"),null!==Re)throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");{V("info","loading ffmpeg-core");const{createFFmpegCore:ve,corePath:ut,workerPath:Ot,wasmPath:zt}=yield ce(Xe);Re=yield ve({mainScriptUrlOrBlob:ut,printErr:kt=>We({type:"fferr",message:kt}),print:kt=>We({type:"ffout",message:kt}),locateFile:(kt,ln)=>{if("undefined"!=typeof window||"undefined"!=typeof WorkerGlobalScope){if(void 0!==zt&&kt.endsWith("ffmpeg-core.wasm"))return zt;if(void 0!==Ot&&kt.endsWith("ffmpeg-core.worker.js"))return Ot}return ln+kt}}),Je=Re.cwrap(Xe.mainName||"proxy_main","number",["number","number"]),V("info","ffmpeg-core loaded")}});return function(){return Oe.apply(this,arguments)}}();return V("info",`use ffmpeg.wasm v${me}`),{setProgress:Oe=>{Ye=Oe},setLogger:Oe=>{tt=Oe},setLogging:Oe=>{ft=Oe},load:mt,isLoaded:()=>null!==Re,run:(...Oe)=>{if(V("info",`run ffmpeg command: ${Oe.join(" ")}`),null===Re)throw ye;if(we)throw Error("ffmpeg.wasm can only run one command at a time");return we=!0,new Promise((ve,ut)=>{const Ot=[...oe,...Oe].filter(zt=>0!==zt.length);Dt=ve,ze=ut,Je(...de(Re,Ot))})},exit:()=>{if(null===Re)throw ye;ze&&ze("ffmpeg has exited"),we=!1;try{Re.exit(1)}catch(Oe){V(Oe.message),ze&&ze(Oe)}finally{Re=null,Je=null,Dt=null,ze=null}},FS:(Oe,...ve)=>{if(V("info",`run FS.${Oe} ${ve.map(ut=>"string"==typeof ut?ut:`<${ut.length} bytes binary file>`).join(" ")}`),null===Re)throw ye;{let ut=null;try{ut=Re.FS[Oe](...ve)}catch(Ot){throw Error("readdir"===Oe?`ffmpeg.FS('readdir', '${ve[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`:"readFile"===Oe?`ffmpeg.FS('readFile', '${ve[0]}') error. Check if the path exists`:"Oops, something went wrong in FS operation.")}return ut}}}}},260:(it,Se,$)=>{$(7854);const h=$(9639),{fetchFile:oe}=$(3327);it.exports={createFFmpeg:h,fetchFile:oe}},3630:it=>{it.exports={CREATE_FFMPEG_CORE_IS_NOT_DEFINED:$=>`\ncreateFFmpegCore is not defined. ffmpeg.wasm is unable to find createFFmpegCore after loading ffmpeg-core.js from ${$}. Use another URL when calling createFFmpeg():\n\nconst ffmpeg = createFFmpeg({\n  corePath: 'http://localhost:3000/ffmpeg-core.js',\n});\n`}},6945:it=>{let Se=!1,$=()=>{};it.exports={logging:Se,setLogging:de=>{Se=de},setCustomLogger:de=>{$=de},log:(de,re)=>{$({type:de,message:re}),Se&&console.log(`[${de}] ${re}`)}}},8333:it=>{it.exports=(Se,$)=>{const h=Se._malloc($.length*Uint32Array.BYTES_PER_ELEMENT);return $.forEach((oe,j)=>{const de=Se.lengthBytesUTF8(oe)+1,re=Se._malloc(de);Se.stringToUTF8(oe,re,de),Se.setValue(h+Uint32Array.BYTES_PER_ELEMENT*j,re,"i32")}),[$.length,h]}},2090:(it,Se,$)=>{"use strict";$.d(Se,{$s:()=>Rs,BH:()=>je,G6:()=>rt,L:()=>De,LL:()=>ve,Pz:()=>Ce,Sg:()=>gt,UG:()=>V,US:()=>ce,ZB:()=>Q,ZR:()=>Oe,aH:()=>Ye,b$:()=>We,eu:()=>ne,hl:()=>Z,jU:()=>Ie,m9:()=>ni,ne:()=>wi,pd:()=>or,r3:()=>Bn,ru:()=>nt,tV:()=>Y,uI:()=>W,vZ:()=>gr,w1:()=>he,xO:()=>lr,xb:()=>Ut,z$:()=>st,zI:()=>Pe,zd:()=>Hn});const de=function(pe){const le=[];let ke=0;for(let yt=0;yt<pe.length;yt++){let Ke=pe.charCodeAt(yt);Ke<128?le[ke++]=Ke:Ke<2048?(le[ke++]=Ke>>6|192,le[ke++]=63&Ke|128):55296==(64512&Ke)&&yt+1<pe.length&&56320==(64512&pe.charCodeAt(yt+1))?(Ke=65536+((1023&Ke)<<10)+(1023&pe.charCodeAt(++yt)),le[ke++]=Ke>>18|240,le[ke++]=Ke>>12&63|128,le[ke++]=Ke>>6&63|128,le[ke++]=63&Ke|128):(le[ke++]=Ke>>12|224,le[ke++]=Ke>>6&63|128,le[ke++]=63&Ke|128)}return le},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(pe,le){if(!Array.isArray(pe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ke=le?this.byteToCharMapWebSafe_:this.byteToCharMap_,yt=[];for(let Ke=0;Ke<pe.length;Ke+=3){const Ht=pe[Ke],mn=Ke+1<pe.length,_n=mn?pe[Ke+1]:0,H=Ke+2<pe.length,z=H?pe[Ke+2]:0;let xt=(15&_n)<<2|z>>6,en=63&z;H||(en=64,mn||(xt=64)),yt.push(ke[Ht>>2],ke[(3&Ht)<<4|_n>>4],ke[xt],ke[en])}return yt.join("")},encodeString(pe,le){return this.HAS_NATIVE_SUPPORT&&!le?btoa(pe):this.encodeByteArray(de(pe),le)},decodeString(pe,le){return this.HAS_NATIVE_SUPPORT&&!le?atob(pe):function(pe){const le=[];let ke=0,yt=0;for(;ke<pe.length;){const Ke=pe[ke++];if(Ke<128)le[yt++]=String.fromCharCode(Ke);else if(Ke>191&&Ke<224){const Ht=pe[ke++];le[yt++]=String.fromCharCode((31&Ke)<<6|63&Ht)}else if(Ke>239&&Ke<365){const H=((7&Ke)<<18|(63&pe[ke++])<<12|(63&pe[ke++])<<6|63&pe[ke++])-65536;le[yt++]=String.fromCharCode(55296+(H>>10)),le[yt++]=String.fromCharCode(56320+(1023&H))}else{const Ht=pe[ke++],mn=pe[ke++];le[yt++]=String.fromCharCode((15&Ke)<<12|(63&Ht)<<6|63&mn)}}return le.join("")}(this.decodeStringToByteArray(pe,le))},decodeStringToByteArray(pe,le){this.init_();const ke=le?this.charToByteMapWebSafe_:this.charToByteMap_,yt=[];for(let Ke=0;Ke<pe.length;){const Ht=ke[pe.charAt(Ke++)],_n=Ke<pe.length?ke[pe.charAt(Ke)]:0;++Ke;const z=Ke<pe.length?ke[pe.charAt(Ke)]:64;++Ke;const Ue=Ke<pe.length?ke[pe.charAt(Ke)]:64;if(++Ke,null==Ht||null==_n||null==z||null==Ue)throw new me;yt.push(Ht<<2|_n>>4),64!==z&&(yt.push(_n<<4&240|z>>2),64!==Ue&&yt.push(z<<6&192|Ue))}return yt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let pe=0;pe<this.ENCODED_VALS.length;pe++)this.byteToCharMap_[pe]=this.ENCODED_VALS.charAt(pe),this.charToByteMap_[this.byteToCharMap_[pe]]=pe,this.byteToCharMapWebSafe_[pe]=this.ENCODED_VALS_WEBSAFE.charAt(pe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[pe]]=pe,pe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(pe)]=pe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(pe)]=pe)}}};class me extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const De=function(pe){return function(pe){const le=de(pe);return ce.encodeByteArray(le,!0)}(pe).replace(/\./g,"")},Y=function(pe){try{return ce.decodeString(pe,!0)}catch(le){console.error("base64Decode failed: ",le)}return null};function Q(pe,le){if(!(le instanceof Object))return le;switch(le.constructor){case Date:return new Date(le.getTime());case Object:void 0===pe&&(pe={});break;case Array:pe=[];break;default:return le}for(const ke in le)!le.hasOwnProperty(ke)||!Xe(ke)||(pe[ke]=Q(pe[ke],le[ke]));return pe}function Xe(pe){return"__proto__"!==pe}const we=()=>{try{return function Re(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const pe=process.env.__FIREBASE_DEFAULTS__;return pe?JSON.parse(pe):void 0})()||(()=>{if("undefined"==typeof document)return;let pe;try{pe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(ke){return}const le=pe&&Y(pe[1]);return le&&JSON.parse(le)})()}catch(pe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${pe}`)}},Ye=()=>{var pe;return null===(pe=we())||void 0===pe?void 0:pe.config},Ce=pe=>{var le;return null===(le=we())||void 0===le?void 0:le[`_${pe}`]};class je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((le,ke)=>{this.resolve=le,this.reject=ke})}wrapCallback(le){return(ke,yt)=>{ke?this.reject(ke):this.resolve(yt),"function"==typeof le&&(this.promise.catch(()=>{}),1===le.length?le(ke):le(ke,yt))}}}function gt(pe,le){if(pe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const yt=le||"demo-project",Ke=pe.iat||0,Ht=pe.sub||pe.user_id;if(!Ht)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const mn=Object.assign({iss:`https://securetoken.google.com/${yt}`,aud:yt,iat:Ke,exp:Ke+3600,auth_time:Ke,sub:Ht,user_id:Ht,firebase:{sign_in_provider:"custom",identities:{}}},pe);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(mn)),""].join(".")}function st(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function W(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(st())}function V(){var pe;const le=null===(pe=we())||void 0===pe?void 0:pe.forceEnvironment;if("node"===le)return!0;if("browser"===le)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ke){return!1}}function Ie(){return"object"==typeof self&&self.self===self}function nt(){const pe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof pe&&void 0!==pe.id}function We(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function he(){const pe=st();return pe.indexOf("MSIE ")>=0||pe.indexOf("Trident/")>=0}function rt(){return!V()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Z(){try{return"object"==typeof indexedDB}catch(pe){return!1}}function ne(){return new Promise((pe,le)=>{try{let ke=!0;const yt="validate-browser-context-for-indexeddb-analytics-module",Ke=self.indexedDB.open(yt);Ke.onsuccess=()=>{Ke.result.close(),ke||self.indexedDB.deleteDatabase(yt),pe(!0)},Ke.onupgradeneeded=()=>{ke=!1},Ke.onerror=()=>{var Ht;le((null===(Ht=Ke.error)||void 0===Ht?void 0:Ht.message)||"")}}catch(ke){le(ke)}})}function Pe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Oe extends Error{constructor(le,ke,yt){super(ke),this.code=le,this.customData=yt,this.name="FirebaseError",Object.setPrototypeOf(this,Oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ve.prototype.create)}}class ve{constructor(le,ke,yt){this.service=le,this.serviceName=ke,this.errors=yt}create(le,...ke){const yt=ke[0]||{},Ke=`${this.service}/${le}`,Ht=this.errors[le],mn=Ht?function ut(pe,le){return pe.replace(Ot,(ke,yt)=>{const Ke=le[yt];return null!=Ke?String(Ke):`<${yt}?>`})}(Ht,yt):"Error";return new Oe(Ke,`${this.serviceName}: ${mn} (${Ke}).`,yt)}}const Ot=/\{\$([^}]+)}/g;function Bn(pe,le){return Object.prototype.hasOwnProperty.call(pe,le)}function Ut(pe){for(const le in pe)if(Object.prototype.hasOwnProperty.call(pe,le))return!1;return!0}function gr(pe,le){if(pe===le)return!0;const ke=Object.keys(pe),yt=Object.keys(le);for(const Ke of ke){if(!yt.includes(Ke))return!1;const Ht=pe[Ke],mn=le[Ke];if(ur(Ht)&&ur(mn)){if(!gr(Ht,mn))return!1}else if(Ht!==mn)return!1}for(const Ke of yt)if(!ke.includes(Ke))return!1;return!0}function ur(pe){return null!==pe&&"object"==typeof pe}function lr(pe){const le=[];for(const[ke,yt]of Object.entries(pe))Array.isArray(yt)?yt.forEach(Ke=>{le.push(encodeURIComponent(ke)+"="+encodeURIComponent(Ke))}):le.push(encodeURIComponent(ke)+"="+encodeURIComponent(yt));return le.length?"&"+le.join("&"):""}function Hn(pe){const le={};return pe.replace(/^\?/,"").split("&").forEach(yt=>{if(yt){const[Ke,Ht]=yt.split("=");le[decodeURIComponent(Ke)]=decodeURIComponent(Ht)}}),le}function or(pe){const le=pe.indexOf("?");if(!le)return"";const ke=pe.indexOf("#",le);return pe.substring(le,ke>0?ke:void 0)}function wi(pe,le){const ke=new bn(pe,le);return ke.subscribe.bind(ke)}class bn{constructor(le,ke){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ke,this.task.then(()=>{le(this)}).catch(yt=>{this.error(yt)})}next(le){this.forEachObserver(ke=>{ke.next(le)})}error(le){this.forEachObserver(ke=>{ke.error(le)}),this.close(le)}complete(){this.forEachObserver(le=>{le.complete()}),this.close()}subscribe(le,ke,yt){let Ke;if(void 0===le&&void 0===ke&&void 0===yt)throw new Error("Missing Observer.");Ke=function pn(pe,le){if("object"!=typeof pe||null===pe)return!1;for(const ke of le)if(ke in pe&&"function"==typeof pe[ke])return!0;return!1}(le,["next","error","complete"])?le:{next:le,error:ke,complete:yt},void 0===Ke.next&&(Ke.next=xo),void 0===Ke.error&&(Ke.error=xo),void 0===Ke.complete&&(Ke.complete=xo);const Ht=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ke.error(this.finalError):Ke.complete()}catch(mn){}}),this.observers.push(Ke),Ht}unsubscribeOne(le){void 0===this.observers||void 0===this.observers[le]||(delete this.observers[le],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(le){if(!this.finalized)for(let ke=0;ke<this.observers.length;ke++)this.sendOne(ke,le)}sendOne(le,ke){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[le])try{ke(this.observers[le])}catch(yt){"undefined"!=typeof console&&console.error&&console.error(yt)}})}close(le){this.finalized||(this.finalized=!0,void 0!==le&&(this.finalError=le),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xo(){}function Rs(pe,le=1e3,ke=2){const yt=le*Math.pow(ke,pe),Ke=Math.round(.5*yt*(Math.random()-.5)*2);return Math.min(144e5,yt+Ke)}function ni(pe){return pe&&pe._delegate?pe._delegate:pe}},6631:(it,Se,$)=>{"use strict";var h=$(5e3);let oe=null;function j(){return oe}const me=new h.OlP("DocumentToken");let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function De(){return(0,h.LFG)(se)}()},providedIn:"platform"}),n})();const Y=new h.OlP("Location Initialized");let se=(()=>{class n extends ye{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return j().getBaseHref(this._doc)}onPopState(t){const r=j().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=j().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Q()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Q()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Xe(){return new se((0,h.LFG)(me))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Je(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Dt(n){return n&&"?"!==n[0]?"?"+n:n}let ze=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function we(n){const e=(0,h.LFG)(me).location;return new ft((0,h.LFG)(ye),e&&e.origin||"")}()},providedIn:"root"}),n})();const tt=new h.OlP("appBaseHref");let ft=(()=>{class n extends ze{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Dt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const a=this.prepareExternalUrl(i+Dt(s));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,s){const a=this.prepareExternalUrl(i+Dt(s));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ye),h.LFG(tt,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ye=(()=>{class n extends ze{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Re(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let a=this.prepareExternalUrl(i+Dt(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,s){let a=this.prepareExternalUrl(i+Dt(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ye),h.LFG(tt,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Je(st(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Dt(r))}normalize(t){return n.stripTrailingSlash(function gt(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,st(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Dt(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Dt(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Dt,n.joinWithSlash=Re,n.stripTrailingSlash=Je,n.\u0275fac=function(t){return new(t||n)(h.LFG(ze),h.LFG(ye))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function je(){return new Ce((0,h.LFG)(ze),(0,h.LFG)(ye))}()},providedIn:"root"}),n})();function st(n){return n.replace(/\/index.html$/,"")}var V=(()=>((V=V||{})[V.Decimal=0]="Decimal",V[V.Percent=1]="Percent",V[V.Currency=2]="Currency",V[V.Scientific=3]="Scientific",V))(),nt=(()=>((nt=nt||{})[nt.Format=0]="Format",nt[nt.Standalone=1]="Standalone",nt))(),We=(()=>((We=We||{})[We.Narrow=0]="Narrow",We[We.Abbreviated=1]="Abbreviated",We[We.Wide=2]="Wide",We[We.Short=3]="Short",We))(),mt=(()=>((mt=mt||{})[mt.Short=0]="Short",mt[mt.Medium=1]="Medium",mt[mt.Long=2]="Long",mt[mt.Full=3]="Full",mt))(),he=(()=>((he=he||{})[he.Decimal=0]="Decimal",he[he.Group=1]="Group",he[he.List=2]="List",he[he.PercentSign=3]="PercentSign",he[he.PlusSign=4]="PlusSign",he[he.MinusSign=5]="MinusSign",he[he.Exponential=6]="Exponential",he[he.SuperscriptingExponent=7]="SuperscriptingExponent",he[he.PerMille=8]="PerMille",he[he.Infinity=9]="Infinity",he[he.NaN=10]="NaN",he[he.TimeSeparator=11]="TimeSeparator",he[he.CurrencyDecimal=12]="CurrencyDecimal",he[he.CurrencyGroup=13]="CurrencyGroup",he))();function ve(n,e){return gr((0,h.cg1)(n)[h.wAp.DateFormat],e)}function ut(n,e){return gr((0,h.cg1)(n)[h.wAp.TimeFormat],e)}function Ot(n,e){return gr((0,h.cg1)(n)[h.wAp.DateTimeFormat],e)}function zt(n,e){const t=(0,h.cg1)(n),r=t[h.wAp.NumberSymbols][e];if(void 0===r){if(e===he.CurrencyDecimal)return t[h.wAp.NumberSymbols][he.Decimal];if(e===he.CurrencyGroup)return t[h.wAp.NumberSymbols][he.Group]}return r}function Bn(n){if(!n[h.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[h.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function gr(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function ur(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const or=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,cr={},wi=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var bn=(()=>((bn=bn||{})[bn.Short=0]="Short",bn[bn.ShortGMT=1]="ShortGMT",bn[bn.Long=2]="Long",bn[bn.Extended=3]="Extended",bn))(),tn=(()=>((tn=tn||{})[tn.FullYear=0]="FullYear",tn[tn.Month=1]="Month",tn[tn.Date=2]="Date",tn[tn.Hours=3]="Hours",tn[tn.Minutes=4]="Minutes",tn[tn.Seconds=5]="Seconds",tn[tn.FractionalSeconds=6]="FractionalSeconds",tn[tn.Day=7]="Day",tn))(),pn=(()=>((pn=pn||{})[pn.DayPeriods=0]="DayPeriods",pn[pn.Days=1]="Days",pn[pn.Months=2]="Months",pn[pn.Eras=3]="Eras",pn))();function xo(n,e,t,r){let i=function Ht(n){if(_n(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,a=1]=n.split("-").map(c=>+c);return Ys(i,s-1,a)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(or))return function mn(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const a=Number(n[4]||0)-t,c=Number(n[5]||0)-r,f=Number(n[6]||0),y=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,a,c,f,y),e}(r)}const e=new Date(n);if(!_n(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Sn(t,e)||e;let c,a=[];for(;e;){if(c=wi.exec(e),!c){a.push(e);break}{a=a.concat(c.slice(1));const b=a.pop();if(!b)break;e=b}}let f=i.getTimezoneOffset();r&&(f=ke(r,f),i=function Ke(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function yt(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(ke(e,i)-i))}(i,r,!0));let y="";return a.forEach(b=>{const D=function le(n){if(pe[n])return pe[n];let e;switch(n){case"G":case"GG":case"GGG":e=Mn(pn.Eras,We.Abbreviated);break;case"GGGG":e=Mn(pn.Eras,We.Wide);break;case"GGGGG":e=Mn(pn.Eras,We.Narrow);break;case"y":e=rn(tn.FullYear,1,0,!1,!0);break;case"yy":e=rn(tn.FullYear,2,0,!0,!0);break;case"yyy":e=rn(tn.FullYear,3,0,!1,!0);break;case"yyyy":e=rn(tn.FullYear,4,0,!1,!0);break;case"Y":e=ni(1);break;case"YY":e=ni(2,!0);break;case"YYY":e=ni(3);break;case"YYYY":e=ni(4);break;case"M":case"L":e=rn(tn.Month,1,1);break;case"MM":case"LL":e=rn(tn.Month,2,1);break;case"MMM":e=Mn(pn.Months,We.Abbreviated);break;case"MMMM":e=Mn(pn.Months,We.Wide);break;case"MMMMM":e=Mn(pn.Months,We.Narrow);break;case"LLL":e=Mn(pn.Months,We.Abbreviated,nt.Standalone);break;case"LLLL":e=Mn(pn.Months,We.Wide,nt.Standalone);break;case"LLLLL":e=Mn(pn.Months,We.Narrow,nt.Standalone);break;case"w":e=rs(1);break;case"ww":e=rs(2);break;case"W":e=rs(1,!0);break;case"d":e=rn(tn.Date,1);break;case"dd":e=rn(tn.Date,2);break;case"c":case"cc":e=rn(tn.Day,1);break;case"ccc":e=Mn(pn.Days,We.Abbreviated,nt.Standalone);break;case"cccc":e=Mn(pn.Days,We.Wide,nt.Standalone);break;case"ccccc":e=Mn(pn.Days,We.Narrow,nt.Standalone);break;case"cccccc":e=Mn(pn.Days,We.Short,nt.Standalone);break;case"E":case"EE":case"EEE":e=Mn(pn.Days,We.Abbreviated);break;case"EEEE":e=Mn(pn.Days,We.Wide);break;case"EEEEE":e=Mn(pn.Days,We.Narrow);break;case"EEEEEE":e=Mn(pn.Days,We.Short);break;case"a":case"aa":case"aaa":e=Mn(pn.DayPeriods,We.Abbreviated);break;case"aaaa":e=Mn(pn.DayPeriods,We.Wide);break;case"aaaaa":e=Mn(pn.DayPeriods,We.Narrow);break;case"b":case"bb":case"bbb":e=Mn(pn.DayPeriods,We.Abbreviated,nt.Standalone,!0);break;case"bbbb":e=Mn(pn.DayPeriods,We.Wide,nt.Standalone,!0);break;case"bbbbb":e=Mn(pn.DayPeriods,We.Narrow,nt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Mn(pn.DayPeriods,We.Abbreviated,nt.Format,!0);break;case"BBBB":e=Mn(pn.DayPeriods,We.Wide,nt.Format,!0);break;case"BBBBB":e=Mn(pn.DayPeriods,We.Narrow,nt.Format,!0);break;case"h":e=rn(tn.Hours,1,-12);break;case"hh":e=rn(tn.Hours,2,-12);break;case"H":e=rn(tn.Hours,1);break;case"HH":e=rn(tn.Hours,2);break;case"m":e=rn(tn.Minutes,1);break;case"mm":e=rn(tn.Minutes,2);break;case"s":e=rn(tn.Seconds,1);break;case"ss":e=rn(tn.Seconds,2);break;case"S":e=rn(tn.FractionalSeconds,1);break;case"SS":e=rn(tn.FractionalSeconds,2);break;case"SSS":e=rn(tn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=zr(bn.Short);break;case"ZZZZZ":e=zr(bn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=zr(bn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=zr(bn.Long);break;default:return null}return pe[n]=e,e}(b);y+=D?D(i,t,f):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),y}function Ys(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Sn(n,e){const t=function qe(n){return(0,h.cg1)(n)[h.wAp.LocaleId]}(n);if(cr[t]=cr[t]||{},cr[t][e])return cr[t][e];let r="";switch(e){case"shortDate":r=ve(n,mt.Short);break;case"mediumDate":r=ve(n,mt.Medium);break;case"longDate":r=ve(n,mt.Long);break;case"fullDate":r=ve(n,mt.Full);break;case"shortTime":r=ut(n,mt.Short);break;case"mediumTime":r=ut(n,mt.Medium);break;case"longTime":r=ut(n,mt.Long);break;case"fullTime":r=ut(n,mt.Full);break;case"short":const i=Sn(n,"shortTime"),s=Sn(n,"shortDate");r=Oi(Ot(n,mt.Short),[i,s]);break;case"medium":const a=Sn(n,"mediumTime"),c=Sn(n,"mediumDate");r=Oi(Ot(n,mt.Medium),[a,c]);break;case"long":const f=Sn(n,"longTime"),y=Sn(n,"longDate");r=Oi(Ot(n,mt.Long),[f,y]);break;case"full":const b=Sn(n,"fullTime"),D=Sn(n,"fullDate");r=Oi(Ot(n,mt.Full),[b,D])}return r&&(cr[t][e]=r),r}function Oi(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function er(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let a=String(n);for(;a.length<e;)a="0"+a;return r&&(a=a.substr(a.length-e)),s+a}function rn(n,e,t=0,r=!1,i=!1){return function(s,a){let c=function Ps(n,e){switch(n){case tn.FullYear:return e.getFullYear();case tn.Month:return e.getMonth();case tn.Date:return e.getDate();case tn.Hours:return e.getHours();case tn.Minutes:return e.getMinutes();case tn.Seconds:return e.getSeconds();case tn.FractionalSeconds:return e.getMilliseconds();case tn.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||c>-t)&&(c+=t),n===tn.Hours)0===c&&-12===t&&(c=12);else if(n===tn.FractionalSeconds)return function Ci(n,e){return er(n,3).substr(0,e)}(c,e);const f=zt(a,he.MinusSign);return er(c,e,f,r,i)}}function Mn(n,e,t=nt.Format,r=!1){return function(i,s){return function qi(n,e,t,r,i,s){switch(t){case pn.Months:return function ne(n,e,t){const r=(0,h.cg1)(n),s=gr([r[h.wAp.MonthsFormat],r[h.wAp.MonthsStandalone]],e);return gr(s,t)}(e,i,r)[n.getMonth()];case pn.Days:return function Z(n,e,t){const r=(0,h.cg1)(n),s=gr([r[h.wAp.DaysFormat],r[h.wAp.DaysStandalone]],e);return gr(s,t)}(e,i,r)[n.getDay()];case pn.DayPeriods:const a=n.getHours(),c=n.getMinutes();if(s){const y=function Rr(n){const e=(0,h.cg1)(n);return Bn(e),(e[h.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?ur(r):[ur(r[0]),ur(r[1])])}(e),b=function Ut(n,e,t){const r=(0,h.cg1)(n);Bn(r);const s=gr([r[h.wAp.ExtraData][0],r[h.wAp.ExtraData][1]],e)||[];return gr(s,t)||[]}(e,i,r),D=y.findIndex(N=>{if(Array.isArray(N)){const[B,U]=N,K=a>=B.hours&&c>=B.minutes,ie=a<U.hours||a===U.hours&&c<U.minutes;if(B.hours<U.hours){if(K&&ie)return!0}else if(K||ie)return!0}else if(N.hours===a&&N.minutes===c)return!0;return!1});if(-1!==D)return b[D]}return function rt(n,e,t){const r=(0,h.cg1)(n),s=gr([r[h.wAp.DayPeriodsFormat],r[h.wAp.DayPeriodsStandalone]],e);return gr(s,t)}(e,i,r)[a<12?0:1];case pn.Eras:return function Pe(n,e){return gr((0,h.cg1)(n)[h.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function zr(n){return function(e,t,r){const i=-1*r,s=zt(t,he.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case bn.Short:return(i>=0?"+":"")+er(a,2,s)+er(Math.abs(i%60),2,s);case bn.ShortGMT:return"GMT"+(i>=0?"+":"")+er(a,1,s);case bn.Long:return"GMT"+(i>=0?"+":"")+er(a,2,s)+":"+er(Math.abs(i%60),2,s);case bn.Extended:return 0===r?"Z":(i>=0?"+":"")+er(a,2,s)+":"+er(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}function _r(n){return Ys(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function rs(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,a=t.getDate();i=1+Math.floor((a+s)/7)}else{const s=_r(t),a=function Rs(n){const e=Ys(n,0,1).getDay();return Ys(n,0,1+(e<=4?4:11)-e)}(s.getFullYear()),c=s.getTime()-a.getTime();i=1+Math.round(c/6048e5)}return er(i,n,zt(r,he.MinusSign))}}function ni(n,e=!1){return function(t,r){return er(_r(t).getFullYear(),n,zt(r,he.MinusSign),e)}}const pe={};function ke(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function _n(n){return n instanceof Date&&!isNaN(n.valueOf())}const H=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function qn(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}let Wr=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class ya{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ri=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,a)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ya(i.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)r.remove(null===s?void 0:s);else if(null!==s){const c=r.get(s);r.move(c,a),vr(c,i)}});for(let i=0,s=r.length;i<s;i++){const c=r.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{vr(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function vr(n,e){n.context.$implicit=e.item}let Si=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new wr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Eh("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Eh("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class wr{constructor(){this.$implicit=null,this.ngIf=null}}function Eh(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}function ms(n,e){return new h.vHH(2100,"")}class Wi{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class _p{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const Sh=new _p,yp=new Wi;let xh=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return Sh;if((0,h.F4k)(t))return yp;throw ms()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1}),n})();const Hc=new h.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Tp=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,s){var a;if(null==t||""===t||t!=t)return null;try{return xo(t,r,s||this.locale,null!==(a=null!=i?i:this.defaultTimezone)&&void 0!==a?a:void 0)}catch(c){throw ms()}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16),h.Y36(Hc,24))},n.\u0275pipe=h.Yjl({name:"date",type:n,pure:!0}),n})(),Ta=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function Fl(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function lt(n,e,t){return function He(n,e,t,r,i,s,a=!1){let c="",f=!1;if(isFinite(n)){let y=function Qn(n){let r,i,s,a,c,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;"0"===e.charAt(s);s++);if(s===(c=e.length))r=[0],i=1;else{for(c--;"0"===e.charAt(c);)c--;for(i-=s,r=[],a=0;s<=c;s++,a++)r[a]=Number(e.charAt(s))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);a&&(y=function un(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(y));let b=e.minInt,D=e.minFrac,N=e.maxFrac;if(s){const be=s.match(H);if(null===be)throw new Error(`${s} is not a valid digit info`);const Le=be[1],Me=be[3],Ee=be[5];null!=Le&&(b=qn(Le)),null!=Me&&(D=qn(Me)),null!=Ee?N=qn(Ee):null!=Me&&D>N&&(N=D)}!function An(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let a=s+n.integerLen,c=r[a];if(a>0){r.splice(Math.max(n.integerLen,a));for(let D=a;D<r.length;D++)r[D]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,a=s+1),r[0]=0;for(let D=1;D<a;D++)r[D]=0}if(c>=5)if(a-1<0){for(let D=0;D>a;D--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[a-1]++;for(;i<Math.max(0,s);i++)r.push(0);let f=0!==s;const y=e+n.integerLen,b=r.reduceRight(function(D,N,B,U){return U[B]=(N+=D)<10?N:N-10,f&&(0===U[B]&&B>=y?U.pop():f=!1),N>=10?1:0},0);b&&(r.unshift(b),n.integerLen++)}(y,D,N);let B=y.digits,U=y.integerLen;const K=y.exponent;let ie=[];for(f=B.every(be=>!be);U<b;U++)B.unshift(0);for(;U<0;U++)B.unshift(0);U>0?ie=B.splice(U,B.length):(ie=B,B=[0]);const Ae=[];for(B.length>=e.lgSize&&Ae.unshift(B.splice(-e.lgSize,B.length).join(""));B.length>e.gSize;)Ae.unshift(B.splice(-e.gSize,B.length).join(""));B.length&&Ae.unshift(B.join("")),c=Ae.join(zt(t,r)),ie.length&&(c+=zt(t,i)+ie.join("")),K&&(c+=zt(t,he.Exponential)+"+"+K)}else c=zt(t,he.Infinity);return c=n<0&&!f?e.negPre+c+e.negSuf:e.posPre+c+e.posSuf,c}(n,function $t(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],s=r[1],a=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],c=a[0],f=a[1]||"";t.posPre=c.substr(0,c.indexOf("#"));for(let b=0;b<f.length;b++){const D=f.charAt(b);"0"===D?t.minFrac=t.maxFrac=b+1:"#"===D?t.maxFrac=b+1:t.posSuf+=D}const y=c.split(",");if(t.gSize=y[1]?y[1].length:0,t.lgSize=y[2]||y[1]?(y[2]||y[1]).length:0,s){const b=i.length-t.posPre.length-t.posSuf.length,D=s.indexOf("#");t.negPre=s.substr(0,D).replace(/'/g,""),t.negSuf=s.substr(D+b).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function kt(n,e){return(0,h.cg1)(n)[h.wAp.NumberFormats][e]}(e,V.Percent),zt(e,he.MinusSign)),e,he.Group,he.Decimal,t,!0).replace(new RegExp("%","g"),zt(e,he.PercentSign))}(function Mu(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(s){throw ms()}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16))},n.\u0275pipe=h.Yjl({name:"percent",type:n,pure:!0}),n})();let Ul=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Gc(n){return"server"===n}let Ah=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Qs((0,h.LFG)(me),window)}),n})();class Qs{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Io(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const a=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(a)return a}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ou(this.window.history)||Ou(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ou(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class zc extends class kh extends class ce{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){oe||(oe=n)}(new zc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Pm(){return tr=tr||document.querySelector("base"),tr?tr.getAttribute("href"):null}();return null==t?null:function Lu(n){Nu=Nu||document.createElement("a"),Nu.setAttribute("href",n);const e=Nu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){tr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Nl(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Nu,tr=null;const ii=new h.OlP("TRANSITION_ID"),Ni=[{provide:h.ip1,useFactory:function Wc(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=j(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[ii,me,h.zs3],multi:!0}];class Xs{static init(){(0,h.VLi)(new Xs)}addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let s=i.length,a=!1;const c=function(f){a=a||f,s--,0==s&&r(a)};i.forEach(function(f){f.whenStable(c)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?j().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let _s=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const qa=new h.OlP("EventManagerPlugins");let Js=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const a=i[s];if(a.supports(t))return this._eventNameToPlugin.set(t,a),a}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(qa),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Mh{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=j().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ao=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Fu=(()=>{class n extends Ao{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const a=this._doc.createElement("style");a.textContent=s,i.push(r.appendChild(a))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(is),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(is))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function is(n){j().remove(n)}const gn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ga=/%COMP%/g;function za(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?za(n,i,t):(i=i.replace(Ga,n),t.push(i))}return t}function Et(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Wa=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Or(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new eo(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new Ea(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=za(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Js),h.LFG(Fu),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Or{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(gn[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=gn[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=gn[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Et(r)):this.eventManager.addEventListener(e,t,Et(r))}}class eo extends Or{constructor(e,t,r,i){super(e),this.component=r;const s=za(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Zc(n){return"_ngcontent-%COMP%".replace(Ga,n)}(i+"-"+r.id),this.hostAttr=function Ph(n){return"_nghost-%COMP%".replace(Ga,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ea extends Or{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=za(i.id,i.styles,[]);for(let a=0;a<s.length;a++){const c=document.createElement("style");c.textContent=s[a],this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ys=(()=>{class n extends Mh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const jl=["alt","control","meta","shift"],xp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},to={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ki={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let vs=(()=>{class n extends Mh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>j().onAndCancel(t,s.domEventName,a))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let a="";if(jl.forEach(f=>{const y=r.indexOf(f);y>-1&&(r.splice(y,1),a+=f+".")}),a+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=a,c}static getEventFullKey(t){let r="",i=function Dp(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&to.hasOwnProperty(e)&&(e=to[e]))}return xp[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),jl.forEach(s=>{s!=i&&Ki[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ql=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function wa(){zc.makeCurrent(),Xs.init()},multi:!0},{provide:me,useFactory:function Yo(){return(0,h.RDi)(document),document},deps:[]}]),Ip=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Zo(){return new h.qLn},deps:[]},{provide:qa,useClass:ys,multi:!0,deps:[me,h.R0b,h.Lbi]},{provide:qa,useClass:vs,multi:!0,deps:[me]},{provide:Wa,useClass:Wa,deps:[Js,Fu,h.AFp]},{provide:h.FYo,useExisting:Wa},{provide:Ao,useExisting:Fu},{provide:Fu,useClass:Fu,deps:[me]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:Js,useClass:Js,deps:[qa,h.R0b]},{provide:class Cr{},useClass:_s,deps:[]}];let Ka=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:ii,useExisting:h.AFp},Ni]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:Ip,imports:[Ul,h.hGG]}),n})();"undefined"!=typeof window&&window;let Up=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):h.LFG(Lh),r},providedIn:"root"}),n})(),Lh=(()=>{class n extends Up{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case h.q3G.NONE:return r;case h.q3G.HTML:return(0,h.qzn)(r,"HTML")?(0,h.z3N)(r):(0,h.EiD)(this._doc,String(r)).toString();case h.q3G.STYLE:return(0,h.qzn)(r,"Style")?(0,h.z3N)(r):r;case h.q3G.SCRIPT:if((0,h.qzn)(r,"Script"))return(0,h.z3N)(r);throw new Error("unsafe value used in a script context");case h.q3G.URL:return(0,h.yhl)(r),(0,h.qzn)(r,"URL")?(0,h.z3N)(r):(0,h.mCW)(String(r));case h.q3G.RESOURCE_URL:if((0,h.qzn)(r,"ResourceURL"))return(0,h.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,h.JVY)(t)}bypassSecurityTrustStyle(t){return(0,h.L6k)(t)}bypassSecurityTrustScript(t){return(0,h.eBb)(t)}bypassSecurityTrustUrl(t){return(0,h.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,h.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function nd(n){return new Lh(n.get(me))}(h.LFG(h.zs3)),r},providedIn:"root"}),n})();var Tr=$(8996),$u=$(3269);function yn(...n){const e=(0,$u.yG)(n);return(0,Tr.D)(n,e)}var ro=$(7579);class ss extends ro.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Ls=$(9751);const{isArray:Ca}=Array,{getPrototypeOf:Sa,prototype:Hu,keys:Qa}=Object;function rd(n){if(1===n.length){const e=n[0];if(Ca(e))return{args:e,keys:null};if(function qu(n){return n&&"object"==typeof n&&Sa(n)===Hu}(e)){const t=Qa(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var xa=$(4671),vn=$(4004);const{isArray:Hy}=Array;function zu(n){return(0,vn.U)(e=>function Gu(n,e){return Hy(e)?n(...e):n(e)}(n,e))}function Fh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Kr=$(5403),Wu=$(9672);function Kl(...n){const e=(0,$u.yG)(n),t=(0,$u.jO)(n),{args:r,keys:i}=rd(n);if(0===r.length)return(0,Tr.D)([],e);const s=new Ls.y(function id(n,e,t=xa.y){return r=>{Xa(e,()=>{const{length:i}=n,s=new Array(i);let a=i,c=i;for(let f=0;f<i;f++)Xa(e,()=>{const y=(0,Tr.D)(n[f],e);let b=!1;y.subscribe((0,Kr.x)(r,D=>{s[f]=D,b||(b=!0,c--),c||r.next(t(s.slice()))},()=>{--a||r.complete()}))},r)},r)}}(r,e,i?a=>Fh(i,a):xa.y));return t?s.pipe(zu(t)):s}function Xa(n,e,t){n?(0,Wu.f)(t,n,e):e()}var Zl=$(576);function Xo(n,e){const t=(0,Zl.m)(n)?n:()=>n,r=i=>i.error(t());return new Ls.y(e?i=>e.schedule(r,0,i):r)}const io=(0,$(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var sd=$(8189);function Ja(...n){return function od(){return(0,sd.J)(1)}()((0,Tr.D)(n,(0,$u.yG)(n)))}var Uh=$(8421);function fr(n){return new Ls.y(e=>{(0,Uh.Xf)(n()).subscribe(e)})}var so=$(515),ad=$(727),xi=$(4482);function Yl(){return(0,xi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Kr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Da extends Ls.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,xi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ad.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Kr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ad.w0.EMPTY)}return e}refCount(){return Yl()(this)}}function Ln(n,e){return(0,xi.e)((t,r)=>{let i=null,s=0,a=!1;const c=()=>a&&!i&&r.complete();t.subscribe((0,Kr.x)(r,f=>{null==i||i.unsubscribe();let y=0;const b=s++;(0,Uh.Xf)(n(f,b)).subscribe(i=(0,Kr.x)(r,D=>r.next(e?e(f,D,b,y++):D),()=>{i=null,c()}))},()=>{a=!0,c()}))})}function Jo(n){return n<=0?()=>so.E:(0,xi.e)((e,t)=>{let r=0;e.subscribe((0,Kr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Zr(...n){const e=(0,$u.yG)(n);return(0,xi.e)((t,r)=>{(e?Ja(n,t,e):Ja(n,t)).subscribe(r)})}function ea(n,e,t,r,i){return(s,a)=>{let c=t,f=e,y=0;s.subscribe((0,Kr.x)(a,b=>{const D=y++;f=c?n(f,b,D):(c=!0,b),r&&a.next(f)},i&&(()=>{c&&a.next(f),a.complete()})))}}function Fs(n,e){return(0,xi.e)(ea(n,e,arguments.length>=2,!0))}function si(n,e){return(0,xi.e)((t,r)=>{let i=0;t.subscribe((0,Kr.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Us(n){return(0,xi.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,Kr.x)(t,void 0,void 0,a=>{s=(0,Uh.Xf)(n(a,Us(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}var oi=$(5577);function Bs(n,e){return(0,Zl.m)(e)?(0,oi.z)(n,e,1):(0,oi.z)(n,1)}function Ql(n){return n<=0?()=>so.E:(0,xi.e)((e,t)=>{let r=[];e.subscribe((0,Kr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ud(n=xr){return(0,xi.e)((e,t)=>{let r=!1;e.subscribe((0,Kr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function xr(){return new io}function ld(n){return(0,xi.e)((e,t)=>{let r=!1;e.subscribe((0,Kr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ku(n,e){const t=arguments.length>=2;return r=>r.pipe(n?si((i,s)=>n(i,s,r)):xa.y,Jo(1),t?ld(e):ud(()=>new io))}var Vs=$(8505);class Ts{constructor(e,t){this.id=e,this.url=t}}class Bh extends Ts{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ko extends Ts{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Lm extends Ts{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jr extends Ts{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Vh extends Ts{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mo extends Ts{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fm extends Ts{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class jh extends Ts{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class js extends Ts{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Es{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class $h{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Zu{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xl{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cd{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Um{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Vn="primary";class Bp{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function eu(n){return new Bp(n)}const mi="ngNavigationCancelingError";function ec(n){const e=Error("NavigationCancelingError: "+n);return e[mi]=!0,e}function qy(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const a=r[s],c=n[s];if(a.startsWith(":"))i[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function $s(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!tc(n[i],e[i]))return!1;return!0}function tc(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Qu(n){return Array.prototype.concat.apply([],n)}function dd(n){return n.length>0?n[n.length-1]:null}function Yr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function _i(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,Tr.D)(Promise.resolve(n)):yn(n)}const oo={exact:function rc(n,e,t){if(!Oo(n.segments,e.segments)||!sc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!rc(n.children[r],e.children[r],t))return!1;return!0},subset:ao},tu={exact:function nu(n,e){return $s(n,e)},subset:function Hh(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>tc(n[t],e[t]))},ignored:()=>!0};function nc(n,e,t){return oo[t.paths](n.root,e.root,t.matrixParams)&&tu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ao(n,e,t){return ic(n,e,e.segments,t)}function ic(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Oo(i,t)||e.hasChildren()||!sc(i,t,r))}if(n.segments.length===t.length){if(!Oo(n.segments,t)||!sc(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!ao(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Oo(n.segments,i)&&sc(n.segments,i,r)&&n.children[Vn])&&ic(n.children[Vn],e,s,r)}}function sc(n,e,t){return e.every((r,i)=>tu[t](n[i].parameters,r.parameters))}class uo{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=eu(this.queryParams)),this._queryParamMap}toString(){return Gh.serialize(this)}}class Nn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Yr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ac(this)}}class hd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=eu(this.parameters)),this._parameterMap}toString(){return gd(this)}}function Oo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class ru{}class oc{parse(e){const t=new uc(e);return new uo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Xu(e.root,!0)}`,r=function jp(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${iu(t)}=${iu(i)}`).join("&"):`${iu(t)}=${iu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function fd(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Gh=new oc;function ac(n){return n.segments.map(e=>gd(e)).join("/")}function Xu(n,e){if(!n.hasChildren())return ac(n);if(e){const t=n.children[Vn]?Xu(n.children[Vn],!1):"",r=[];return Yr(n.children,(i,s)=>{s!==Vn&&r.push(`${s}:${Xu(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function qh(n,e){let t=[];return Yr(n.children,(r,i)=>{i===Vn&&(t=t.concat(e(r,i)))}),Yr(n.children,(r,i)=>{i!==Vn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Vn?[Xu(n.children[Vn],!1)]:[`${i}:${Xu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Vn]?`${ac(n)}/${t[0]}`:`${ac(n)}/(${t.join("//")})`}}function Ju(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function iu(n){return Ju(n).replace(/%3B/gi,";")}function su(n){return Ju(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function el(n){return decodeURIComponent(n)}function pd(n){return el(n.replace(/\+/g,"%20"))}function gd(n){return`${su(n.path)}${function tl(n){return Object.keys(n).map(e=>`;${su(e)}=${su(n[e])}`).join("")}(n.parameters)}`}const Bm=/^[^\/()?;=#]+/;function nl(n){const e=n.match(Bm);return e?e[0]:""}const rl=/^[^=?&#]+/,zh=/^[^&#]+/;class uc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Nn([],{}):new Nn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Vn]=new Nn(e,t)),r}parseSegment(){const e=nl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new hd(el(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=nl(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=nl(this.remaining);i&&(r=i,this.capture(r))}e[el(t)]=el(r)}parseQueryParam(e){const t=function md(n){const e=n.match(rl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=function Gy(n){const e=n.match(zh);return e?e[0]:""}(this.remaining);a&&(r=a,this.capture(r))}const i=pd(t),s=pd(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=nl(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Vn);const a=this.parseChildren();t[s]=1===Object.keys(a).length?a[Vn]:new Nn([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class lc{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=_d(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=_d(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=il(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return il(e,this._root).map(t=>t.value)}}function _d(n,e){if(n===e.value)return e;for(const t of e.children){const r=_d(n,t);if(r)return r}return null}function il(n,e){if(n===e.value)return[e];for(const t of e.children){const r=il(n,t);if(r.length)return r.unshift(e),r}return[]}class ws{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ia(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class cc extends lc{constructor(e,t){super(e),this.snapshot=t,dc(this,e)}toString(){return this.snapshot.toString()}}function yd(n,e){const t=function Cs(n,e){const a=new vd([],{},{},"",{},Vn,e,null,n.root,-1,{});return new Li("",new ws(a,[]))}(n,e),r=new ss([new hd("",{})]),i=new ss({}),s=new ss({}),a=new ss({}),c=new ss(""),f=new lo(r,i,a,c,s,Vn,e,t.root);return f.snapshot=t.root,new cc(new ws(f,[]),t)}class lo{constructor(e,t,r,i,s,a,c,f){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=c,this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,vn.U)(e=>eu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,vn.U)(e=>eu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $p(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function Hp(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class vd{constructor(e,t,r,i,s,a,c,f,y,b,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=c,this.routeConfig=f,this._urlSegment=y,this._lastPathIndex=b,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=eu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=eu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Li extends lc{constructor(e,t){super(t),this.url=e,dc(this,t)}toString(){return No(this._root)}}function dc(n,e){e.value._routerState=n,e.children.forEach(t=>dc(n,t))}function No(n){const e=n.children.length>0?` { ${n.children.map(No).join(", ")} } `:"";return`${n.value}${e}`}function hc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,$s(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),$s(e.params,t.params)||n.params.next(t.params),function Yu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!$s(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),$s(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function yi(n,e){const t=$s(n.params,e.params)&&function ai(n,e){return Oo(n,e)&&n.every((t,r)=>$s(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||yi(n.parent,e.parent))}function Ss(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function bd(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ss(n,r,i);return Ss(n,r)})}(n,e,t);return new ws(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const a=s.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(c=>Ss(n,c)),a}}const r=function ou(n){return new lo(new ss(n.url),new ss(n.params),new ss(n.queryParams),new ss(n.fragment),new ss(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Ss(n,s));return new ws(r,i)}}function Wh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function au(n){return"object"==typeof n&&null!=n&&n.outlets}function Kh(n,e,t,r,i){let s={};if(r&&Yr(r,(c,f)=>{s[f]=Array.isArray(c)?c.map(y=>`${y}`):`${c}`}),n===e)return new uo(t,s,i);const a=Zh(n,e,t);return new uo(a,s,i)}function Zh(n,e,t){const r={};return Yr(n.children,(i,s)=>{r[s]=i===e?t:Zh(i,e,t)}),new Nn(n.segments,r)}class Vm{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Wh(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(au);if(i&&i!==dd(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class k{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ne(n,e,t){if(n||(n=new Nn([],{})),0===n.segments.length&&n.hasChildren())return ot(n,e,t);const r=function Ft(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const a=n.segments[i],c=t[r];if(au(c))break;const f=`${c}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===f)break;if(f&&y&&"object"==typeof y&&void 0===y.outlets){if(!xn(f,y,a))return s;r+=2}else{if(!xn(f,{},a))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Nn(n.segments.slice(0,r.pathIndex),{});return s.children[Vn]=new Nn(n.segments.slice(r.pathIndex),n.children),ot(s,0,i)}return r.match&&0===i.length?new Nn(n.segments,{}):r.match&&!n.hasChildren()?Pt(n,e,t):r.match?ot(n,0,i):Pt(n,e,t)}function ot(n,e,t){if(0===t.length)return new Nn(n.segments,{});{const r=function xe(n){return au(n[0])?n[0].outlets:{[Vn]:n}}(t),i={};return Yr(r,(s,a)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[a]=Ne(n.children[a],e,s))}),Yr(n.children,(s,a)=>{void 0===r[a]&&(i[a]=s)}),new Nn(n.segments,i)}}function Pt(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(au(s)){const f=Xt(s.outlets);return new Nn(r,f)}if(0===i&&Wh(t[0])){r.push(new hd(n.segments[e].path,Tn(t[0]))),i++;continue}const a=au(s)?s.outlets[Vn]:`${s}`,c=i<t.length-1?t[i+1]:null;a&&c&&Wh(c)?(r.push(new hd(a,Tn(c))),i+=2):(r.push(new hd(a,{})),i++)}return new Nn(r,{})}function Xt(n){const e={};return Yr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Pt(new Nn([],{}),0,t))}),e}function Tn(n){const e={};return Yr(n,(t,r)=>e[r]=`${t}`),e}function xn(n,e,t){return n==t.path&&$s(e,t.parameters)}class $r{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),hc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ia(t);e.children.forEach(s=>{const a=s.value.outlet;this.deactivateRoutes(s,i[a],r),delete i[a]}),Yr(i,(s,a)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ia(e);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],i);if(r&&r.outlet){const a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ia(e);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ia(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Um(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Xl(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(hc(i),i===s)if(i.component){const a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),hc(c.route.value),this.activateChildRoutes(e,null,a.children)}else{const c=function uu(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),f=c?c.module.componentFactoryResolver:null;a.attachRef=null,a.route=i,a.resolver=f,a.outlet&&a.outlet.activateWith(i,f),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,r)}}class fc{constructor(e,t){this.routes=e,this.module=t}}function Fi(n){return"function"==typeof n}function Zi(n){return n instanceof uo}const ol=Symbol("INITIAL_VALUE");function al(){return Ln(n=>Kl(n.map(e=>e.pipe(Jo(1),Zr(ol)))).pipe(Fs((e,t)=>{let r=!1;return t.reduce((i,s,a)=>i!==ol?i:(s===ol&&(r=!0),r||!1!==s&&a!==t.length-1&&!Zi(s)?i:s),e)},ol),si(e=>e!==ol),(0,vn.U)(e=>Zi(e)?e:!0===e),Jo(1)))}class Yh{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ul,this.attachRef=null}}class ul{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Yh,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let zp=(()=>{class n{constructor(t,r,i,s,a){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=s||Vn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const a=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),c=this.parentContexts.getOrCreateContext(this.name).children,f=new Vb(t,c,this.location.injector);this.activated=this.location.createComponent(a,this.location.length,f),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ul),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Vb{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===lo?this.route:e===ul?this.childContexts:this.parent.get(e,t)}}let $m=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[zp],encapsulation:2}),n})();function Hm(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];pc(r,zy(e,r))}}function pc(n,e){n.children&&Hm(n.children,e)}function zy(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Qh(n){const e=n.children&&n.children.map(Qh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Vn&&(t.component=$m),t}function Lo(n){return n.outlet||Vn}function Wp(n,e){const t=n.filter(r=>Lo(r)===e);return t.push(...n.filter(r=>Lo(r)!==e)),t}const ll={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Xh(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},ll):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||qy)(t,n,e);if(!s)return Object.assign({},ll);const a={};Yr(s.posParams,(f,y)=>{a[y]=f.path});const c=s.consumed.length>0?Object.assign(Object.assign({},a),s.consumed[s.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:c,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function Jh(n,e,t,r,i="corrected"){if(t.length>0&&function Zp(n,e,t){return t.some(r=>gc(n,e,r)&&Lo(r)!==Vn)}(n,t,r)){const a=new Nn(e,function qm(n,e,t,r){const i={};i[Vn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Lo(s)!==Vn){const a=new Nn([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,i[Lo(s)]=a}return i}(n,e,r,new Nn(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function Yp(n,e,t){return t.some(r=>gc(n,e,r))}(n,t,r)){const a=new Nn(n.segments,function Kp(n,e,t,r,i,s){const a={};for(const c of r)if(gc(n,t,c)&&!i[Lo(c)]){const f=new Nn([],{});f._sourceSegment=n,f._segmentIndexShift="legacy"===s?n.segments.length:e.length,a[Lo(c)]=f}return Object.assign(Object.assign({},i),a)}(n,e,t,r,n.children,i));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const s=new Nn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function gc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ef(n,e,t,r){return!!(Lo(n)===r||r!==Vn&&gc(e,t,n))&&("**"===n.path||Xh(e,n,t).matched)}function Qp(n,e,t){return 0===e.length&&!n.children[t]}class Td{constructor(e){this.segmentGroup=e||null}}class Ed{constructor(e){this.urlTree=e}}function lu(n){return Xo(new Td(n))}function Wy(n){return Xo(new Ed(n))}class Gm{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=Jh(this.urlTree.root,[],[],this.config).segmentGroup,t=new Nn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Vn).pipe((0,vn.U)(s=>this.createUrlTree(wd(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Us(s=>{if(s instanceof Ed)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Td?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Vn).pipe((0,vn.U)(i=>this.createUrlTree(wd(i),e.queryParams,e.fragment))).pipe(Us(i=>{throw i instanceof Td?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Nn([],{[Vn]:e}):e;return new uo(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,vn.U)(s=>new Nn([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,Tr.D)(i).pipe(Bs(s=>{const a=r.children[s],c=Wp(t,s);return this.expandSegmentGroup(e,c,a,s).pipe((0,vn.U)(f=>({segment:f,outlet:s})))}),Fs((s,a)=>(s[a.outlet]=a.segment,s),{}),function Nm(n,e){const t=arguments.length>=2;return r=>r.pipe(n?si((i,s)=>n(i,s,r)):xa.y,Ql(1),t?ld(e):ud(()=>new io))}())}expandSegment(e,t,r,i,s,a){return(0,Tr.D)(r).pipe(Bs(c=>this.expandSegmentAgainstRoute(e,t,r,c,i,s,a).pipe(Us(y=>{if(y instanceof Td)return yn(null);throw y}))),Ku(c=>!!c),Us((c,f)=>{if(c instanceof io||"EmptyError"===c.name)return Qp(t,i,s)?yn(new Nn([],{})):lu(t);throw c}))}expandSegmentAgainstRoute(e,t,r,i,s,a,c){return ef(i,t,s,a)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,a):c&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a):lu(t):lu(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Wy(s):this.lineralizeSegments(r,s).pipe((0,oi.z)(a=>{const c=new Nn(a,{});return this.expandSegment(e,c,t,a,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a){const{matched:c,consumedSegments:f,remainingSegments:y,positionalParamSegments:b}=Xh(t,i,s);if(!c)return lu(t);const D=this.applyRedirectCommands(f,i.redirectTo,b);return i.redirectTo.startsWith("/")?Wy(D):this.lineralizeSegments(i,D).pipe((0,oi.z)(N=>this.expandSegment(e,t,r,N.concat(y),a,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?yn(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,vn.U)(D=>(r._loadedConfig=D,new Nn(i,{})))):yn(new Nn(i,{}));const{matched:a,consumedSegments:c,remainingSegments:f}=Xh(t,r,i);return a?this.getChildConfig(e,r,i).pipe((0,oi.z)(b=>{const D=b.module,N=b.routes,{segmentGroup:B,slicedSegments:U}=Jh(t,c,f,N),K=new Nn(B.segments,B.children);if(0===U.length&&K.hasChildren())return this.expandChildren(D,N,K).pipe((0,vn.U)(Le=>new Nn(c,Le)));if(0===N.length&&0===U.length)return yn(new Nn(c,{}));const ie=Lo(r)===s;return this.expandSegment(D,K,N,U,ie?Vn:s,!0).pipe((0,vn.U)(be=>new Nn(c.concat(be.segments),be.children)))})):lu(t)}getChildConfig(e,t,r){return t.children?yn(new fc(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?yn(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,oi.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,vn.U)(s=>(t._loadedConfig=s,s))):function jb(n){return Xo(ec(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):yn(new fc([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?yn(i.map(a=>{const c=e.get(a);let f;if(function Gp(n){return n&&Fi(n.canLoad)}(c))f=c.canLoad(t,r);else{if(!Fi(c))throw new Error("Invalid CanLoad guard");f=c(t,r)}return _i(f)})).pipe(al(),(0,Vs.b)(a=>{if(!Zi(a))return;const c=ec(`Redirecting to "${this.urlSerializer.serialize(a)}"`);throw c.url=a,c}),(0,vn.U)(a=>!0===a)):yn(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return yn(r);if(i.numberOfChildren>1||!i.children[Vn])return Xo(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Vn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new uo(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Yr(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const c=i.substring(1);r[s]=t[c]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let a={};return Yr(t.children,(c,f)=>{a[f]=this.createSegmentGroup(e,c,r,i)}),new Nn(s,a)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function wd(n){const e={};for(const r of Object.keys(n.children)){const s=wd(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function tf(n){if(1===n.numberOfChildren&&n.children[Vn]){const e=n.children[Vn];return new Nn(n.segments.concat(e.segments),e.children)}return n}(new Nn(n.segments,e))}class Aa{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Cd{constructor(e,t){this.component=e,this.route=t}}function Hb(n,e,t){const r=n._root;return _c(r,e?e._root:null,t,[r.value])}function mc(n,e,t){const r=function Xp(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function _c(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ia(e);return n.children.forEach(a=>{(function Zy(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,a=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const f=function Wm(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Oo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Oo(n.url,e.url)||!$s(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yi(n,e)||!$s(n.queryParams,e.queryParams);default:return!yi(n,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new Aa(r)):(s.data=a.data,s._resolvedData=a._resolvedData),_c(n,e,s.component?c?c.children:null:t,r,i),f&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Cd(c.outlet.component,a))}else a&&Sd(e,c,i),i.canActivateChecks.push(new Aa(r)),_c(n,null,s.component?c?c.children:null:t,r,i)})(a,s[a.value.outlet],t,r.concat([a.value]),i),delete s[a.value.outlet]}),Yr(s,(a,c)=>Sd(a,t.getContext(c),i)),i}function Sd(n,e,t){const r=Ia(n),i=n.value;Yr(r,(s,a)=>{Sd(s,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new Cd(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Qy{}function Xy(n){return new Ls.y(e=>e.error(n))}class Km{constructor(e,t,r,i,s,a){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=a}recognize(){const e=Jh(this.urlTree.root,[],[],this.config.filter(a=>void 0===a.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Vn);if(null===t)return null;const r=new vd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Vn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ws(r,t),s=new Li(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=$p(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const a=t.children[s],c=Wp(e,s),f=this.processSegmentGroup(c,a,s);if(null===f)return null;r.push(...f)}const i=Jp(r);return function Zm(n){n.sort((e,t)=>e.value.outlet===Vn?-1:t.value.outlet===Vn?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const s of e){const a=this.processSegmentAgainstRoute(s,t,r,i);if(null!==a)return a}return Qp(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!ef(e,t,r,i))return null;let s,a=[],c=[];if("**"===e.path){const B=r.length>0?dd(r).parameters:{};s=new vd(r,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,n0(e),Lo(e),e.component,e,Hs(t),Dd(t)+r.length,r0(e))}else{const B=Xh(t,e,r);if(!B.matched)return null;a=B.consumedSegments,c=B.remainingSegments,s=new vd(a,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,n0(e),Lo(e),e.component,e,Hs(t),Dd(t)+a.length,r0(e))}const f=function e0(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:y,slicedSegments:b}=Jh(t,a,c,f.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===b.length&&y.hasChildren()){const B=this.processChildren(f,y);return null===B?null:[new ws(s,B)]}if(0===f.length&&0===b.length)return[new ws(s,[])];const D=Lo(e)===i,N=this.processSegment(f,y,b,D?Vn:i);return null===N?null:[new ws(s,N)]}}function t0(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Jp(n){const e=[],t=new Set;for(const r of n){if(!t0(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Jp(r.children);e.push(new ws(r.value,i))}return e.filter(r=>!t.has(r))}function Hs(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Dd(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function n0(n){return n.data||{}}function r0(n){return n.resolve||{}}function Ym(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function rf(n){return Ln(e=>{const t=n(e);return t?(0,Tr.D)(t).pipe((0,vn.U)(()=>e)):yn(e)})}class LC extends class NC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ad=new h.OlP("ROUTES");class Yi{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,vn.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const a=s.create(e);return new fc(Qu(a.injector.get(Ad,void 0,h.XFs.Self|h.XFs.Optional)).map(Qh),a)}),Us(s=>{throw t._loader$=void 0,s}));return t._loader$=new Da(i,()=>new ro.x).pipe(Yl()),t._loader$}loadModuleFactory(e){return _i(e()).pipe((0,oi.z)(t=>t instanceof h.YKP?yn(t):(0,Tr.D)(this.compiler.compileModuleAsync(t))))}}class s0{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function FC(n){throw n}function Ma(n,e,t){return e.parse("/")}function kd(n,e){return yn(null)}const o0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},a0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Qi=(()=>{class n{constructor(t,r,i,s,a,c,f){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=f,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ro.x,this.errorHandler=FC,this.malformedUriErrorHandler=Ma,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:kd,afterPreactivation:kd},this.urlHandlingStrategy=new s0,this.routeReuseStrategy=new LC,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=a.get(h.h0i),this.console=a.get(h.c2e);const D=a.get(h.R0b);this.isNgZoneEnabled=D instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(f),this.currentUrlTree=function Ro(){return new uo(new Nn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Yi(a,c,N=>this.triggerEvent(new Es(N)),N=>this.triggerEvent(new $h(N))),this.routerState=yd(this.currentUrlTree,this.rootComponentType),this.transitions=new ss({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(si(i=>0!==i.id),(0,vn.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Ln(i=>{let s=!1,a=!1;return yn(i).pipe((0,Vs.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.currentRawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ln(c=>{const f=this.browserUrlTree.toString(),y=!this.navigated||c.extractedUrl.toString()!==f||f!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return af(c.source)&&(this.browserUrlTree=c.extractedUrl),yn(c).pipe(Ln(D=>{const N=this.transitions.getValue();return r.next(new Bh(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),N!==this.transitions.getValue()?so.E:Promise.resolve(D)}),function zm(n,e,t,r){return Ln(i=>function $b(n,e,t,r,i){return new Gm(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,vn.U)(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Vs.b)(D=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function vc(n,e,t,r,i){return(0,oi.z)(s=>function Jy(n,e,t,r,i="emptyOnly",s="legacy"){try{const a=new Km(n,e,t,r,i,s).recognize();return null===a?Xy(new Qy):yn(a)}catch(a){return Xy(a)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe((0,vn.U)(a=>Object.assign(Object.assign({},s),{targetSnapshot:a}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Vs.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const B=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(B,D)}this.browserUrlTree=D.urlAfterRedirects}const N=new Vh(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(N)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:B,source:U,restoredState:K,extras:ie}=c,Ae=new Bh(N,this.serializeUrl(B),U,K);r.next(Ae);const be=yd(B,this.rootComponentType).snapshot;return yn(Object.assign(Object.assign({},c),{targetSnapshot:be,urlAfterRedirects:B,extras:Object.assign(Object.assign({},ie),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=c.rawUrl,c.resolve(null),so.E}),rf(c=>{const{targetSnapshot:f,id:y,extractedUrl:b,rawUrl:D,extras:{skipLocationChange:N,replaceUrl:B}}=c;return this.hooks.beforePreactivation(f,{navigationId:y,appliedUrlTree:b,rawUrlTree:D,skipLocationChange:!!N,replaceUrl:!!B})}),(0,Vs.b)(c=>{const f=new Mo(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(f)}),(0,vn.U)(c=>Object.assign(Object.assign({},c),{guards:Hb(c.targetSnapshot,c.currentSnapshot,this.rootContexts)})),function yc(n,e){return(0,oi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return 0===a.length&&0===s.length?yn(Object.assign(Object.assign({},t),{guardsResult:!0})):function qb(n,e,t,r){return(0,Tr.D)(n).pipe((0,oi.z)(i=>function xd(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?yn(s.map(c=>{const f=mc(c,e,i);let y;if(function MC(n){return n&&Fi(n.canDeactivate)}(f))y=_i(f.canDeactivate(n,e,t,r));else{if(!Fi(f))throw new Error("Invalid CanDeactivate guard");y=_i(f(n,e,t,r))}return y.pipe(Ku())})).pipe(al()):yn(!0)}(i.component,i.route,t,e,r)),Ku(i=>!0!==i,!0))}(a,r,i,n).pipe((0,oi.z)(c=>c&&function co(n){return"boolean"==typeof n}(c)?function Gb(n,e,t,r){return(0,Tr.D)(e).pipe(Bs(i=>Ja(function zb(n,e){return null!==n&&e&&e(new Zu(n)),yn(!0)}(i.route.parent,r),function nf(n,e){return null!==n&&e&&e(new cd(n)),yn(!0)}(i.route,r),function cu(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(a=>function PC(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(a)).filter(a=>null!==a).map(a=>fr(()=>yn(a.guards.map(f=>{const y=mc(f,a.node,t);let b;if(function Bb(n){return n&&Fi(n.canActivateChild)}(y))b=_i(y.canActivateChild(r,n));else{if(!Fi(y))throw new Error("Invalid CanActivateChild guard");b=_i(y(r,n))}return b.pipe(Ku())})).pipe(al())));return yn(s).pipe(al())}(n,i.path,t),function Yy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return yn(!0);const i=r.map(s=>fr(()=>{const a=mc(s,e,t);let c;if(function jm(n){return n&&Fi(n.canActivate)}(a))c=_i(a.canActivate(e,n));else{if(!Fi(a))throw new Error("Invalid CanActivate guard");c=_i(a(e,n))}return c.pipe(Ku())}));return yn(i).pipe(al())}(n,i.route,t))),Ku(i=>!0!==i,!0))}(r,s,n,e):yn(c)),(0,vn.U)(c=>Object.assign(Object.assign({},t),{guardsResult:c})))})}(this.ngModule.injector,c=>this.triggerEvent(c)),(0,Vs.b)(c=>{if(Zi(c.guardsResult)){const y=ec(`Redirecting to "${this.serializeUrl(c.guardsResult)}"`);throw y.url=c.guardsResult,y}const f=new Fm(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.triggerEvent(f)}),si(c=>!!c.guardsResult||(this.restoreHistory(c),this.cancelNavigationTransition(c,""),!1)),rf(c=>{if(c.guards.canActivateChecks.length)return yn(c).pipe((0,Vs.b)(f=>{const y=new jh(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}),Ln(f=>{let y=!1;return yn(f).pipe(function eg(n,e){return(0,oi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return yn(t);let s=0;return(0,Tr.D)(i).pipe(Bs(a=>function ka(n,e,t,r){return function Id(n,e,t,r){const i=Ym(n);if(0===i.length)return yn({});const s={};return(0,Tr.D)(i).pipe((0,oi.z)(a=>function du(n,e,t,r){const i=mc(n,e,r);return _i(i.resolve?i.resolve(e,t):i(e,t))}(n[a],e,t,r).pipe((0,Vs.b)(c=>{s[a]=c}))),Ql(1),(0,oi.z)(()=>Ym(s).length===i.length?yn(s):so.E))}(n._resolve,n,e,r).pipe((0,vn.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),$p(n,t).resolve),null)))}(a.route,r,n,e)),(0,Vs.b)(()=>s++),Ql(1),(0,oi.z)(a=>s===i.length?yn(t):so.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Vs.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(f),this.cancelNavigationTransition(f,"At least one route resolver didn't emit any value."))}}))}),(0,Vs.b)(f=>{const y=new js(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}))}),rf(c=>{const{targetSnapshot:f,id:y,extractedUrl:b,rawUrl:D,extras:{skipLocationChange:N,replaceUrl:B}}=c;return this.hooks.afterPreactivation(f,{navigationId:y,appliedUrlTree:b,rawUrlTree:D,skipLocationChange:!!N,replaceUrl:!!B})}),(0,vn.U)(c=>{const f=function sl(n,e,t){const r=Ss(n,e._root,t?t._root:void 0);return new cc(r,e)}(this.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return Object.assign(Object.assign({},c),{targetRouterState:f})}),(0,Vs.b)(c=>{this.currentUrlTree=c.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),this.routerState=c.targetRouterState,"deferred"===this.urlUpdateStrategy&&(c.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,c),this.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>(0,vn.U)(r=>(new $r(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,c=>this.triggerEvent(c)),(0,Vs.b)({next(){s=!0},complete(){s=!0}}),function Ub(n){return(0,xi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var c;s||a||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(c=this.currentNavigation)||void 0===c?void 0:c.id)===i.id&&(this.currentNavigation=null)}),Us(c=>{if(a=!0,function Po(n){return n&&n[mi]}(c)){const f=Zi(c.url);f||(this.navigated=!0,this.restoreHistory(i,!0));const y=new Lm(i.id,this.serializeUrl(i.extractedUrl),c.message);r.next(y),f?setTimeout(()=>{const b=this.urlHandlingStrategy.merge(c.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||af(i.source)};this.scheduleNavigation(b,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const f=new jr(i.id,this.serializeUrl(i.extractedUrl),c);r.next(f);try{i.resolve(this.errorHandler(c))}catch(y){i.reject(y)}}return so.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const s={replaceUrl:!0},a=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(a){const f=Object.assign({},a);delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(s.state=f)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,a,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Hm(t),this.config=t.map(Qh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:f}=r,y=i||this.routerState.root,b=f?this.currentUrlTree.fragment:a;let D=null;switch(c){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),function qp(n,e,t,r,i){if(0===t.length)return Kh(e.root,e.root,e.root,r,i);const s=function S(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Vm(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,a)=>{if("object"==typeof s&&null!=s){if(s.outlets){const c={};return Yr(s.outlets,(f,y)=>{c[y]="string"==typeof f?f.split("/"):f}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===a?(s.split("/").forEach((c,f)=>{0==f&&"."===c||(0==f&&""===c?t=!0:".."===c?e++:""!=c&&i.push(c))}),i):[...i,s]},[]);return new Vm(t,e,r)}(t);if(s.toRoot())return Kh(e.root,e.root,new Nn([],{}),r,i);const a=function F(n,e,t){if(n.isAbsolute)return new k(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new k(s,s===e.root,0)}const r=Wh(n.commands[0])?0:1;return function J(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new k(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),c=a.processChildren?ot(a.segmentGroup,a.index,s.commands):Ne(a.segmentGroup,a.index,s.commands);return Kh(e.root,a.segmentGroup,c,r,i)}(y,this.currentUrlTree,t,D,null!=b?b:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Zi(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function tg(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},o0):!1===r?Object.assign({},a0):r,Zi(t))return nc(this.currentUrlTree,t,i);const s=this.parseUrl(t);return nc(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ko(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,a){var c,f;if(this.disposed)return Promise.resolve(!1);let y,b,D;a?(y=a.resolve,b=a.reject,D=a.promise):D=new Promise((U,K)=>{y=U,b=K});const N=++this.navigationId;let B;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),B=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(c=this.browserPageId)&&void 0!==c?c:0:(null!==(f=this.browserPageId)&&void 0!==f?f:0)+1):B=0,this.setTransition({id:N,targetPageId:B,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:y,reject:b,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(U=>Promise.reject(U))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===a?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(a)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Lm(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function af(n){return"imperative"!==n}let ng=(()=>{class n{constructor(t,r,i,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=a,this.commands=null,this.onChanges=new ro.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Md(this.skipLocationChange),replaceUrl:Md(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Md(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Qi),h.Y36(lo),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})(),cl=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new ro.x,this.subscription=t.events.subscribe(s=>{s instanceof ko&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,a){if(0!==t||r||i||s||a||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const c={skipLocationChange:Md(this.skipLocationChange),replaceUrl:Md(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,c),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Md(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Qi),h.Y36(lo),h.Y36(ze))},n.\u0275dir=h.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&h.uIk("target",r.target)("href",r.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})();function Md(n){return""===n||!!n}let T=(()=>{class n{constructor(t,r,i,s,a,c){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=a,this.linkWithHref=c,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new h.vpe,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof ko&&this.update()})}ngAfterContentInit(){yn(this.links.changes,this.linksWithHrefs.changes,yn(null)).pipe((0,sd.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,Tr.D)(r).pipe((0,sd.J)()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function g(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Qi),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.sBO),h.Y36(ng,8),h.Y36(cl,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(h.Suo(i,ng,5),h.Suo(i,cl,5)),2&t){let s;h.iGM(s=h.CRH())&&(r.links=s),h.iGM(s=h.CRH())&&(r.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[h.TTD]}),n})();class m{}class R{preload(e,t){return yn(null)}}let G=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new Yi(i,r,f=>t.triggerEvent(new Es(f)),f=>t.triggerEvent(new $h(f)))}setUpPreloading(){this.subscription=this.router.events.pipe(si(t=>t instanceof ko),Bs(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const a=s._loadedConfig;i.push(this.processRoutes(a.module,a.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return(0,Tr.D)(i).pipe((0,sd.J)(),(0,vn.U)(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?yn(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,oi.z)(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Qi),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(m))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Bh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ko&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Jl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Jl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Tt=new h.OlP("ROUTER_CONFIGURATION"),Rt=new h.OlP("ROUTER_FORROOT_GUARD"),Wt=[Ce,{provide:ru,useClass:oc},{provide:Qi,useFactory:function l0(n,e,t,r,i,s,a={},c,f){const y=new Qi(null,n,e,t,r,i,Qu(s));return c&&(y.urlHandlingStrategy=c),f&&(y.routeReuseStrategy=f),function c0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(a,y),a.enableTracing&&y.events.subscribe(b=>{var D,N;null===(D=console.group)||void 0===D||D.call(console,`Router Event: ${b.constructor.name}`),console.log(b.toString()),console.log(b),null===(N=console.groupEnd)||void 0===N||N.call(console)}),y},deps:[ru,ul,Ce,h.zs3,h.Sil,Ad,Tt,[class sf{},new h.FiY],[class OC{},new h.FiY]]},ul,{provide:lo,useFactory:function Rd(n){return n.routerState.root},deps:[Qi]},G,R,class w{preload(e,t){return t().pipe(Us(()=>yn(null)))}},{provide:Tt,useValue:{enableTracing:!1}}];function Zt(){return new h.PXZ("Router",Qi)}let hr=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Wt,Pd(t),{provide:Rt,useFactory:u0,deps:[[Qi,new h.FiY,new h.tp0]]},{provide:Tt,useValue:r||{}},{provide:ze,useFactory:rg,deps:[ye,[new h.tBr(tt),new h.FiY],Tt]},{provide:_e,useFactory:ho,deps:[Qi,Ah,Tt]},{provide:m,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:R},{provide:h.PXZ,multi:!0,useFactory:Zt},[ig,{provide:h.ip1,multi:!0,useFactory:d0,deps:[ig]},{provide:Xm,useFactory:Qm,deps:[ig]},{provide:h.tb,multi:!0,useExisting:Xm}]]}}static forChild(t){return{ngModule:n,providers:[Pd(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Rt,8),h.LFG(Qi,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function ho(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new _e(n,e,t)}function rg(n,e,t={}){return t.useHash?new Ye(n,e):new ft(n,e)}function u0(n){return"guarded"}function Pd(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:Ad,multi:!0,useValue:n}]}let ig=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ro.x}appInitializer(){return this.injector.get(Y,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(c=>r=c),s=this.injector.get(Qi),a=this.injector.get(Tt);return"disabled"===a.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===a.initialNavigation||"enabledBlocking"===a.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?yn(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Tt),i=this.injector.get(G),s=this.injector.get(_e),a=this.injector.get(Qi),c=this.injector.get(h.z2F);t===c.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&a.initialNavigation(),i.setUpPreloading(),s.init(),a.resetRootComponentType(c.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function d0(n){return n.appInitializer.bind(n)}function Qm(n){return n.bootstrapListener.bind(n)}const Xm=new h.OlP("Router Initializer");var at=$(5861),f0=$(4986),Qr=$(4976);function Kb(){return(0,xi.e)((n,e)=>{let t,r=!1;n.subscribe((0,Kr.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function dl(n,e){return n===e}var qt,Fo=$(2011),Zb=($(2644),$(3942)),hl=$(6881),uf=$(4859),lf=$(1877),Rn=$(2090),rA="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Pa={},Yb=Yb||{},cn=rA||self;function p0(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function og(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Qb="closure_uid_"+(1e9*Math.random()>>>0),sA=0;function oA(n,e,t){return n.call.apply(n.bind,arguments)}function UC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function qs(n,e,t){return(qs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oA:UC).apply(null,arguments)}function g0(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function os(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return e.prototype[i].apply(r,a)}}function wn(){this.s=this.s,this.o=this.o}wn.prototype.s=!1,wn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function iA(n){Object.prototype.hasOwnProperty.call(n,Qb)&&n[Qb]||(n[Qb]=++sA)}(this)},wn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Xb=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function m0(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Jm(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(p0(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let a=0;a<s;a++)n[i+a]=r[a]}else n.push(r)}}function Nr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Nr.prototype.h=function(){this.defaultPrevented=!0};var VC=function(){if(!cn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{cn.addEventListener("test",()=>{},e),cn.removeEventListener("test",()=>{},e)}catch(t){}return n}();function e_(n){return/^[\s\xa0]*$/.test(n)}function ag(){var n=cn.navigator;return n&&(n=n.userAgent)?n:""}function as(n){return-1!=ag().indexOf(n)}function t_(n){return t_[" "](n),n}t_[" "]=function(){};var i_,n,Jb=as("Opera"),n_=as("Trident")||as("MSIE"),eT=as("Edge"),$C=eT||n_,r_=as("Gecko")&&!(-1!=ag().toLowerCase().indexOf("webkit")&&!as("Edge"))&&!(as("Trident")||as("MSIE"))&&!as("Edge"),_0=-1!=ag().toLowerCase().indexOf("webkit")&&!as("Edge");function y0(){var n=cn.document;return n?n.documentMode:void 0}e:{var s_="",HC=(n=ag(),r_?/rv:([^\);]+)(\)|;)/.exec(n):eT?/Edge\/([\d\.]+)/.exec(n):n_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):_0?/WebKit\/(\S+)/.exec(n):Jb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(HC&&(s_=HC?HC[1]:""),n_){var tT=y0();if(null!=tT&&tT>parseFloat(s_)){i_=String(tT);break e}}i_=s_}var aA=cn.document&&n_&&(y0()||parseInt(i_,10))||void 0;function ug(n,e){if(Nr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(r_){e:{try{t_(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:HR[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ug.$.h.call(this)}}os(ug,Nr);var HR={2:"touch",3:"pen",4:"mouse"};ug.prototype.h=function(){ug.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var o_="closure_listenable_"+(1e6*Math.random()|0),qR=0;function GC(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++qR,this.fa=this.ia=!1}function a_(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function rT(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function uA(n){const e={};for(const t in n)e[t]=n[t];return e}const lA="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cA(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<lA.length;s++)t=lA[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function sT(n){this.src=n,this.g={},this.h=0}function zC(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=Xb(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(a_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function WC(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}sT.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var a=WC(n,e,r,i);return-1<a?(e=n[a],t||(e.ia=!1)):((e=new GC(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var KC="closure_lm_"+(1e6*Math.random()|0),ZC={};function dA(n,e,t,r,i){if(r&&r.once)return v0(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)dA(n,e[s],t,r,i);return null}return t=fl(t),n&&n[o_]?n.O(e,t,og(r)?!!r.capture:!!r,i):hA(n,e,t,!1,r,i)}function hA(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var a=og(i)?!!i.capture:!!i,c=u_(n);if(c||(n[KC]=c=new sT(n)),(t=c.add(e,t,r,a,s)).proxy)return t;if(r=function Od(){const e=QC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)VC||(i=a),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(T0(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function v0(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)v0(n,e[s],t,r,i);return null}return t=fl(t),n&&n[o_]?n.P(e,t,og(r)?!!r.capture:!!r,i):hA(n,e,t,!0,r,i)}function YC(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)YC(n,e[s],t,r,i);else r=og(r)?!!r.capture:!!r,t=fl(t),n&&n[o_]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=WC(s=n.g[e],t,r,i))&&(a_(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=u_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=WC(e,t,r,i)),(t=-1<n?e[n]:null)&&b0(t))}function b0(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[o_])zC(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(T0(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=u_(e))?(zC(t,n),0==t.h&&(t.src=null,e[KC]=null)):a_(n)}}}function T0(n){return n in ZC?ZC[n]:ZC[n]="on"+n}function QC(n,e){if(n.fa)n=!0;else{e=new ug(e,this);var t=n.listener,r=n.la||n.src;n.ia&&b0(n),n=t.call(r,e)}return n}function u_(n){return(n=n[KC])instanceof sT?n:null}var oT="__closure_events_fn_"+(1e9*Math.random()>>>0);function fl(n){return"function"==typeof n?n:(n[oT]||(n[oT]=function(e){return n.handleEvent(e)}),n[oT])}function Xi(){wn.call(this),this.i=new sT(this),this.S=this,this.J=null}function xs(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Nr(e,n);else if(e instanceof Nr)e.target=e.target||n;else{var i=e;cA(e=new Nr(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var a=e.g=t[s];i=lg(a,r,!0,e)&&i}if(i=lg(a=e.g=n,r,!0,e)&&i,i=lg(a,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=lg(a=e.g=t[s],r,!1,e)&&i}function lg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var a=e[s];if(a&&!a.fa&&a.capture==t){var c=a.listener,f=a.la||a.src;a.ia&&zC(n.i,a),i=!1!==c.call(f,r)&&i}}return i&&!r.defaultPrevented}os(Xi,wn),Xi.prototype[o_]=!0,Xi.prototype.removeEventListener=function(n,e,t,r){YC(this,n,e,t,r)},Xi.prototype.N=function(){if(Xi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)a_(t[r]);delete n.g[e],n.h--}}this.J=null},Xi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Xi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var aT=cn.JSON.stringify;function fA(){var n=lT;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var cg=new class XC{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new dg,n=>n.reset());class dg{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function uT(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function hg(n){cn.setTimeout(()=>{throw n},0)}let bc,pl=!1,lT=new class pA{constructor(){this.h=this.g=null}add(e,t){const r=cg.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},cT=()=>{const n=cn.Promise.resolve(void 0);bc=()=>{n.then(JC)}};var JC=()=>{for(var n;n=fA();){try{n.h.call(n.g)}catch(t){hg(t)}var e=cg;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}pl=!1};function fg(n,e){Xi.call(this),this.h=n||1,this.g=e||cn,this.j=qs(this.qb,this),this.l=Date.now()}function l_(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function E0(n,e,t){if("function"==typeof n)t&&(n=qs(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=qs(n.handleEvent,n)}return 2147483647<Number(e)?-1:cn.setTimeout(n,e||0)}function c_(n){n.g=E0(()=>{n.g=null,n.i&&(n.i=!1,c_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}os(fg,Xi),(qt=fg.prototype).ga=!1,qt.T=null,qt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),xs(this,"tick"),this.ga&&(l_(this),this.start()))}},qt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},qt.N=function(){fg.$.N.call(this),l_(this),delete this.g};class gA extends wn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:c_(this)}N(){super.N(),this.g&&(cn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pg(n){wn.call(this),this.h=n,this.g={}}os(pg,wn);var mA=[];function dT(n,e,t,r){Array.isArray(t)||(t&&(mA[0]=t.toString()),t=mA);for(var i=0;i<t.length;i++){var s=dA(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function hT(n){rT(n.g,function(e,t){this.g.hasOwnProperty(t)&&b0(e)},n),n.g={}}function w0(){this.g=!0}function gg(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function yA(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return aT(t)}catch(c){return e}}(n,t)+(r?" "+r:"")})}pg.prototype.N=function(){pg.$.N.call(this),hT(this)},pg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},w0.prototype.Ea=function(){this.g=!1},w0.prototype.info=function(){};var cf={},vA=null;function fT(){return vA=vA||new Xi}function pT(n){Nr.call(this,cf.Ta,n)}function C0(n){const e=fT();xs(e,new pT(e))}function tS(n,e){Nr.call(this,cf.STAT_EVENT,n),this.stat=e}function Ds(n){const e=fT();xs(e,new tS(e,n))}function gT(n,e){Nr.call(this,cf.Ua,n),this.size=e}function d_(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return cn.setTimeout(function(){n()},e)}cf.Ta="serverreachability",os(pT,Nr),cf.STAT_EVENT="statevent",os(tS,Nr),cf.Ua="timingevent",os(gT,Nr);var S0={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},nS={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function x0(){}function mT(){}x0.prototype.h=null;var I0,h_={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _T(){Nr.call(this,"d")}function D0(){Nr.call(this,"c")}function A0(){}function Uo(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new pg(this),this.P=bA,this.V=new fg(n=$C?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new k0}function k0(){this.i=null,this.g="",this.h=!1}os(_T,Nr),os(D0,Nr),os(A0,x0),A0.prototype.g=function(){return new XMLHttpRequest},A0.prototype.i=function(){return{}},I0=new A0;var bA=45e3,yT={},vT={};function M0(n,e,t){n.L=1,n.v=__(Tc(e)),n.s=t,n.S=!0,iS(n,null)}function iS(n,e){n.G=Date.now(),f_(n),n.A=Tc(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),DT(t.i,"t",r),n.C=0,t=n.l.J,n.h=new k0,n.g=yg(n.l,t?e:null,!n.s),0<n.O&&(n.M=new gA(qs(n.Pa,n,n.g),n.O)),dT(n.U,n.g,"readystatechange",n.nb),e=n.I?uA(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),C0(),function eS(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var a="",c=s.split("&"),f=0;f<c.length;f++){var y=c[f].split("=");if(1<y.length){var b=y[0];y=y[1];var D=b.split("_");a=2<=D.length&&"type"==D[1]?a+(b+"=")+y+"&":a+(b+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+a})}(n.j,n.u,n.A,n.m,n.W,n.s)}function sS(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function oS(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=bT(n,t),i==vT){4==e&&(n.o=4,Ds(14),r=!1),gg(n.j,n.m,null,"[Incomplete Response]");break}if(i==yT){n.o=4,Ds(15),gg(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}gg(n.j,n.m,i,null),p_(n,i)}sS(n)&&i!=vT&&i!=yT&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ds(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),FT(e),e.M=!0,Ds(11))):(gg(n.j,n.m,t,"[Invalid Chunked Response]"),ff(n),hf(n))}function bT(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?vT:(t=Number(e.substring(t,r)),isNaN(t)?yT:(r+=1)+t>e.length?vT:(e=e.slice(r,r+t),n.C=r+t,e))}function f_(n){n.Y=Date.now()+n.P,aS(n,n.P)}function aS(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=d_(qs(n.lb,n),e)}function df(n){n.B&&(cn.clearTimeout(n.B),n.B=null)}function hf(n){0==n.l.H||n.J||TS(n.l,n)}function ff(n){df(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,l_(n.V),hT(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function p_(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||R0(t.i,n)))if(!n.K&&R0(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=d_(qs(t.ib,t),6e3));else{if(t.g){if(!(t.g.G+3e3<n.G))break e;V0(t),b_(t)}LT(t),Ds(18)}if(1>=gf(t.i)&&t.oa){try{t.oa()}catch(y){}t.oa=void 0}}else ml(t,11)}else if((n.K||t.g==n)&&V0(t),!e_(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.V=y[0],y=y[1],2==t.H)if("c"==y[0]){t.K=y[1],t.pa=y[2];const b=y[3];null!=b&&(t.ra=b,t.l.info("VER="+t.ra));const D=y[4];null!=D&&(t.Ga=D,t.l.info("SVER="+t.Ga));const N=y[5];null!=N&&"number"==typeof N&&0<N&&(t.L=r=1.5*N,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const U=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var s=r.i;s.g||-1==U.indexOf("spdy")&&-1==U.indexOf("quic")&&-1==U.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(kT(s,s.h),s.h=null))}if(r.F){const K=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;K&&(r.Da=K,Lr(r.I,r.F,K))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var a=n;if((r=t).wa=wS(r,r.J?r.pa:null,r.Y),a.K){hS(r.i,a);var c=a,f=r.L;f&&c.setTimeout(f),c.B&&(df(c),f_(c)),r.g=a}else B0(r);0<t.j.length&&U0(t)}else"stop"!=y[0]&&"close"!=y[0]||ml(t,7);else 3==t.H&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?ml(t,7):F0(t):"noop"!=y[0]&&t.h&&t.h.Aa(y),t.A=0)}C0()}catch(y){}}function TA(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(p0(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function uS(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(p0(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function TT(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(p0(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(qt=Uo.prototype).setTimeout=function(n){this.P=n},qt.nb=function(n){n=n.target;const e=this.M;e&&3==gl(n)?e.l():this.Pa(n)},qt.Pa=function(n){try{if(n==this.g)e:{const b=gl(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||$C||this.g&&(this.h.h||this.g.ja()||RT(this.g)))){this.J||4!=b||7==e||C0(),df(this);var t=this.g.da();this.ca=t;t:if(sS(this)){var r=RT(this.g);n="";var i=r.length,s=4==gl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ff(this),hf(this);var a="";break t}this.h.i=new cn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=200==t,function _A(n,e,t,r,i,s,a){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+a})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var c,f=this.g;if((c=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!e_(c)){var y=c;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Ds(12),ff(this),hf(this);break e}gg(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,p_(this,t)}this.S?(oS(this,b,a),$C&&this.i&&3==b&&(dT(this.U,this.V,"tick",this.mb),this.V.start())):(gg(this.j,this.m,a,null),p_(this,a)),4==b&&ff(this),this.i&&!this.J&&(4==b?TS(this.l,this):(this.i=!1,f_(this)))}else(function yS(n){const e={};n=(n.g&&2<=gl(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(e_(n[r]))continue;var t=uT(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function iT(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<a.indexOf("Unknown SID")?(this.o=3,Ds(12)):(this.o=0,Ds(13)),ff(this),hf(this)}}}catch(b){}},qt.mb=function(){if(this.g){var n=gl(this.g),e=this.g.ja();this.C<e.length&&(df(this),oS(this,n,e),this.i&&4!=n&&f_(this))}},qt.cancel=function(){this.J=!0,ff(this)},qt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function ta(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(C0(),Ds(17)),ff(this),this.o=2,hf(this)):aS(this,this.Y-n)};var EA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mg(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof mg){this.h=n.h,g_(this,n.j),this.s=n.s,this.g=n.g,m_(this,n.m),this.l=n.l;var e=n.i,t=new Ec;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),wT(this,t),this.o=n.o}else n&&(e=String(n).match(EA))?(this.h=!1,g_(this,e[1]||"",!0),this.s=na(e[2]||""),this.g=na(e[3]||"",!0),m_(this,e[4]),this.l=na(e[5]||"",!0),wT(this,e[6]||"",!0),this.o=na(e[7]||"")):(this.h=!1,this.i=new Ec(null,this.h))}function Tc(n){return new mg(n)}function g_(n,e,t){n.j=t?na(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function m_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function wT(n,e,t){e instanceof Ec?(n.i=e,function CA(n,e){e&&!n.j&&(Ld(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(P0(this,r),DT(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Nd(e,cS)),n.i=new Ec(e,n.h))}function Lr(n,e,t){n.i.set(e,t)}function __(n){return Lr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function na(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Nd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,wA),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function wA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}mg.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Nd(e,lS,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Nd(e,lS,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Nd(t,"/"==t.charAt(0)?CT:GR,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Nd(t,ST)),n.join("")};var lS=/[#\/\?@]/g,GR=/[#\?:]/g,CT=/[#\?]/g,cS=/[#\?@]/g,ST=/#/g;function Ec(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ld(n){n.g||(n.g=new Map,n.h=0,n.i&&function ET(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function P0(n,e){Ld(n),e=pf(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function xT(n,e){return Ld(n),e=pf(n,e),n.g.has(e)}function DT(n,e,t){P0(n,e),0<t.length&&(n.i=null,n.g.set(pf(n,e),m0(t)),n.h+=t.length)}function pf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function dS(n){this.l=n||SA,n=cn.PerformanceNavigationTiming?0<(n=cn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(cn.g&&cn.g.Ka&&cn.g.Ka()&&cn.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(qt=Ec.prototype).add=function(n,e){Ld(this),this.i=null,n=pf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},qt.forEach=function(n,e){Ld(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},qt.ta=function(){Ld(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},qt.Z=function(n){Ld(this);let e=[];if("string"==typeof n)xT(this,n)&&(e=e.concat(this.g.get(pf(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},qt.set=function(n,e){return Ld(this),this.i=null,xT(this,n=pf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},qt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},qt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),n.push(i)}}return this.i=n.join("&")};var SA=10;function AT(n){return!!n.h||!!n.g&&n.g.size>=n.j}function gf(n){return n.h?1:n.g?n.g.size:0}function R0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function kT(n,e){n.g?n.g.add(e):n.h=e}function hS(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function mf(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return m0(n.i)}function DA(){this.g=new class{stringify(n){return cn.JSON.stringify(n,void 0)}parse(n){return cn.JSON.parse(n,void 0)}}}function IA(n,e,t){const r=t||"";try{TA(n,function(i,s){let a=i;og(i)&&(a=aT(i)),e.push(r+s+"="+encodeURIComponent(a))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ra(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function _f(n){this.l=n.fc||null,this.j=n.ob||!1}function y_(n,e){Xi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=O0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dS.prototype.cancel=function(){if(this.i=mf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},os(_f,x0),_f.prototype.g=function(){return new y_(this.l,this.j)},_f.prototype.i=function(n){return function(){return n}}({}),os(y_,Xi);var O0=0;function MT(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function _g(n){n.readyState=4,n.l=null,n.j=null,n.A=null,v_(n)}function v_(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(qt=y_.prototype).open=function(n,e){if(this.readyState!=O0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,v_(this)},qt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||cn).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},qt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_g(this)),this.readyState=O0},qt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,v_(this)),this.g&&(this.readyState=3,v_(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==cn.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;MT(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},qt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?_g(this):v_(this),3==this.readyState&&MT(this)}},qt.Za=function(n){this.g&&(this.response=this.responseText=n,_g(this))},qt.Ya=function(n){this.g&&(this.response=n,_g(this))},qt.ka=function(){this.g&&_g(this)},qt.setRequestHeader=function(n,e){this.v.append(n,e)},qt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},qt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(y_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var kA=cn.JSON.parse;function vi(n){Xi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=fS,this.L=this.M=!1}os(vi,Xi);var fS="",pS=/^https?$/i,zR=["POST","PUT"];function mS(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,_S(n),PT(n)}function _S(n){n.F||(n.F=!0,xs(n,"complete"),xs(n,"error"))}function MA(n){if(n.h&&void 0!==Yb&&(!n.C[1]||4!=gl(n)||2!=n.da()))if(n.v&&4==gl(n))E0(n.La,0,n);else if(xs(n,"readystatechange"),4==gl(n)){n.h=!1;try{const a=n.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===a){var i=String(n.I).match(EA)[1]||null;!i&&cn.self&&cn.self.location&&(i=cn.self.location.protocol.slice(0,-1)),r=!pS.test(i?i.toLowerCase():"")}t=r}if(t)xs(n,"complete"),xs(n,"success");else{n.m=6;try{var s=2<gl(n)?n.g.statusText:""}catch(c){s=""}n.j=s+" ["+n.da()+"]",_S(n)}}finally{PT(n)}}}function PT(n,e){if(n.g){N0(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||xs(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function N0(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(cn.clearTimeout(n.A),n.A=null)}function gl(n){return n.g?n.g.readyState:0}function RT(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case fS:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function PA(n){let e="";return rT(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function ia(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=PA(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Lr(n,e,t))}function L0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function RA(n){this.Ga=0,this.j=[],this.l=new w0,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=L0("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=L0("baseRetryDelayMs",5e3,n),this.hb=L0("retryDelaySeedMs",1e4,n),this.eb=L0("forwardChannelMaxRetries",2,n),this.xa=L0("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new dS(n&&n.concurrentRequestLimit),this.Ja=new DA,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function F0(n){if(OT(n),3==n.H){var e=n.W++,t=Tc(n.I);if(Lr(t,"SID",n.K),Lr(t,"RID",e),Lr(t,"TYPE","terminate"),yf(n,t),(e=new Uo(n,n.l,e)).L=2,e.v=__(Tc(t)),t=!1,cn.navigator&&cn.navigator.sendBeacon)try{t=cn.navigator.sendBeacon(e.v.toString(),"")}catch(r){}!t&&cn.Image&&((new Image).src=e.v,t=!0),t||(e.g=yg(e.l,null),e.g.ha(e.v)),e.G=Date.now(),f_(e)}vf(n)}function b_(n){n.g&&(FT(n),n.g.cancel(),n.g=null)}function OT(n){b_(n),n.u&&(cn.clearTimeout(n.u),n.u=null),V0(n),n.i.cancel(),n.m&&("number"==typeof n.m&&cn.clearTimeout(n.m),n.m=null)}function U0(n){if(!AT(n.i)&&!n.m){n.m=!0;var e=n.Na;bc||cT(),pl||(bc(),pl=!0),lT.add(e,n),n.C=0}}function NT(n,e){var t;t=e?e.m:n.W++;const r=Tc(n.I);Lr(r,"SID",n.K),Lr(r,"RID",t),Lr(r,"AID",n.V),yf(n,r),n.o&&n.s&&ia(r,n.o,n.s),t=new Uo(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=vS(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),kT(n.i,t),M0(t,r,e)}function yf(n,e){n.na&&rT(n.na,function(t,r){Lr(e,r,t)}),n.h&&TA({},function(t,r){Lr(e,r,t)})}function vS(n,e,t){t=Math.min(n.j.length,t);var r=n.h?qs(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const a=["count="+t];-1==s?0<t?(s=i[0].g,a.push("ofs="+s)):s=0:a.push("ofs="+s);let c=!0;for(let f=0;f<t;f++){let y=i[f].g;const b=i[f].map;if(y-=s,0>y)s=Math.max(0,i[f].g-100),c=!1;else try{IA(b,a,"req"+y+"_")}catch(D){r&&r(b)}}if(c){r=a.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function B0(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;bc||cT(),pl||(bc(),pl=!0),lT.add(e,n),n.A=0}}function LT(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=d_(qs(n.Ma,n),ES(n,n.A)),n.A++,0))}function FT(n){null!=n.B&&(cn.clearTimeout(n.B),n.B=null)}function bS(n){n.g=new Uo(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Tc(n.wa);Lr(e,"RID","rpc"),Lr(e,"SID",n.K),Lr(e,"AID",n.V),Lr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Lr(e,"TO",n.qa),Lr(e,"TYPE","xmlhttp"),yf(n,e),n.o&&n.s&&ia(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=__(Tc(e)),t.s=null,t.S=!0,iS(t,n)}function V0(n){null!=n.v&&(cn.clearTimeout(n.v),n.v=null)}function TS(n,e){var t=null;if(n.g==e){V0(n),FT(n),n.g=null;var r=2}else{if(!R0(n.i,e))return;t=e.F,hS(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;xs(r=fT(),new gT(r,t)),U0(n)}else B0(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function WR(n,e){return!(gf(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=d_(qs(n.Na,n,e),ES(n,n.C)),n.C++,0)))}(n,e)||2==r&&LT(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:ml(n,5);break;case 4:ml(n,10);break;case 3:ml(n,6);break;default:ml(n,2)}}function ES(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function ml(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=qs(n.pb,n);t||(t=new mg("//www.google.com/images/cleardot.gif"),cn.location&&"http"==cn.location.protocol||g_(t,"https"),__(t)),function AA(n,e){const t=new w0;if(cn.Image){const r=new Image;r.onload=g0(ra,t,r,"TestLoadImage: loaded",!0,e),r.onerror=g0(ra,t,r,"TestLoadImage: error",!1,e),r.onabort=g0(ra,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=g0(ra,t,r,"TestLoadImage: timeout",!1,e),cn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ds(2);n.H=0,n.h&&n.h.za(e),vf(n),OT(n)}function vf(n){if(n.H=0,n.ma=[],n.h){const e=mf(n.i);(0!=e.length||0!=n.j.length)&&(Jm(n.ma,e),Jm(n.ma,n.j),n.i.i.length=0,m0(n.j),n.j.length=0),n.h.ya()}}function wS(n,e,t){var r=t instanceof mg?Tc(t):new mg(t);if(""!=r.g)e&&(r.g=e+"."+r.g),m_(r,r.m);else{var i=cn.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new mg(null);r&&g_(s,r),e&&(s.g=e),i&&m_(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&Lr(r,t,e),Lr(r,"VER",n.ra),yf(n,r),r}function yg(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vi(t&&n.Ha&&!n.va?new _f({ob:!0}):n.va)).Oa(n.J),e}function CS(){}function j0(){if(n_&&!(10<=Number(aA)))throw Error("Environmental error: no available transport.")}function fo(n,e){Xi.call(this),this.g=new RA(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!e_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!e_(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ii(this)}function hu(n){_T.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function vg(){D0.call(this),this.status=1}function Ii(n){this.g=n}function Bo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Vo(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],a=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;a=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(a<<7&4294967295|a>>>25))+((a=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(e=t+((a=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function pr(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(qt=vi.prototype).Oa=function(n){this.M=n},qt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():I0.g(),this.C=function rS(n){return n.h||(n.h=n.i())}(this.u?this.u:I0),this.g.onreadystatechange=qs(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void mS(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=cn.FormData&&n instanceof cn.FormData,!(0<=Xb(zR,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of t)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{N0(this),0<this.B&&((this.L=function gS(n){return n_&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qs(this.ua,this)):this.A=E0(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){mS(this,s)}},qt.ua=function(){void 0!==Yb&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xs(this,"timeout"),this.abort(8))},qt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,xs(this,"complete"),xs(this,"abort"),PT(this))},qt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),PT(this,!0)),vi.$.N.call(this)},qt.La=function(){this.s||(this.G||this.v||this.l?MA(this):this.kb())},qt.kb=function(){MA(this)},qt.isActive=function(){return!!this.g},qt.da=function(){try{return 2<gl(this)?this.g.status:-1}catch(n){return-1}},qt.ja=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},qt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),kA(e)}},qt.Ia=function(){return this.m},qt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(qt=RA.prototype).ra=8,qt.H=1,qt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Uo(this,this.l,n);let s=this.s;if(this.U&&(s?(s=uA(s),cA(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=vS(this,i,e),Lr(t=Tc(this.I),"RID",n),Lr(t,"CVER",22),this.F&&Lr(t,"X-HTTP-Session-Id",this.F),yf(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(PA(s)))+"&"+e:this.o&&ia(t,this.o,s)),kT(this.i,i),this.bb&&Lr(t,"TYPE","init"),this.P?(Lr(t,"$req",e),Lr(t,"SID","null"),i.aa=!0,M0(i,t,null)):M0(i,t,e),this.H=2}}else 3==this.H&&(n?NT(this,n):0==this.j.length||AT(this.i)||NT(this))},qt.Ma=function(){if(this.u=null,bS(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=d_(qs(this.jb,this),n)}},qt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ds(10),b_(this),bS(this))},qt.ib=function(){null!=this.v&&(this.v=null,b_(this),LT(this),Ds(19))},qt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ds(2)):(this.l.info("Failed to ping google.com"),Ds(1))},qt.isActive=function(){return!!this.h&&this.h.isActive(this)},(qt=CS.prototype).Ba=function(){},qt.Aa=function(){},qt.za=function(){},qt.ya=function(){},qt.isActive=function(){return!0},qt.Va=function(){},j0.prototype.g=function(n,e){return new fo(n,e)},os(fo,Xi),fo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ds(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=wS(n,null,n.Y),U0(n)},fo.prototype.close=function(){F0(this.g)},fo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=aT(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&U0(e)},fo.prototype.N=function(){this.g.h=null,delete this.j,F0(this.g),delete this.g,fo.$.N.call(this)},os(hu,_T),os(vg,D0),os(Ii,CS),Ii.prototype.Ba=function(){xs(this.g,"a")},Ii.prototype.Aa=function(n){xs(this.g,new hu(n))},Ii.prototype.za=function(n){xs(this.g,new vg)},Ii.prototype.ya=function(){xs(this.g,"b")},os(Bo,function bf(){this.blockSize=-1}),Bo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Bo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)Vo(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){Vo(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){Vo(this,r),i=0;break}}this.h=i,this.i+=e},Bo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var bg={};function Fd(n){return-128<=n&&128>n?function jC(n,e){var t=bg;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new pr([0|e],0>e?-1:0)}):new pr([0|n],0>n?-1:0)}function po(n){if(isNaN(n)||!isFinite(n))return fu;if(0>n)return us(po(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Ud;return new pr(e,0)}var Ud=4294967296,fu=Fd(0),Bd=Fd(1),Ef=Fd(16777216);function jo(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function sa(n){return-1==n.h}function us(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new pr(t,~n.h).add(Bd)}function T_(n,e){return n.add(us(e))}function E_(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Tg(n,e){this.g=n,this.h=e}function w_(n,e){if(jo(e))throw Error("division by zero");if(jo(n))return new Tg(fu,fu);if(sa(n))return e=w_(us(n),e),new Tg(us(e.g),us(e.h));if(sa(e))return e=w_(n,us(e)),new Tg(us(e.g),e.h);if(30<n.g.length){if(sa(n)||sa(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Bd,r=e;0>=r.X(n);)t=UT(t),r=UT(r);var i=wf(t,1),s=wf(r,1);for(r=wf(r,2),t=wf(t,2);!jo(r);){var a=s.add(r);0>=a.X(n)&&(i=i.add(t),s=a),r=wf(r,1),t=wf(t,1)}return e=T_(n,i.R(e)),new Tg(i,e)}for(i=fu;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),a=(s=po(t)).R(e);sa(a)||0<a.X(n);)a=(s=po(t-=r)).R(e);jo(s)&&(s=Bd),i=i.add(s),n=T_(n,a)}return new Tg(i,n)}function UT(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new pr(t,n.h)}function wf(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new pr(i,n.h)}(qt=pr.prototype).ea=function(){if(sa(this))return-us(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Ud+r)*e,e*=Ud}return n},qt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(jo(this))return"0";if(sa(this))return"-"+us(this).toString(n);for(var e=po(Math.pow(n,6)),t=this,r="";;){var i=w_(t,e).g,s=((0<(t=T_(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(jo(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},qt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},qt.X=function(n){return sa(n=T_(this,n))?-1:jo(n)?0:1},qt.abs=function(){return sa(this)?us(this):this},qt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),a=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=a>>>16,t[i]=(a&=65535)<<16|(s&=65535)}return new pr(t,-2147483648&t[t.length-1]?-1:0)},qt.R=function(n){if(jo(this)||jo(n))return fu;if(sa(this))return sa(n)?us(this).R(us(n)):us(us(this).R(n));if(sa(n))return us(this.R(us(n)));if(0>this.X(Ef)&&0>n.X(Ef))return po(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,a=65535&this.D(r),c=n.D(i)>>>16,f=65535&n.D(i);t[2*r+2*i]+=a*f,E_(t,2*r+2*i),t[2*r+2*i+1]+=s*f,E_(t,2*r+2*i+1),t[2*r+2*i+1]+=a*c,E_(t,2*r+2*i+1),t[2*r+2*i+2]+=s*c,E_(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new pr(t,0)},qt.gb=function(n){return w_(this,n).h},qt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new pr(t,this.h&n.h)},qt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new pr(t,this.h|n.h)},qt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new pr(t,this.h^n.h)},j0.prototype.createWebChannel=j0.prototype.g,fo.prototype.send=fo.prototype.u,fo.prototype.open=fo.prototype.m,fo.prototype.close=fo.prototype.close,S0.NO_ERROR=0,S0.TIMEOUT=8,S0.HTTP_ERROR=6,nS.COMPLETE="complete",mT.EventType=h_,h_.OPEN="a",h_.CLOSE="b",h_.ERROR="c",h_.MESSAGE="d",Xi.prototype.listen=Xi.prototype.O,vi.prototype.listenOnce=vi.prototype.P,vi.prototype.getLastError=vi.prototype.Sa,vi.prototype.getLastErrorCode=vi.prototype.Ia,vi.prototype.getStatus=vi.prototype.da,vi.prototype.getResponseJson=vi.prototype.Wa,vi.prototype.getResponseText=vi.prototype.ja,vi.prototype.send=vi.prototype.ha,vi.prototype.setWithCredentials=vi.prototype.Oa,Bo.prototype.digest=Bo.prototype.l,Bo.prototype.reset=Bo.prototype.reset,Bo.prototype.update=Bo.prototype.j,pr.prototype.add=pr.prototype.add,pr.prototype.multiply=pr.prototype.R,pr.prototype.modulo=pr.prototype.gb,pr.prototype.compare=pr.prototype.X,pr.prototype.toNumber=pr.prototype.ea,pr.prototype.toString=pr.prototype.toString,pr.prototype.getBits=pr.prototype.D,pr.fromNumber=po,pr.fromString=function Tf(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return us(Tf(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=po(Math.pow(e,8)),r=fu,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),a=parseInt(n.substring(i,i+s),e);8>s?(s=po(Math.pow(e,s)),r=r.R(s).add(po(a))):r=(r=r.R(t)).add(po(a))}return r};var SS=Pa.createWebChannelTransport=function(){return new j0},OA=Pa.getStatEventTarget=function(){return fT()},$0=Pa.ErrorCode=S0,NA=Pa.EventType=nS,xS=Pa.Event=cf,BT=Pa.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},LA=Pa.FetchXmlHttpFactory=_f,H0=Pa.WebChannel=mT,DS=Pa.XhrIo=vi,FA=Pa.Md5=Bo,Cf=Pa.Integer=pr;const IS="@firebase/firestore";class ls{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ls.UNAUTHENTICATED=new ls(null),ls.GOOGLE_CREDENTIALS=new ls("google-credentials-uid"),ls.FIRST_PARTY=new ls("first-party-uid"),ls.MOCK_USER=new ls("mock-user");let C_="9.23.0";const Vd=new lf.Yd("@firebase/firestore");function S_(){return Vd.logLevel}function It(n,...e){if(Vd.logLevel<=lf.in.DEBUG){const t=e.map(AS);Vd.debug(`Firestore (${C_}): ${n}`,...t)}}function Ui(n,...e){if(Vd.logLevel<=lf.in.ERROR){const t=e.map(AS);Vd.error(`Firestore (${C_}): ${n}`,...t)}}function pu(n,...e){if(Vd.logLevel<=lf.in.WARN){const t=e.map(AS);Vd.warn(`Firestore (${C_}): ${n}`,...t)}}function AS(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Yt(n="Unexpected state"){const e=`FIRESTORE (${C_}) INTERNAL ASSERTION FAILED: `+n;throw Ui(e),new Error(e)}function nn(n,e){n||Yt()}function jt(n,e){return n}const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class wt extends Rn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Bi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class kS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ls.UNAUTHENTICATED))}shutdown(){}}class q0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class UA{constructor(e){this.t=e,this.currentUser=ls.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let a=new Bi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Bi,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const y=a;e.enqueueRetryable((0,at.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},f=y=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(y=>f(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?f(y):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Bi)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nn("string"==typeof r.accessToken),new kS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return nn(null===e||"string"==typeof e),new ls(e)}}class PS{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ls.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class BA{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new PS(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ls.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VA{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=s=>{null!=s.error&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.T;return this.T=s.token,It("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nn("string"==typeof t.token),this.T=t.token,new RS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function jA(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class jT{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=jA(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function kn(n,e){return n<e?-1:n>e?1:0}function Sf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function $T(n){return n+"\0"}class Fr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new wt(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new wt(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new wt(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new wt(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fr.fromMillis(Date.now())}static fromDate(e){return Fr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Fr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kn(this.nanoseconds,e.nanoseconds):kn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class sn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new sn(e)}static min(){return new sn(new Fr(0,0))}static max(){return new sn(new Fr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class xf{constructor(e,t,r){void 0===t?t=0:t>e.length&&Yt(),void 0===r?r=e.length-t:r>e.length-t&&Yt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===xf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nr extends xf{construct(e,t,r){return new nr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new wt(et.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new nr(t)}static emptyPath(){return new nr([])}}const YR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ur extends xf{construct(e,t,r){return new Ur(e,t,r)}static isValidIdentifier(e){return YR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ur.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ur(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new wt(et.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if("\\"===c){if(i+1===e.length)throw new wt(et.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new wt(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else"`"===c?(a=!a,i++):"."!==c||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new wt(et.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ur(t)}static emptyPath(){return new Ur([])}}class Bt{constructor(e){this.path=e}static fromPath(e){return new Bt(nr.fromString(e))}static fromName(e){return new Bt(nr.fromString(e).popFirst(5))}static empty(){return new Bt(nr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Bt(new nr(e.slice()))}}class Eg{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function x_(n){return n.fields.find(e=>2===e.kind)}function Df(n){return n.fields.filter(e=>2!==e.kind)}Eg.UNKNOWN_ID=-1;class If{constructor(e,t){this.fieldPath=e,this.kind=t}}class z0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new z0(0,Gs.min())}}function OS(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=sn.fromTimestamp(1e9===r?new Fr(t+1,0):new Fr(t,r));return new Gs(i,Bt.empty(),e)}function D_(n){return new Gs(n.readTime,n.key,-1)}class Gs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Gs(sn.min(),Bt.empty(),-1)}static max(){return new Gs(sn.max(),Bt.empty(),-1)}}function W0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Bt.comparator(n.documentKey,e.documentKey),0!==t?t:kn(n.largestBatchId,e.largestBatchId))}const qT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class K0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function wc(n){return Z0.apply(this,arguments)}function Z0(){return Z0=(0,at.Z)(function*(n){if(n.code!==et.FAILED_PRECONDITION||n.message!==qT)throw n;It("LocalStore","Unexpectedly lost primary lease")}),Z0.apply(this,arguments)}class Qe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Qe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Qe?t:Qe.resolve(t)}catch(t){return Qe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Qe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Qe.reject(t)}static resolve(e){return new Qe((t,r)=>{t(e)})}static reject(e){return new Qe((t,r)=>{r(e)})}static waitFor(e){return new Qe((t,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&t()},f=>r(f))}),a=!0,s===i&&t()})}static or(e){let t=Qe.resolve(!1);for(const r of e)t=t.next(i=>i?Qe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Qe((r,i)=>{const s=e.length,a=new Array(s);let c=0;for(let f=0;f<s;f++){const y=f;t(e[y]).next(b=>{a[y]=b,++c,c===s&&r(a)},b=>i(b))}})}static doWhile(e,t){return new Qe((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class I_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Bi,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new wg(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=Y0(r.target.error);this.v.reject(new wg(e,i))}}static open(e,t,r,i){try{return new I_(t,e.transaction(i,r))}catch(s){throw new wg(t,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(It("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new LS(t)}}class gu{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===gu.S((0,Rn.z$)())&&Ui("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return It("SimpleDb","Removing database:",e),Af(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Rn.hl)())return!1;if(gu.C())return!0;const e=(0,Rn.z$)(),t=gu.S(e),r=0<t&&t<10,i=gu.N(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,at.Z)(function*(){return t.db||(It("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=a=>{r(a.target.result)},s.onblocked=()=>{i(new wg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const c=a.target.error;i("VersionError"===c.name?new wt(et.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===c.name?new wt(et.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c):new wg(e,c))},s.onupgradeneeded=a=>{It("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',a.oldVersion),t.V.O(a.target.result,s.transaction,a.oldVersion,t.version).next(()=>{It("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,at.Z)(function*(){const a="readonly"===t;let c=0;for(;;){++c;try{s.db=yield s.$(e);const f=I_.open(s.db,e,a?"readonly":"readwrite",r),y=i(f).next(b=>(f.P(),b)).catch(b=>(f.abort(b),Qe.reject(b))).toPromise();return y.catch(()=>{}),yield f.R,y}catch(f){const y=f,b="FirebaseError"!==y.name&&c<3;if(It("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),s.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class NS{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Af(this.L.delete())}}class wg extends wt{constructor(e,t){super(et.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function _l(n){return"IndexedDbTransactionError"===n.name}class LS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(It("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(It("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Af(r)}add(e){return It("SimpleDb","ADD",this.store.name,e,e),Af(this.store.add(e))}get(e){return Af(this.store.get(e)).next(t=>(void 0===t&&(t=null),It("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return It("SimpleDb","DELETE",this.store.name,e),Af(this.store.delete(e))}count(){return It("SimpleDb","COUNT",this.store.name),Af(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.W(i,(a,c)=>{s.push(c)}).next(()=>s)}{const i=this.store.getAll(r.range);return new Qe((s,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{s(c.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Qe((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}J(e,t){It("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(s,a,c)=>c.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new Qe((r,i)=>{t.onerror=s=>{const a=Y0(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(c=>{c?a.continue():r()}):r()}})}W(e,t){const r=[];return new Qe((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const c=a.target.result;if(!c)return void i();const f=new NS(c),y=t(c.primaryKey,c.value,f);if(y instanceof Qe){const b=y.catch(D=>(f.done(),Qe.reject(D)));r.push(b)}f.isDone?i():null===f.K?c.continue():c.continue(f.K)}}).next(()=>Qe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Af(n){return new Qe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Y0(r.target.error);t(i)}})}let GT=!1;function Y0(n){const e=gu.S((0,Rn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new wt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return GT||(GT=!0,setTimeout(()=>{throw r},0)),r}}return n}class FS{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;It("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,at.Z)(function*(){t.task=null;try{It("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){_l(r)?It("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield wc(r)}yield t.et(6e4)}))}}class zT{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,at.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,s=!0;return Qe.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(null!==a&&!r.has(a))return It("IndexBackiller",`Processing collection: ${a}`),this.it(e,a,i).next(c=>{i-=c,r.add(a)});s=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.rt(i,s)).next(c=>(It("IndexBackiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>a.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,s)=>{const a=D_(s);W0(a,r)>0&&(r=a)}),new Gs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let $o=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Cg(n){return null==n}function Sg(n){return 0===n&&1/n==-1/0}function WT(n){return"number"==typeof n&&Number.isInteger(n)&&!Sg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Is(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=KT(e)),e=US(n.get(t),e);return KT(e)}function US(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function KT(n){return n+"\x01\x01"}function mu(n){const e=n.length;if(nn(e>=2),2===e)return nn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),nr.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf("\x01",s);switch((a<0||a>t)&&Yt(),n.charAt(a+1)){case"\x01":const c=n.substring(s,a);let f;0===i.length?f=c:(i+=c,f=i,i=""),r.push(f);break;case"\x10":i+=n.substring(s,a),i+="\0";break;case"\x11":i+=n.substring(s,a+1);break;default:Yt()}s=a+2}return new nr(r)}const $A=["userId","batchId"];function Q0(n,e){return[n,Is(e)]}function BS(n,e,t){return[n,Is(e),t]}const VS={},HA=["prefixPath","collectionGroup","readTime","documentId"],Ji=["prefixPath","collectionGroup","documentId"],jS=["collectionGroup","readTime","prefixPath","documentId"],qA=["canonicalId","targetId"],GA=["targetId","path"],$S=["path","targetId"],zA=["collectionId","parent"],HS=["indexId","uid"],qS=["uid","sequenceNumber"],xg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],WA=["indexId","uid","orderedDocumentKey"],KA=["userId","collectionPath","documentId"],GS=["userId","collectionPath","largestBatchId"],ZA=["userId","collectionGroup","largestBatchId"],ZT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],QR=[...ZT,"documentOverlays"],YT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],X0=YT,yl=[...X0,"indexConfiguration","indexState","indexEntries"];class QT extends K0{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function cs(n,e){const t=jt(n);return gu.M(t.ht,e)}function _u(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ds(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ra(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Mr{constructor(e,t){this.comparator=e,this.root=t||As.EMPTY}insert(e,t){return new Mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,As.BLACK,null,null))}remove(e){return new Mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,As.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new A_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new A_(this.root,e,this.comparator,!1)}getReverseIterator(){return new A_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new A_(this.root,e,this.comparator,!0)}}class A_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class As{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=null!=r?r:As.RED,this.left=null!=i?i:As.EMPTY,this.right=null!=s?s:As.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new As(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return As.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return As.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,As.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,As.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Yt();const e=this.left.check();if(e!==this.right.check())throw Yt();return e+(this.isRed()?0:1)}}As.EMPTY=null,As.RED=!0,As.BLACK=!1,As.EMPTY=new class{constructor(){this.size=0}get key(){throw Yt()}get value(){throw Yt()}get color(){throw Yt()}get left(){throw Yt()}get right(){throw Yt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new As(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hr{constructor(e){this.comparator=e,this.data=new Mr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zS(this.data.getIterator())}getIteratorFrom(e){return new zS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Hr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Hr(this.comparator);return t.data=e,t}}class zS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Dg(n){return n.hasNext()?n.getNext():void 0}class zs{constructor(e){this.fields=e,e.sort(Ur.comparator)}static empty(){return new zs([])}unionWith(e){let t=new Hr(Ur.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new zs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ig extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw"undefined"!=typeof DOMException&&i instanceof DOMException?new Ig("Invalid base64 string: "+i):i}}(e);return new Vi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Vi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vi.EMPTY_BYTE_STRING=new Vi("");const QA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cc(n){if(nn(!!n),"string"==typeof n){let e=0;const t=QA.exec(n);if(nn(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ui(n.seconds),nanos:ui(n.nanos)}}function ui(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Oa(n){return"string"==typeof n?Vi.fromBase64String(n):Vi.fromUint8Array(n)}function J0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function k_(n){const e=n.mapValue.fields.__previous_value__;return J0(e)?k_(e):e}function Ag(n){const e=Cc(n.mapValue.fields.__local_write_time__.timestampValue);return new Fr(e.seconds,e.nanos)}class XT{constructor(e,t,r,i,s,a,c,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=y}}class yu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new yu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yu&&e.projectId===this.projectId&&e.database===this.database}}const vl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},M_={nullValue:"NULL_VALUE"};function Sc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?J0(n)?4:ZS(n)?9007199254740991:10:Yt()}function vu(n,e){if(n===e)return!0;const t=Sc(n);if(t!==Sc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ag(n).isEqual(Ag(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Cc(r.timestampValue),a=Cc(i.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Oa(n.bytesValue).isEqual(Oa(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ui(r.geoPointValue.latitude)===ui(i.geoPointValue.latitude)&&ui(r.geoPointValue.longitude)===ui(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ui(r.integerValue)===ui(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=ui(r.doubleValue),a=ui(i.doubleValue);return s===a?Sg(s)===Sg(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Sf(n.arrayValue.values||[],e.arrayValue.values||[],vu);case 10:return function(r,i){const s=r.mapValue.fields||{},a=i.mapValue.fields||{};if(_u(s)!==_u(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===a[c]||!vu(s[c],a[c])))return!1;return!0}(n,e);default:return Yt()}var i}function kg(n,e){return void 0!==(n.values||[]).find(t=>vu(t,e))}function xc(n,e){if(n===e)return 0;const t=Sc(n),r=Sc(e);if(t!==r)return kn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kn(n.booleanValue,e.booleanValue);case 2:return function(i,s){const a=ui(i.integerValue||i.doubleValue),c=ui(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return JT(n.timestampValue,e.timestampValue);case 4:return JT(Ag(n),Ag(e));case 5:return kn(n.stringValue,e.stringValue);case 6:return function(i,s){const a=Oa(i),c=Oa(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const a=i.split("/"),c=s.split("/");for(let f=0;f<a.length&&f<c.length;f++){const y=kn(a[f],c[f]);if(0!==y)return y}return kn(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const a=kn(ui(i.latitude),ui(s.latitude));return 0!==a?a:kn(ui(i.longitude),ui(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const a=i.values||[],c=s.values||[];for(let f=0;f<a.length&&f<c.length;++f){const y=xc(a[f],c[f]);if(y)return y}return kn(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===vl.mapValue&&s===vl.mapValue)return 0;if(i===vl.mapValue)return 1;if(s===vl.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),f=s.fields||{},y=Object.keys(f);c.sort(),y.sort();for(let b=0;b<c.length&&b<y.length;++b){const D=kn(c[b],y[b]);if(0!==D)return D;const N=xc(a[c[b]],f[y[b]]);if(0!==N)return N}return kn(c.length,y.length)}(n.mapValue,e.mapValue);default:throw Yt()}}function JT(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return kn(n,e);const t=Cc(n),r=Cc(e),i=kn(t.seconds,r.seconds);return 0!==i?i:kn(t.nanos,r.nanos)}function kf(n){return eE(n)}function eE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Cc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Oa(n.bytesValue).toBase64():"referenceValue"in n?Bt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const a of r.values||[])s?s=!1:i+=",",i+=eE(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const c of i)a?a=!1:s+=",",s+=`${c}:${eE(r.fields[c])}`;return s+"}"}(n.mapValue):Yt();var e}function Mf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function tE(n){return!!n&&"integerValue"in n}function P_(n){return!!n&&"arrayValue"in n}function WS(n){return!!n&&"nullValue"in n}function KS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function tv(n){return!!n&&"mapValue"in n}function R_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ds(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=R_(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=R_(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ZS(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function XA(n){return"nullValue"in n?M_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Mf(yu.empty(),Bt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Yt()}function JA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Mf(yu.empty(),Bt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?vl:Yt()}function YS(n,e){const t=xc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function QS(n,e){const t=xc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ks{constructor(e){this.value=e}static empty(){return new ks({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!tv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=R_(t)}setAll(e){let t=Ur.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=R_(a):i.push(c.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());tv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];tv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ds(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ks(R_(this.value))}}function XS(n){const e=[];return ds(n.fields,(t,r)=>{const i=new Ur([t]);if(tv(r)){const s=XS(r.mapValue).fields;if(0===s.length)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new zs(e)}class qr{constructor(e,t,r,i,s,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new qr(e,0,sn.min(),sn.min(),sn.min(),ks.empty(),0)}static newFoundDocument(e,t,r,i){return new qr(e,1,t,sn.min(),r,i,0)}static newNoDocument(e,t){return new qr(e,2,t,sn.min(),sn.min(),ks.empty(),0)}static newUnknownDocument(e,t){return new qr(e,3,t,sn.min(),sn.min(),ks.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(sn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ks.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ks.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jd{constructor(e,t){this.position=e,this.inclusive=t}}function nE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(r=s.field.isKeyField()?Bt.comparator(Bt.fromName(a.referenceValue),t.key):xc(a,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function rE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vu(n.position[t],e.position[t]))return!1;return!0}class Pf{constructor(e,t="asc"){this.field=e,this.dir=t}}function JS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class iE{}class Zn extends iE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new XR(e,t,r):"array-contains"===t?new n1(e,r):"in"===t?new e2(e,r):"not-in"===t?new En(e,r):"array-contains-any"===t?new t2(e,r):new Zn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new oE(e,r):new JR(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(xc(t,this.value)):null!==t&&Sc(this.value)===Sc(t)&&this.matchesComparison(xc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Yt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Er extends iE{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Er(e,t)}matches(e){return Rf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Rf(n){return"and"===n.op}function nv(n){return"or"===n.op}function rv(n){return sE(n)&&Rf(n)}function sE(n){for(const e of n.filters)if(e instanceof Er)return!1;return!0}function Dc(n){if(n instanceof Zn)return n.field.canonicalString()+n.op.toString()+kf(n.value);if(rv(n))return n.filters.map(e=>Dc(e)).join(",");{const e=n.filters.map(t=>Dc(t)).join(",");return`${n.op}(${e})`}}function e1(n,e){return n instanceof Zn?(t=n,(r=e)instanceof Zn&&t.op===r.op&&t.field.isEqual(r.field)&&vu(t.value,r.value)):n instanceof Er?function(t,r){return r instanceof Er&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,a)=>i&&e1(s,r.filters[a]),!0)}(n,e):void Yt();var t,r}function t1(n,e){const t=n.filters.concat(e);return Er.create(t,n.op)}function Of(n){return n instanceof Zn?`${(e=n).field.canonicalString()} ${e.op} ${kf(e.value)}`:n instanceof Er?function(e){return e.op.toString()+" {"+e.getFilters().map(Of).join(" ,")+"}"}(n):"Filter";var e}class XR extends Zn{constructor(e,t,r){super(e,t,r),this.key=Bt.fromName(r.referenceValue)}matches(e){const t=Bt.comparator(e.key,this.key);return this.matchesComparison(t)}}class oE extends Zn{constructor(e,t){super(e,"in",t),this.keys=aE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class JR extends Zn{constructor(e,t){super(e,"not-in",t),this.keys=aE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function aE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Bt.fromName(r.referenceValue))}class n1 extends Zn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return P_(t)&&kg(t.arrayValue,this.value)}}class e2 extends Zn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&kg(this.value.arrayValue,t)}}class En extends Zn{constructor(e,t){super(e,"not-in",t)}matches(e){if(kg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!kg(this.value.arrayValue,t)}}class t2 extends Zn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!P_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>kg(this.value.arrayValue,r))}}class n2{constructor(e,t=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.dt=null}}function uE(n,e=null,t=[],r=[],i=null,s=null,a=null){return new n2(n,e,t,r,i,s,a)}function bl(n){const e=jt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Dc(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Cg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>kf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>kf(r)).join(",")),e.dt=t}return e.dt}function O_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!JS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!e1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!rE(n.startAt,e.startAt)&&rE(n.endAt,e.endAt)}function Nf(n){return Bt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Lf(n,e){return n.filters.filter(t=>t instanceof Zn&&t.field.isEqual(e))}function li(n,e,t){let r=M_,i=!0;for(const s of Lf(n,e)){let a=M_,c=!0;switch(s.op){case"<":case"<=":a=XA(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,c=!1;break;case"!=":case"not-in":a=M_}YS({value:r,inclusive:i},{value:a,inclusive:c})<0&&(r=a,i=c)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];YS({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}return{value:r,inclusive:i}}function r2(n,e,t){let r=vl,i=!0;for(const s of Lf(n,e)){let a=vl,c=!0;switch(s.op){case">=":case">":a=JA(s.value),c=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,c=!1;break;case"!=":case"not-in":a=vl}QS({value:r,inclusive:i},{value:a,inclusive:c})>0&&(r=a,i=c)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];QS({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}return{value:r,inclusive:i}}class Tl{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=f,this.wt=null,this._t=null}}function r1(n,e,t,r,i,s,a,c){return new Tl(n,e,t,r,i,s,a,c)}function Mg(n){return new Tl(n)}function lE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function iv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function N_(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function sv(n){return null!==n.collectionGroup}function Ff(n){const e=jt(n);if(null===e.wt){e.wt=[];const t=N_(e),r=iv(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Pf(t)),e.wt.push(new Pf(Ur.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Pf(Ur.keyField(),s))}}}return e.wt}function go(n){const e=jt(n);if(!e._t)if("F"===e.limitType)e._t=uE(e.path,e.collectionGroup,Ff(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Ff(e))t.push(new Pf(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new jd(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new jd(e.startAt.position,e.startAt.inclusive):null;e._t=uE(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function cE(n,e){e.getFirstInequalityField(),N_(n);const t=n.filters.concat([e]);return new Tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function $d(n,e,t){return new Tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function L_(n,e){return O_(go(n),go(e))&&n.limitType===e.limitType}function i1(n){return`${bl(go(n))}|lt:${n.limitType}`}function dE(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Of(r)).join(", ")}]`),Cg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>kf(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>kf(r)).join(",")),`Target(${t})`}(go(n))}; limitType=${n.limitType})`}function Hd(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Bt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Ff(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,a){const c=nE(i,s,a);return i.inclusive?c<=0:c<0}(t.startAt,Ff(t),r)||t.endAt&&!function(i,s,a){const c=nE(i,s,a);return i.inclusive?c>=0:c>0}(t.endAt,Ff(t),r)));var t,r}function hE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fE(n){return(e,t)=>{let r=!1;for(const i of Ff(n)){const s=s1(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function s1(n,e,t){const r=n.field.isKeyField()?Bt.comparator(e.key,t.key):function(i,s,a){const c=s.data.field(i),f=a.data.field(i);return null!==c&&null!==f?xc(c,f):Yt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Yt()}}class Ic{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ds(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Ra(this.inner)}size(){return this.innerSize}}const F_=new Mr(Bt.comparator);function hs(){return F_}const o1=new Mr(Bt.comparator);function U_(...n){let e=o1;for(const t of n)e=e.insert(t.key,t);return e}function a1(n){let e=o1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bu(){return Pg()}function pE(){return Pg()}function Pg(){return new Ic(n=>n.toString(),(n,e)=>n.isEqual(e))}const i2=new Mr(Bt.comparator),u1=new Hr(Bt.comparator);function Fn(...n){let e=u1;for(const t of n)e=e.add(t);return e}const s2=new Hr(kn);function l1(){return s2}function o2(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sg(e)?"-0":e}}function a2(n){return{integerValue:""+n}}function u2(n,e){return WT(e)?a2(e):o2(n,e)}class B_{constructor(){this._=void 0}}function ov(n,e,t){return n instanceof Uf?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&J0(i)&&(i=k_(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Tu?d1(n,e):n instanceof Bf?h1(n,e):function(r,i){const s=c1(r,i),a=f1(s)+f1(r.gt);return tE(s)&&tE(r.gt)?a2(a):o2(r.serializer,a)}(n,e)}function l2(n,e,t){return n instanceof Tu?d1(n,e):n instanceof Bf?h1(n,e):t}function c1(n,e){return n instanceof Rg?tE(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Uf extends B_{}class Tu extends B_{constructor(e){super(),this.elements=e}}function d1(n,e){const t=gE(e);for(const r of n.elements)t.some(i=>vu(i,r))||t.push(r);return{arrayValue:{values:t}}}class Bf extends B_{constructor(e){super(),this.elements=e}}function h1(n,e){let t=gE(e);for(const r of n.elements)t=t.filter(i=>!vu(i,r));return{arrayValue:{values:t}}}class Rg extends B_{constructor(e,t){super(),this.serializer=e,this.gt=t}}function f1(n){return ui(n.integerValue||n.doubleValue)}function gE(n){return P_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class V_{constructor(e,t){this.field=e,this.transform=t}}class Og{constructor(e,t){this.version=e,this.transformResults=t}}class Xr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xr}static exists(e){return new Xr(void 0,e)}static updateTime(e){return new Xr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function j_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class av{}function mE(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Fg(n.key,Xr.none()):new Lg(n.key,n.data,Xr.none());{const t=n.data,r=ks.empty();let i=new Hr(Ur.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);null===a&&s.length>1&&(s=s.popLast(),a=t.field(s)),null===a?r.delete(s):r.set(s,a),i=i.add(s)}return new El(n.key,r,new zs(i.toArray()),Xr.none())}}function d2(n,e,t){n instanceof Lg?function(r,i,s){const a=r.value.clone(),c=p1(r.fieldTransforms,i,s.transformResults);a.setAll(c),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof El?function(r,i,s){if(!j_(r.precondition,i))return void i.convertToUnknownDocument(s.version);const a=p1(r.fieldTransforms,i,s.transformResults),c=i.data;c.setAll(_E(r)),c.setAll(a),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ng(n,e,t,r){return n instanceof Lg?function(i,s,a,c){if(!j_(i.precondition,s))return a;const f=i.value.clone(),y=g1(i.fieldTransforms,c,s);return f.setAll(y),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof El?function(i,s,a,c){if(!j_(i.precondition,s))return a;const f=g1(i.fieldTransforms,c,s),y=s.data;return y.setAll(_E(i)),y.setAll(f),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===a?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(a=t,j_(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function h2(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=c1(r.transform,i||null);null!=s&&(null===t&&(t=ks.empty()),t.set(r.field,s))}return t||null}function uv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Sf(t,r,(i,s)=>function c2(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Tu&&r instanceof Tu||t instanceof Bf&&r instanceof Bf?Sf(t.elements,r.elements,vu):t instanceof Rg&&r instanceof Rg?vu(t.gt,r.gt):t instanceof Uf&&r instanceof Uf);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Lg extends av{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class El extends av{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function _E(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function p1(n,e,t){const r=new Map;nn(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,l2(a,c,t[i]))}return r}function g1(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,ov(s,a,e))}return r}class Fg extends av{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $_ extends av{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class yE{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&d2(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ng(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ng(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=pE();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=t.has(i.key)?null:c;const f=mE(a,c);null!==f&&r.set(i.key,f),a.isValidDocument()||a.convertToNoDocument(sn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Fn())}isEqual(e){return this.batchId===e.batchId&&Sf(this.mutations,e.mutations,(t,r)=>uv(t,r))&&Sf(this.baseMutations,e.baseMutations,(t,r)=>uv(t,r))}}class lv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){nn(e.mutations.length===r.length);let i=i2;const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new lv(e,t,r,i)}}class vE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class p2{constructor(e,t){this.count=e,this.unchangedNames=t}}var ji,rr;function m1(n){switch(n){default:return Yt();case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0}}function _1(n){if(void 0===n)return Ui("GRPC error has no .code"),et.UNKNOWN;switch(n){case ji.OK:return et.OK;case ji.CANCELLED:return et.CANCELLED;case ji.UNKNOWN:return et.UNKNOWN;case ji.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case ji.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case ji.INTERNAL:return et.INTERNAL;case ji.UNAVAILABLE:return et.UNAVAILABLE;case ji.UNAUTHENTICATED:return et.UNAUTHENTICATED;case ji.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case ji.NOT_FOUND:return et.NOT_FOUND;case ji.ALREADY_EXISTS:return et.ALREADY_EXISTS;case ji.PERMISSION_DENIED:return et.PERMISSION_DENIED;case ji.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case ji.ABORTED:return et.ABORTED;case ji.OUT_OF_RANGE:return et.OUT_OF_RANGE;case ji.UNIMPLEMENTED:return et.UNIMPLEMENTED;case ji.DATA_LOSS:return et.DATA_LOSS;default:return Yt()}}(rr=ji||(ji={}))[rr.OK=0]="OK",rr[rr.CANCELLED=1]="CANCELLED",rr[rr.UNKNOWN=2]="UNKNOWN",rr[rr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rr[rr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rr[rr.NOT_FOUND=5]="NOT_FOUND",rr[rr.ALREADY_EXISTS=6]="ALREADY_EXISTS",rr[rr.PERMISSION_DENIED=7]="PERMISSION_DENIED",rr[rr.UNAUTHENTICATED=16]="UNAUTHENTICATED",rr[rr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rr[rr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rr[rr.ABORTED=10]="ABORTED",rr[rr.OUT_OF_RANGE=11]="OUT_OF_RANGE",rr[rr.UNIMPLEMENTED=12]="UNIMPLEMENTED",rr[rr.INTERNAL=13]="INTERNAL",rr[rr.UNAVAILABLE=14]="UNAVAILABLE",rr[rr.DATA_LOSS=15]="DATA_LOSS";class bE{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return H_}static getOrCreateInstance(){return null===H_&&(H_=new bE),H_}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let H_=null;function TE(){return new TextEncoder}const g2=new Cf([4294967295,4294967295],0);function y1(n){const e=TE().encode(n),t=new FA;return t.update(e),new Uint8Array(t.digest())}function EE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Cf([t,r],0),new Cf([i,s],0)]}class wE{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new q_(`Invalid padding: ${t}`);if(r<0)throw new q_(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new q_(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new q_(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Cf.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Cf.fromNumber(r)));return 1===i.compare(g2)&&(i=new Cf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=y1(e),[r,i]=EE(t);for(let s=0;s<this.hashCount;s++){const a=this.Et(r,i,s);if(!this.At(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new wE(s,i,t);return r.forEach(c=>a.insert(c)),a}insert(e){if(0===this.It)return;const t=y1(e),[r,i]=EE(t);for(let s=0;s<this.hashCount;s++){const a=this.Et(r,i,s);this.Rt(a)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class q_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class G_{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Vf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new G_(sn.min(),i,new Mr(kn),hs(),Fn())}}class Vf{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Vf(r,t,Fn(),Fn(),Fn())}}class Ug{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class CE{constructor(e,t){this.targetId=e,this.Vt=t}}class cv{constructor(e,t,r=Vi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class v1{constructor(){this.St=0,this.Dt=b1(),this.Ct=Vi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Fn(),t=Fn(),r=Fn();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Yt()}}),new Vf(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=b1()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class m2{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=hs(),this.zt=dv(),this.Wt=new Mr(kn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:Yt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const a=s.target;if(Nf(a))if(0===i){const c=new Bt(a.path);this.Yt(r,c,qr.newNoDocument(c,sn.min()))}else nn(1===i);else{const c=this.ie(r);if(c!==i){const f=this.re(e,c);0!==f&&(this.ee(r),this.Wt=this.Wt.insert(r,2===f?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=bE.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(y,b,D){var N,B,U,K,ie,Ae;const be={localCacheCount:b,existenceFilterCount:D.count},Le=D.unchangedNames;return Le&&(be.bloomFilter={applied:0===y,hashCount:null!==(N=null==Le?void 0:Le.hashCount)&&void 0!==N?N:0,bitmapLength:null!==(K=null===(U=null===(B=null==Le?void 0:Le.bits)||void 0===B?void 0:B.bitmap)||void 0===U?void 0:U.length)&&void 0!==K?K:0,padding:null!==(Ae=null===(ie=null==Le?void 0:Le.bits)||void 0===ie?void 0:ie.padding)&&void 0!==Ae?Ae:0}),be}(f,c,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=r;let f,y;try{f=Oa(s).toUint8Array()}catch(b){if(b instanceof Ig)return pu("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{y=new wE(f,a,c)}catch(b){return pu(b instanceof q_?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===y.It?1:i!==t-this.oe(e.targetId,y)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const a=this.Gt.ue(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;t.vt(c)||(this.Yt(e,s,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((s,a)=>{const c=this.se(a);if(c){if(s.current&&Nf(c.target)){const f=new Bt(c.target.path);null!==this.jt.get(f)||this.ae(a,f)||this.Yt(a,f,qr.newNoDocument(f,e))}s.Mt&&(t.set(a,s.Ot()),s.Ft())}});let r=Fn();this.zt.forEach((s,a)=>{let c=!0;a.forEachWhile(f=>{const y=this.se(f);return!y||"TargetPurposeLimboResolution"===y.purpose||(c=!1,!1)}),c&&(r=r.add(s))}),this.jt.forEach((s,a)=>a.setReadTime(e));const i=new G_(e,t,this.Wt,this.jt,r);return this.jt=hs(),this.zt=dv(),this.Wt=new Mr(kn),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new v1,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Hr(kn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||It("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new v1),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function dv(){return new Mr(Bt.comparator)}function b1(){return new Mr(Bt.comparator)}const T1={asc:"ASCENDING",desc:"DESCENDING"},_2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},E1={and:"AND",or:"OR"};class y2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hv(n,e){return n.useProto3Json||Cg(e)?e:{value:e}}function z_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function fv(n,e){return z_(n,e.toTimestamp())}function Ai(n){return nn(!!n),sn.fromTimestamp(function(e){const t=Cc(e);return new Fr(t.seconds,t.nanos)}(n))}function qd(n,e){return(t=n,new nr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Bg(n){const e=nr.fromString(n);return nn(w2(e)),e}function W_(n,e){return qd(n.databaseId,e.path)}function Ac(n,e){const t=Bg(e);if(t.get(1)!==n.databaseId.projectId)throw new wt(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new wt(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Bt(S1(t))}function pv(n,e){return qd(n.databaseId,e)}function C1(n){const e=Bg(n);return 4===e.length?nr.emptyPath():S1(e)}function K_(n){return new nr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function S1(n){return nn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function x1(n,e,t){return{name:W_(n,e),fields:t.value.mapValue.fields}}function SE(n,e,t){const r=Ac(n,e.name),i=Ai(e.updateTime),s=e.createTime?Ai(e.createTime):sn.min(),a=new ks({mapValue:{fields:e.fields}}),c=qr.newFoundDocument(r,i,s,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Gd(n,e){let t;if(e instanceof Lg)t={update:x1(n,e.key,e.value)};else if(e instanceof Fg)t={delete:W_(n,e.key)};else if(e instanceof El)t={update:x1(n,e.key,e.data),updateMask:Vg(e.fieldMask)};else{if(!(e instanceof $_))return Yt();t={verify:W_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const a=s.transform;if(a instanceof Uf)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Tu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bf)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Rg)return{fieldPath:s.field.canonicalString(),increment:a.gt};throw Yt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:fv(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Yt()),t;var i}function jf(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Xr.updateTime(Ai(i.updateTime)):void 0!==i.exists?Xr.exists(i.exists):Xr.none():Xr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;"setToServerValue"in a?(nn("REQUEST_TIME"===a.setToServerValue),c=new Uf):"appendMissingElements"in a?c=new Tu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new Bf(a.removeAllFromArray.values||[]):"increment"in a?c=new Rg(s,a.increment):Yt();const f=Ur.fromServerFormat(a.fieldPath);return new V_(f,c)}(n,i)):[];var i;if(e.update){const i=Ac(n,e.update.name),s=new ks({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=new zs((e.updateMask.fieldPaths||[]).map(y=>Ur.fromServerFormat(y)));return new El(i,s,a,t,r)}return new Lg(i,s,t,r)}if(e.delete){const i=Ac(n,e.delete);return new Fg(i,t)}if(e.verify){const i=Ac(n,e.verify);return new $_(i,t)}return Yt()}function DE(n,e){return{documents:[pv(n,e.path)]}}function gv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=pv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=pv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0!==f.length)return IE(Er.create(f,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(f){if(0!==f.length)return f.map(y=>{return{field:zd((b=y).field),direction:T2(b.dir)};var b})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=hv(n,e.limit);var c,f;return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt={before:!(f=e.endAt).inclusive,values:f.position}),t}function I1(n){let e=C1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){nn(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let s=[];t.where&&(s=function(b){const D=mv(b);return D instanceof Er&&rv(D)?D.getFilters():[D]}(t.where));let a=[];t.orderBy&&(a=t.orderBy.map(b=>{return new Pf(Eu((D=b).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let c=null;t.limit&&(c=function(b){let D;return D="object"==typeof b?b.value:b,Cg(D)?null:D}(t.limit));let f=null;var b;t.startAt&&(f=new jd((b=t.startAt).values||[],!!b.before));let y=null;return t.endAt&&(y=function(b){return new jd(b.values||[],!b.before)}(t.endAt)),r1(e,i,a,s,c,"F",f,y)}function mv(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Eu(e.unaryFilter.field);return Zn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Eu(e.unaryFilter.field);return Zn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Eu(e.unaryFilter.field);return Zn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Eu(e.unaryFilter.field);return Zn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Yt()}}(n):void 0!==n.fieldFilter?Zn.create(Eu((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Er.create(e.compositeFilter.filters.map(t=>mv(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Yt()}}(e.compositeFilter.op))}(n):Yt();var e}function T2(n){return T1[n]}function eO(n){return _2[n]}function E2(n){return E1[n]}function zd(n){return{fieldPath:n.canonicalString()}}function Eu(n){return Ur.fromServerFormat(n.fieldPath)}function IE(n){return n instanceof Zn?function(e){if("=="===e.op){if(KS(e.value))return{unaryFilter:{field:zd(e.field),op:"IS_NAN"}};if(WS(e.value))return{unaryFilter:{field:zd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(KS(e.value))return{unaryFilter:{field:zd(e.field),op:"IS_NOT_NAN"}};if(WS(e.value))return{unaryFilter:{field:zd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zd(e.field),op:eO(e.op),value:e.value}}}(n):n instanceof Er?function(e){const t=e.getFilters().map(r=>IE(r));return 1===t.length?t[0]:{compositeFilter:{op:E2(e.op),filters:t}}}(n):Yt()}function Vg(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function w2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class wl{constructor(e,t,r,i,s=sn.min(),a=sn.min(),c=Vi.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=f}withSequenceNumber(e){return new wl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new wl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class A1{constructor(e){this.fe=e}}function AE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:kE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:W_(i=n.fe,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:z_(i,s.version.toTimestamp()),createTime:z_(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Wd(e.version)};else{if(!e.isUnknownDocument())return Yt();r.unknownDocument={path:t.path.toArray(),version:Wd(e.version)}}var i,s;return r}function kE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Wd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function kc(n){const e=new Fr(n.seconds,n.nanoseconds);return sn.fromTimestamp(e)}function Kd(n,e){const t=(e.baseMutations||[]).map(s=>jf(n.fe,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(a.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>jf(n.fe,s)),i=Fr.fromMillis(e.localWriteTimeMs);return new yE(e.batchId,i,t,r)}function jg(n){const e=kc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?kc(n.lastLimboFreeSnapshotVersion):sn.min();let r;var i;return void 0!==n.query.documents?(nn(1===(i=n.query).documents.length),r=go(Mg(C1(i.documents[0])))):r=go(I1(n.query)),new wl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Vi.fromBase64String(n.resumeToken))}function ME(n,e){const t=Wd(e.snapshotVersion),r=Wd(e.lastLimboFreeSnapshotVersion);let i;i=Nf(e.target)?DE(n.fe,e.target):gv(n.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:bl(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function PE(n){const e=I1({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?$d(e,e.limit,"L"):e}function RE(n,e){return new vE(e.largestBatchId,jf(n.fe,e.overlayMutation))}function k1(n,e){const t=e.path.lastSegment();return[n,Is(e.path.popLast()),t]}function M1(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Wd(r.readTime),documentKey:Is(r.documentKey.path),largestBatchId:r.largestBatchId}}class C2{getBundleMetadata(e,t){return P1(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:kc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return P1(e).put({bundleId:(r=t).id,createTime:Wd(Ai(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return R1(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:PE(i.bundledQuery),readTime:kc(i.readTime)};var i})}saveNamedQuery(e,t){return R1(e).put({name:(r=t).name,readTime:Wd(Ai(r.readTime)),bundledQuery:r.bundledQuery});var r}}function P1(n){return cs(n,"bundles")}function R1(n){return cs(n,"namedQueries")}class Zd{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Zd(e,t.uid||"")}getOverlay(e,t){return $g(e).get(k1(this.userId,t)).next(r=>r?RE(this.serializer,r):null)}getOverlays(e,t){const r=bu();return Qe.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,a)=>{const c=new vE(t,a);i.push(this.we(e,c))}),Qe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(a=>i.add(Is(a.getCollectionPath())));const s=[];return i.forEach(a=>{const c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push($g(e).J("collectionPathOverlayIndex",c))}),Qe.waitFor(s)}getOverlaysForCollection(e,t,r){const i=bu(),s=Is(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return $g(e).j("collectionPathOverlayIndex",a).next(c=>{for(const f of c){const y=RE(this.serializer,f);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=bu();let a;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $g(e).X({index:"collectionGroupOverlayIndex",range:c},(f,y,b)=>{const D=RE(this.serializer,y);s.size()<i||D.largestBatchId===a?(s.set(D.getKey(),D),a=D.largestBatchId):b.done()}).next(()=>s)}we(e,t){return $g(e).put(function(r,i,s){const[a,c,f]=k1(i,s.mutation.key);return{userId:i,collectionPath:c,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Gd(r.fe,s.mutation)}}(this.serializer,this.userId,t))}}function $g(n){return cs(n,"documentOverlays")}class Yd{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(ui(e.integerValue));else if("doubleValue"in e){const r=ui(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Sg(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Oa(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?ZS(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Yt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Bt.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function O1(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function OE(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=O1(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Yd.Ve=new Yd;class N1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=OE(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=OE(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class L1{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class S2{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Hg{constructor(){this.je=new N1,this.ze=new L1(this.je),this.We=new S2(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class $f{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new $f(this.indexId,this.documentKey,this.arrayValue,r)}}function Qd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=F1(n.arrayValue,e.arrayValue),0!==t?t:(t=F1(n.directionalValue,e.directionalValue),0!==t?t:Bt.comparator(n.documentKey,e.documentKey)))}function F1(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class x2{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){nn(e.collectionGroup===this.collectionId);const t=x_(e);if(void 0!==t&&!this.en(t))return!1;const r=Df(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.en(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const c=r[s];if(!this.nn(this.Ze,c)||!this.sn(this.Ye[a++],c))return!1}++s}for(;s<r.length;++s){const c=r[s];if(a>=this.Ye.length||!this.sn(this.Ye[a++],c))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function qg(n){var e,t;if(nn(n instanceof Zn||n instanceof Er),n instanceof Zn){if(n instanceof e2){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Zn.create(n.field,"==",s)))||[];return Er.create(i,"or")}return n}const r=n.filters.map(i=>qg(i));return Er.create(r,n.op)}function D2(n){if(0===n.getFilters().length)return[];const e=Gg(qg(n));return nn(U1(e)),Z_(e)||Na(e)?[e]:e.getFilters()}function Z_(n){return n instanceof Zn}function Na(n){return n instanceof Er&&rv(n)}function U1(n){return Z_(n)||Na(n)||function(e){if(e instanceof Er&&nv(e)){for(const t of e.getFilters())if(!Z_(t)&&!Na(t))return!1;return!0}return!1}(n)}function Gg(n){if(nn(n instanceof Zn||n instanceof Er),n instanceof Zn)return n;if(1===n.filters.length)return Gg(n.filters[0]);const e=n.filters.map(r=>Gg(r));let t=Er.create(e,n.op);return t=_v(t),U1(t)?t:(nn(t instanceof Er),nn(Rf(t)),nn(t.filters.length>1),t.filters.reduce((r,i)=>Hf(r,i)))}function Hf(n,e){let t;return nn(n instanceof Zn||n instanceof Er),nn(e instanceof Zn||e instanceof Er),t=n instanceof Zn?e instanceof Zn?Er.create([n,e],"and"):B1(n,e):e instanceof Zn?B1(e,n):function(r,i){if(nn(r.filters.length>0&&i.filters.length>0),Rf(r)&&Rf(i))return t1(r,i.getFilters());const s=nv(r)?r:i,a=nv(r)?i:r,c=s.filters.map(f=>Hf(f,a));return Er.create(c,"or")}(n,e),_v(t)}function B1(n,e){if(Rf(e))return t1(e,n.getFilters());{const t=e.filters.map(r=>Hf(n,r));return Er.create(t,"or")}}function _v(n){if(nn(n instanceof Zn||n instanceof Er),n instanceof Zn)return n;const e=n.getFilters();if(1===e.length)return _v(e[0]);if(sE(n))return n;const t=e.map(i=>_v(i)),r=[];return t.forEach(i=>{i instanceof Zn?r.push(i):i instanceof Er&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Er.create(r,n.op)}class I2{constructor(){this.rn=new zg}addToCollectionParentIndex(e,t){return this.rn.add(t),Qe.resolve()}getCollectionParents(e,t){return Qe.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Qe.resolve()}deleteFieldIndex(e,t){return Qe.resolve()}getDocumentsMatchingTarget(e,t){return Qe.resolve(null)}getIndexType(e,t){return Qe.resolve(0)}getFieldIndexes(e,t){return Qe.resolve([])}getNextCollectionGroupToUpdate(e){return Qe.resolve(null)}getMinOffset(e,t){return Qe.resolve(Gs.min())}getMinOffsetFromCollectionGroup(e,t){return Qe.resolve(Gs.min())}updateCollectionGroup(e,t,r){return Qe.resolve()}updateIndexEntries(e,t){return Qe.resolve()}}class zg{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Hr(nr.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Hr(nr.comparator)).toArray()}}const qf=new Uint8Array(0);class A2{constructor(e,t){this.user=e,this.databaseId=t,this.on=new zg,this.un=new Ic(r=>bl(r),(r,i)=>O_(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:r,parent:Is(i)};return V1(e).put(s)}return Qe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[$T(t),""],!1,!0);return V1(e).j(i).next(s=>{for(const a of s){if(a.collectionId!==t)break;r.push(mu(a.parent))}return r})}addFieldIndex(e,t){const r=Y_(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const a=Gf(e);return s.next(c=>{a.put(M1(c,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Y_(e),i=Gf(e),s=Wg(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Wg(e);let i=!0;const s=new Map;return Qe.forEach(this.cn(t),a=>this.an(e,a).next(c=>{i&&(i=!!c),s.set(a,c)})).next(()=>{if(i){let a=Fn();const c=[];return Qe.forEach(s,(f,y)=>{var b;It("IndexedDbIndexManager",`Using index ${b=f,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Le=>`${Le.fieldPath}:${Le.kind}`).join(",")}`} to execute ${bl(t)}`);const D=function(Le,Me){const Ee=x_(Me);if(void 0===Ee)return null;for(const pt of Lf(Le,Ee.fieldPath))switch(pt.op){case"array-contains-any":return pt.value.arrayValue.values||[];case"array-contains":return[pt.value]}return null}(y,f),N=function(Le,Me){const Ee=new Map;for(const pt of Df(Me))for(const Nt of Lf(Le,pt.fieldPath))switch(Nt.op){case"==":case"in":Ee.set(pt.fieldPath.canonicalString(),Nt.value);break;case"not-in":case"!=":return Ee.set(pt.fieldPath.canonicalString(),Nt.value),Array.from(Ee.values())}return null}(y,f),B=function(Le,Me){const Ee=[];let pt=!0;for(const Nt of Df(Me)){const hn=0===Nt.kind?li(Le,Nt.fieldPath,Le.startAt):r2(Le,Nt.fieldPath,Le.startAt);Ee.push(hn.value),pt&&(pt=hn.inclusive)}return new jd(Ee,pt)}(y,f),U=function(Le,Me){const Ee=[];let pt=!0;for(const Nt of Df(Me)){const hn=0===Nt.kind?r2(Le,Nt.fieldPath,Le.endAt):li(Le,Nt.fieldPath,Le.endAt);Ee.push(hn.value),pt&&(pt=hn.inclusive)}return new jd(Ee,pt)}(y,f),K=this.hn(f,y,B),ie=this.hn(f,y,U),Ae=this.ln(f,y,N),be=this.fn(f.indexId,D,K,B.inclusive,ie,U.inclusive,Ae);return Qe.forEach(be,Le=>r.H(Le,t.limit).next(Me=>{Me.forEach(Ee=>{const pt=Bt.fromSegments(Ee.documentKey);a.has(pt)||(a=a.add(pt),c.push(pt))})}))}).next(()=>c)}return Qe.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:D2(Er.create(e.filters,"and")).map(r=>uE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,s,a,c){const f=(null!=t?t.length:1)*Math.max(r.length,s.length),y=f/(null!=t?t.length:1),b=[];for(let D=0;D<f;++D){const N=t?this.dn(t[D/y]):qf,B=this.wn(e,N,r[D%y],i),U=this._n(e,N,s[D%y],a),K=c.map(ie=>this.wn(e,N,ie,!0));b.push(...this.createRange(B,U,K))}return b}wn(e,t,r,i){const s=new $f(e,Bt.empty(),t,r);return i?s:s.Je()}_n(e,t,r,i){const s=new $f(e,Bt.empty(),t,r);return i?s.Je():s}an(e,t){const r=new x2(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let a=null;for(const c of s)r.tn(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a})}getIndexType(e,t){let r=2;const i=this.cn(t);return Qe.forEach(i,s=>this.an(e,s).next(a=>{a?0!==r&&a.fields.length<function(c){let f=new Hr(Ur.comparator),y=!1;for(const b of c.filters)for(const D of b.getFlattenedFilters())D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?y=!0:f=f.add(D.field));for(const b of c.orderBy)b.field.isKeyField()||(f=f.add(b.field));return f.size+(y?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new Hg;for(const i of Df(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const a=r.He(i.kind);Yd.Ve._e(s,a)}return r.Qe()}dn(e){const t=new Hg;return Yd.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Hg;return Yd.Ve._e(Mf(this.databaseId,t),r.He(function(i){const s=Df(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new Hg);let s=0;for(const a of Df(e)){const c=r[s++];for(const f of i)if(this.yn(t,a.fieldPath)&&P_(c))i=this.pn(i,a,c);else{const y=f.He(a.kind);Yd.Ve._e(c,y)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const c of i){const f=new Hg;f.seed(c.Qe()),Yd.Ve._e(a,f.He(t.kind)),s.push(f)}return s}yn(e,t){return!!e.filters.find(r=>r instanceof Zn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Y_(e),i=Gf(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(s=>{const a=[];return Qe.forEach(s,c=>i.get([c.indexId,this.uid]).next(f=>{a.push(function(y,b){const D=b?new z0(b.sequenceNumber,new Gs(kc(b.readTime),new Bt(mu(b.documentKey)),b.largestBatchId)):z0.empty(),N=y.fields.map(([B,U])=>new If(Ur.fromServerFormat(B),U));return new Eg(y.indexId,y.collectionGroup,N,D)}(c,f))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:kn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Y_(e),s=Gf(e);return this.Tn(e).next(a=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(c=>Qe.forEach(c,f=>s.put(M1(f.indexId,this.user,a,r)))))}updateIndexEntries(e,t){const r=new Map;return Qe.forEach(t,(i,s)=>{const a=r.get(i.collectionGroup);return(a?Qe.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),Qe.forEach(c,f=>this.En(e,i,f).next(y=>{const b=this.An(s,f);return y.isEqual(b)?Qe.resolve():this.vn(e,s,f,y,b)}))))})}Rn(e,t,r,i){return Wg(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return Wg(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=Wg(e);let s=new Hr(Qd);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(a,c)=>{s=s.add(new $f(r.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>s)}An(e,t){let r=new Hr(Qd);const i=this.mn(t,e);if(null==i)return r;const s=x_(t);if(null!=s){const a=e.data.field(s.fieldPath);if(P_(a))for(const c of a.arrayValue.values||[])r=r.add(new $f(t.indexId,e.key,this.dn(c),i))}else r=r.add(new $f(t.indexId,e.key,qf,i));return r}vn(e,t,r,i,s){It("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(c,f,y,b,D){const N=c.getIterator(),B=f.getIterator();let U=Dg(N),K=Dg(B);for(;U||K;){let ie=!1,Ae=!1;if(U&&K){const be=y(U,K);be<0?Ae=!0:be>0&&(ie=!0)}else null!=U?Ae=!0:ie=!0;ie?(b(K),K=Dg(B)):Ae?(D(U),U=Dg(N)):(U=Dg(N),K=Dg(B))}}(i,s,Qd,c=>{a.push(this.Rn(e,t,r,c))},c=>{a.push(this.Pn(e,t,r,c))}),Qe.waitFor(a)}Tn(e){let t=1;return Gf(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((a,c)=>Qd(a,c)).filter((a,c,f)=>!c||0!==Qd(a,f[c-1]));const i=[];i.push(e);for(const a of r){const c=Qd(a,e),f=Qd(a,t);if(0===c)i[0]=e.Je();else if(c>0&&f<0)i.push(a),i.push(a.Je());else if(f>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.bn(i[a],i[a+1]))return[];s.push(IDBKeyRange.bound([i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,qf,[]],[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,qf,[]]))}return s}bn(e,t){return Qd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(NE)}getMinOffset(e,t){return Qe.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||Yt())).next(NE)}}function V1(n){return cs(n,"collectionParents")}function Wg(n){return cs(n,"indexEntries")}function Y_(n){return cs(n,"indexConfiguration")}function Gf(n){return cs(n,"indexState")}function NE(n){nn(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;W0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Gs(e.readTime,e.documentKey,t)}const j1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ws{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ws(e,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function k2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],a=IDBKeyRange.only(t.batchId);let c=0;const f=r.X({range:a},(b,D,N)=>(c++,N.delete()));s.push(f.next(()=>{nn(1===c)}));const y=[];for(const b of t.mutations){const D=BS(e,b.key.path,t.batchId);s.push(i.delete(D)),y.push(b.key)}return Qe.waitFor(s).next(()=>y)}function Kg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Yt();e=n.noDocument}return JSON.stringify(e).length}Ws.DEFAULT_COLLECTION_PERCENTILE=10,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ws.DEFAULT=new Ws(41943040,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ws.DISABLED=new Ws(-1,0,0);class Zg{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){nn(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Zg(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cl(e).X({index:"userMutationsIndex",range:r},(i,s,a)=>{t=!1,a.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Xd(e),a=Cl(e);return a.add({}).next(c=>{nn("number"==typeof c);const f=new yE(c,t,r,i),y=function(N,B,U){const K=U.baseMutations.map(Ae=>Gd(N.fe,Ae)),ie=U.mutations.map(Ae=>Gd(N.fe,Ae));return{userId:B,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:K,mutations:ie}}(this.serializer,this.userId,f),b=[];let D=new Hr((N,B)=>kn(N.canonicalString(),B.canonicalString()));for(const N of i){const B=BS(this.userId,N.key.path,c);D=D.add(N.key.path.popLast()),b.push(a.put(y)),b.push(s.put(B,VS))}return D.forEach(N=>{b.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.Vn[c]=f.keys()}),Qe.waitFor(b).next(()=>f)})}lookupMutationBatch(e,t){return Cl(e).get(t).next(r=>r?(nn(r.userId===this.userId),Kd(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?Qe.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Cl(e).X({index:"userMutationsIndex",range:i},(a,c,f)=>{c.userId===this.userId&&(nn(c.batchId>=r),s=Kd(this.serializer,c)),f.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Cl(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cl(e).j("userMutationsIndex",t).next(r=>r.map(i=>Kd(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Q0(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Xd(e).X({range:i},(a,c,f)=>{const[y,b,D]=a,N=mu(b);if(y===this.userId&&t.path.isEqual(N))return Cl(e).get(D).next(B=>{if(!B)throw Yt();nn(B.userId===this.userId),s.push(Kd(this.serializer,B))});f.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hr(kn);const i=[];return t.forEach(s=>{const a=Q0(this.userId,s.path),c=IDBKeyRange.lowerBound(a),f=Xd(e).X({range:c},(y,b,D)=>{const[N,B,U]=y,K=mu(B);N===this.userId&&s.path.isEqual(K)?r=r.add(U):D.done()});i.push(f)}),Qe.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Q0(this.userId,r),a=IDBKeyRange.lowerBound(s);let c=new Hr(kn);return Xd(e).X({range:a},(f,y,b)=>{const[D,N,B]=f,U=mu(N);D===this.userId&&r.isPrefixOf(U)?U.length===i&&(c=c.add(B)):b.done()}).next(()=>this.Dn(e,c))}Dn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Cl(e).get(s).next(a=>{if(null===a)throw Yt();nn(a.userId===this.userId),r.push(Kd(this.serializer,a))}))}),Qe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return k2(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),Qe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Qe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Xd(e).X({range:r},(s,a,c)=>{if(s[0]===this.userId){const f=mu(s[1]);i.push(f)}else c.done()}).next(()=>{nn(0===i.length)})})}containsKey(e,t){return LE(e,this.userId,t)}xn(e){return $1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function LE(n,e,t){const r=Q0(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return Xd(n).X({range:s,Y:!0},(c,f,y)=>{const[b,D,N]=c;b===e&&D===i&&(a=!0),y.done()}).next(()=>a)}function Cl(n){return cs(n,"mutations")}function Xd(n){return cs(n,"documentMutations")}function $1(n){return cs(n,"mutationQueues")}class zf{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new zf(0)}static Mn(){return new zf(-1)}}class M2{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new zf(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>sn.fromTimestamp(new Fr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Yg(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(nn(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Yg(e).X((a,c)=>{const f=jg(c);f.sequenceNumber<=t&&null===r.get(f.targetId)&&(i++,s.push(this.removeTargetData(e,f)))}).next(()=>Qe.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Yg(e).X((r,i)=>{const s=jg(i);t(s)})}$n(e){return FE(e).get("targetGlobalKey").next(t=>(nn(null!==t),t))}On(e,t){return FE(e).put("targetGlobalKey",t)}Fn(e,t){return Yg(e).put(ME(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=bl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Yg(e).X({range:i,index:"queryTargetsIndex"},(a,c,f)=>{const y=jg(c);O_(t,y.target)&&(s=y,f.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Sl(e);return t.forEach(a=>{const c=Is(a.path);i.push(s.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,a))}),Qe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Sl(e);return Qe.forEach(t,s=>{const a=Is(s.path);return Qe.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Sl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Sl(e);let s=Fn();return i.X({range:r,Y:!0},(a,c,f)=>{const y=mu(a[1]),b=new Bt(y);s=s.add(b)}).next(()=>s)}containsKey(e,t){const r=Is(t.path),i=IDBKeyRange.bound([r],[$T(r)],!1,!0);let s=0;return Sl(e).X({index:"documentTargetsIndex",Y:!0,range:i},([a,c],f,y)=>{0!==a&&(s++,y.done())}).next(()=>s>0)}le(e,t){return Yg(e).get(t).next(r=>r?jg(r):null)}}function Yg(n){return cs(n,"targets")}function FE(n){return cs(n,"targetGlobal")}function Sl(n){return cs(n,"targetDocuments")}function UE([n,e],[t,r]){const i=kn(n,t);return 0===i?kn(e,r):i}class H1{constructor(e){this.Ln=e,this.buffer=new Hr(UE),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();UE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class BE{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;It("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,at.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){_l(r)?It("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield wc(r)}yield t.Qn(3e5)}))}}class q1{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Qe.resolve($o.ct);const r=new H1(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector","Garbage collection skipped; disabled"),Qe.resolve(j1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),j1):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,s,a,c,f,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(It("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,a=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,c=Date.now(),this.removeTargets(e,r,t))).next(D=>(s=D,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(y=Date.now(),S_()<=lf.in.DEBUG&&It("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${a-b}ms\n\tDetermined least recently used ${i} in `+(c-a)+`ms\n\tRemoved ${s} targets in `+(f-c)+`ms\n\tRemoved ${D} documents in `+(y-f)+`ms\nTotal Duration: ${y-b}ms`),Qe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:D})))}}class z1{constructor(e,t){this.db=e,this.garbageCollector=function G1(n,e){return new q1(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return Q_(e,r)}removeReference(e,t,r){return Q_(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Q_(e,t)}Xn(e,t){return function(r,i){let s=!1;return $1(r).Z(a=>LE(r,a,i).next(c=>(c&&(s=!0),Qe.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Yn(e,(a,c)=>{if(c<=t){const f=this.Xn(e,a).next(y=>{if(!y)return s++,r.getEntry(e,a).next(()=>(r.removeEntry(a,sn.min()),Sl(e).delete([0,Is(a.path)])))});i.push(f)}}).next(()=>Qe.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Q_(e,t)}Yn(e,t){const r=Sl(e);let i,s=$o.ct;return r.X({index:"documentTargetsIndex"},([a,c],{path:f,sequenceNumber:y})=>{0===a?(s!==$o.ct&&t(new Bt(mu(i)),s),s=y,i=f):s=$o.ct}).next(()=>{s!==$o.ct&&t(new Bt(mu(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Q_(n,e){return Sl(n).put((r=n.currentSequenceNumber,{targetId:0,path:Is(e.path),sequenceNumber:r}));var r}class W1{constructor(){this.changes=new Ic(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Qe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class K1{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Kf(e).put(r)}removeEntry(e,t,r){return Kf(e).delete(function(i,s){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],kE(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=qr.newInvalidDocument(t);return Kf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(X_(t))},(i,s)=>{r=this.ts(t,s)}).next(()=>r)}es(e,t){let r={size:0,document:qr.newInvalidDocument(t)};return Kf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(X_(t))},(i,s)=>{r={document:this.ts(t,s),size:Kg(s)}}).next(()=>r)}getEntries(e,t){let r=hs();return this.ns(e,t,(i,s)=>{const a=this.ts(i,s);r=r.insert(i,a)}).next(()=>r)}ss(e,t){let r=hs(),i=new Mr(Bt.comparator);return this.ns(e,t,(s,a)=>{const c=this.ts(s,a);r=r.insert(s,c),i=i.insert(s,Kg(a))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return Qe.resolve();let i=new Hr(Qg);t.forEach(f=>i=i.add(f));const s=IDBKeyRange.bound(X_(i.first()),X_(i.last())),a=i.getIterator();let c=a.getNext();return Kf(e).X({index:"documentKeyIndex",range:s},(f,y,b)=>{const D=Bt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;c&&Qg(c,D)<0;)r(c,null),c=a.getNext();c&&c.isEqual(D)&&(r(c,y),c=a.hasNext()?a.getNext():null),c?b.G(X_(c)):b.done()}).next(()=>{for(;c;)r(c,null),c=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),kE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Kf(e).j(IDBKeyRange.bound(a,c,!0)).next(f=>{let y=hs();for(const b of f){const D=this.ts(Bt.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);D.isFoundDocument()&&(Hd(t,D)||i.has(D.key))&&(y=y.insert(D.key,D))}return y})}getAllFromCollectionGroup(e,t,r,i){let s=hs();const a=P2(t,r),c=P2(t,Gs.max());return Kf(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,c,!0)},(f,y,b)=>{const D=this.ts(Bt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(D.key,D),s.size===i&&b.done()}).next(()=>s)}newChangeBuffer(e){return new mo(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Wf(e).get("remoteDocumentGlobalKey").next(t=>(nn(!!t),t))}Zn(e,t){return Wf(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function tO(n,e){let t;if(e.document)t=SE(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Bt.fromSegments(e.noDocument.path),i=kc(e.noDocument.readTime);t=qr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Yt();{const r=Bt.fromSegments(e.unknownDocument.path),i=kc(e.unknownDocument.version);t=qr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Fr(r[0],r[1]);return sn.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(sn.min()))return r}return qr.newInvalidDocument(e)}}function VE(n){return new K1(n)}class mo extends W1{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Ic(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Hr((s,a)=>kn(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const c=this.us.get(s);if(t.push(this.os.removeEntry(e,s,c.readTime)),a.isValidDocument()){const f=AE(this.os.serializer,a);i=i.add(s.path.popLast()),r+=Kg(f)-c.size,t.push(this.os.addEntry(e,s,f))}else if(r-=c.size,this.trackRemovals){const f=AE(this.os.serializer,a.convertToNoDocument(sn.min()));t.push(this.os.addEntry(e,s,f))}}),i.forEach(s=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.os.updateMetadata(e,r)),Qe.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((s,a)=>{this.us.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function Wf(n){return cs(n,"remoteDocumentGlobal")}function Kf(n){return cs(n,"remoteDocumentsV14")}function X_(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function P2(n,e){const t=e.documentKey.path.toArray();return[n,kE(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Qg(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=kn(t[s],r[s]),i)return i;return i=kn(t.length,r.length),i||(i=kn(t[t.length-2],r[r.length-2]),i||kn(t[t.length-1],r[r.length-1]))}class R2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class yv{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Ng(r.mutation,i,zs.empty(),Fr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Fn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Fn()){const i=bu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=U_();return s.forEach((c,f)=>{a=a.insert(c,f.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=bu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Fn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let s=hs();const a=Pg(),c=Pg();return t.forEach((f,y)=>{const b=r.get(y.key);i.has(y.key)&&(void 0===b||b.mutation instanceof El)?s=s.insert(y.key,y):void 0!==b?(a.set(y.key,b.mutation.getFieldMask()),Ng(b.mutation,y,b.mutation.getFieldMask(),Fr.now())):a.set(y.key,zs.empty())}),this.recalculateAndSaveOverlays(e,s).next(f=>(f.forEach((y,b)=>a.set(y,b)),t.forEach((y,b)=>{var D;return c.set(y,new R2(b,null!==(D=a.get(y))&&void 0!==D?D:null))}),c))}recalculateAndSaveOverlays(e,t){const r=Pg();let i=new Mr((a,c)=>a-c),s=Fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const c of a)c.keys().forEach(f=>{const y=t.get(f);if(null===y)return;let b=r.get(f)||zs.empty();b=c.applyToLocalView(y,b),r.set(f,b);const D=(i.get(c.batchId)||Fn()).add(f);i=i.insert(c.batchId,D)})}).next(()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),y=f.key,b=f.value,D=pE();b.forEach(N=>{if(!s.has(N)){const B=mE(t.get(N),r.get(N));null!==B&&D.set(N,B),s=s.add(N)}}),a.push(this.documentOverlayCache.saveOverlays(e,y,D))}return Qe.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Bt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):sv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Qe.resolve(bu());let c=-1,f=s;return a.next(y=>Qe.forEach(y,(b,D)=>(c<D.largestBatchId&&(c=D.largestBatchId),s.get(b)?Qe.resolve():this.remoteDocumentCache.getEntry(e,b).next(N=>{f=f.insert(b,N)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,f,y,Fn())).next(b=>({batchId:c,changes:a1(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Bt(t)).next(r=>{let i=U_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=U_();return this.indexManager.getCollectionParents(e,i).next(a=>Qe.forEach(a,c=>{const f=(y=t,b=c.child(i),new Tl(b,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,b;return this.getDocumentsMatchingCollectionQuery(e,f,r).next(y=>{y.forEach((b,D)=>{s=s.insert(b,D)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((c,f)=>{const y=f.getKey();null===s.get(y)&&(s=s.insert(y,qr.newInvalidDocument(y)))});let a=U_();return s.forEach((c,f)=>{const y=i.get(c);void 0!==y&&Ng(y.mutation,f,zs.empty(),Fr.now()),Hd(t,f)&&(a=a.insert(c,f))}),a})}}class O2{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Qe.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Ai(r.createTime)}),Qe.resolve()}getNamedQuery(e,t){return Qe.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:PE(r.bundledQuery),readTime:Ai(r.readTime)}),Qe.resolve();var r}}class Z1{constructor(){this.overlays=new Mr(Bt.comparator),this.ls=new Map}getOverlay(e,t){return Qe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=bu();return Qe.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.we(e,t,s)}),Qe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),Qe.resolve()}getOverlaysForCollection(e,t,r){const i=bu(),s=t.length+1,a=new Bt(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const f=c.getNext().value,y=f.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&f.largestBatchId>r&&i.set(f.getKey(),f)}return Qe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Mr((y,b)=>y-b);const a=this.overlays.getIterator();for(;a.hasNext();){const y=a.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let b=s.get(y.largestBatchId);null===b&&(b=bu(),s=s.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const c=bu(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((y,b)=>c.set(y,b)),!(c.size()>=i)););return Qe.resolve(c)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const a=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new vE(t,r));let s=this.ls.get(t);void 0===s&&(s=Fn(),this.ls.set(t,s)),this.ls.set(t,s.add(r.key))}}class jE{constructor(){this.fs=new Hr(fs.ds),this.ws=new Hr(fs._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new fs(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new fs(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Bt(new nr([])),r=new fs(t,e),i=new fs(t,e+1),s=[];return this.ws.forEachInRange([r,i],a=>{this.ys(a),s.push(a.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Bt(new nr([])),r=new fs(t,e),i=new fs(t,e+1);let s=Fn();return this.ws.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new fs(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class fs{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Bt.comparator(e.key,t.key)||kn(e.As,t.As)}static _s(e,t){return kn(e.As,t.As)||Bt.comparator(e.key,t.key)}}class $E{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Hr(fs.ds)}checkEmpty(e){return Qe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.vs;this.vs++;const a=new yE(s,t,r,i);this.mutationQueue.push(a);for(const c of i)this.Rs=this.Rs.add(new fs(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Qe.resolve(a)}lookupMutationBatch(e,t){return Qe.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),s=i<0?0:i;return Qe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Qe.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new fs(t,0),i=new fs(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],a=>{const c=this.Ps(a.As);s.push(c)}),Qe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hr(kn);return t.forEach(i=>{const s=new fs(i,0),a=new fs(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,a],c=>{r=r.add(c.As)})}),Qe.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Bt.isDocumentKey(s)||(s=s.child(""));const a=new fs(new Bt(s),0);let c=new Hr(kn);return this.Rs.forEachWhile(f=>{const y=f.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(c=c.add(f.As)),!0)},a),Qe.resolve(this.Vs(c))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){nn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return Qe.forEach(t.mutations,i=>{const s=new fs(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new fs(t,0),i=this.Rs.firstAfterOrEqual(r);return Qe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Qe.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Y1{constructor(e){this.Ds=e,this.docs=new Mr(Bt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Qe.resolve(r?r.document.mutableCopy():qr.newInvalidDocument(t))}getEntries(e,t){let r=hs();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qr.newInvalidDocument(i))}),Qe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=hs();const a=t.path,c=new Bt(a.child("")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:y,value:{document:b}}=f.getNext();if(!a.isPrefixOf(y.path))break;y.path.length>a.length+1||W0(D_(b),r)<=0||(i.has(b.key)||Hd(t,b))&&(s=s.insert(b.key,b.mutableCopy()))}return Qe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Yt()}Cs(e,t){return Qe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Q1(this)}getSize(e){return Qe.resolve(this.size)}}class Q1 extends W1{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),Qe.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class vv{constructor(e){this.persistence=e,this.xs=new Ic(t=>bl(t),O_),this.lastRemoteSnapshotVersion=sn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new jE,this.targetCount=0,this.Ms=zf.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),Qe.resolve()}getLastRemoteSnapshotVersion(e){return Qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Qe.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Qe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),Qe.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new zf(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Qe.resolve()}updateTargetData(e,t){return this.Fn(t),Qe.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Qe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.xs.forEach((a,c)=>{c.sequenceNumber<=t&&null===r.get(c.targetId)&&(this.xs.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),Qe.waitFor(s).next(()=>i)}getTargetCount(e){return Qe.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return Qe.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),Qe.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),Qe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Qe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return Qe.resolve(r)}containsKey(e,t){return Qe.resolve(this.ks.containsKey(t))}}class J_{constructor(e,t){this.$s={},this.overlays={},this.Os=new $o(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new vv(this),this.indexManager=new I2,this.remoteDocumentCache=new Y1(r=>this.referenceDelegate.Ls(r)),this.serializer=new A1(t),this.qs=new O2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Z1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new $E(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){It("MemoryPersistence","Starting transaction:",e);const i=new nO(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,t){return Qe.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class nO extends K0{constructor(e){super(),this.currentSequenceNumber=e}}class ey{constructor(e){this.persistence=e,this.Qs=new jE,this.js=null}static zs(e){return new ey(e)}get Ws(){if(this.js)return this.js;throw Yt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),Qe.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),Qe.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Qe.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qe.forEach(this.Ws,r=>{const i=Bt.fromPath(r);return this.Hs(e,i).next(s=>{s||t.removeEntry(i,sn.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Qe.or([()=>Qe.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class X1{constructor(e){this.serializer=e}O(e,t,r,i){const s=new I_("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$A,{unique:!0}),c.createObjectStore("documentMutations"),ty(e),function(c){c.createObjectStore("remoteDocuments")}(e));let a=Qe.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),ty(e)),a=a.next(()=>function(c){const f=c.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:sn.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(a=a.next(()=>function(c,f){return f.store("mutations").j().next(y=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$A,{unique:!0});const b=f.store("mutations"),D=y.map(N=>b.put(N));return Qe.waitFor(D)})}(e,s))),a=a.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(a=a.next(()=>this.Ys(s))),r<6&&i>=6&&(a=a.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),r<7&&i>=7&&(a=a.next(()=>this.Zs(s))),r<8&&i>=8&&(a=a.next(()=>this.ti(e,s))),r<9&&i>=9&&(a=a.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(a=a.next(()=>this.ei(s))),r<11&&i>=11&&(a=a.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(a=a.next(()=>{!function(c){const f=c.createObjectStore("documentOverlays",{keyPath:KA});f.createIndex("collectionPathOverlayIndex",GS,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",ZA,{unique:!1})}(e)})),r<13&&i>=13&&(a=a.next(()=>function(c){const f=c.createObjectStore("remoteDocumentsV14",{keyPath:HA});f.createIndex("documentKeyIndex",Ji),f.createIndex("collectionGroupIndex",jS)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(a=a.next(()=>this.si(e,s))),r<15&&i>=15&&(a=a.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:HS}).createIndex("sequenceNumberIndex",qS,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:xg}).createIndex("documentKeyIndex",WA,{unique:!1})}(e))),a}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=Kg(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>Qe.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",a).next(c=>Qe.forEach(c,f=>{nn(f.userId===s.userId);const y=Kd(this.serializer,f);return k2(e,s.userId,y).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((a,c)=>{const f=new nr(a),y=[0,Is(f)];s.push(t.get(y).next(b=>b?Qe.resolve():t.put({targetId:0,path:Is(f),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Qe.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:zA});const r=t.store("collectionParents"),i=new zg,s=a=>{if(i.add(a)){const c=a.lastSegment(),f=a.popLast();return r.put({collectionId:c,parent:Is(f)})}};return t.store("remoteDocuments").X({Y:!0},(a,c)=>{const f=new nr(a);return s(f.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([a,c,f],y)=>{const b=mu(c);return s(b.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const s=jg(i),a=ME(this.serializer,s);return t.put(a)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((s,a)=>{const c=t.store("remoteDocumentsV14"),f=(y=a,y.document?new Bt(nr.fromString(y.document.name).popFirst(5)):y.noDocument?Bt.fromSegments(y.noDocument.path):y.unknownDocument?Bt.fromSegments(y.unknownDocument.path):Yt()).path.toArray();var y;const b={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(c.put(b))}).next(()=>Qe.waitFor(i))}si(e,t){const r=t.store("mutations"),i=VE(this.serializer),s=new J_(ey.zs,this.serializer.fe);return r.j().next(a=>{const c=new Map;return a.forEach(f=>{var y;let b=null!==(y=c.get(f.userId))&&void 0!==y?y:Fn();Kd(this.serializer,f).keys().forEach(D=>b=b.add(D)),c.set(f.userId,b)}),Qe.forEach(c,(f,y)=>{const b=new ls(y),D=Zd.de(this.serializer,b),N=s.getIndexManager(b),B=Zg.de(b,this.serializer,N,s.referenceDelegate);return new yv(i,B,D,N).recalculateAndSaveOverlaysForDocumentKeys(new QT(t,$o.ct),f).next()})})}}function ty(n){n.createObjectStore("targetDocuments",{keyPath:GA}).createIndex("documentTargetsIndex",$S,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qA,{unique:!0}),n.createObjectStore("targetGlobal")}const Tv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class HE{constructor(e,t,r,i,s,a,c,f,y,b,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=s,this.window=a,this.document=c,this.ri=y,this.oi=b,this.ui=D,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=N=>Promise.resolve(),!HE.D())throw new wt(et.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new z1(this,i),this.di=t+"main",this.serializer=new A1(f),this.wi=new gu(this.di,this.ui,new X1(this.serializer)),this.Bs=new M2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=VE(this.serializer),this.qs=new C2,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&Ui("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new wt(et.FAILED_PRECONDITION,Tv);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new $o(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,at.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,at.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,at.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Xg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(_l(e))return It("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return It("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Zf(e).get("owner").next(t=>Qe.resolve(this.Ri(t)))}Pi(e){return Xg(e).delete(this.clientId)}bi(){var e=this;return(0,at.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=cs(r,"clientMetadata");return i.j().next(s=>{const a=e.Si(s,18e5),c=s.filter(f=>-1===a.indexOf(f));return Qe.forEach(c,f=>i.delete(f.clientId)).next(()=>c)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Qe.resolve(!0):Zf(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new wt(et.FAILED_PRECONDITION,Tv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xg(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>{if(this.clientId!==i.clientId){const a=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||a&&c)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&It("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,at.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new QT(t,$o.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Xg(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Zg.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new A2(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Zd.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){It("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(a=this.ui)?yl:14===a?X0:13===a?YT:12===a?QR:11===a?ZT:void Yt();var a;let c;return this.wi.runTransaction(e,i,s,f=>(c=new QT(f,this.Os?this.Os.next():$o.ct),"readwrite-primary"===t?this.Ti(c).next(y=>!!y||this.Ei(c)).next(y=>{if(!y)throw Ui(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new wt(et.FAILED_PRECONDITION,qT);return r(c)}).next(y=>this.vi(c).next(()=>y)):this.Oi(c).next(()=>r(c)))).then(f=>(c.raiseOnCommittedEvent(),f))}Oi(e){return Zf(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new wt(et.FAILED_PRECONDITION,Tv)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zf(e).put("owner",t)}static D(){return gu.D()}Ai(e){const t=Zf(e);return t.get("owner").next(r=>this.Ri(r)?(It("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Qe.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Ui(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Rn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return It("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ui("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Ui("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zf(n){return cs(n,"owner")}function Xg(n){return cs(n,"clientMetadata")}function J1(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class qE{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Fn(),i=Fn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new qE(e,t.fromCache,r,i)}}class ex{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(s=>s||this.Gi(e,t,i,r)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(lE(t))return Qe.resolve(null);let r=go(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=$d(t,null,"F"),r=go(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=Fn(...s);return this.Ui.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(f=>{const y=this.ji(t,c);return this.zi(t,y,a,f.readTime)?this.Ki(e,$d(t,null,"F")):this.Wi(e,y,t,f)}))})))}Gi(e,t,r,i){return lE(t)||i.isEqual(sn.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(s=>{const a=this.ji(t,s);return this.zi(t,a,r,i)?this.Qi(e,t):(S_()<=lf.in.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),dE(t)),this.Wi(e,a,t,OS(i,-1)))})}ji(e,t){let r=new Hr(fE(e));return t.forEach((i,s)=>{Hd(e,s)&&(r=r.add(s))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,t){return S_()<=lf.in.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",dE(t)),this.Ui.getDocumentsMatchingQuery(e,t,Gs.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}class tx{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Mr(kn),this.Yi=new Ic(s=>bl(s),O_),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yv(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function GE(n,e,t,r){return new tx(n,e,t,r)}function nx(n,e){return Ev.apply(this,arguments)}function Ev(){return Ev=(0,at.Z)(function*(n,e){const t=jt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],c=[];let f=Fn();for(const y of i){a.push(y.batchId);for(const b of y.mutations)f=f.add(b.key)}for(const y of s){c.push(y.batchId);for(const b of y.mutations)f=f.add(b.key)}return t.localDocuments.getDocuments(r,f).next(y=>({er:y,removedBatchIds:a,addedBatchIds:c}))})})}),Ev.apply(this,arguments)}function rx(n,e){const t=jt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(a,c,f,y){const b=f.batch,D=b.keys();let N=Qe.resolve();return D.forEach(B=>{N=N.next(()=>y.getEntry(c,B)).next(U=>{const K=f.docVersions.get(B);nn(null!==K),U.version.compareTo(K)<0&&(b.applyToRemoteDocument(U,f),U.isValidDocument()&&(U.setReadTime(f.commitVersion),y.addEntry(U)))})}),N.next(()=>a.mutationQueue.removeMutationBatch(c,b))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Fn();for(let f=0;f<a.mutationResults.length;++f)a.mutationResults[f].transformResults.length>0&&(c=c.add(a.batch.mutations[f].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ix(n){const e=jt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function N2(n,e){const t=jt(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const c=[];e.targetChanges.forEach((b,D)=>{const N=i.get(D);if(!N)return;c.push(t.Bs.removeMatchingKeys(s,b.removedDocuments,D).next(()=>t.Bs.addMatchingKeys(s,b.addedDocuments,D)));let B=N.withSequenceNumber(s.currentSequenceNumber);var U,K,ie;null!==e.targetMismatches.get(D)?B=B.withResumeToken(Vi.EMPTY_BYTE_STRING,sn.min()).withLastLimboFreeSnapshotVersion(sn.min()):b.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(b.resumeToken,r)),i=i.insert(D,B),K=B,ie=b,(0===(U=N).resumeToken.approximateByteSize()||K.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0)&&c.push(t.Bs.updateTargetData(s,B))});let f=hs(),y=Fn();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,b))}),c.push(zE(s,a,e.documentUpdates).next(b=>{f=b.nr,y=b.sr})),!r.isEqual(sn.min())){const b=t.Bs.getLastRemoteSnapshotVersion(s).next(D=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(b)}return Qe.waitFor(c).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,f,y)).next(()=>f)}).then(s=>(t.Ji=i,s))}function zE(n,e,t){let r=Fn(),i=Fn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=hs();return t.forEach((c,f)=>{const y=s.get(c);f.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(c)),f.isNoDocument()&&f.version.isEqual(sn.min())?(e.removeEntry(c,f.readTime),a=a.insert(c,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||0===f.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(f),a=a.insert(c,f)):It("LocalStore","Ignoring outdated watch update for ",c,". Current version:",y.version," Watch version:",f.version)}),{nr:a,sr:i}})}function L2(n,e){const t=jt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Yf(n,e){const t=jt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(s=>s?(i=s,Qe.resolve(i)):t.Bs.allocateTargetId(r).next(a=>(i=new wl(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Qf(n,e,t){return wv.apply(this,arguments)}function wv(){return wv=(0,at.Z)(function*(n,e,t){const r=jt(n),i=r.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!_l(a))throw a;It("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),wv.apply(this,arguments)}function ny(n,e,t){const r=jt(n);let i=sn.min(),s=Fn();return r.persistence.runTransaction("Execute query","readonly",a=>function(c,f,y){const b=jt(c),D=b.Yi.get(y);return void 0!==D?Qe.resolve(b.Ji.get(D)):b.Bs.getTargetData(f,y)}(r,a,go(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(a,c.targetId).next(f=>{s=f})}).next(()=>r.Hi.getDocumentsMatchingQuery(a,e,t?i:sn.min(),t?s:Fn())).next(c=>(F2(r,hE(e),c),{documents:c,ir:s})))}function sx(n,e){const t=jt(n),r=jt(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.le(s,e).next(a=>a?a.target:null))}function ox(n,e){const t=jt(n),r=t.Xi.get(e)||sn.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,OS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(F2(t,e,i),i))}function F2(n,e,t){let r=n.Xi.get(e)||sn.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Xi.set(e,r)}function ux(){return ux=(0,at.Z)(function*(n,e,t,r){const i=jt(n);let s=Fn(),a=hs();for(const y of t){const b=e.rr(y.metadata.name);y.document&&(s=s.add(b));const D=e.ur(y);D.setReadTime(e.cr(y.metadata.readTime)),a=a.insert(b,D)}const c=i.Zi.newChangeBuffer({trackRemovals:!0}),f=yield Yf(i,(y=r,go(Mg(nr.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>zE(y,c,a).next(b=>(c.apply(y),b)).next(b=>i.Bs.removeMatchingKeysForTargetId(y,f.targetId).next(()=>i.Bs.addMatchingKeys(y,s,f.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,b.nr,b.sr)).next(()=>b.nr)))}),ux.apply(this,arguments)}function rO(n,e){return lx.apply(this,arguments)}function lx(){return lx=(0,at.Z)(function*(n,e,t=Fn()){const r=yield Yf(n,go(PE(e.bundledQuery))),i=jt(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const a=Ai(e.readTime);if(r.snapshotVersion.compareTo(a)>=0)return i.qs.saveNamedQuery(s,e);const c=r.withResumeToken(Vi.EMPTY_BYTE_STRING,a);return i.Ji=i.Ji.insert(c.targetId,c),i.Bs.updateTargetData(s,c).next(()=>i.Bs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Bs.addMatchingKeys(s,t,r.targetId)).next(()=>i.qs.saveNamedQuery(s,e))})}),lx.apply(this,arguments)}function U2(n,e){return`firestore_clients_${n}_${e}`}function B2(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function cx(n,e){return`firestore_targets_${n}_${e}`}class WE{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let s,a="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&(a="string"==typeof i.error.message&&"string"==typeof i.error.code,a&&(s=new wt(i.error.code,i.error.message))),a?new WE(e,t,i.state,s):(Ui("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new wt(r.error.code,r.error.message))),s?new Cv(e,r.state,i):(Ui("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=l1();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=WT(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new Xf(e,s):(Ui("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class dx{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new dx(t.clientId,t.onlineState):(Ui("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Sv{constructor(){this.activeTargetIds=l1()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ry{constructor(e,t,r,i,s){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Mr(kn),this.started=!1,this.yr=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=U2(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Sv),this.Tr=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,at.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const s=e.getItem(U2(e.persistenceKey,i));if(s){const a=Xf.ar(i,s);a&&(e.gr=e.gr.insert(a.clientId,a))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(cx(this.persistenceKey,e));if(r){const i=Cv.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(cx(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return It("SharedClientState","READ",e,t),t}setItem(e,t){It("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){It("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(It("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Ui("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,at.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(s){let a=$o.ct;if(null!=s)try{const c=JSON.parse(s);nn("number"==typeof c),a=c}catch(c){Ui("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==$o.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Qr(s)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new WE(this.currentUser,e,t,r),s=B2(this.persistenceKey,this.currentUser,e);this.setItem(s,i.hr())}Cr(e){const t=B2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=cx(this.persistenceKey,e),s=new Cv(e,t,r);this.setItem(i,s.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return Xf.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return WE.ar(new ls(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return Cv.ar(i,t)}br(e){return dx.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,at.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);It("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),s=this.Sr(r),a=[],c=[];return s.forEach(f=>{i.has(f)||a.push(f)}),i.forEach(f=>{s.has(f)||c.push(f)}),this.syncEngine.Wr(a,c).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=l1();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class KE{constructor(){this.Hr=new Sv,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Sv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hx{Yr(e){}shutdown(){}}class V2{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Jg=null;function xv(){return null===Jg?Jg=268435456+Math.round(2147483648*Math.random()):Jg++,"0x"+Jg.toString(16)}const j2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fx{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const _o="WebChannelConnection";class $2 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,s){const a=xv(),c=this.To(e,t);It("RestConnection",`Sending RPC '${e}' ${a}:`,c,r);const f={};return this.Eo(f,i,s),this.Ao(e,c,f,r).then(y=>(It("RestConnection",`Received RPC '${e}' ${a}: `,y),y),y=>{throw pu("RestConnection",`RPC '${e}' ${a} failed with error: `,y,"url: ",c,"request:",r),y})}vo(e,t,r,i,s,a){return this.Io(e,t,r,i,s)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+C_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,t){return`${this.mo}/v1/${t}:${j2[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const s=xv();return new Promise((a,c)=>{const f=new DS;f.setWithCredentials(!0),f.listenOnce(NA.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case $0.NO_ERROR:const b=f.getResponseJson();It(_o,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(b)),a(b);break;case $0.TIMEOUT:It(_o,`RPC '${e}' ${s} timed out`),c(new wt(et.DEADLINE_EXCEEDED,"Request time out"));break;case $0.HTTP_ERROR:const D=f.getStatus();if(It(_o,`RPC '${e}' ${s} failed with status:`,D,"response text:",f.getResponseText()),D>0){let N=f.getResponseJson();Array.isArray(N)&&(N=N[0]);const B=null==N?void 0:N.error;if(B&&B.status&&B.message){const U=function(K){const ie=K.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(ie)>=0?ie:et.UNKNOWN}(B.status);c(new wt(U,B.message))}else c(new wt(et.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new wt(et.UNAVAILABLE,"Connection failed."));break;default:Yt()}}finally{It(_o,`RPC '${e}' ${s} completed.`)}});const y=JSON.stringify(i);It(_o,`RPC '${e}' ${s} sending request:`,i),f.send(t,"POST",y,r,15)})}Ro(e,t,r){const i=xv(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=SS(),c=OA(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;void 0!==y&&(f.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(f.xmlHttpFactory=new LA({})),this.Eo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const b=s.join("");It(_o,`Creating RPC '${e}' stream ${i}: ${b}`,f);const D=a.createWebChannel(b,f);let N=!1,B=!1;const U=new fx({ro:ie=>{B?It(_o,`Not sending because RPC '${e}' stream ${i} is closed:`,ie):(N||(It(_o,`Opening RPC '${e}' stream ${i} transport.`),D.open(),N=!0),It(_o,`RPC '${e}' stream ${i} sending:`,ie),D.send(ie))},oo:()=>D.close()}),K=(ie,Ae,be)=>{ie.listen(Ae,Le=>{try{be(Le)}catch(Me){setTimeout(()=>{throw Me},0)}})};return K(D,H0.EventType.OPEN,()=>{B||It(_o,`RPC '${e}' stream ${i} transport opened.`)}),K(D,H0.EventType.CLOSE,()=>{B||(B=!0,It(_o,`RPC '${e}' stream ${i} transport closed`),U.wo())}),K(D,H0.EventType.ERROR,ie=>{B||(B=!0,pu(_o,`RPC '${e}' stream ${i} transport errored:`,ie),U.wo(new wt(et.UNAVAILABLE,"The operation could not be completed")))}),K(D,H0.EventType.MESSAGE,ie=>{var Ae;if(!B){const be=ie.data[0];nn(!!be);const Le=be,Me=Le.error||(null===(Ae=Le[0])||void 0===Ae?void 0:Ae.error);if(Me){It(_o,`RPC '${e}' stream ${i} received error:`,Me);const Ee=Me.status;let pt=function(hn){const ct=ji[hn];if(void 0!==ct)return _1(ct)}(Ee),Nt=Me.message;void 0===pt&&(pt=et.INTERNAL,Nt="Unknown error status: "+Ee+" with message "+Me.message),B=!0,U.wo(new wt(pt,Nt)),D.close()}else It(_o,`RPC '${e}' stream ${i} received:`,be),U._o(be)}}),K(c,xS.STAT_EVENT,ie=>{ie.stat===BT.PROXY?It(_o,`RPC '${e}' stream ${i} detected buffering proxy`):ie.stat===BT.NOPROXY&&It(_o,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{U.fo()},0),U}}function px(){return"undefined"!=typeof window?window:null}function em(){return"undefined"!=typeof document?document:null}function iy(n){return new y2(n,!0)}class gx{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&It("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class H2{constructor(e,t,r,i,s,a,c,f){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new gx(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,at.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,at.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,at.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===et.RESOURCE_EXHAUSTED?(Ui(t.toString()),Ui("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===et.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new wt(et.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,at.Z)(function*(){e.state=0,e.start()}))}tu(e){return It("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iO extends H2{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function xE(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(f=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:Yt(),i=e.targetChange.targetIds||[],s=function(f,y){return f.useProto3Json?(nn(void 0===y||"string"==typeof y),Vi.fromBase64String(y||"")):(nn(void 0===y||y instanceof Uint8Array),Vi.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(f){const y=void 0===f.code?et.UNKNOWN:_1(f.code);return new wt(y,f.message||"")}(a);t=new cv(r,i,s,c||null)}else if("documentChange"in e){const r=e.documentChange,i=Ac(n,r.document.name),s=Ai(r.document.updateTime),a=r.document.createTime?Ai(r.document.createTime):sn.min(),c=new ks({mapValue:{fields:r.document.fields}}),f=qr.newFoundDocument(i,s,a,c);t=new Ug(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Ac(n,r.document),s=r.readTime?Ai(r.readTime):sn.min(),a=qr.newNoDocument(i,s);t=new Ug([],r.removedTargetIds||[],a.key,a)}else if("documentRemove"in e){const r=e.documentRemove,i=Ac(n,r.document);t=new Ug([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Yt();{const r=e.filter,{count:i=0,unchangedNames:s}=r,a=new p2(i,s);t=new CE(r.targetId,a)}}var f;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return sn.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?sn.min():s.readTime?Ai(s.readTime):sn.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=K_(this.serializer),t.addTarget=function(i,s){let a;const c=s.target;if(a=Nf(c)?{documents:DE(i,c)}:{query:gv(i,c)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=w1(i,s.resumeToken);const f=hv(i,s.expectedCount);null!==f&&(a.expectedCount=f)}else if(s.snapshotVersion.compareTo(sn.min())>0){a.readTime=z_(i,s.snapshotVersion.toTimestamp());const f=hv(i,s.expectedCount);null!==f&&(a.expectedCount=f)}return a}(this.serializer,e);const r=function b2(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Yt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=K_(this.serializer),t.removeTarget=e,this.Wo(t)}}class q2 extends H2{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(nn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function v2(n,e){return n&&n.length>0?(nn(void 0!==e),n.map(t=>function(r,i){let s=Ai(r.updateTime?r.updateTime:i);return s.isEqual(sn.min())&&(s=Ai(i)),new Og(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ai(e.commitTime);return this.listener.cu(r,t)}return nn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=K_(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Gd(this.serializer,r))};this.Wo(t)}}class G2 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new wt(et.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new wt(et.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,t,r,s,a,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new wt(et.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class W2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ui(t),this.mu=!1):It("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class ZE{constructor(e,t,r,i,s){var a=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(c=>{r.enqueueAndForget((0,at.Z)(function*(){var f;Mc(a)&&(It("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,at.Z)(function*(y){const b=jt(y);b.vu.add(4),yield tm(b),b.bu.set("Unknown"),b.vu.delete(4),yield sy(b)}),function(y){return f.apply(this,arguments)})(a))}))}),this.bu=new W2(r,i)}}function sy(n){return oa.apply(this,arguments)}function oa(){return oa=(0,at.Z)(function*(n){if(Mc(n))for(const e of n.Ru)yield e(!0)}),oa.apply(this,arguments)}function tm(n){return oy.apply(this,arguments)}function oy(){return oy=(0,at.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),oy.apply(this,arguments)}function Dv(n,e){const t=jt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),QE(t)?Iv(t):rm(t).Ko()&&uy(t,e))}function ay(n,e){const t=jt(n),r=rm(t);t.Au.delete(e),r.Ko()&&YE(t,e),0===t.Au.size&&(r.Ko()?r.jo():Mc(t)&&t.bu.set("Unknown"))}function uy(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(sn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rm(n).su(e)}function YE(n,e){n.Vu.qt(e),rm(n).iu(e)}function Iv(n){n.Vu=new m2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),rm(n).start(),n.bu.gu()}function QE(n){return Mc(n)&&!rm(n).Uo()&&n.Au.size>0}function Mc(n){return 0===jt(n).vu.size}function _x(n){n.Vu=void 0}function K2(n){return XE.apply(this,arguments)}function XE(){return XE=(0,at.Z)(function*(n){n.Au.forEach((e,t)=>{uy(n,e)})}),XE.apply(this,arguments)}function JE(n,e){return Pc.apply(this,arguments)}function Pc(){return Pc=(0,at.Z)(function*(n,e){_x(n),QE(n)?(n.bu.Iu(e),Iv(n)):n.bu.set("Unknown")}),Pc.apply(this,arguments)}function yx(n,e,t){return Av.apply(this,arguments)}function Av(){return Av=(0,at.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof cv&&2===e.state&&e.cause)try{yield(r=(0,at.Z)(function*(i,s){const a=s.cause;for(const c of s.targetIds)i.Au.has(c)&&(yield i.remoteSyncer.rejectListen(c,a),i.Au.delete(c),i.Vu.removeTarget(c))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){It("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield kv(n,r)}else if(e instanceof Ug?n.Vu.Ht(e):e instanceof CE?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(sn.min()))try{const r=yield ix(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const a=i.Vu.ce(s);return a.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const y=i.Au.get(f);y&&i.Au.set(f,y.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,f)=>{const y=i.Au.get(c);if(!y)return;i.Au.set(c,y.withResumeToken(Vi.EMPTY_BYTE_STRING,y.snapshotVersion)),YE(i,c);const b=new wl(y.target,c,f,y.sequenceNumber);uy(i,b)}),i.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){It("RemoteStore","Failed to raise snapshot:",r),yield kv(n,r)}var r}),Av.apply(this,arguments)}function kv(n,e,t){return vx.apply(this,arguments)}function vx(){return vx=(0,at.Z)(function*(n,e,t){if(!_l(e))throw e;n.vu.add(1),yield tm(n),n.bu.set("Offline"),t||(t=()=>ix(n.localStore)),n.asyncQueue.enqueueRetryable((0,at.Z)(function*(){It("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield sy(n)}))}),vx.apply(this,arguments)}function bx(n,e){return e().catch(t=>kv(n,t,e))}function nm(n){return ew.apply(this,arguments)}function ew(){return ew=(0,at.Z)(function*(n){const e=jt(n),t=Jf(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Tx(e);)try{const i=yield L2(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,Z2(e,i)}catch(i){yield kv(e,i)}Ex(e)&&Y2(e)}),ew.apply(this,arguments)}function Tx(n){return Mc(n)&&n.Eu.length<10}function Z2(n,e){n.Eu.push(e);const t=Jf(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function Ex(n){return Mc(n)&&!Jf(n).Uo()&&n.Eu.length>0}function Y2(n){Jf(n).start()}function tw(n){return Mv.apply(this,arguments)}function Mv(){return Mv=(0,at.Z)(function*(n){Jf(n).hu()}),Mv.apply(this,arguments)}function Q2(n){return nw.apply(this,arguments)}function nw(){return nw=(0,at.Z)(function*(n){const e=Jf(n);for(const t of n.Eu)e.uu(t.mutations)}),nw.apply(this,arguments)}function wx(n,e,t){return ly.apply(this,arguments)}function ly(){return ly=(0,at.Z)(function*(n,e,t){const r=n.Eu.shift(),i=lv.from(r,e,t);yield bx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield nm(n)}),ly.apply(this,arguments)}function rw(n,e){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,at.Z)(function*(n,e){var t;e&&Jf(n).ou&&(yield(t=(0,at.Z)(function*(r,i){if(m1(s=i.code)&&s!==et.ABORTED){const a=r.Eu.shift();Jf(r).Qo(),yield bx(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),yield nm(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),Ex(n)&&Y2(n)}),Pv.apply(this,arguments)}function Cx(n,e){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,at.Z)(function*(n,e){const t=jt(n);t.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const r=Mc(t);t.vu.add(3),yield tm(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield sy(t)}),Rv.apply(this,arguments)}function Ov(n,e){return iw.apply(this,arguments)}function iw(){return iw=(0,at.Z)(function*(n,e){const t=jt(n);e?(t.vu.delete(2),yield sy(t)):e||(t.vu.add(2),yield tm(t),t.bu.set("Unknown"))}),iw.apply(this,arguments)}function rm(n){return n.Su||(n.Su=function(e,t,r){const i=jt(e);return i.fu(),new iO(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:K2.bind(null,n),ao:JE.bind(null,n),nu:yx.bind(null,n)}),n.Ru.push(function(){var e=(0,at.Z)(function*(t){t?(n.Su.Qo(),QE(n)?Iv(n):n.bu.set("Unknown")):(yield n.Su.stop(),_x(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Jf(n){return n.Du||(n.Du=function(e,t,r){const i=jt(e);return i.fu(),new q2(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:tw.bind(null,n),ao:rw.bind(null,n),au:Q2.bind(null,n),cu:wx.bind(null,n)}),n.Ru.push(function(){var e=(0,at.Z)(function*(t){t?(n.Du.Qo(),yield nm(n)):(yield n.Du.stop(),n.Eu.length>0&&(It("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class Sx{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,c=new Sx(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new wt(et.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ep(n,e){if(Ui("AsyncQueue",`${e}: ${n}`),_l(n))return new wt(et.UNAVAILABLE,`${e}: ${n}`);throw n}class im{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Bt.comparator(t.key,r.key):(t,r)=>Bt.comparator(t.key,r.key),this.keyedMap=U_(),this.sortedSet=new Mr(this.comparator)}static emptySet(e){return new im(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof im)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new im;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class xx{constructor(){this.Cu=new Mr(Bt.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Yt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class sm{constructor(e,t,r,i,s,a,c,f,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new sm(e,t,im.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&L_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class sO{constructor(){this.Nu=void 0,this.listeners=[]}}class oO{constructor(){this.queries=new Ic(e=>i1(e),L_),this.onlineState="Unknown",this.ku=new Set}}function Dx(n,e){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,at.Z)(function*(n,e){const t=jt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new sO),i)try{s.Nu=yield t.onListen(r)}catch(a){const c=ep(a,`Initialization of query '${dE(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&ow(t)}),Ix.apply(this,arguments)}function Ax(n,e){return sw.apply(this,arguments)}function sw(){return sw=(0,at.Z)(function*(n,e){const t=jt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const a=s.listeners.indexOf(e);a>=0&&(s.listeners.splice(a,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),sw.apply(this,arguments)}function Nv(n,e){const t=jt(n);let r=!1;for(const i of e){const a=t.queries.get(i.query);if(a){for(const c of a.listeners)c.$u(i)&&(r=!0);a.Nu=i}}r&&ow(t)}function X2(n,e,t){const r=jt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function ow(n){n.ku.forEach(e=>{e.next()})}class Lv{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new sm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=sm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class tp{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class aw{constructor(e){this.serializer=e}rr(e){return Ac(this.serializer,e)}ur(e){return e.metadata.exists?SE(this.serializer,e.document,!1):qr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Ai(e)}}class uw{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Fv(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=nr.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new aw(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.rr(i.metadata.name);for(const a of i.metadata.queries){const c=(t.get(a)||Fn()).add(s);t.set(a,c)}}return t}complete(){var e=this;return(0,at.Z)(function*(){const t=yield function ax(n,e,t,r){return ux.apply(this,arguments)}(e.localStore,new aw(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield rO(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Fv(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class kx{constructor(e){this.key=e}}class Uv{constructor(e){this.key=e}}class Bv{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Fn(),this.mutatedKeys=Fn(),this.tc=fE(e),this.ec=new im(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new xx,i=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1;const f="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,D)=>{const N=i.get(b),B=Hd(this.query,D)?D:null,U=!!N&&this.mutatedKeys.has(N.key),K=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let ie=!1;N&&B?N.data.isEqual(B.data)?U!==K&&(r.track({type:3,doc:B}),ie=!0):this.rc(N,B)||(r.track({type:2,doc:B}),ie=!0,(f&&this.tc(B,f)>0||y&&this.tc(B,y)<0)&&(c=!0)):!N&&B?(r.track({type:0,doc:B}),ie=!0):N&&!B&&(r.track({type:1,doc:N}),ie=!0,(f||y)&&(c=!0)),ie&&(B?(a=a.add(B),s=K?s.add(b):s.delete(b)):(a=a.delete(b),s=s.delete(b)))}),null!==this.query.limit)for(;a.size>this.query.limit;){const b="F"===this.query.limitType?a.last():a.first();a=a.delete(b.key),s=s.delete(b.key),r.track({type:1,doc:b})}return{ec:a,ic:r,zi:c,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((y,b)=>function(D,N){const B=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yt()}};return B(D)-B(N)}(y.type,b.type)||this.tc(y.doc,b.doc)),this.oc(r);const a=t?this.uc():[],c=0===this.Zu.size&&this.current?1:0,f=c!==this.Xu;return this.Xu=c,0!==s.length||f?{snapshot:new sm(this.query,e.ec,i,s,e.mutatedKeys,0===c,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:a}:{cc:a}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new xx,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Fn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new Uv(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new kx(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Fn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return sm.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Vv{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class aO{constructor(e){this.key=e,this.fc=!1}}class uO{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.dc={},this.wc=new Ic(c=>i1(c),L_),this._c=new Map,this.mc=new Set,this.gc=new Mr(Bt.comparator),this.yc=new Map,this.Ic=new jE,this.Tc={},this.Ec=new Map,this.Ac=zf.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function lO(n,e){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,at.Z)(function*(n,e){const t=_t(n);let r,i;const s=t.wc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const a=yield Yf(t.localStore,go(e)),c=t.sharedClientState.addLocalQueryTarget(a.targetId);r=a.targetId,i=yield jv(t,e,r,"current"===c,a.resumeToken),t.isPrimaryClient&&Dv(t.remoteStore,a)}return i}),Mx.apply(this,arguments)}function jv(n,e,t,r,i){return lw.apply(this,arguments)}function lw(){return lw=(0,at.Z)(function*(n,e,t,r,i){n.Rc=(D,N,B)=>{return(U=(0,at.Z)(function*(K,ie,Ae,be){let Le=ie.view.sc(Ae);Le.zi&&(Le=yield ny(K.localStore,ie.query,!1).then(({documents:pt})=>ie.view.sc(pt,Le)));const Me=be&&be.targetChanges.get(ie.targetId),Ee=ie.view.applyChanges(Le,K.isPrimaryClient,Me);return Ux(K,ie.targetId,Ee.cc),Ee.snapshot}),function(K,ie,Ae,be){return U.apply(this,arguments)})(n,D,N,B);var U};const s=yield ny(n.localStore,e,!0),a=new Bv(e,s.ir),c=a.sc(s.documents),f=Vf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=a.applyChanges(c,n.isPrimaryClient,f);Ux(n,t,y.cc);const b=new Vv(e,t,a);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),y.snapshot}),lw.apply(this,arguments)}function J2(n,e){return cw.apply(this,arguments)}function cw(){return cw=(0,at.Z)(function*(n,e){const t=jt(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(s=>!L_(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Qf(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),ay(t.remoteStore,r.targetId),om(t,r.targetId)}).catch(wc))):(om(t,r.targetId),yield Qf(t.localStore,r.targetId,!0))}),cw.apply(this,arguments)}function $v(){return $v=(0,at.Z)(function*(n,e,t){const r=Mt(n);try{const i=yield function(s,a){const c=jt(s),f=Fr.now(),y=a.reduce((N,B)=>N.add(B.key),Fn());let b,D;return c.persistence.runTransaction("Locally write mutations","readwrite",N=>{let B=hs(),U=Fn();return c.Zi.getEntries(N,y).next(K=>{B=K,B.forEach((ie,Ae)=>{Ae.isValidDocument()||(U=U.add(ie))})}).next(()=>c.localDocuments.getOverlayedDocuments(N,B)).next(K=>{b=K;const ie=[];for(const Ae of a){const be=h2(Ae,b.get(Ae.key).overlayedDocument);null!=be&&ie.push(new El(Ae.key,be,XS(be.value.mapValue),Xr.exists(!0)))}return c.mutationQueue.addMutationBatch(N,f,ie,a)}).next(K=>{D=K;const ie=K.applyToLocalDocumentSet(b,U);return c.documentOverlayCache.saveOverlays(N,K.batchId,ie)})}).then(()=>({batchId:D.batchId,changes:a1(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let f=s.Tc[s.currentUser.toKey()];f||(f=new Mr(kn)),f=f.insert(a,c),s.Tc[s.currentUser.toKey()]=f}(r,i.batchId,t),yield Jd(r,i.changes),yield nm(r.remoteStore)}catch(i){const s=ep(i,"Failed to persist write");t.reject(s)}}),$v.apply(this,arguments)}function dw(n,e){return Hv.apply(this,arguments)}function Hv(){return Hv=(0,at.Z)(function*(n,e){const t=jt(n);try{const r=yield N2(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.yc.get(s);a&&(nn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.fc=!0:i.modifiedDocuments.size>0?nn(a.fc):i.removedDocuments.size>0&&(nn(a.fc),a.fc=!1))}),yield Jd(t,r,e)}catch(r){yield wc(r)}}),Hv.apply(this,arguments)}function Px(n,e,t){const r=jt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((s,a)=>{const c=a.view.Mu(e);c.snapshot&&i.push(c.snapshot)}),function(s,a){const c=jt(s);c.onlineState=a;let f=!1;c.queries.forEach((y,b)=>{for(const D of b.listeners)D.Mu(a)&&(f=!0)}),f&&ow(c)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function tk(n,e,t){return qv.apply(this,arguments)}function qv(){return qv=(0,at.Z)(function*(n,e,t){const r=jt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),s=i&&i.key;if(s){let a=new Mr(Bt.comparator);a=a.insert(s,qr.newNoDocument(s,sn.min()));const c=Fn().add(s),f=new G_(sn.min(),new Map,new Mr(kn),a,c);yield dw(r,f),r.gc=r.gc.remove(s),r.yc.delete(e),Bx(r)}else yield Qf(r.localStore,e,!1).then(()=>om(r,e,t)).catch(wc)}),qv.apply(this,arguments)}function hw(n,e){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,at.Z)(function*(n,e){const t=jt(n),r=e.batch.batchId;try{const i=yield rx(t.localStore,e);Lx(t,r,null),Nx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Jd(t,i)}catch(i){yield wc(i)}}),Rx.apply(this,arguments)}function Ox(n,e,t){return cy.apply(this,arguments)}function cy(){return cy=(0,at.Z)(function*(n,e,t){const r=jt(n);try{const i=yield function(s,a){const c=jt(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let y;return c.mutationQueue.lookupMutationBatch(f,a).next(b=>(nn(null!==b),y=b.keys(),c.mutationQueue.removeMutationBatch(f,b))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,y,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,y)).next(()=>c.localDocuments.getDocuments(f,y))})}(r.localStore,e);Lx(r,e,t),Nx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Jd(r,i)}catch(i){yield wc(i)}}),cy.apply(this,arguments)}function fw(){return fw=(0,at.Z)(function*(n,e){const t=jt(n);Mc(t.remoteStore)||It("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=jt(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=ep(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),fw.apply(this,arguments)}function Nx(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function Lx(n,e,t){const r=jt(n);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function om(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||Fx(n,r)})}function Fx(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(ay(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),Bx(n))}function Ux(n,e,t){for(const r of t)r instanceof kx?(n.Ic.addReference(r.key,e),cO(n,r)):r instanceof Uv?(It("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||Fx(n,r.key)):Yt()}function cO(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(It("SyncEngine","New document in limbo: "+t),n.mc.add(r),Bx(n))}function Bx(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Bt(nr.fromString(e)),r=n.Ac.next();n.yc.set(r,new aO(t)),n.gc=n.gc.insert(t,r),Dv(n.remoteStore,new wl(go(Mg(t.path)),r,"TargetPurposeLimboResolution",$o.ct))}}function Jd(n,e,t){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,at.Z)(function*(n,e,t){const r=jt(n),i=[],s=[],a=[];var c;r.wc.isEmpty()||(r.wc.forEach((c,f)=>{a.push(r.Rc(f,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,(null==y?void 0:y.fromCache)?"not-current":"current"),y){i.push(y);const b=qE.Li(f.targetId,y);s.push(b)}}))}),yield Promise.all(a),r.dc.nu(i),yield(c=(0,at.Z)(function*(f,y){const b=jt(f);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>Qe.forEach(y,N=>Qe.forEach(N.Fi,B=>b.persistence.referenceDelegate.addReference(D,N.targetId,B)).next(()=>Qe.forEach(N.Bi,B=>b.persistence.referenceDelegate.removeReference(D,N.targetId,B)))))}catch(D){if(!_l(D))throw D;It("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const N=D.targetId;if(!D.fromCache){const B=b.Ji.get(N),K=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);b.Ji=b.Ji.insert(N,K)}}}),function(f,y){return c.apply(this,arguments)})(r.localStore,s))}),Vx.apply(this,arguments)}function rk(n,e){return jx.apply(this,arguments)}function jx(){return jx=(0,at.Z)(function*(n,e){const t=jt(n);if(!t.currentUser.isEqual(e)){It("SyncEngine","User change. New user:",e.toKey());const r=yield nx(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(a=>{a.forEach(c=>{c.reject(new wt(et.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Jd(t,r.er)}var i}),jx.apply(this,arguments)}function dO(n,e){const t=jt(n),r=t.yc.get(e);if(r&&r.fc)return Fn().add(r.key);{let i=Fn();const s=t._c.get(e);if(!s)return i;for(const a of s){const c=t.wc.get(a);i=i.unionWith(c.view.nc)}return i}}function hO(n,e){return $x.apply(this,arguments)}function $x(){return $x=(0,at.Z)(function*(n,e){const t=jt(n),r=yield ny(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&Ux(t,e.targetId,i.cc),i}),$x.apply(this,arguments)}function o(n,e){return u.apply(this,arguments)}function u(){return u=(0,at.Z)(function*(n,e){const t=jt(n);return ox(t.localStore,e).then(r=>Jd(t,r))}),u.apply(this,arguments)}function l(n,e,t,r){return d.apply(this,arguments)}function d(){return d=(0,at.Z)(function*(n,e,t,r){const i=jt(n),s=yield function(a,c){const f=jt(a),y=jt(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",b=>y.Sn(b,c).next(D=>D?f.localDocuments.getDocuments(b,D):Qe.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield nm(i.remoteStore):"acknowledged"===t||"rejected"===t?(Lx(i,e,r||null),Nx(i,e),c=e,jt(jt(i.localStore).mutationQueue).Cn(c)):Yt(),yield Jd(i,s)):It("SyncEngine","Cannot apply mutation batch with id: "+e)}),d.apply(this,arguments)}function _(){return _=(0,at.Z)(function*(n,e){const t=jt(n);if(_t(t),Mt(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield E(t,r.toArray());t.vc=!0,yield Ov(t.remoteStore,!0);for(const s of i)Dv(t.remoteStore,s)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then(()=>(om(t,a),Qf(t.localStore,a,!0))),ay(t.remoteStore,a)}),yield i,yield E(t,r),function(s){const a=jt(s);a.yc.forEach((c,f)=>{ay(a.remoteStore,f)}),a.Ic.Ts(),a.yc=new Map,a.gc=new Mr(Bt.comparator)}(t),t.vc=!1,yield Ov(t.remoteStore,!1)}}),_.apply(this,arguments)}function E(n,e,t){return x.apply(this,arguments)}function x(){return x=(0,at.Z)(function*(n,e,t){const r=jt(n),i=[],s=[];for(const a of e){let c;const f=r._c.get(a);if(f&&0!==f.length){c=yield Yf(r.localStore,go(f[0]));for(const y of f){const b=r.wc.get(y),D=yield hO(r,b);D.snapshot&&s.push(D.snapshot)}}else{const y=yield sx(r.localStore,a);c=yield Yf(r.localStore,y),yield jv(r,M(y),a,!1,c.resumeToken)}i.push(c)}return r.dc.nu(s),i}),x.apply(this,arguments)}function M(n){return r1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function L(n){const e=jt(n);return jt(jt(e.localStore).persistence).$i()}function q(n,e,t,r){return ee.apply(this,arguments)}function ee(){return ee=(0,at.Z)(function*(n,e,t,r){const i=jt(n);if(i.vc)return void It("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=yield ox(i.localStore,hE(s[0])),c=G_.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Vi.EMPTY_BYTE_STRING);yield Jd(i,a,c);break}case"rejected":yield Qf(i.localStore,e,!0),om(i,e,r);break;default:Yt()}}),ee.apply(this,arguments)}function Te(n,e,t){return $e.apply(this,arguments)}function $e(){return $e=(0,at.Z)(function*(n,e,t){const r=_t(n);if(r.vc){for(const i of e){if(r._c.has(i)){It("SyncEngine","Adding an already active target "+i);continue}const s=yield sx(r.localStore,i),a=yield Yf(r.localStore,s);yield jv(r,M(s),a.targetId,!1,a.resumeToken),Dv(r.remoteStore,a)}for(const i of t)r._c.has(i)&&(yield Qf(r.localStore,i,!1).then(()=>{ay(r.remoteStore,i),om(r,i)}).catch(wc))}}),$e.apply(this,arguments)}function _t(n){const e=jt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tk.bind(null,e),e.dc.nu=Nv.bind(null,e.eventManager),e.dc.Pc=X2.bind(null,e.eventManager),e}function Mt(n){const e=jt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ox.bind(null,e),e}class Kt{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,at.Z)(function*(){t.serializer=iy(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return GE(this.persistence,new ex,e.initialUser,this.serializer)}createPersistence(e){return new J_(ey.zs,this.serializer)}createSharedClientState(e){return new KE}terminate(){var e=this;return(0,at.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class an extends Kt{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,at.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield Mt(r.Vc.syncEngine),yield nm(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return GE(this.persistence,new ex,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new BE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new zT(t,this.persistence);return new FS(e.asyncQueue,r)}createPersistence(e){const t=J1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ws.withCacheSize(this.cacheSizeBytes):Ws.DEFAULT;return new HE(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,px(),em(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new KE}}class Kn extends an{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,at.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof ry&&(r.sharedClientState.syncEngine={jr:l.bind(null,i),zr:q.bind(null,i),Wr:Te.bind(null,i),$i:L.bind(null,i),Qr:o.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var s=(0,at.Z)(function*(a){yield function p(n,e){return _.apply(this,arguments)}(r.Vc.syncEngine,a),r.gcScheduler&&(a&&!r.gcScheduler.started?r.gcScheduler.start():a||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(a&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():a||r.indexBackfillerScheduler.stop())});return function(a){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=px();if(!ry.D(t))throw new wt(et.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=J1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ry(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Xn{initialize(e,t){var r=this;return(0,at.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Px(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=rk.bind(null,r.syncEngine),yield Ov(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new oO}createDatastore(e){const t=iy(e.databaseInfo.databaseId),r=new $2(e.databaseInfo);return new G2(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=c=>Px(this.syncEngine,c,0),a=V2.D()?new V2:new hx,new ZE(t,r,i,s,a);var t,r,i,s,a}createSyncEngine(e,t){return function(r,i,s,a,c,f,y){const b=new uO(r,i,s,a,c,f);return y&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,at.Z)(function*(t){const r=jt(t);It("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield tm(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Ho(n,e=10240){let t=0;return{read:()=>(0,at.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,at.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class xl{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ui("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class pw{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Bi,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,at.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,at.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,at.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const s=yield e.$c(i);return new tp(JSON.parse(s),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,at.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,at.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,at.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class gw{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,at.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new wt(et.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,at.Z)(function*(s,a){const c=jt(s),f=K_(c.serializer)+"/documents",y={documents:a.map(B=>W_(c.serializer,B))},b=yield c.vo("BatchGetDocuments",f,y,a.length),D=new Map;b.forEach(B=>{const U=function D1(n,e){return"found"in e?function(t,r){nn(!!r.found);const i=Ac(t,r.found.name),s=Ai(r.found.updateTime),a=r.found.createTime?Ai(r.found.createTime):sn.min(),c=new ks({mapValue:{fields:r.found.fields}});return qr.newFoundDocument(i,s,a,c)}(n,e):"missing"in e?function(t,r){nn(!!r.missing),nn(!!r.readTime);const i=Ac(t,r.missing),s=Ai(r.readTime);return qr.newNoDocument(i,s)}(n,e):Yt()}(c.serializer,B);D.set(U.key.toString(),U)});const N=[];return a.forEach(B=>{const U=D.get(B.toString());nn(!!U),N.push(U)}),N}),function(s,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,at.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Bt.fromPath(i);e.mutations.push(new $_(s,e.precondition(s)))}),yield(r=(0,at.Z)(function*(i,s){const a=jt(i),c=K_(a.serializer)+"/documents",f={writes:s.map(y=>Gd(a.serializer,y))};yield a.Io("Commit",c,f)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Yt();t=sn.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new wt(et.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(sn.min())?Xr.exists(!1):Xr.updateTime(t):Xr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(sn.min()))throw new wt(et.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xr.updateTime(t)}return Xr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class mw{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Bc=r.maxAttempts,this.qo=new gx(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,at.Z)(function*(){const t=new gw(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Uc(s)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Cg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!m1(t)}return!1}}class _w{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ls.UNAUTHENTICATED,this.clientId=jT.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var a=(0,at.Z)(function*(c){It("FirestoreClient","Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(It("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}getConfiguration(){var e=this;return(0,at.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new wt(et.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,at.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=ep(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function am(n,e){return dy.apply(this,arguments)}function dy(){return dy=(0,at.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,at.Z)(function*(s){r.isEqual(s)||(yield nx(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),dy.apply(this,arguments)}function hy(n,e){return fy.apply(this,arguments)}function fy(){return fy=(0,at.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ik(n);It("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Cx(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>Cx(e.remoteStore,s)),n._onlineComponents=e}),fy.apply(this,arguments)}function Gv(n){return"FirebaseError"===n.name?n.code===et.FAILED_PRECONDITION||n.code===et.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function ik(n){return sk.apply(this,arguments)}function sk(){return sk=(0,at.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){It("FirestoreClient","Using user provided OfflineComponentProvider");try{yield am(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Gv(t))throw t;pu("Error using user provided cache. Falling back to memory cache: "+t),yield am(n,new Kt)}}else It("FirestoreClient","Using default OfflineComponentProvider"),yield am(n,new Kt);return n._offlineComponents}),sk.apply(this,arguments)}function Hx(n){return ok.apply(this,arguments)}function ok(){return ok=(0,at.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(It("FirestoreClient","Using user provided OnlineComponentProvider"),yield hy(n,n._uninitializedComponentsProvider._online)):(It("FirestoreClient","Using default OnlineComponentProvider"),yield hy(n,new Xn))),n._onlineComponents}),ok.apply(this,arguments)}function fO(n){return ik(n).then(e=>e.persistence)}function qx(n){return ik(n).then(e=>e.localStore)}function pO(n){return Hx(n).then(e=>e.remoteStore)}function ak(n){return Hx(n).then(e=>e.syncEngine)}function zv(n){return uk.apply(this,arguments)}function uk(){return uk=(0,at.Z)(function*(n){const e=yield Hx(n),t=e.eventManager;return t.onListen=lO.bind(null,e.syncEngine),t.onUnlisten=J2.bind(null,e.syncEngine),t}),uk.apply(this,arguments)}function mO(n,e,t={}){const r=new Bi;return n.asyncQueue.enqueueAndForget((0,at.Z)(function*(){return function(i,s,a,c,f){const y=new xl({next:D=>{s.enqueueAndForget(()=>Ax(i,b));const N=D.docs.has(a);!N&&D.fromCache?f.reject(new wt(et.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&D.fromCache&&c&&"server"===c.source?f.reject(new wt(et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(D)},error:D=>f.reject(D)}),b=new Lv(Mg(a.path),y,{includeMetadataChanges:!0,Ku:!0});return Dx(i,b)}(yield zv(n),n.asyncQueue,e,t,r)})),r.promise}function _O(n,e,t={}){const r=new Bi;return n.asyncQueue.enqueueAndForget((0,at.Z)(function*(){return function(i,s,a,c,f){const y=new xl({next:D=>{s.enqueueAndForget(()=>Ax(i,b)),D.fromCache&&"server"===c.source?f.reject(new wt(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(D)},error:D=>f.reject(D)}),b=new Lv(a,y,{includeMetadataChanges:!0,Ku:!0});return Dx(i,b)}(yield zv(n),n.asyncQueue,e,t,r)})),r.promise}function yO(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const vO=new Map;function lk(n,e,t){if(!t)throw new wt(et.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bO(n,e,t,r){if(!0===e&&!0===r)throw new wt(et.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function TO(n){if(!Bt.isDocumentKey(n))throw new wt(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function EO(n){if(Bt.isDocumentKey(n))throw new wt(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Gx(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Yt()}function ir(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new wt(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gx(n);throw new wt(et.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wO(n,e){if(e<=0)throw new wt(et.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class CO{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new wt(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new wt(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=yO(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new wt(et.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new wt(et.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new wt(et.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CO({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new wt(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new wt(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new MS;switch(t.type){case"firstParty":return new BA(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new wt(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=vO.get(e);t&&(It("ComponentProvider","Removing Datastore"),vO.delete(e),t.terminate())}(this),Promise.resolve()}}class ci{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ci(this.firestore,e,this._key)}}class yo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yo(this.firestore,e,this._query)}}class eh extends yo{constructor(e,t,r){super(e,t,Mg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ci(this.firestore,null,new Bt(e))}withConverter(e){return new eh(this.firestore,e,this._path)}}function xO(n,e,...t){if(n=(0,Rn.m9)(n),lk("collection","path",e),n instanceof yw){const r=nr.fromString(e,...t);return EO(r),new eh(n,null,r)}{if(!(n instanceof ci||n instanceof eh))throw new wt(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nr.fromString(e,...t));return EO(r),new eh(n.firestore,null,r)}}function zx(n,e,...t){if(n=(0,Rn.m9)(n),1===arguments.length&&(e=jT.A()),lk("doc","path",e),n instanceof yw){const r=nr.fromString(e,...t);return TO(r),new ci(n,null,new Bt(r))}{if(!(n instanceof ci||n instanceof eh))throw new wt(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nr.fromString(e,...t));return TO(r),new ci(n.firestore,n instanceof eh?n.converter:null,new Bt(r))}}function DO(n,e){return n=(0,Rn.m9)(n),e=(0,Rn.m9)(e),(n instanceof ci||n instanceof eh)&&(e instanceof ci||e instanceof eh)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ck(n,e){return n=(0,Rn.m9)(n),e=(0,Rn.m9)(e),n instanceof yo&&e instanceof yo&&n.firestore===e.firestore&&L_(n._query,e._query)&&n.converter===e.converter}class M6{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new gx(this,"async_queue_retry"),this.Xc=()=>{const t=em();t&&It("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=em();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=em();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Bi;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,at.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!_l(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Ui("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=Sx.createAndSchedule(this,e,t,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&Yt()}verifyOperationInProgress(){}sa(){var e=this;return(0,at.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function dk(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class P6{constructor(){this._progressObserver={},this._taskCompletionResolver=new Bi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class di extends yw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new M6,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||IO(this),this._firestoreClient.terminate()}}function es(n){return n._firestoreClient||IO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function IO(n){var e,t,r;const i=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new XT(n._databaseId,c,n._persistenceKey,(y=i).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,yO(y.experimentalLongPollingOptions),y.useFetchStreams));var c,y;n._firestoreClient=new _w(n._authCredentials,n._appCheckCredentials,n._queue,s),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function AO(n,e,t){const r=new Bi;return n.asyncQueue.enqueue((0,at.Z)(function*(){try{yield am(n,t),yield hy(n,e),r.resolve()}catch(i){const s=i;if(!Gv(s))throw s;pu("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function kO(n){if(n._initialized||n._terminated)throw new wt(et.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class th{constructor(e){this._byteString=e}static fromBase64String(e){try{return new th(Vi.fromBase64String(e))}catch(t){throw new wt(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new th(Vi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class np{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new wt(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class py{constructor(e){this._methodName=e}}class Wx{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new wt(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new wt(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kn(this._lat,e._lat)||kn(this._long,e._long)}}const H6=/^__.*__$/;class q6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new El(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lg(e,this.data,t,this.fieldTransforms)}}class MO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new El(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function PO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yt()}}class Kx{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Kx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Qx(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(PO(this.ca)&&H6.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class G6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||iy(e)}ya(e,t,r,i=!1){return new Kx({ca:e,methodName:t,ga:r,path:Ur.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gy(n){const e=n._freezeSettings(),t=iy(n._databaseId);return new G6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Zx(n,e,t,r,i,s={}){const a=n.ya(s.merge||s.mergeFields?2:0,e,t,i);gk("Data must be an object, but it was:",a,r);const c=NO(r,a);let f,y;if(s.merge)f=new zs(a.fieldMask),y=a.fieldTransforms;else if(s.mergeFields){const b=[];for(const D of s.mergeFields){const N=Tw(e,D,t);if(!a.contains(N))throw new wt(et.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);FO(b,N)||b.push(N)}f=new zs(b),y=a.fieldTransforms.filter(D=>f.covers(D.field))}else f=null,y=a.fieldTransforms;return new q6(new ks(c),f,y)}class bw extends py{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bw}}function RO(n,e,t){return new Kx({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hk extends py{_toFieldTransform(e){return new V_(e.path,new Uf)}isEqual(e){return e instanceof hk}}class z6 extends py{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=RO(this,e,!0),r=this.pa.map(s=>my(s,t)),i=new Tu(r);return new V_(e.path,i)}isEqual(e){return this===e}}class W6 extends py{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=RO(this,e,!0),r=this.pa.map(s=>my(s,t)),i=new Bf(r);return new V_(e.path,i)}isEqual(e){return this===e}}class K6 extends py{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Rg(e.serializer,u2(e.serializer,this.Ia));return new V_(e.path,t)}isEqual(e){return this===e}}function fk(n,e,t,r){const i=n.ya(1,e,t);gk("Data must be an object, but it was:",i,r);const s=[],a=ks.empty();ds(r,(f,y)=>{const b=Yx(e,f,t);y=(0,Rn.m9)(y);const D=i.da(b);if(y instanceof bw)s.push(b);else{const N=my(y,D);null!=N&&(s.push(b),a.set(b,N))}});const c=new zs(s);return new MO(a,c,i.fieldTransforms)}function pk(n,e,t,r,i,s){const a=n.ya(1,e,t),c=[Tw(e,r,t)],f=[i];if(s.length%2!=0)throw new wt(et.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<s.length;N+=2)c.push(Tw(e,s[N])),f.push(s[N+1]);const y=[],b=ks.empty();for(let N=c.length-1;N>=0;--N)if(!FO(y,c[N])){const B=c[N];let U=f[N];U=(0,Rn.m9)(U);const K=a.da(B);if(U instanceof bw)y.push(B);else{const ie=my(U,K);null!=ie&&(y.push(B),b.set(B,ie))}}const D=new zs(y);return new MO(b,D,a.fieldTransforms)}function OO(n,e,t,r=!1){return my(t,n.ya(r?4:3,e))}function my(n,e){if(LO(n=(0,Rn.m9)(n)))return gk("Unsupported field value:",e,n),NO(n,e);if(n instanceof py)return function(t,r){if(!PO(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const a of t){let c=my(a,r.wa(s));null==c&&(c={nullValue:"NULL_VALUE"}),i.push(c),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Rn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return u2(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Fr.fromDate(t);return{timestampValue:z_(r.serializer,i)}}if(t instanceof Fr){const i=new Fr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:z_(r.serializer,i)}}if(t instanceof Wx)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof th)return{bytesValue:w1(r.serializer,t._byteString)};if(t instanceof ci){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:qd(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${Gx(t)}`)}(n,e)}function NO(n,e){const t={};return Ra(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ds(n,(r,i)=>{const s=my(i,e.ha(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function LO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Fr||n instanceof Wx||n instanceof th||n instanceof ci||n instanceof py)}function gk(n,e,t){if(!LO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Gx(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Tw(n,e,t){if((e=(0,Rn.m9)(e))instanceof np)return e._internalPath;if("string"==typeof e)return Yx(n,e);throw Qx("Field path arguments must be of type string or ",n,!1,void 0,t)}const Z6=new RegExp("[~\\*/\\[\\]]");function Yx(n,e,t){if(e.search(Z6)>=0)throw Qx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new np(...e.split("."))._internalPath}catch(r){throw Qx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qx(n,e,t,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(s||a)&&(f+=" (found",s&&(f+=` in field ${r}`),a&&(f+=` in document ${i}`),f+=")"),new wt(et.INVALID_ARGUMENT,c+n+f)}function FO(n,e){return n.some(t=>t.isEqual(e))}class Ew{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ci(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Y6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Xx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Y6 extends Ew{data(){return super.data()}}function Xx(n,e){return"string"==typeof e?Yx(n,e):e instanceof np?e._internalPath:e._delegate._internalPath}function UO(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new wt(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mk{}class ww extends mk{}function um(n,e,...t){let r=[];e instanceof mk&&r.push(e),r=r.concat(t),function(i){const s=i.filter(c=>c instanceof Wv).length,a=i.filter(c=>c instanceof Cw).length;if(s>1||s>0&&a>0)throw new wt(et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Cw extends ww{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Cw(e,t,r)}_apply(e){const t=this._parse(e);return $O(e._query,t),new yo(e.firestore,e.converter,cE(e._query,t))}_parse(e){const t=gy(e.firestore);return function(i,s,a,c,f,y,b){let D;if(f.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new wt(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){jO(b,y);const N=[];for(const B of b)N.push(VO(c,i,B));D={arrayValue:{values:N}}}else D=VO(c,i,b)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||jO(b,y),D=OO(a,"where",b,"in"===y||"not-in"===y);return Zn.create(f,y,D)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Wv extends mk{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Er.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const a=i.getFlattenedFilters();for(const c of a)$O(s,c),s=cE(s,c)}(e._query,t),new yo(e.firestore,e.converter,cE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class _k extends ww{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new _k(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new wt(et.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new wt(et.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new Pf(i,s);return function(c,f){if(null===iv(c)){const y=N_(c);null!==y&&HO(0,y,f.field)}}(r,a),a}(e._query,this._field,this._direction);return new yo(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Tl(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Jx extends ww{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Jx(e,t,r)}_apply(e){return new yo(e.firestore,e.converter,$d(e._query,this._limit,this._limitType))}}class eD extends ww{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new eD(e,t,r)}_apply(e){const t=BO(e,this.type,this._docOrFields,this._inclusive);return new yo(e.firestore,e.converter,(i=t,new Tl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class tD extends ww{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new tD(e,t,r)}_apply(e){const t=BO(e,this.type,this._docOrFields,this._inclusive);return new yo(e.firestore,e.converter,(i=t,new Tl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function BO(n,e,t,r){if(t[0]=(0,Rn.m9)(t[0]),t[0]instanceof Ew)return function(i,s,a,c,f){if(!c)throw new wt(et.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const y=[];for(const b of Ff(i))if(b.field.isKeyField())y.push(Mf(s,c.key));else{const D=c.data.field(b.field);if(J0(D))throw new wt(et.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const N=b.field.canonicalString();throw new wt(et.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}y.push(D)}return new jd(y,f)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=gy(n.firestore);return function(s,a,c,f,y,b){const D=s.explicitOrderBy;if(y.length>D.length)throw new wt(et.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let B=0;B<y.length;B++){const U=y[B];if(D[B].field.isKeyField()){if("string"!=typeof U)throw new wt(et.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof U}`);if(!sv(s)&&-1!==U.indexOf("/"))throw new wt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${U}' contains a slash.`);const K=s.path.child(nr.fromString(U));if(!Bt.isDocumentKey(K))throw new wt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${K}' is not because it contains an odd number of segments.`);const ie=new Bt(K);N.push(Mf(a,ie))}else{const K=OO(c,f,U);N.push(K)}}return new jd(N,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function VO(n,e,t){if("string"==typeof(t=(0,Rn.m9)(t))){if(""===t)throw new wt(et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sv(e)&&-1!==t.indexOf("/"))throw new wt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(nr.fromString(t));if(!Bt.isDocumentKey(r))throw new wt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Mf(n,new Bt(r))}if(t instanceof ci)return Mf(n,t._key);throw new wt(et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gx(t)}.`)}function jO(n,e){if(!Array.isArray(n)||0===n.length)throw new wt(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $O(n,e){if(e.isInequality()){const r=N_(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new wt(et.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=iv(n);null!==s&&HO(0,i,s)}const t=function(r,i){for(const s of r)for(const a of s.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new wt(et.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function HO(n,e,t){if(!t.isEqual(e))throw new wt(et.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class yk{convertValue(e,t="none"){switch(Sc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ui(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Yt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ds(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Wx(ui(e.latitude),ui(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=k_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ag(e));default:return null}}convertTimestamp(e){const t=Cc(e);return new Fr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nr.fromString(e);nn(w2(r));const i=new yu(r.get(1),r.get(3)),s=new Bt(r.popFirst(5));return i.isEqual(t)||Ui(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function nD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class s8 extends yk{constructor(e){super(),this.firestore=e}convertBytes(e){return new th(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ci(this.firestore,null,t)}}class _y{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rp extends Ew{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Xx("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Sw extends rp{data(e={}){return super.data(e)}}class lm{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new _y(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Sw(this._firestore,this._userDataWriter,r.key,r,new _y(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new wt(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>({type:"added",doc:new Sw(r._firestore,r._userDataWriter,a.doc.key,a.doc,new _y(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||3!==a.type).map(a=>{const c=new Sw(r._firestore,r._userDataWriter,a.doc.key,a.doc,new _y(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,y=-1;return 0!==a.type&&(f=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),y=s.indexOf(a.doc.key)),{type:a8(a.type),doc:c,oldIndex:f,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function a8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yt()}}function GO(n,e){return n instanceof rp&&e instanceof rp?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof lm&&e instanceof lm&&n._firestore===e._firestore&&ck(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class cm extends yk{constructor(e){super(),this.firestore=e}convertBytes(e){return new th(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ci(this.firestore,null,t)}}function zO(n,e,t){n=ir(n,ci);const r=ir(n.firestore,di),i=nD(n.converter,e,t);return Kv(r,[Zx(gy(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Xr.none())])}function WO(n,e,t,...r){n=ir(n,ci);const i=ir(n.firestore,di),s=gy(i);let a;return a="string"==typeof(e=(0,Rn.m9)(e))||e instanceof np?pk(s,"updateDoc",n._key,e,t,r):fk(s,"updateDoc",n._key,e),Kv(i,[a.toMutation(n._key,Xr.exists(!0))])}function KO(n,...e){var t,r,i;n=(0,Rn.m9)(n);let s={includeMetadataChanges:!1},a=0;"object"!=typeof e[a]||dk(e[a])||(s=e[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges};if(dk(e[a])){const D=e[a];e[a]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[a+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[a+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let f,y,b;if(n instanceof ci)y=ir(n.firestore,di),b=Mg(n._key.path),f={next:D=>{e[a]&&e[a](vk(y,n,D))},error:e[a+1],complete:e[a+2]};else{const D=ir(n,yo);y=ir(D.firestore,di),b=D._query;const N=new cm(y);f={next:B=>{e[a]&&e[a](new lm(y,N,D,B))},error:e[a+1],complete:e[a+2]},UO(n._query)}return function(D,N,B,U){const K=new xl(U),ie=new Lv(N,K,B);return D.asyncQueue.enqueueAndForget((0,at.Z)(function*(){return Dx(yield zv(D),ie)})),()=>{K.Dc(),D.asyncQueue.enqueueAndForget((0,at.Z)(function*(){return Ax(yield zv(D),ie)}))}}(es(y),b,c,f)}function Kv(n,e){return function(t,r){const i=new Bi;return t.asyncQueue.enqueueAndForget((0,at.Z)(function*(){return function ek(n,e,t){return $v.apply(this,arguments)}(yield ak(t),r,i)})),i.promise}(es(n),e)}function vk(n,e,t){const r=t.docs.get(e._key),i=new cm(n);return new rp(n,i,e._key,r,new _y(t.hasPendingWrites,t.fromCache),e.converter)}const S8={maxAttempts:5};class ZO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gy(e)}set(e,t,r){this._verifyNotCommitted();const i=dm(e,this._firestore),s=nD(i.converter,t,r),a=Zx(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(a.toMutation(i._key,Xr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=dm(e,this._firestore);let a;return a="string"==typeof(t=(0,Rn.m9)(t))||t instanceof np?pk(this._dataReader,"WriteBatch.update",s._key,t,r,i):fk(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,Xr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=dm(e,this._firestore);return this._mutations=this._mutations.concat(new Fg(t._key,Xr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new wt(et.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dm(n,e){if((n=(0,Rn.m9)(n)).firestore!==e)throw new wt(et.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class x8 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=gy(e)}get(e){const t=dm(e,this._firestore),r=new s8(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Yt();const s=i[0];if(s.isFoundDocument())return new Ew(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new Ew(this._firestore,r,t._key,null,t.converter);throw Yt()})}set(e,t,r){const i=dm(e,this._firestore),s=nD(i.converter,t,r),a=Zx(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,a),this}update(e,t,r,...i){const s=dm(e,this._firestore);let a;return a="string"==typeof(t=(0,Rn.m9)(t))||t instanceof np?pk(this._dataReader,"Transaction.update",s._key,t,r,i):fk(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,a),this}delete(e){const t=dm(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=dm(e,this._firestore),r=new cm(this._firestore);return super.get(e).then(i=>new rp(this._firestore,r,t._key,i._document,new _y(!1,!1),t.converter))}}function bk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new wt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function QO(){if("undefined"==typeof Uint8Array)throw new wt("unimplemented","Uint8Arrays are not available in this environment.")}function XO(){if(!function YA(){return"undefined"!=typeof atob}())throw new wt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){C_=hl.SDK_VERSION,(0,hl._registerComponent)(new uf.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),a=new di(new UA(t.getProvider("auth-internal")),new VA(t.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new wt(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(c.options.projectId,f)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),(0,hl.registerVersion)(IS,"3.13.0",n),(0,hl.registerVersion)(IS,"3.13.0","esm2017")}();class xw{constructor(e){this._delegate=e}static fromBase64String(e){return XO(),new xw(th.fromBase64String(e))}static fromUint8Array(e){return QO(),new xw(th.fromUint8Array(e))}toBase64(){return XO(),this._delegate.toBase64()}toUint8Array(){return QO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Tk(n){return function N8(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class L8{enableIndexedDbPersistence(e,t){return function O6(n,e){kO(n=ir(n,di));const t=es(n);if(t._uninitializedComponentsProvider)throw new wt(et.FAILED_PRECONDITION,"SDK cache is already specified.");pu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Xn;return AO(t,i,new an(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function N6(n){kO(n=ir(n,di));const e=es(n);if(e._uninitializedComponentsProvider)throw new wt(et.FAILED_PRECONDITION,"SDK cache is already specified.");pu("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Xn;return AO(e,r,new Kn(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function L6(n){if(n._initialized&&!n._terminated)throw new wt(et.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Bi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,at.Z)(function*(){try{yield(t=(0,at.Z)(function*(r){if(!gu.D())return Promise.resolve();const i=r+"main";yield gu.delete(i)}),function(r){return t.apply(this,arguments)})(J1(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class JO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof yu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&pu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function SO(n,e,t,r={}){var i;const s=(n=ir(n,yw))._getSettings(),a=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&pu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let c,f;if("string"==typeof r.mockUserToken)c=r.mockUserToken,f=ls.MOCK_USER;else{c=(0,Rn.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new wt(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ls(y)}n._authCredentials=new q0(new kS(c,f))}}(this._delegate,e,t,r)}enableNetwork(){return function U6(n){return function E6(n){return n.asyncQueue.enqueue((0,at.Z)(function*(){const e=yield fO(n),t=yield pO(n);return e.setNetworkEnabled(!0),function(r){const i=jt(r);return i.vu.delete(0),sy(i)}(t)}))}(es(n=ir(n,di)))}(this._delegate)}disableNetwork(){return function B6(n){return function w6(n){return n.asyncQueue.enqueue((0,at.Z)(function*(){const e=yield fO(n),t=yield pO(n);return e.setNetworkEnabled(!1),(r=(0,at.Z)(function*(i){const s=jt(i);s.vu.add(0),yield tm(s),s.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(es(n=ir(n,di)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,bO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function F6(n){return function(e){const t=new Bi;return e.asyncQueue.enqueueAndForget((0,at.Z)(function*(){return function nk(n,e){return fw.apply(this,arguments)}(yield ak(e),t)})),t.promise}(es(n=ir(n,di)))}(this._delegate)}onSnapshotsInSync(e){return function m8(n,e){return function x6(n,e){const t=new xl(e);return n.asyncQueue.enqueueAndForget((0,at.Z)(function*(){return r=yield zv(n),i=t,jt(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,at.Z)(function*(){return r=yield zv(n),i=t,void jt(r).ku.delete(i);var r,i}))}}(es(n=ir(n,di)),dk(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new wt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zv(this,xO(this._delegate,e))}catch(t){throw aa(t,"collection()","Firestore.collection()")}}doc(e){try{return new Dl(this,zx(this._delegate,e))}catch(t){throw aa(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ua(this,function k6(n,e){if(n=ir(n,yw),lk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new wt(et.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new yo(n,null,(t=e,new Tl(nr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw aa(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function D8(n,e,t){n=ir(n,di);const r=Object.assign(Object.assign({},S8),t);return function(i){if(i.maxAttempts<1)throw new wt(et.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,a){const c=new Bi;return i.asyncQueue.enqueueAndForget((0,at.Z)(function*(){const f=yield function gO(n){return Hx(n).then(e=>e.datastore)}(i);new mw(i.asyncQueue,f,a,s,c).run()})),c.promise}(es(n),i=>e(new x8(n,i)),r)}(this._delegate,t=>e(new eN(this,t)))}batch(){return es(this._delegate),new tN(new ZO(this._delegate,e=>Kv(this._delegate,e)))}loadBundle(e){return function V6(n,e){const t=es(n=ir(n,di)),r=new P6;return function D6(n,e,t,r){const i=function(s,a){let c;return c="string"==typeof s?TE().encode(s):s,f=function(f,y){if(f instanceof Uint8Array)return Ho(f,y);if(f instanceof ArrayBuffer)return Ho(new Uint8Array(f),y);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new pw(f,a);var f}(t,iy(e));n.asyncQueue.enqueueAndForget((0,at.Z)(function*(){!function Vt(n,e,t){const r=jt(n);var i;(i=(0,at.Z)(function*(s,a,c){try{const f=yield a.getMetadata();if(yield function(N,B){const U=jt(N),K=Ai(B.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",ie=>U.qs.getBundleMetadata(ie,B.id)).then(ie=>!!ie&&ie.createTime.compareTo(K)>=0)}(s.localStore,f))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(N=f).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);c._updateProgress(Fv(f));const y=new uw(f,s.localStore,a.serializer);let b=yield a.bc();for(;b;){const N=yield y.zu(b);N&&c._updateProgress(N),b=yield a.bc()}const D=yield y.complete();return yield Jd(s,D.Ju,void 0),yield function(N,B){const U=jt(N);return U.persistence.runTransaction("Save bundle","readwrite",K=>U.qs.saveBundleMetadata(K,B))}(s.localStore,f),c._completeWith(D.progress),Promise.resolve(D.Hu)}catch(f){return pu("SyncEngine",`Loading bundle failed with ${f}`),c._failWith(f),Promise.resolve(new Set)}var N}),function(s,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield ak(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function j6(n,e){return function I6(n,e){return n.asyncQueue.enqueue((0,at.Z)(function*(){return function(t,r){const i=jt(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.qs.getNamedQuery(s,r))}(yield qx(n),e)}))}(es(n=ir(n,di)),e).then(t=>t?new yo(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ua(this,t):null)}}class rD extends yk{constructor(e){super(),this.firestore=e}convertBytes(e){return new xw(new th(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Dl.forKey(t,this.firestore,null)}}class eN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new rD(e)}get(e){const t=vy(e);return this._delegate.get(t).then(r=>new Dw(this._firestore,new rp(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=vy(e);return r?(bk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=vy(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=vy(e);return this._delegate.delete(t),this}}class tN{constructor(e){this._delegate=e}set(e,t,r){const i=vy(e);return r?(bk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=vy(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=vy(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class yy{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Sw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Iw(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=yy.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new yy(e,new rD(e),t),i.set(t,s)),s}}yy.INSTANCES=new WeakMap;class Dl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new rD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new wt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Dl(t,new ci(t._delegate,r,new Bt(e)))}static forKey(e,t,r){return new Dl(t,new ci(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Zv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zv(this.firestore,xO(this._delegate,e))}catch(t){throw aa(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Rn.m9)(e))instanceof ci&&DO(this._delegate,e)}set(e,t){t=bk("DocumentReference.set",t);try{return t?zO(this._delegate,e,t):zO(this._delegate,e)}catch(r){throw aa(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?WO(this._delegate,e):WO(this._delegate,e,t,...r)}catch(i){throw aa(i,"updateDoc()","DocumentReference.update()")}}delete(){return function p8(n){return Kv(ir(n.firestore,di),[new Fg(n._key,Xr.none())])}(this._delegate)}onSnapshot(...e){const t=nN(e),r=rN(e,i=>new Dw(this.firestore,new rp(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return KO(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function l8(n){n=ir(n,ci);const e=ir(n.firestore,di),t=es(e),r=new cm(e);return function C6(n,e){const t=new Bi;return n.asyncQueue.enqueueAndForget((0,at.Z)(function*(){return(r=(0,at.Z)(function*(i,s,a){try{const c=yield function(f,y){const b=jt(f);return b.persistence.runTransaction("read document","readonly",D=>b.localDocuments.getDocument(D,y))}(i,s);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new wt(et.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const f=ep(c,`Failed to get document '${s} from cache`);a.reject(f)}}),function(i,s,a){return r.apply(this,arguments)})(yield qx(n),e,t);var r})),t.promise}(t,n._key).then(i=>new rp(e,r,n._key,i,new _y(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function c8(n){n=ir(n,ci);const e=ir(n.firestore,di);return mO(es(e),n._key,{source:"server"}).then(t=>vk(e,n,t))}(this._delegate):function u8(n){n=ir(n,ci);const e=ir(n.firestore,di);return mO(es(e),n._key).then(t=>vk(e,n,t))}(this._delegate),t.then(r=>new Dw(this.firestore,new rp(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Dl(this.firestore,this._delegate.withConverter(e?yy.getInstance(this.firestore,e):null))}}function aa(n,e,t){return n.message=n.message.replace(e,t),n}function nN(n){for(const e of n)if("object"==typeof e&&!Tk(e))return e;return{}}function rN(n,e){var t,r;let i;return i=Tk(n[0])?n[0]:Tk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Dw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Dl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return GO(this._delegate,e._delegate)}}class Iw extends Dw{data(e){const t=this._delegate.data(e);return function KR(n,e){n||Yt()}(void 0!==t),t}}class ua{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new rD(e)}where(e,t,r){try{return new ua(this.firestore,um(this._delegate,function Q6(n,e,t){const r=e,i=Xx("where",n);return Cw._create(i,r,t)}(e,t,r)))}catch(i){throw aa(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ua(this.firestore,um(this._delegate,function X6(n,e="asc"){const t=e,r=Xx("orderBy",n);return _k._create(r,t)}(e,t)))}catch(r){throw aa(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ua(this.firestore,um(this._delegate,function J6(n){return wO("limit",n),Jx._create("limit",n,"F")}(e)))}catch(t){throw aa(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ua(this.firestore,um(this._delegate,function e8(n){return wO("limitToLast",n),Jx._create("limitToLast",n,"L")}(e)))}catch(t){throw aa(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ua(this.firestore,um(this._delegate,function t8(...n){return eD._create("startAt",n,!0)}(...e)))}catch(t){throw aa(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ua(this.firestore,um(this._delegate,function n8(...n){return eD._create("startAfter",n,!1)}(...e)))}catch(t){throw aa(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ua(this.firestore,um(this._delegate,function r8(...n){return tD._create("endBefore",n,!1)}(...e)))}catch(t){throw aa(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ua(this.firestore,um(this._delegate,function i8(...n){return tD._create("endAt",n,!0)}(...e)))}catch(t){throw aa(t,"endAt()","Query.endAt()")}}isEqual(e){return ck(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function h8(n){n=ir(n,yo);const e=ir(n.firestore,di),t=es(e),r=new cm(e);return function S6(n,e){const t=new Bi;return n.asyncQueue.enqueueAndForget((0,at.Z)(function*(){return(r=(0,at.Z)(function*(i,s,a){try{const c=yield ny(i,s,!0),f=new Bv(s,c.ir),y=f.sc(c.documents),b=f.applyChanges(y,!1);a.resolve(b.snapshot)}catch(c){const f=ep(c,`Failed to execute query '${s} against cache`);a.reject(f)}}),function(i,s,a){return r.apply(this,arguments)})(yield qx(n),e,t);var r})),t.promise}(t,n._query).then(i=>new lm(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function f8(n){n=ir(n,yo);const e=ir(n.firestore,di),t=es(e),r=new cm(e);return _O(t,n._query,{source:"server"}).then(i=>new lm(e,r,n,i))}(this._delegate):function d8(n){n=ir(n,yo);const e=ir(n.firestore,di),t=es(e),r=new cm(e);return UO(n._query),_O(t,n._query).then(i=>new lm(e,r,n,i))}(this._delegate),t.then(r=>new Ek(this.firestore,new lm(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=nN(e),r=rN(e,i=>new Ek(this.firestore,new lm(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return KO(this._delegate,t,r)}withConverter(e){return new ua(this.firestore,this._delegate.withConverter(e?yy.getInstance(this.firestore,e):null))}}class U8{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Iw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ek{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ua(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Iw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new U8(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Iw(this._firestore,r))})}isEqual(e){return GO(this._delegate,e._delegate)}}class Zv extends ua{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Dl(this.firestore,e):null}doc(e){try{return new Dl(this.firestore,void 0===e?zx(this._delegate):zx(this._delegate,e))}catch(t){throw aa(t,"doc()","CollectionReference.doc()")}}add(e){return function g8(n,e){const t=ir(n.firestore,di),r=zx(n),i=nD(n.converter,e);return Kv(t,[Zx(gy(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Xr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Dl(this.firestore,t))}isEqual(e){return DO(this._delegate,e._delegate)}withConverter(e){return new Zv(this.firestore,this._delegate.withConverter(e?yy.getInstance(this.firestore,e):null))}}function vy(n){return ir(n,ci)}class wk{constructor(...e){this._delegate=new np(...e)}static documentId(){return new wk(Ur.keyField().canonicalString())}isEqual(e){return(e=(0,Rn.m9)(e))instanceof np&&this._delegate._internalPath.isEqual(e._internalPath)}}class by{constructor(e){this._delegate=e}static serverTimestamp(){const e=function A8(){return new hk("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new by(e)}static delete(){const e=function I8(){return new bw("deleteField")}();return e._methodName="FieldValue.delete",new by(e)}static arrayUnion(...e){const t=function k8(...n){return new z6("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new by(t)}static arrayRemove(...e){const t=function M8(...n){return new W6("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new by(t)}static increment(e){const t=function P8(n){return new K6("increment",n)}(e);return t._methodName="FieldValue.increment",new by(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const B8={Firestore:JO,GeoPoint:Wx,Timestamp:Fr,Blob:xw,Transaction:eN,WriteBatch:tN,DocumentReference:Dl,DocumentSnapshot:Dw,Query:ua,QueryDocumentSnapshot:Iw,QuerySnapshot:Ek,CollectionReference:Zv,FieldPath:wk,FieldValue:by,setLogLevel:function F8(n){!function VT(n){Vd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function j8(n){(function V8(n,e){n.INTERNAL.registerComponent(new uf.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},B8)))})(n,(e,t)=>new JO(e,t,new L8)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Zb.Z);var $8=$(6451),iD=$(5363),H8=$(6063);class q8 extends ro.x{constructor(e=1/0,t=1/0,r=H8.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:a}=this;t||(r.push(e),!i&&r.push(s.now()+a)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let a=0;a<s.length&&!e.closed;a+=r?1:2)e.next(s[a]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const a=t.now();let c=0;for(let f=1;f<r.length&&r[f]<=a;f+=2)c=f;c&&r.splice(0,c+1)}}}var G8=$(3099);function iN(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,G8.B)({connector:()=>new q8(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function sN(n,e){return(0,Zl.m)(e)?Ln(()=>n,e):Ln(()=>n)}var Ck=$(9468);$(259);const xk=new Map,aN={activated:!1,tokenObservers:[]},Y8={initialized:!1,enabled:!1};function $i(n){return xk.get(n)||Object.assign({},aN)}function oD(){return Y8}class nV{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,at.Z)(function*(){t.stop();try{t.pending=new Rn.BH,yield function rV(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Rn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const vo=new Rn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ik(n){if(!$i(n).activated)throw vo.create("use-before-activation",{appName:n.name})}function lD(n,e){return kk.apply(this,arguments)}function kk(){return kk=(0,at.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const D=yield i.getHeartbeatsHeader();D&&(r["X-Firebase-Client"]=D)}const s={method:"POST",body:JSON.stringify(e),headers:r};let a,c;try{a=yield fetch(n,s)}catch(D){throw vo.create("fetch-network-error",{originalErrorMessage:null==D?void 0:D.message})}if(200!==a.status)throw vo.create("fetch-status-error",{httpStatus:a.status});try{c=yield a.json()}catch(D){throw vo.create("fetch-parse-error",{originalErrorMessage:null==D?void 0:D.message})}const f=c.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw vo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});const y=1e3*Number(f[1]),b=Date.now();return{token:c.token,expireTimeMillis:b+y,issuedAtTimeMillis:b}}),kk.apply(this,arguments)}function lN(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Aw="firebase-app-check-store";let cD=null;function dN(){return cD||(cD=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(vo.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Aw,{keyPath:"compositeKey"})}}catch(t){e(vo.create("storage-open",{originalErrorMessage:null==t?void 0:t.message}))}}),cD)}function Mk(){return Mk=(0,at.Z)(function*(n,e){const r=(yield dN()).transaction(Aw,"readwrite"),s=r.objectStore(Aw).put({compositeKey:n,value:e});return new Promise((a,c)=>{s.onsuccess=f=>{a()},r.onerror=f=>{var y;c(vo.create("storage-set",{originalErrorMessage:null===(y=f.target.error)||void 0===y?void 0:y.message}))}})}),Mk.apply(this,arguments)}const kw=new lf.Yd("@firebase/app-check");function Ok(n,e){return(0,Rn.hl)()?function cV(n,e){return function hN(n,e){return Mk.apply(this,arguments)}(function pN(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{kw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Lk(){return oD().enabled}function Fk(){return Uk.apply(this,arguments)}function Uk(){return Uk=(0,at.Z)(function*(){const n=oD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Uk.apply(this,arguments)}const mV={error:"UNKNOWN_ERROR"};function _V(n){return Rn.US.encodeString(JSON.stringify(n),!1)}function dD(n){return Bk.apply(this,arguments)}function Bk(){return Bk=(0,at.Z)(function*(n,e=!1){const t=n.app;Ik(t);const r=$i(t);let s,i=r.token;if(i&&!Yv(i)&&(r.token=void 0,i=void 0),!i){const f=yield r.cachedTokenPromise;f&&(Yv(f)?i=f:yield Ok(t,void 0))}if(!e&&i&&Yv(i))return{token:i.token};let c,a=!1;if(Lk()){r.exchangeTokenPromise||(r.exchangeTokenPromise=lD(lN(t,yield Fk()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),a=!0);const f=yield r.exchangeTokenPromise;return yield Ok(t,f),r.token=f,{token:f.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),a=!0),i=yield $i(t).exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?kw.warn(f.message):kw.error(f),s=f}return i?s?c=Yv(i)?{token:i.token,internalError:s}:yN(s):(c={token:i.token},r.token=i,yield Ok(t,i)):c=yN(s),a&&_N(t,c),c}),Bk.apply(this,arguments)}function Vk(){return Vk=(0,at.Z)(function*(n){const e=n.app;Ik(e);const{provider:t}=$i(e);if(Lk()){const r=yield Fk(),{token:i}=yield lD(lN(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),Vk.apply(this,arguments)}function $k(n,e){const t=$i(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function mN(n){const{app:e}=n,t=$i(e);let r=t.tokenRefresher;r||(r=function yV(n){const{app:e}=n;return new nV((0,at.Z)(function*(){let r;if(r=$i(e).token?yield dD(n,!0):yield dD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=$i(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function _N(n,e){const t=$i(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Yv(n){return n.expireTimeMillis-Date.now()>0}function yN(n){return{token:_V(mV),error:n}}class vV{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=$i(this.app);for(const t of e)$k(this.app,t.next);return Promise.resolve()}}const xN="app-check-internal";!function RV(){(0,hl._registerComponent)(new uf.wA("app-check",n=>function bV(n,e){return new vV(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(xN).initialize()})),(0,hl._registerComponent)(new uf.wA(xN,n=>function TV(n){return{getToken:e=>dD(n,e),getLimitedUseToken:()=>function gN(n){return Vk.apply(this,arguments)}(n),addTokenListener:e=>function jk(n,e,t,r){const{app:i}=n,s=$i(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&Yv(s.token)){const c=s.token;Promise.resolve().then(()=>{t({token:c.token}),mN(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>mN(n))}(n,"INTERNAL",e),removeTokenListener:e=>$k(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,hl.registerVersion)("@firebase/app-check","0.8.0")}();class fD{constructor(){return(0,Qr.vb)("app-check")}}"undefined"!=typeof window&&window;var Qv=$(9260);const IN=new h.OlP("angularfire2.auth.use-emulator"),AN=new h.OlP("angularfire2.auth.settings"),kN=new h.OlP("angularfire2.auth.tenant-id"),MN=new h.OlP("angularfire2.auth.langugage-code"),PN=new h.OlP("angularfire2.auth.use-device-language"),RN=new h.OlP("angularfire.auth.persistence"),ON=(n,e,t,r,i,s,a,c)=>(0,Fo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=e.runOutsideAngular(()=>n.auth());if(t&&f.useEmulator(...t),r&&(f.tenantId=r),f.languageCode=i,s&&f.useDeviceLanguage(),a)for(const[y,b]of Object.entries(a))f.settings[y]=b;return c&&f.setPersistence(c),f},[t,r,i,s,a,c]);let ip=(()=>{class n{constructor(t,r,i,s,a,c,f,y,b,D,N,B){const U=new ro.x,K=yn(void 0).pipe((0,iD.Q)(a.outsideAngular),Ln(()=>s.runOutsideAngular(()=>Promise.resolve().then($.bind($,2644)))),(0,vn.U)(()=>(0,Fo.on)(t,s,r)),(0,vn.U)(ie=>ON(ie,s,c,y,b,D,f,N)),iN({bufferSize:1,refCount:!1}));if(Gc(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=yn(null);else{K.pipe(Ku()).subscribe();const Ae=K.pipe(Ln(Me=>Me.getRedirectResult().then(Ee=>Ee,()=>null)),Qr.iC,iN({bufferSize:1,refCount:!1})),be=K.pipe(Ln(Me=>new Ls.y(Ee=>({unsubscribe:s.runOutsideAngular(()=>Me.onAuthStateChanged(pt=>Ee.next(pt),pt=>Ee.error(pt),()=>Ee.complete()))})))),Le=K.pipe(Ln(Me=>new Ls.y(Ee=>({unsubscribe:s.runOutsideAngular(()=>Me.onIdTokenChanged(pt=>Ee.next(pt),pt=>Ee.error(pt),()=>Ee.complete()))}))));this.authState=Ae.pipe(sN(be),(0,Ck.R)(a.outsideAngular),(0,iD.Q)(a.insideAngular)),this.user=Ae.pipe(sN(Le),(0,Ck.R)(a.outsideAngular),(0,iD.Q)(a.insideAngular)),this.idToken=this.user.pipe(Ln(Me=>Me?(0,Tr.D)(Me.getIdToken()):yn(null))),this.idTokenResult=this.user.pipe(Ln(Me=>Me?(0,Tr.D)(Me.getIdTokenResult()):yn(null))),this.credential=(0,$8.T)(Ae,U,this.authState.pipe(si(Me=>!Me))).pipe((0,vn.U)(Me=>(null==Me?void 0:Me.user)?Me:null),(0,Ck.R)(a.outsideAngular),(0,iD.Q)(a.insideAngular))}return(0,Fo.pX)(this,K,s,{spy:{apply:(ie,Ae,be)=>{(ie.startsWith("signIn")||ie.startsWith("createUser"))&&be.then(Le=>U.next(Le))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Fo.Dh),h.LFG(Fo.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Qr.HU),h.LFG(IN,8),h.LFG(AN,8),h.LFG(kN,8),h.LFG(MN,8),h.LFG(PN,8),h.LFG(RN,8),h.LFG(fD,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),BV=(()=>{class n{constructor(){Qv.Z.registerVersion("angularfire",Qr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[ip]}),n})();function NN(n,e){return function VV(n,e=f0.z){return new Ls.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Wk(n,e){return NN(n,e).pipe((0,vn.U)(t=>({payload:t,type:"query"})))}function pD(n,e){return Wk(n,e).pipe(Zr(void 0),Kb(),(0,vn.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(a=>({type:a.type,payload:a}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,c)=>{const f=i.find(b=>b.doc.ref.isEqual(a.ref)),y=null==t?void 0:t.payload.docs.find(b=>b.ref.isEqual(a.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(a.metadata)||!f&&y&&JSON.stringify(y.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function LN(n,e,t){return pD(n,t).pipe(Fs((r,i)=>function $V(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function HV(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Kk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Kk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Kk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),function sg(n,e=xa.y){return n=null!=n?n:dl,(0,xi.e)((t,r)=>{let i,s=!0;t.subscribe((0,Kr.x)(r,a=>{const c=e(a);(s||!n(i,c))&&(s=!1,i=c,r.next(a))}))})}(),(0,vn.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Kk(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function FN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class UN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=pD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vn.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Zr(void 0),Kb(),si(([r,i])=>i.length>0||!r),(0,vn.U)(([r,i])=>i),Qr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Fs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=FN(e);return LN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qr.iC)}valueChanges(e={}){return Wk(this.query,this.afs.schedulers.outsideAngular).pipe((0,vn.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Qr.iC)}get(e){return(0,Tr.D)(this.query.get(e)).pipe(Qr.iC)}add(e){return this.ref.add(e)}doc(e){return new BN(this.ref.doc(e),this.afs)}}class BN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=$N(r,t);return new UN(i,s,this.afs)}snapshotChanges(){return function jV(n,e){return NN(n,e).pipe(Zr(void 0),Kb(),(0,vn.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Qr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vn.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Tr.D)(this.ref.get(e)).pipe(Qr.iC)}}class qV{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?pD(this.query,this.afs.schedulers.outsideAngular).pipe((0,vn.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),si(t=>t.length>0),Qr.iC):pD(this.query,this.afs.schedulers.outsideAngular).pipe(Qr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Fs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=FN(e);return LN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qr.iC)}valueChanges(e={}){return Wk(this.query,this.afs.schedulers.outsideAngular).pipe((0,vn.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Qr.iC)}get(e){return(0,Tr.D)(this.query.get(e)).pipe(Qr.iC)}}const VN=new h.OlP("angularfire2.enableFirestorePersistence"),jN=new h.OlP("angularfire2.firestore.persistenceSettings"),GV=new h.OlP("angularfire2.firestore.settings"),zV=new h.OlP("angularfire2.firestore.use-emulator");function $N(n,e=(t=>t)){return{query:e(n),ref:n}}let Zk=(()=>{class n{constructor(t,r,i,s,a,c,f,y,b,D,N,B,U,K,ie,Ae,be){this.schedulers=f;const Le=(0,Fo.on)(t,c,r),Me=b;D&&ON(Le,c,N,U,K,ie,B,Ae),[this.firestore,this.persistenceEnabled$]=(0,Fo.cc)(`${Le.name}.firestore`,"AngularFirestore",Le.name,()=>{const Ee=c.runOutsideAngular(()=>Le.firestore());if(s&&Ee.settings(s),Me&&Ee.useEmulator(...Me),i&&!Gc(a)){const pt=()=>{try{return(0,Tr.D)(Ee.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Nt){return"undefined"!=typeof console&&console.warn(Nt),yn(!1)}};return[Ee,c.runOutsideAngular(pt)]}return[Ee,yn(!1)]},[s,Me,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:a}=$N(i,r),c=this.schedulers.ngZone.run(()=>s);return new UN(c,a,this)}collectionGroup(t,r){const i=r||(a=>a),s=this.firestore.collectionGroup(t);return new qV(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new BN(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Fo.Dh),h.LFG(Fo.xv,8),h.LFG(VN,8),h.LFG(GV,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Qr.HU),h.LFG(jN,8),h.LFG(zV,8),h.LFG(ip,8),h.LFG(IN,8),h.LFG(AN,8),h.LFG(kN,8),h.LFG(MN,8),h.LFG(PN,8),h.LFG(RN,8),h.LFG(fD,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),WV=(()=>{class n{constructor(){Qv.Z.registerVersion("angularfire",Qr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:VN,useValue:!0},{provide:jN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Zk]}),n})();const HN="firebasestorage.googleapis.com",qN="storageBucket";class ki extends Rn.ZR{constructor(e,t,r=0){super(Yk(e),`Firebase Storage: ${t} (${Yk(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ki.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Jr=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Jr||(Jr={})),Jr))();function Yk(n){return"storage/"+n}function Qk(){return new ki(Jr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function GN(){return new ki(Jr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zN(){return new ki(Jr.CANCELED,"User canceled the upload/download.")}function WN(){return new ki(Jr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Xv(n){return new ki(Jr.INVALID_ARGUMENT,n)}function KN(){return new ki(Jr.APP_DELETED,"The Firebase app was deleted.")}function ZN(n){return new ki(Jr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Mw(n,e){return new ki(Jr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Pw(n){throw new ki(Jr.INTERNAL_ERROR,"Internal error: "+n)}class qo{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=qo.makeFromUrl(e,t)}catch(i){return new qo(e,"")}if(""===r.path)return r;throw function i5(n){return new ki(Jr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",c=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Me){Me.path_=decodeURIComponent(Me.path)}const D=t.replace(/[.]/g,"\\."),Le=[{regex:c,indices:{bucket:1,path:3},postModify:function s(Me){"/"===Me.path.charAt(Me.path.length-1)&&(Me.path_=Me.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===HN?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Me=0;Me<Le.length;Me++){const Ee=Le[Me],pt=Ee.regex.exec(e);if(pt){let hn=pt[Ee.indices.path];hn||(hn=""),r=new qo(pt[Ee.indices.bucket],hn),Ee.postModify(r);break}}if(null==r)throw function r5(n){return new ki(Jr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class l5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function gD(n){return"string"==typeof n||n instanceof String}function YN(n){return Xk()&&n instanceof Blob}function Xk(){return"undefined"!=typeof Blob&&!(0,Rn.UG)()}function Jk(n,e,t,r){if(r<e)throw Xv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Xv(`Invalid value for '${n}'. Expected ${t} or less.`)}function sp(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function QN(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var hm=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(hm||(hm={})),hm))();function XN(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class g5{constructor(e,t,r,i,s,a,c,f,y,b,D,N=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=f,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=D,this.retry=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,U)=>{this.resolve_=B,this.reject_=U,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,a=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(c,c.getResponse());!function h5(n){return void 0!==n}(f)?s():s(f)}catch(f){a(f)}else if(null!==c){const f=Qk();f.serverResponse=c.getErrorText(),a(this.errorCallback_?this.errorCallback_(c,f):f)}else a(i.canceled?this.appDelete_?KN():zN():GN())};this.canceled_?t(0,new mD(!1,null,!0)):this.backoffId_=function c5(n,e,t){let r=1,i=null,s=null,a=!1,c=0;function f(){return 2===c}let y=!1;function b(...ie){y||(y=!0,e.apply(null,ie))}function D(ie){i=setTimeout(()=>{i=null,n(B,f())},ie)}function N(){s&&clearTimeout(s)}function B(ie,...Ae){if(y)return void N();if(ie)return N(),void b.call(null,ie,...Ae);if(f()||a)return N(),void b.call(null,ie,...Ae);let Le;r<64&&(r*=2),1===c?(c=2,Le=0):Le=1e3*(r+Math.random()),D(Le)}let U=!1;function K(ie){U||(U=!0,N(),!y&&(null!==i?(ie||(c=2),clearTimeout(i),D(0)):ie||(c=1)))}return D(0),s=setTimeout(()=>{a=!0,K(!0)},t),K}((r,i)=>{if(i)return void r(!1,new mD(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const a=c=>{null!==this.progressCallback_&&this.progressCallback_(c.loaded,c.lengthComputable?c.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const c=s.getErrorCode()===hm.NO_ERROR,f=s.getStatus();if(!c||XN(f,this.additionalRetryCodes_)&&this.retry){const b=s.getErrorCode()===hm.ABORT;return void r(!1,new mD(!1,null,b))}const y=-1!==this.successCodes_.indexOf(f);r(!0,new mD(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function d5(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class mD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function E5(...n){const e=function T5(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Xk())return new Blob(n);throw new ki(Jr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const wu={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class eM{constructor(e,t){this.data=e,this.contentType=t||null}}function tM(n,e){switch(n){case wu.RAW:return new eM(JN(e));case wu.BASE64:case wu.BASE64URL:return new eM(eL(n,e));case wu.DATA_URL:return new eM(function x5(n){const e=new tL(n);return e.base64?eL(wu.BASE64,e.rest):function S5(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Mw(wu.DATA_URL,"Malformed data URL.")}return JN(e)}(e.rest)}(e),function D5(n){return new tL(n).contentType}(e))}throw Qk()}function JN(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function eL(n,e){switch(n){case wu.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw Mw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case wu.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw Mw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function C5(n){if("undefined"==typeof atob)throw function u5(n){return new ki(Jr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Mw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class tL{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Mw(wu.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function I5(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class nh{constructor(e,t){let r=0,i="";YN(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(YN(this.data_)){const i=function w5(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new nh(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new nh(r,!0)}}static getBlob(...e){if(Xk()){const t=e.map(r=>r instanceof nh?r.data_:r);return new nh(E5.apply(null,t))}{const t=e.map(a=>gD(a)?tM(wu.RAW,a).data:a.data_);let r=0;t.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(a=>{for(let c=0;c<a.length;c++)i[s++]=a[c]}),new nh(i,!0)}}uploadData(){return this.data_}}function nM(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function p5(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function nL(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function M5(n,e){return e}class la{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||M5}}let _D=null;function Rw(){if(_D)return _D;const n=[];n.push(new la("bucket")),n.push(new la("generation")),n.push(new la("metageneration")),n.push(new la("name","fullPath",!0));const t=new la("name");t.xform=function e(s,a){return function P5(n){return!gD(n)||n.length<2?n:nL(n)}(a)},n.push(t);const i=new la("size");return i.xform=function r(s,a){return void 0!==a?Number(a):a},n.push(i),n.push(new la("timeCreated")),n.push(new la("updated")),n.push(new la("md5Hash",null,!0)),n.push(new la("cacheControl",null,!0)),n.push(new la("contentDisposition",null,!0)),n.push(new la("contentEncoding",null,!0)),n.push(new la("contentLanguage",null,!0)),n.push(new la("contentType",null,!0)),n.push(new la("metadata","customMetadata",!0)),_D=n,_D}function rL(n,e,t){const r=nM(e);return null===r?null:function O5(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const a=t[s];r[a.local]=a.xform(r,e[a.server])}return function R5(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new qo(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function rM(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const iL="prefixes";class rh{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ih(n){if(!n)throw Qk()}function yD(n,e){return function t(r,i){const s=rL(n,i,e);return ih(null!==s),s}}function Jv(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function t5(){return new ki(Jr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function e5(){return new ki(Jr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function JV(n){return new ki(Jr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function n5(n){return new ki(Jr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Ow(n){const e=Jv(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function XV(n){return new ki(Jr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function oL(n,e,t){const i=sp(e.fullServerUrl(),n.host,n._protocol),a=n.maxOperationRetryTime,c=new rh(i,"GET",yD(n,t),a);return c.errorHandler=Ow(e),c}function V5(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const c=sp(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,b=new rh(c,"GET",function U5(n,e){return function t(r,i){const s=function F5(n,e,t){const r=nM(t);return null===r?null:function L5(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[iL])for(const i of t[iL]){const s=i.replace(/\/$/,""),a=n._makeStorageReference(new qo(e,s));r.prefixes.push(a)}if(t.items)for(const i of t.items){const s=n._makeStorageReference(new qo(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return ih(null!==s),s}}(n,e.bucket),y);return b.urlParams=s,b.errorHandler=Jv(e),b}function uL(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function q5(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class vD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function iM(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){ih(!1)}return ih(!!t&&-1!==(e||["active"]).indexOf(t)),t}const K5={STATE_CHANGED:"state_changed"},ca={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function sM(n){switch(n){case"running":case"pausing":case"canceling":return ca.RUNNING;case"paused":return ca.PAUSED;case"success":return ca.SUCCESS;case"canceled":return ca.CANCELED;default:return ca.ERROR}}class Z5{constructor(e,t,r){if(function f5(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function eb(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Q5 extends class Y5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hm.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hm.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hm.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Pw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Pw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Pw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Pw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Pw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Rc(){return new Q5}class hL{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Rw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Jr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(XN(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=GN()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Jr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function G5(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),a=uL(e,r,i),c={name:a.fullPath},f=sp(s,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},D=rM(a,t),U=new rh(f,"POST",function B(K){let ie;iM(K);try{ie=K.getResponseHeader("X-Goog-Upload-URL")}catch(Ae){ih(!1)}return ih(gD(ie)),ie},n.maxUploadRetryTime);return U.urlParams=c,U.headers=b,U.body=D,U.errorHandler=Jv(e),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Rc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function z5(n,e,t,r){const f=new rh(t,"POST",function s(y){const b=iM(y,["active","final"]);let D=null;try{D=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch(B){ih(!1)}D||ih(!1);const N=Number(D);return ih(!isNaN(N)),new vD(N,r.size(),"final"===b)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=Jv(e),f}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Rc,t,r);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new vD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let a;try{a=function W5(n,e,t,r,i,s,a,c){const f=new vD(0,0);if(a?(f.current=a.current,f.total=a.total):(f.current=0,f.total=r.size()),r.size()!==f.total)throw function o5(){return new ki(Jr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const y=f.total-f.current;let b=y;i>0&&(b=Math.min(b,i));const D=f.current;let B="";B=0===b?"finalize":y===b?"upload, finalize":"upload";const U={"X-Goog-Upload-Command":B,"X-Goog-Upload-Offset":`${f.current}`},K=r.slice(D,D+b);if(null===K)throw WN();const Le=new rh(t,"POST",function ie(Me,Ee){const pt=iM(Me,["active","final"]),Nt=f.current+b,hn=r.size();let ct;return ct="final"===pt?yD(e,s)(Me,Ee):null,new vD(Nt,hn,"final"===pt,ct)},e.maxUploadRetryTime);return Le.headers=U,Le.body=K.uploadData(),Le.progressCallback=c||null,Le.errorHandler=Jv(n),Le}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const c=this._ref.storage._makeRequest(a,Rc,i,s,!1);this._request=c,c.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=oL(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Rc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function lL(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},f=function c(){let Le="";for(let Me=0;Me<2;Me++)Le+=Math.random().toString().slice(2);return Le}();a["Content-Type"]="multipart/related; boundary="+f;const y=uL(e,r,i),b=rM(y,t),B=nh.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+f+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+f+"--");if(null===B)throw WN();const U={name:y.fullPath},K=sp(s,n.host,n._protocol),Ae=n.maxUploadRetryTime,be=new rh(K,"POST",yD(n,t),Ae);return be.urlParams=U,be.headers=a,be.body=B.uploadData(),be.errorHandler=Jv(e),be}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Rc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=zN(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=sM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new Z5(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(sM(this._state)){case ca.SUCCESS:eb(this._resolve.bind(null,this.snapshot))();break;case ca.CANCELED:case ca.ERROR:eb(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(sM(this._state)){case ca.RUNNING:case ca.PAUSED:e.next&&eb(e.next.bind(e,this.snapshot))();break;case ca.SUCCESS:e.complete&&eb(e.complete.bind(e))();break;default:e.error&&eb(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Ty{constructor(e,t){this._service=e,this._location=t instanceof qo?t:qo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ty(e,t)}get root(){const e=new qo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nL(this._location.path)}get storage(){return this._service}get parent(){const e=function A5(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new qo(this._location.bucket,e);return new Ty(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw ZN(e)}}function pL(n,e,t){return oM.apply(this,arguments)}function oM(){return oM=(0,at.Z)(function*(n,e,t){const i=yield gL(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield pL(n,e,i.nextPageToken))}),oM.apply(this,arguments)}function gL(n,e){null!=e&&"number"==typeof e.maxResults&&Jk("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=V5(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Rc)}function lj(n){n._throwIfRoot("getDownloadURL");const e=function j5(n,e,t){const i=sp(e.fullServerUrl(),n.host,n._protocol),a=n.maxOperationRetryTime,c=new rh(i,"GET",function B5(n,e){return function t(r,i){const s=rL(n,i,e);return ih(null!==s),function N5(n,e,t,r){const i=nM(e);if(null===i||!gD(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const a=encodeURIComponent;return s.split(",").map(y=>{const D=n.fullPath;return sp("/b/"+a(n.bucket)+"/o/"+a(D),t,r)+QN({alt:"media",token:y})})[0]}(s,i,n.host,n._protocol)}}(n,t),a);return c.errorHandler=Ow(e),c}(n.storage,n._location,Rw());return n.storage.makeRequestWithTokens(e,Rc).then(t=>{if(null===t)throw function a5(){return new ki(Jr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function mL(n,e){const t=function k5(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new qo(n._location.bucket,t);return new Ty(n.storage,r)}function _L(n,e){if(n instanceof aM){const t=n;if(null==t._bucket)throw function s5(){return new ki(Jr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+qN+"' property when initializing the app?")}();const r=new Ty(t,t._bucket);return null!=e?_L(r,e):r}return void 0!==e?mL(n,e):n}function fj(n,e){if(e&&function dj(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof aM)return function hj(n,e){return new Ty(n,e)}(n,e);throw Xv("To use ref(service, url), the first argument must be a Storage instance.")}return _L(n,e)}function yL(n,e){const t=null==e?void 0:e[qN];return null==t?null:qo.makeFromBucketSpec(t,n)}class aM{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=HN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?qo.makeFromBucketSpec(i,this._host):yL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?qo.makeFromBucketSpec(this._url,e):yL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Jk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Jk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,at.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,at.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ty(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new l5(KN());{const a=function b5(n,e,t,r,i,s,a=!0){const c=QN(n.urlParams),f=n.url+c,y=Object.assign({},n.headers);return function y5(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function m5(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function _5(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(y,s),function v5(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new g5(f,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,at.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const vL="@firebase/storage";function EL(n,e){return fj(n=(0,Rn.m9)(n),e)}function wj(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new aM(t,r,i,e,hl.SDK_VERSION)}!function Cj(){(0,hl._registerComponent)(new uf.wA("storage",wj,"PUBLIC").setMultipleInstances(!0)),(0,hl.registerVersion)(vL,"0.11.2",""),(0,hl.registerVersion)(vL,"0.11.2","esm2017")}();class bD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class CL{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new bD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new bD(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?a=>t(new bD(a,this,this._ref)):{next:t.next?a=>t.next(new bD(a,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class SL{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new op(e,this._service))}get items(){return this._delegate.items.map(e=>new op(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class op{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Ej(n,e){return mL(n,e)}(this._delegate,e);return new op(t,this.storage)}get root(){return new op(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new op(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new CL(function gj(n,e,t){return function ij(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new hL(n,new nh(e),t)}(n=(0,Rn.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=wu.RAW,r){this._throwIfRoot("putString");const i=tM(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new CL(new hL(this._delegate,new nh(i.data,!0),s),this)}listAll(){return function vj(n){return function oj(n){const e={prefixes:[],items:[]};return pL(n,e).then(()=>e)}(n=(0,Rn.m9)(n))}(this._delegate).then(e=>new SL(e,this.storage))}list(e){return function yj(n,e){return gL(n=(0,Rn.m9)(n),e)}(this._delegate,e||void 0).then(t=>new SL(t,this.storage))}getMetadata(){return function mj(n){return function aj(n){n._throwIfRoot("getMetadata");const e=oL(n.storage,n._location,Rw());return n.storage.makeRequestWithTokens(e,Rc)}(n=(0,Rn.m9)(n))}(this._delegate)}updateMetadata(e){return function _j(n,e){return function uj(n,e){n._throwIfRoot("updateMetadata");const t=function $5(n,e,t,r){const s=sp(e.fullServerUrl(),n.host,n._protocol),c=rM(t,r),y=n.maxOperationRetryTime,b=new rh(s,"PATCH",yD(n,r),y);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=c,b.errorHandler=Ow(e),b}(n.storage,n._location,e,Rw());return n.storage.makeRequestWithTokens(t,Rc)}(n=(0,Rn.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function bj(n){return lj(n=(0,Rn.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Tj(n){return function cj(n){n._throwIfRoot("deleteObject");const e=function H5(n,e){const r=sp(e.fullServerUrl(),n.host,n._protocol),c=new rh(r,"DELETE",function a(f,y){},n.maxOperationRetryTime);return c.successCodes=[200,204],c.errorHandler=Ow(e),c}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Rc)}(n=(0,Rn.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw ZN(e)}}class xL{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(DL(e))throw Xv("ref() expected a child path but got a URL, use refFromURL instead.");return new op(EL(this._delegate,e),this)}refFromURL(e){if(!DL(e))throw Xv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{qo.makeFromUrl(e,this._delegate.host)}catch(t){throw Xv("refFromUrl() expected a valid full URL but got an invalid one.")}return new op(EL(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function wL(n,e,t,r={}){!function pj(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Rn.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function DL(n){return/^[A-Za-z]+:\/\//.test(n)}function Ij(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new xL(t,r)}function IL(n){const e=function kj(n){return new Ls.y(e=>{const t=a=>e.next(a);t(n.snapshot);const s=n.on("state_changed",t);return n.then(a=>{t(a),e.complete()},a=>{t(n.snapshot),(a=>{e.error(a)})(a)}),function(){s()}}).pipe(function KV(n,e=f0.z){return(0,xi.e)((t,r)=>{let i=null,s=null,a=null;const c=()=>{if(i){i.unsubscribe(),i=null;const y=s;s=null,r.next(y)}};function f(){const y=a+n,b=e.now();if(b<y)return i=this.schedule(void 0,y-b),void r.add(i);c()}t.subscribe((0,Kr.x)(r,y=>{s=y,a=e.now(),i||(i=e.schedule(f,n),r.add(i))},()=>{c(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,vn.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function TD(n){return{getDownloadURL:()=>yn(void 0).pipe(Qr.fc,Ln(()=>n.getDownloadURL()),Qr.iC),getMetadata:()=>yn(void 0).pipe(Qr.fc,Ln(()=>n.getMetadata()),Qr.iC),delete:()=>(0,Tr.D)(n.delete()),child:e=>TD(n.child(e)),updateMetadata:e=>(0,Tr.D)(n.updateMetadata(e)),put:(e,t)=>IL(n.put(e,t)),putString:(e,t,r)=>IL(n.putString(e,t,r)),list:e=>(0,Tr.D)(n.list(e)),listAll:()=>(0,Tr.D)(n.listAll())}}!function Aj(n){const e={TaskState:ca,TaskEvent:K5,StringFormat:wu,Storage:xL,Reference:op};n.INTERNAL.registerComponent(new uf.wA("storage-compat",Ij,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(Zb.Z);const Mj=new h.OlP("angularfire2.storageBucket"),Pj=new h.OlP("angularfire2.storage.maxUploadRetryTime"),Rj=new h.OlP("angularfire2.storage.maxOperationRetryTime"),Oj=new h.OlP("angularfire2.storage.use-emulator");let uM=(()=>{class n{constructor(t,r,i,s,a,c,f,y,b,D){const N=(0,Fo.on)(t,a,r);this.storage=(0,Fo.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const B=a.runOutsideAngular(()=>N.storage(i||void 0)),U=b;return U&&B.useEmulator(...U),f&&B.setMaxUploadRetryTime(f),y&&B.setMaxOperationRetryTime(y),B},[f,y])}ref(t){return TD(this.storage.ref(t))}refFromURL(t){return TD(this.storage.refFromURL(t))}upload(t,r,i){return TD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Fo.Dh),h.LFG(Fo.xv,8),h.LFG(Mj,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Qr.HU),h.LFG(Pj,8),h.LFG(Rj,8),h.LFG(Oj,8),h.LFG(fD,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Nj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),Lj=(()=>{class n{constructor(){Qv.Z.registerVersion("angularfire",Qr.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[uM],imports:[Nj]}),n})(),ED=(()=>{class n{constructor(t,r,i){this.db=t,this.auth=r,this.storage=i,this.pageClips=[],this.pendingReq=!1,this.clipsCollection=t.collection("clips")}createClip(t){return this.clipsCollection.add(t)}getUserClips(t){return Kl([this.auth.user,t]).pipe(Ln(r=>{const[i,s]=r;return i?this.clipsCollection.ref.where("uid","==",i.uid).orderBy("timestamp","1"===s?"desc":"asc").get():yn([])}),(0,vn.U)(r=>r.docs))}updateClip(t,r){return this.clipsCollection.doc(t).update({title:r})}deleteClip(t){var r=this;return(0,at.Z)(function*(){const i=r.storage.ref("clips/${clip.fileName}"),s=r.storage.ref(`screenshots/${t.screenshotFileName}`);yield i.delete(),yield s.delete(),yield r.clipsCollection.doc(t.docID).delete()})()}getClips(){var t=this;return(0,at.Z)(function*(){if(t.pendingReq)return;t.pendingReq=!0;let r=t.clipsCollection.ref.orderBy("timestamp","desc").limit(6);const i=t.pageClips.length;if(i){const a=t.pageClips[i-1].docID,c=yield t.clipsCollection.doc(a).get().toPromise();r=r.startAfter(c)}(yield r.get()).forEach(a=>{t.pageClips.push(Object.assign({docID:a.id},a.data()))}),t.pendingReq=!1})()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Zk),h.LFG(ip),h.LFG(uM))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Fj=(()=>{class n{constructor(t){this.datePipe=t}transform(t){const r=t.toDate();return this.datePipe.transform(r,"mediumDate")}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Tp,16))},n.\u0275pipe=h.Yjl({name:"fbTimestamp",type:n,pure:!0}),n})();const Uj=function(n){return["/","clip",n]};function Bj(n,e){if(1&n&&(h.TgZ(0,"a",2),h._UZ(1,"img",3),h.TgZ(2,"div",4)(3,"div",5)(4,"div",6),h.O4$(),h.TgZ(5,"svg",7),h._UZ(6,"path",8),h.qZA()()()(),h.kcU(),h.TgZ(7,"div",9)(8,"h2",10),h._uU(9),h.qZA(),h.TgZ(10,"p",11),h._uU(11),h.TgZ(12,"span",12),h._uU(13),h.ALo(14,"fbTimestamp"),h.qZA()()()()),2&n){const t=e.$implicit;h.Q6J("routerLink",h.VKq(7,Uj,t.docID)),h.xp6(1),h.Q6J("src",t.screenshotURL,h.LSH),h.xp6(8),h.hij(" ",t.title," "),h.xp6(2),h.hij(" ",t.displayName," \xb7 "),h.xp6(2),h.Oqu(h.lcZ(14,5,t.timestamp))}}let AL=(()=>{class n{constructor(t){this.clipService=t,this.scrollable=!0,this.handleScroll=()=>{const{scrollTop:r,offsetHeight:i}=document.documentElement,{innerHeight:s}=window;Math.round(r)+s===i&&(console.log("reached at bottom of window"),this.clipService.getClips())},this.clipService.getClips()}ngOnInit(){this.scrollable&&window.addEventListener("scroll",this.handleScroll)}ngOnDestroy(){this.scrollable&&window.removeEventListener("scroll",this.handleScroll),this.clipService.pageClips=[]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ED))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-clips-list"]],inputs:{scrollable:"scrollable"},features:[h._Bn([Tp])],decls:2,vars:1,consts:[[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary transform hover:-translate-y-2 hover:shadow-2xl transition duration-300",3,"routerLink",4,"ngFor","ngForOf"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300",3,"routerLink"],["crossorigin","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.YNc(1,Bj,15,9,"a",1),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngForOf",r.clipService.pageClips))},directives:[ri,cl],pipes:[Fj],styles:[""]}),n})(),Vj=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:20,vars:0,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"]],template:function(t,r){1&t&&(h.TgZ(0,"section",0)(1,"video",1),h._UZ(2,"source",2),h.qZA(),h._UZ(3,"div",3),h.TgZ(4,"div",4),h._UZ(5,"div",5)(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5),h.qZA(),h.TgZ(10,"div",6)(11,"div",7)(12,"h1",8),h._uU(13,"Clip it and ship it!"),h.qZA(),h.TgZ(14,"p"),h._uU(15," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),h.qZA()()()(),h.TgZ(16,"section",9)(17,"h1",10),h._uU(18,"Latest"),h.qZA(),h._UZ(19,"app-clips-list"),h.qZA())},directives:[AL],styles:[""]}),n})(),jj=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-about"]],decls:2,vars:0,consts:[[1,"container","mx-auto","mt-4"]],template:function(t,r){1&t&&(h.TgZ(0,"p",0),h._uU(1," This is a basic about page to demonstrate basic routing capabilities. "),h.qZA())},styles:[""]}),n})();var $j=$(9226),fe=$.n($j),Hj=$(1421),Lt=$.n(Hj),qj=$(1234),Un=$.n(qj),Gj=$(8099),zj=$.n(Gj),Wj=$(745),kL=$.n(Wj),Kj=$(3629),ML=$.n(Kj);function Oc(){return Oc=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Oc.apply(this,arguments)}var Zj=$(3871),PL=$.n(Zj),RL="http://example.com";const wD=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=fe().location&&fe().location.href||"");var r="function"==typeof fe().URL,i=/^\/\//.test(e),s=!fe().location&&!/\/\//i.test(e);if(r?e=new(fe().URL)(e,fe().location||RL):/\/\//i.test(e)||(e=PL().buildAbsoluteURL(fe().location&&fe().location.href||"",e)),r){var a=new URL(t,e);return s?a.href.slice(RL.length):i?a.href.slice(a.protocol.length):a.href}return PL().buildAbsoluteURL(e,t)};var lM=function(){function n(){this.listeners={}}var e=n.prototype;return e.on=function(r,i){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(i)},e.off=function(r,i){if(!this.listeners[r])return!1;var s=this.listeners[r].indexOf(i);return this.listeners[r]=this.listeners[r].slice(0),this.listeners[r].splice(s,1),s>-1},e.trigger=function(r){var i=this.listeners[r];if(i)if(2===arguments.length)for(var s=i.length,a=0;a<s;++a)i[a].call(this,arguments[1]);else for(var c=Array.prototype.slice.call(arguments,1),f=i.length,y=0;y<f;++y)i[y].apply(this,c)},e.dispose=function(){this.listeners={}},e.pipe=function(r){this.on("data",function(i){r.push(i)})},n}();function Xj(n){for(var e=function(e){return fe().atob?fe().atob(e):Buffer.from(e,"base64").toString("binary")}(n),t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}class Jj extends lM{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}const e9=String.fromCharCode(9),cM=function(n){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(n||""),t={};return e[1]&&(t.length=parseInt(e[1],10)),e[2]&&(t.offset=parseInt(e[2],10)),t},Cu=function(n){const e={};if(!n)return e;const t=n.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let i,r=t.length;for(;r--;)""!==t[r]&&(i=/([^=]*)=(.*)/.exec(t[r]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),e[i[0]]=i[1]);return e};class n9 extends lM{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,r;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((s,a)=>{const c=a(e);return c===e?s:s.concat([c])},[e]).forEach(s=>{for(let a=0;a<this.customParsers.length;a++)if(this.customParsers[a].call(this,s))return;if(0===s.indexOf("#EXT"))if(s=s.replace("\r",""),t=/^#EXTM3U/.exec(s),t)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(s),t)return r={type:"tag",tagType:"inf"},t[1]&&(r.duration=parseFloat(t[1])),t[2]&&(r.title=t[2]),void this.trigger("data",r);if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(s),t)return r={type:"tag",tagType:"targetduration"},t[1]&&(r.duration=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(s),t)return r={type:"tag",tagType:"version"},t[1]&&(r.version=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t)return r={type:"tag",tagType:"media-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t)return r={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(s),t)return r={type:"tag",tagType:"playlist-type"},t[1]&&(r.playlistType=t[1]),void this.trigger("data",r);if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(s),t)return r=Oc(cM(t[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",r);if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(s),t)return r={type:"tag",tagType:"allow-cache"},t[1]&&(r.allowed=!/NO/.test(t[1])),void this.trigger("data",r);if(t=/^#EXT-X-MAP:(.*)$/.exec(s),t){if(r={type:"tag",tagType:"map"},t[1]){const a=Cu(t[1]);a.URI&&(r.uri=a.URI),a.BYTERANGE&&(r.byterange=cM(a.BYTERANGE))}this.trigger("data",r)}else if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(s),t){if(r={type:"tag",tagType:"stream-inf"},t[1]){if(r.attributes=Cu(t[1]),r.attributes.RESOLUTION){const a=r.attributes.RESOLUTION.split("x"),c={};a[0]&&(c.width=parseInt(a[0],10)),a[1]&&(c.height=parseInt(a[1],10)),r.attributes.RESOLUTION=c}r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["FRAME-RATE"]&&(r.attributes["FRAME-RATE"]=parseFloat(r.attributes["FRAME-RATE"])),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))}this.trigger("data",r)}else{if(t=/^#EXT-X-MEDIA:(.*)$/.exec(s),t)return r={type:"tag",tagType:"media"},t[1]&&(r.attributes=Cu(t[1])),void this.trigger("data",r);if(t=/^#EXT-X-ENDLIST/.exec(s),t)this.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(s),t)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(s),t)return r={type:"tag",tagType:"program-date-time"},t[1]&&(r.dateTimeString=t[1],r.dateTimeObject=new Date(t[1])),void this.trigger("data",r);if(t=/^#EXT-X-KEY:(.*)$/.exec(s),t)return r={type:"tag",tagType:"key"},t[1]&&(r.attributes=Cu(t[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2).toLowerCase()&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void this.trigger("data",r);if(t=/^#EXT-X-START:(.*)$/.exec(s),t)return r={type:"tag",tagType:"start"},t[1]&&(r.attributes=Cu(t[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),void this.trigger("data",r);if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(s),t)return r={type:"tag",tagType:"cue-out-cont"},r.data=t[1]?t[1]:"",void this.trigger("data",r);if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(s),t)return r={type:"tag",tagType:"cue-out"},r.data=t[1]?t[1]:"",void this.trigger("data",r);if(t=/^#EXT-X-CUE-IN:(.*)?$/.exec(s),t)return r={type:"tag",tagType:"cue-in"},r.data=t[1]?t[1]:"",void this.trigger("data",r);if(t=/^#EXT-X-SKIP:(.*)$/.exec(s),t&&t[1])return r={type:"tag",tagType:"skip"},r.attributes=Cu(t[1]),r.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(r.attributes["SKIPPED-SEGMENTS"]=parseInt(r.attributes["SKIPPED-SEGMENTS"],10)),r.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(r.attributes["RECENTLY-REMOVED-DATERANGES"]=r.attributes["RECENTLY-REMOVED-DATERANGES"].split(e9)),void this.trigger("data",r);if(t=/^#EXT-X-PART:(.*)$/.exec(s),t&&t[1])return r={type:"tag",tagType:"part"},r.attributes=Cu(t[1]),["DURATION"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=parseFloat(r.attributes[a]))}),["INDEPENDENT","GAP"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=/YES/.test(r.attributes[a]))}),r.attributes.hasOwnProperty("BYTERANGE")&&(r.attributes.byterange=cM(r.attributes.BYTERANGE)),void this.trigger("data",r);if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(s),t&&t[1])return r={type:"tag",tagType:"server-control"},r.attributes=Cu(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=parseFloat(r.attributes[a]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=/YES/.test(r.attributes[a]))}),void this.trigger("data",r);if(t=/^#EXT-X-PART-INF:(.*)$/.exec(s),t&&t[1])return r={type:"tag",tagType:"part-inf"},r.attributes=Cu(t[1]),["PART-TARGET"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=parseFloat(r.attributes[a]))}),void this.trigger("data",r);if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(s),t&&t[1])return r={type:"tag",tagType:"preload-hint"},r.attributes=Cu(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(a){if(r.attributes.hasOwnProperty(a)){r.attributes[a]=parseInt(r.attributes[a],10);const c="BYTERANGE-LENGTH"===a?"length":"offset";r.attributes.byterange=r.attributes.byterange||{},r.attributes.byterange[c]=r.attributes[a],delete r.attributes[a]}}),void this.trigger("data",r);if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(s),t&&t[1])return r={type:"tag",tagType:"rendition-report"},r.attributes=Cu(t[1]),["LAST-MSN","LAST-PART"].forEach(function(a){r.attributes.hasOwnProperty(a)&&(r.attributes[a]=parseInt(r.attributes[a],10))}),void this.trigger("data",r);if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(s),t&&t[1]){r={type:"tag",tagType:"daterange"},r.attributes=Cu(t[1]),["ID","CLASS"].forEach(function(c){r.attributes.hasOwnProperty(c)&&(r.attributes[c]=String(r.attributes[c]))}),["START-DATE","END-DATE"].forEach(function(c){r.attributes.hasOwnProperty(c)&&(r.attributes[c]=new Date(r.attributes[c]))}),["DURATION","PLANNED-DURATION"].forEach(function(c){r.attributes.hasOwnProperty(c)&&(r.attributes[c]=parseFloat(r.attributes[c]))}),["END-ON-NEXT"].forEach(function(c){r.attributes.hasOwnProperty(c)&&(r.attributes[c]=/YES/i.test(r.attributes[c]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(c){r.attributes.hasOwnProperty(c)&&(r.attributes[c]=r.attributes[c].toString(16))});const a=/^X-([A-Z]+-)+[A-Z]+$/;for(const c in r.attributes){if(!a.test(c))continue;const f=/[0-9A-Fa-f]{6}/g.test(r.attributes[c]),y=/^\d+(\.\d+)?$/.test(r.attributes[c]);r.attributes[c]=f?r.attributes[c].toString(16):y?parseFloat(r.attributes[c]):String(r.attributes[c])}this.trigger("data",r)}else{if(t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(s),!t)return t=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(s),t?(r={type:"tag",tagType:"content-steering"},r.attributes=Cu(t[1]),void this.trigger("data",r)):void this.trigger("data",{type:"tag",data:s.slice(4)});this.trigger("data",{type:"tag",tagType:"independent-segments"})}}}}else this.trigger("data",{type:"comment",text:s.slice(1)})}):this.trigger("data",{type:"uri",uri:e}))}addParser({expression:e,customType:t,dataParser:r,segment:i}){"function"!=typeof r&&(r=s=>s),this.customParsers.push(s=>{if(e.exec(s))return this.trigger("data",{type:"custom",data:r(s),customType:t,segment:i}),!0})}addTagMapper({expression:e,map:t}){this.tagMappers.push(i=>e.test(i)?t(i):i)}}const fm=function(n){const e={};return Object.keys(n).forEach(function(t){e[(n=>n.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()))(t)]=n[t]}),e},dM=function(n){const{serverControl:e,targetDuration:t,partTargetDuration:r}=n;if(!e)return;const i="#EXT-X-SERVER-CONTROL",s="holdBack",a="partHoldBack",c=t&&3*t,f=r&&2*r;t&&!e.hasOwnProperty(s)&&(e[s]=c,this.trigger("info",{message:`${i} defaulting HOLD-BACK to targetDuration * 3 (${c}).`})),c&&e[s]<c&&(this.trigger("warn",{message:`${i} clamping HOLD-BACK (${e[s]}) to targetDuration * 3 (${c})`}),e[s]=c),r&&!e.hasOwnProperty(a)&&(e[a]=3*r,this.trigger("info",{message:`${i} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[a]}).`})),r&&e[a]<f&&(this.trigger("warn",{message:`${i} clamping PART-HOLD-BACK (${e[a]}) to partTargetDuration * 2 (${f}).`}),e[a]=f)};class i9 extends lM{constructor(){super(),this.lineStream=new Jj,this.parseStream=new n9,this.lineStream.pipe(this.parseStream),this.lastProgramDateTime=null;const e=this,t=[];let i,s,r={},a=!1;const c=function(){},f={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let b=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],segments:[]};let D=0,N=0;const B={};this.on("end",()=>{r.uri||!r.parts&&!r.preloadHints||(!r.map&&i&&(r.map=i),!r.key&&s&&(r.key=s),!r.timeline&&"number"==typeof b&&(r.timeline=b),this.manifest.preloadSegment=r)}),this.parseStream.on("data",function(U){let K,ie;({tag(){({version(){U.version&&(this.manifest.version=U.version)},"allow-cache"(){this.manifest.allowCache=U.allowed,"allowed"in U||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const Ae={};"length"in U&&(r.byterange=Ae,Ae.length=U.length,"offset"in U||(U.offset=D)),"offset"in U&&(r.byterange=Ae,Ae.offset=U.offset),D=Ae.offset+Ae.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),U.title&&(r.title=U.title),U.duration>0&&(r.duration=U.duration),0===U.duration&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=t},key(){if(U.attributes)if("NONE"!==U.attributes.METHOD){if(U.attributes.URI)return"com.apple.streamingkeydelivery"===U.attributes.KEYFORMAT?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:U.attributes})):"com.microsoft.playready"===U.attributes.KEYFORMAT?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:U.attributes.URI})):"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===U.attributes.KEYFORMAT?-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(U.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===U.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==U.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):U.attributes.KEYID&&"0x"===U.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:U.attributes.KEYFORMAT,keyId:U.attributes.KEYID.substring(2)},pssh:Xj(U.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"})):(U.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),s={method:U.attributes.METHOD||"AES-128",uri:U.attributes.URI},void(void 0!==U.attributes.IV&&(s.iv=U.attributes.IV)));this.trigger("warn",{message:"ignoring key declaration without URI"})}else s=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(U.number)?this.manifest.mediaSequence=U.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+U.number})},"discontinuity-sequence"(){isFinite(U.number)?(this.manifest.discontinuitySequence=U.number,b=U.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+U.number})},"playlist-type"(){/VOD|EVENT/.test(U.playlistType)?this.manifest.playlistType=U.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+U.playlist})},map(){i={},U.uri&&(i.uri=U.uri),U.byterange&&(i.byterange=U.byterange),s&&(i.key=s)},"stream-inf"(){this.manifest.playlists=t,this.manifest.mediaGroups=this.manifest.mediaGroups||f,U.attributes?(r.attributes||(r.attributes={}),Oc(r.attributes,U.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||f,!(U.attributes&&U.attributes.TYPE&&U.attributes["GROUP-ID"]&&U.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const Ae=this.manifest.mediaGroups[U.attributes.TYPE];Ae[U.attributes["GROUP-ID"]]=Ae[U.attributes["GROUP-ID"]]||{},K=Ae[U.attributes["GROUP-ID"]],ie={default:/yes/i.test(U.attributes.DEFAULT)},ie.autoselect=!!ie.default||/yes/i.test(U.attributes.AUTOSELECT),U.attributes.LANGUAGE&&(ie.language=U.attributes.LANGUAGE),U.attributes.URI&&(ie.uri=U.attributes.URI),U.attributes["INSTREAM-ID"]&&(ie.instreamId=U.attributes["INSTREAM-ID"]),U.attributes.CHARACTERISTICS&&(ie.characteristics=U.attributes.CHARACTERISTICS),U.attributes.FORCED&&(ie.forced=/yes/i.test(U.attributes.FORCED)),K[U.attributes.NAME]=ie},discontinuity(){b+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(t.length)},"program-date-time"(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=U.dateTimeString,this.manifest.dateTimeObject=U.dateTimeObject),r.dateTimeString=U.dateTimeString,r.dateTimeObject=U.dateTimeObject;const{lastProgramDateTime:Ae}=this;this.lastProgramDateTime=new Date(U.dateTimeString).getTime(),null===Ae&&this.manifest.segments.reduceRight((be,Le)=>(Le.programDateTime=be-1e3*Le.duration,Le.programDateTime),this.lastProgramDateTime)},targetduration(){!isFinite(U.duration)||U.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+U.duration}):(this.manifest.targetDuration=U.duration,dM.call(this,this.manifest))},start(){U.attributes&&!isNaN(U.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:U.attributes["TIME-OFFSET"],precise:U.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){r.cueOut=U.data},"cue-out-cont"(){r.cueOutCont=U.data},"cue-in"(){r.cueIn=U.data},skip(){this.manifest.skip=fm(U.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",U.attributes,["SKIPPED-SEGMENTS"])},part(){a=!0;const Ae=this.manifest.segments.length,be=fm(U.attributes);r.parts=r.parts||[],r.parts.push(be),be.byterange&&(be.byterange.hasOwnProperty("offset")||(be.byterange.offset=N),N=be.byterange.offset+be.byterange.length),this.warnOnMissingAttributes_(`#EXT-X-PART #${r.parts.length-1} for segment #${Ae}`,U.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((Me,Ee)=>{Me.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${Ee} lacks required attribute(s): LAST-PART`})})},"server-control"(){const Ae=this.manifest.serverControl=fm(U.attributes);Ae.hasOwnProperty("canBlockReload")||(Ae.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),dM.call(this,this.manifest),Ae.canSkipDateranges&&!Ae.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const Ae=this.manifest.segments.length,be=fm(U.attributes),Le=be.type&&"PART"===be.type;r.preloadHints=r.preloadHints||[],r.preloadHints.push(be),be.byterange&&(be.byterange.hasOwnProperty("offset")||(be.byterange.offset=Le?N:0,Le&&(N=be.byterange.offset+be.byterange.length)));const Me=r.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${Me} for segment #${Ae}`,U.attributes,["TYPE","URI"]),be.type)for(let Ee=0;Ee<r.preloadHints.length-1;Ee++){const pt=r.preloadHints[Ee];!pt.type||pt.type===be.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${Me} for segment #${Ae} has the same TYPE ${be.type} as preload hint #${Ee}`})}},"rendition-report"(){const Ae=fm(U.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(Ae);const be=this.manifest.renditionReports.length-1,Le=["LAST-MSN","URI"];a&&Le.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${be}`,U.attributes,Le)},"part-inf"(){this.manifest.partInf=fm(U.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",U.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),dM.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(fm(U.attributes));const Ae=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${Ae}`,U.attributes,["ID","START-DATE"]);const be=this.manifest.dateRanges[Ae];be.endDate&&be.startDate&&new Date(be.endDate)<new Date(be.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),be.duration&&be.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),be.plannedDuration&&be.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const Le=!!be.endOnNext;if(Le&&!be.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),Le&&(be.duration||be.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),be.duration&&be.endDate){const Ee=be.startDate.getTime()+1e3*be.duration;this.manifest.dateRanges[Ae].endDate=new Date(Ee)}if(B[be.id]){for(const Ee in B[be.id])if(be[Ee]&&JSON.stringify(B[be.id][Ee])!==JSON.stringify(be[Ee])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const Me=this.manifest.dateRanges.findIndex(Ee=>Ee.id===be.id);this.manifest.dateRanges[Me]=Oc(this.manifest.dateRanges[Me],be),B[be.id]=Oc(B[be.id],be),this.manifest.dateRanges.pop()}else B[be.id]=be},"independent-segments"(){this.manifest.independentSegments=!0},"content-steering"(){this.manifest.contentSteering=fm(U.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",U.attributes,["SERVER-URI"])}}[U.tagType]||c).call(e)},uri(){r.uri=U.uri,t.push(r),this.manifest.targetDuration&&!("duration"in r)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),s&&(r.key=s),r.timeline=b,i&&(r.map=i),N=0,null!==this.lastProgramDateTime&&(r.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=1e3*r.duration),r={}},comment(){},custom(){U.segment?(r.custom=r.custom||{},r.custom[U.customType]=U.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[U.customType]=U.data)}})[U.type].call(e)})}warnOnMissingAttributes_(e,t,r){const i=[];r.forEach(function(s){t.hasOwnProperty(s)||i.push(s)}),i.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${i.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push("\n"),this.manifest.dateRanges.length&&null===this.lastProgramDateTime&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var pm={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},s9=["video","audio","text"],OL=["Video","Audio","Text"],hM=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,r,i){return"avc1."+("00"+Number(r).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})},sh=function(e){void 0===e&&(e="");var t=e.split(","),r=[];return t.forEach(function(i){var s;i=i.trim(),s9.forEach(function(a){var c=pm[a].exec(i.toLowerCase());if(c&&!(c.length<=1)){s=a;var f=i.substring(0,c[1].length),y=i.replace(f,"");r.push({type:f,details:y,mediaType:a})}}),s||r.push({type:i,details:"",mediaType:"unknown"})}),r},NL=function(e){return void 0===e&&(e=""),pm.audio.test(e.trim().toLowerCase())},Nw=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase().split(",").map(function(s){return hM(s.trim())}),r="video";1===t.length&&NL(t[0])?r="audio":1===t.length&&function(e){return void 0===e&&(e=""),pm.text.test(e.trim().toLowerCase())}(t[0])&&(r="application");var i="mp4";return t.every(function(s){return pm.mp4.test(s)})?i="mp4":t.every(function(s){return pm.webm.test(s)})?i="webm":t.every(function(s){return pm.ogg.test(s)})&&(i="ogg"),r+"/"+i+';codecs="'+e+'"'}},CD=function(e){return void 0===e&&(e=""),fe().MediaSource&&fe().MediaSource.isTypeSupported&&fe().MediaSource.isTypeSupported(Nw(e))||!1},fM=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var r=0;r<OL.length;r++)if(pm["muxer"+OL[r]].test(t))return!0;return!1})},LL="mp4a.40.2",c9=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,d9=/^application\/dash\+xml/i,FL=function(e){return c9.test(e)?"hls":d9.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},BL=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},dn=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!function(e){return BL(e)}(e)&&!(e instanceof ArrayBuffer)&&(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},bo=fe().BigInt||Number,pM=[bo("0x1"),bo("0x100"),bo("0x10000"),bo("0x1000000"),bo("0x100000000"),bo("0x10000000000"),bo("0x1000000000000"),bo("0x100000000000000"),bo("0x10000000000000000")],m9=(function(){var n=new Uint16Array([65484]);new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}(),function(e,t){var r=void 0===t?{}:t,i=r.signed,s=void 0!==i&&i,a=r.le,c=void 0!==a&&a;e=dn(e);var f=c?"reduce":"reduceRight",b=(e[f]?e[f]:Array.prototype[f]).call(e,function(N,B,U){var K=c?U:Math.abs(U+1-e.length);return N+bo(B)*pM[K]},bo(0));if(s){var D=pM[e.length]/bo(2)-bo(1);(b=bo(b))>D&&(b-=D,b-=D,b-=bo(2))}return Number(b)}),jL=function(e,t){if("string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r},bi=function(e,t,r){var i=void 0===r?{}:r,s=i.offset,a=void 0===s?0:s,c=i.mask,f=void 0===c?[]:c;return e=dn(e),(t=dn(t)).length&&e.length-a>=t.length&&(t.every?t.every:Array.prototype.every).call(t,function(b,D){return b===(f[D]?f[D]&e[a+D]:e[a+D])})};var w9=$(978);const $L=n=>!!n&&"object"==typeof n,Ks=(...n)=>n.reduce((e,t)=>("object"!=typeof t||Object.keys(t).forEach(r=>{e[r]=Array.isArray(e[r])&&Array.isArray(t[r])?e[r].concat(t[r]):$L(e[r])&&$L(t[r])?Ks(e[r],t[r]):t[r]}),e),{}),HL=n=>Object.keys(n).map(e=>n[e]),tb=n=>n.reduce((e,t)=>e.concat(t),[]),qL=n=>{if(!n.length)return[];const e=[];for(let t=0;t<n.length;t++)e.push(n[t]);return e};const Lw=({baseUrl:n="",source:e="",range:t="",indexRange:r=""})=>{const i={uri:e,resolvedUri:wD(n||"",e)};if(t||r){const a=(t||r).split("-");let y,c=fe().BigInt?fe().BigInt(a[0]):parseInt(a[0],10),f=fe().BigInt?fe().BigInt(a[1]):parseInt(a[1],10);c<Number.MAX_SAFE_INTEGER&&"bigint"==typeof c&&(c=Number(c)),f<Number.MAX_SAFE_INTEGER&&"bigint"==typeof f&&(f=Number(f)),y="bigint"==typeof f||"bigint"==typeof c?fe().BigInt(f)-fe().BigInt(c)+fe().BigInt(1):f-c+1,"bigint"==typeof y&&y<Number.MAX_SAFE_INTEGER&&(y=Number(y)),i.byterange={length:y,offset:c}}return i},GL=n=>(n&&"number"!=typeof n&&(n=parseInt(n,10)),isNaN(n)?null:n),I9={static(n){const{duration:e,timescale:t=1,sourceDuration:r,periodDuration:i}=n,s=GL(n.endNumber),a=e/t;return"number"==typeof s?{start:0,end:s}:"number"==typeof i?{start:0,end:i/a}:{start:0,end:r/a}},dynamic(n){const{NOW:e,clientOffset:t,availabilityStartTime:r,timescale:i=1,duration:s,periodStart:a=0,minimumUpdatePeriod:c=0,timeShiftBufferDepth:f=1/0}=n,y=GL(n.endNumber),b=(e+t)/1e3,D=r+a,U=Math.ceil((b+c-D)*i/s),K=Math.floor((b-D-f)*i/s),ie=Math.floor((b-D)*i/s);return{start:Math.max(0,K),end:"number"==typeof y?y:Math.min(U,ie)}}},gM=n=>{const{type:e,duration:t,timescale:r=1,periodDuration:i,sourceDuration:s}=n,{start:a,end:c}=I9[e](n),f=((n,e)=>{const t=[];for(let r=n;r<e;r++)t.push(r);return t})(a,c).map((n=>e=>{const{duration:t,timescale:r=1,periodStart:i,startNumber:s=1}=n;return{number:s+e,duration:t/r,timeline:i,time:e*t}})(n));if("static"===e){const y=f.length-1;f[y].duration=("number"==typeof i?i:s)-t/r*y}return f},zL=n=>{const{baseUrl:e,initialization:t={},sourceDuration:r,indexRange:i="",periodStart:s,presentationTime:a,number:c=0,duration:f}=n;if(!e)throw new Error("NO_BASE_URL");const y=Lw({baseUrl:e,source:t.sourceURL,range:t.range}),b=Lw({baseUrl:e,source:e,indexRange:i});if(b.map=y,f){const D=gM(n);D.length&&(b.duration=D[0].duration,b.timeline=D[0].timeline)}else r&&(b.duration=r,b.timeline=s);return b.presentationTime=a||s,b.number=c,[b]},mM=(n,e,t)=>{const r=n.sidx.map?n.sidx.map:null,i=n.sidx.duration,s=n.timeline||0,a=n.sidx.byterange,c=a.offset+a.length,f=e.timescale,y=e.references.filter(ie=>1!==ie.referenceType),b=[],D=n.endList?"static":"dynamic",N=n.sidx.timeline;let K,B=N,U=n.mediaSequence||0;K="bigint"==typeof e.firstOffset?fe().BigInt(c)+e.firstOffset:c+e.firstOffset;for(let ie=0;ie<y.length;ie++){const Ae=e.references[ie],be=Ae.referencedSize,Le=Ae.subsegmentDuration;let Me;Me="bigint"==typeof K?K+fe().BigInt(be)-fe().BigInt(1):K+be-1;const Nt=zL({baseUrl:t,timescale:f,timeline:s,periodStart:N,presentationTime:B,number:U,duration:Le,sourceDuration:i,indexRange:`${K}-${Me}`,type:D})[0];r&&(Nt.map=r),b.push(Nt),K+="bigint"==typeof K?fe().BigInt(be):be,B+=Le/f,U++}return n.segments=b,n},k9=["AUDIO","SUBTITLES"],WL=n=>((n,e)=>HL(n.reduce((t,r)=>(r.forEach(i=>{t[(({timeline:e})=>e)(i)]=i}),t),{})))(n).sort((e,t)=>e.timeline>t.timeline?1:-1),KL=n=>{let e=[];return function(e,t,r){t.forEach(function(i){for(var s in e.mediaGroups[i])for(var a in e.mediaGroups[i][s])r(e.mediaGroups[i][s][a])})}(n,k9,(t,r,i,s)=>{e=e.concat(t.playlists||[])}),e},ZL=({playlist:n,mediaSequence:e})=>{n.mediaSequence=e,n.segments.forEach((t,r)=>{t.number=n.mediaSequence+r})},SD=n=>n&&n.uri+"-"+(n=>{let e;return e="bigint"==typeof n.offset||"bigint"==typeof n.length?fe().BigInt(n.offset)+fe().BigInt(n.length)-fe().BigInt(1):n.offset+n.length-1,`${n.offset}-${e}`})(n.byterange),_M=n=>{const e=n.reduce(function(r,i){return r[i.attributes.baseUrl]||(r[i.attributes.baseUrl]=[]),r[i.attributes.baseUrl].push(i),r},{});let t=[];return Object.values(e).forEach(r=>{const i=HL(r.reduce((s,a)=>{const c=a.attributes.id+(a.attributes.lang||"");return s[c]?(a.segments&&(a.segments[0]&&(a.segments[0].discontinuity=!0),s[c].segments.push(...a.segments)),a.attributes.contentProtection&&(s[c].attributes.contentProtection=a.attributes.contentProtection)):(s[c]=a,s[c].attributes.timelineStarts=[]),s[c].attributes.timelineStarts.push({start:a.attributes.periodStart,timeline:a.attributes.periodStart}),s},{}));t=t.concat(i)}),t.map(r=>(r.discontinuityStarts=((n,e)=>n.reduce((t,r,i)=>(r.discontinuity&&t.push(i),t),[]))(r.segments||[]),r))},yM=(n,e)=>{const t=SD(n.sidx),r=t&&e[t]&&e[t].sidx;return r&&mM(n,r,n.sidx.resolvedUri),n},N9=(n,e={})=>{if(!Object.keys(e).length)return n;for(const t in n)n[t]=yM(n[t],e);return n},j9=({attributes:n,segments:e,sidx:t,discontinuityStarts:r})=>{const i={attributes:{NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth,"PROGRAM-ID":1},uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,discontinuityStarts:r,timelineStarts:n.timelineStarts,segments:e};return n.frameRate&&(i.attributes["FRAME-RATE"]=n.frameRate),n.contentProtection&&(i.contentProtection=n.contentProtection),n.serviceLocation&&(i.attributes.serviceLocation=n.serviceLocation),t&&(i.sidx=t),i},$9=({attributes:n})=>"video/mp4"===n.mimeType||"video/webm"===n.mimeType||"video"===n.contentType,H9=({attributes:n})=>"audio/mp4"===n.mimeType||"audio/webm"===n.mimeType||"audio"===n.contentType,q9=({attributes:n})=>"text/vtt"===n.mimeType||"text"===n.contentType,YL=n=>n?Object.keys(n).reduce((e,t)=>e.concat(n[t].playlists),[]):[],z9=({dashPlaylists:n,locations:e,contentSteering:t,sidxMapping:r={},previousManifest:i,eventStream:s})=>{if(!n.length)return{};const{sourceDuration:a,type:c,suggestedPresentationDelay:f,minimumUpdatePeriod:y}=n[0].attributes,b=_M(n.filter($9)).map(j9),D=_M(n.filter(H9)),N=_M(n.filter(q9)),B=n.map(Me=>Me.attributes.captionServices).filter(Boolean),U={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:a,playlists:N9(b,r)};y>=0&&(U.minimumUpdatePeriod=1e3*y),e&&(U.locations=e),t&&(U.contentSteering=t),"dynamic"===c&&(U.suggestedPresentationDelay=f),s&&s.length>0&&(U.eventStream=s);const ie=D.length?((n,e={},t=!1)=>{let r;const i=n.reduce((s,a)=>{const c=a.attributes.role&&a.attributes.role.value||"",f=a.attributes.lang||"";let y=a.attributes.label||"main";f&&!a.attributes.label&&(y=`${a.attributes.lang}${c?` (${c})`:""}`),s[y]||(s[y]={language:f,autoselect:!0,default:"main"===c,playlists:[],uri:""});const b=yM((({attributes:n,segments:e,sidx:t,mediaSequence:r,discontinuitySequence:i,discontinuityStarts:s},a)=>{const c={attributes:{NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs,"PROGRAM-ID":1},uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,discontinuitySequence:i,discontinuityStarts:s,timelineStarts:n.timelineStarts,mediaSequence:r,segments:e};return n.contentProtection&&(c.contentProtection=n.contentProtection),n.serviceLocation&&(c.attributes.serviceLocation=n.serviceLocation),t&&(c.sidx=t),a&&(c.attributes.AUDIO="audio",c.attributes.SUBTITLES="subs"),c})(a,t),e);return s[y].playlists.push(b),void 0===r&&"main"===c&&(r=a,r.default=!0),s},{});return r||(i[Object.keys(i)[0]].default=!0),i})(D,r,0===U.playlists.length):null,Ae=N.length?((n,e={})=>n.reduce((t,r)=>{const i=r.attributes.label||r.attributes.lang||"text";return t[i]||(t[i]={language:i,default:!1,autoselect:!1,playlists:[],uri:""}),t[i].playlists.push(yM((({attributes:n,segments:e,mediaSequence:t,discontinuityStarts:r,discontinuitySequence:i})=>{void 0===e&&(e=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);const s={NAME:n.id,BANDWIDTH:n.bandwidth,"PROGRAM-ID":1};n.codecs&&(s.CODECS=n.codecs);const a={attributes:s,uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:r,discontinuitySequence:i,mediaSequence:t,segments:e};return n.serviceLocation&&(a.attributes.serviceLocation=n.serviceLocation),a})(r),e)),t},{}))(N,r):null,be=b.concat(YL(ie),YL(Ae)),Le=be.map(({timelineStarts:Me})=>Me);return U.timelineStarts=WL(Le),((n,e)=>{n.forEach(t=>{t.mediaSequence=0,t.discontinuitySequence=e.findIndex(function({timeline:r}){return r===t.timeline}),t.segments&&t.segments.forEach((r,i)=>{r.number=i})})})(be,U.timelineStarts),ie&&(U.mediaGroups.AUDIO.audio=ie),Ae&&(U.mediaGroups.SUBTITLES.subs=Ae),B.length&&(U.mediaGroups["CLOSED-CAPTIONS"].cc=(n=>n.reduce((e,t)=>(t&&t.forEach(r=>{const{channel:i,language:s}=r;e[s]={autoselect:!1,default:!1,instreamId:i,language:s},r.hasOwnProperty("aspectRatio")&&(e[s].aspectRatio=r.aspectRatio),r.hasOwnProperty("easyReader")&&(e[s].easyReader=r.easyReader),r.hasOwnProperty("3D")&&(e[s]["3D"]=r["3D"])}),e),{}))(B)),i?(({oldManifest:n,newManifest:e})=>{const t=n.playlists.concat(KL(n)),r=e.playlists.concat(KL(e));return e.timelineStarts=WL([n.timelineStarts,e.timelineStarts]),(({oldPlaylists:n,newPlaylists:e,timelineStarts:t})=>{e.forEach(r=>{r.discontinuitySequence=t.findIndex(function({timeline:f}){return f===r.timeline});const i=((n,e)=>{for(let t=0;t<n.length;t++)if(n[t].attributes.NAME===e)return n[t];return null})(n,r.attributes.NAME);if(!i||r.sidx)return;const s=r.segments[0],a=i.segments.findIndex(function(f){return Math.abs(f.presentationTime-s.presentationTime)<.016666666666666666});if(-1===a)return ZL({playlist:r,mediaSequence:i.mediaSequence+i.segments.length}),r.segments[0].discontinuity=!0,r.discontinuityStarts.unshift(0),void((!i.segments.length&&r.timeline>i.timeline||i.segments.length&&r.timeline>i.segments[i.segments.length-1].timeline)&&r.discontinuitySequence--);i.segments[a].discontinuity&&!s.discontinuity&&(s.discontinuity=!0,r.discontinuityStarts.unshift(0),r.discontinuitySequence--),ZL({playlist:r,mediaSequence:i.segments[a].number})})})({oldPlaylists:t,newPlaylists:r,timelineStarts:e.timelineStarts}),e})({oldManifest:i,newManifest:U}):U},W9=(n,e,t)=>{const{NOW:r,clientOffset:i,availabilityStartTime:s,timescale:a=1,periodStart:c=0,minimumUpdatePeriod:f=0}=n;return Math.ceil((((r+i)/1e3+f-(s+c))*a-e)/t)},QL=(n,e)=>{const{type:t,minimumUpdatePeriod:r=0,media:i="",sourceDuration:s,timescale:a=1,startNumber:c=1,periodStart:f}=n,y=[];let b=-1;for(let D=0;D<e.length;D++){const N=e[D],B=N.d,U=N.r||0,K=N.t||0;let ie;if(b<0&&(b=K),K&&K>b&&(b=K),U<0){const Le=D+1;ie=Le===e.length?"dynamic"===t&&r>0&&i.indexOf("$Number$")>0?W9(n,b,B):(s*a-b)/B:(e[Le].t-b)/B}else ie=U+1;const Ae=c+y.length+ie;let be=c+y.length;for(;be<Ae;)y.push({number:be,duration:B/a,time:b,timeline:f}),b+=B,be++}return y},K9=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,XL=(n,e)=>n.replace(K9,(n=>(e,t,r,i)=>{if("$$"===e)return"$";if(void 0===n[t])return e;const s=""+n[t];return"RepresentationID"===t||(i=r?parseInt(i,10):1,s.length>=i)?s:`${new Array(i-s.length+1).join("0")}${s}`})(e)),Q9=(n,e)=>{const t={RepresentationID:n.id,Bandwidth:n.bandwidth||0},{initialization:r={sourceURL:"",range:""}}=n,i=Lw({baseUrl:n.baseUrl,source:XL(r.sourceURL,t),range:r.range});return((n,e)=>n.duration||e?n.duration?gM(n):QL(n,e):[{number:n.startNumber||1,duration:n.sourceDuration,time:0,timeline:n.periodStart}])(n,e).map(a=>{t.Number=a.number,t.Time=a.time;const c=XL(n.media||"",t),b=n.periodStart+(a.time-(n.presentationTimeOffset||0))/(n.timescale||1);return{uri:c,timeline:a.timeline,duration:a.duration,resolvedUri:wD(n.baseUrl||"",c),map:i,number:a.number,presentationTime:b}})},J9=(n,e)=>{const{duration:t,segmentUrls:r=[],periodStart:i}=n;if(!t&&!e||t&&e)throw new Error("SEGMENT_TIME_UNSPECIFIED");const s=r.map(f=>((n,e)=>{const{baseUrl:t,initialization:r={}}=n,i=Lw({baseUrl:t,source:r.sourceURL,range:r.range}),s=Lw({baseUrl:t,source:e.media,range:e.mediaRange});return s.map=i,s})(n,f));let a;return t&&(a=gM(n)),e&&(a=QL(n,e)),a.map((f,y)=>{if(s[y]){const b=s[y],D=n.timescale||1,N=n.presentationTimeOffset||0;return b.timeline=f.timeline,b.duration=f.duration,b.number=f.number,b.presentationTime=i+(f.time-N)/D,b}}).filter(f=>f)},e7=({attributes:n,segmentInfo:e})=>{let t,r;e.template?(r=Q9,t=Ks(n,e.template)):e.base?(r=zL,t=Ks(n,e.base)):e.list&&(r=J9,t=Ks(n,e.list));const i={attributes:n};if(!r)return i;const s=r(t,e.segmentTimeline);if(t.duration){const{duration:a,timescale:c=1}=t;t.duration=a/c}else t.duration=s.length?s.reduce((a,c)=>Math.max(a,Math.ceil(c.duration)),0):0;return i.attributes=t,i.segments=s,e.base&&t.indexRange&&(i.sidx=s[0],i.segments=[]),i},Ti=(n,e)=>qL(n.childNodes).filter(({tagName:t})=>t===e),Fw=n=>n.textContent.trim(),rb=n=>{const c=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(n);if(!c)return 0;const[f,y,b,D,N,B]=c.slice(1);return 31536e3*parseFloat(f||0)+2592e3*parseFloat(y||0)+86400*parseFloat(b||0)+3600*parseFloat(D||0)+60*parseFloat(N||0)+parseFloat(B||0)},JL={mediaPresentationDuration:n=>rb(n),availabilityStartTime:n=>(n=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(n)&&(n+="Z"),Date.parse(n)))(n)/1e3,minimumUpdatePeriod:n=>rb(n),suggestedPresentationDelay:n=>rb(n),type:n=>n,timeShiftBufferDepth:n=>rb(n),start:n=>rb(n),width:n=>parseInt(n,10),height:n=>parseInt(n,10),bandwidth:n=>parseInt(n,10),frameRate:n=>(n=>parseFloat(n.split("/").reduce((e,t)=>e/t)))(n),startNumber:n=>parseInt(n,10),timescale:n=>parseInt(n,10),presentationTimeOffset:n=>parseInt(n,10),duration(n){const e=parseInt(n,10);return isNaN(e)?rb(n):e},d:n=>parseInt(n,10),t:n=>parseInt(n,10),r:n=>parseInt(n,10),presentationTime:n=>parseInt(n,10),DEFAULT:n=>n},ps=n=>n&&n.attributes?qL(n.attributes).reduce((e,t)=>(e[t.name]=(JL[t.name]||JL.DEFAULT)(t.value),e),{}):{},i7={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},xD=(n,e)=>e.length?tb(n.map(function(t){return e.map(function(r){const i=Fw(r),s=wD(t.baseUrl,i),a=Ks(ps(r),{baseUrl:s});return s!==i&&!a.serviceLocation&&t.serviceLocation&&(a.serviceLocation=t.serviceLocation),a})})):n,vM=n=>{const e=Ti(n,"SegmentTemplate")[0],t=Ti(n,"SegmentList")[0],r=t&&Ti(t,"SegmentURL").map(D=>Ks({tag:"SegmentURL"},ps(D))),i=Ti(n,"SegmentBase")[0],s=t||e,a=s&&Ti(s,"SegmentTimeline")[0],c=t||i||e,f=c&&Ti(c,"Initialization")[0],y=e&&ps(e);y&&f?y.initialization=f&&ps(f):y&&y.initialization&&(y.initialization={sourceURL:y.initialization});const b={template:y,segmentTimeline:a&&Ti(a,"S").map(D=>ps(D)),list:t&&Ks(ps(t),{segmentUrls:r,initialization:ps(f)}),base:i&&Ks(ps(i),{initialization:ps(f)})};return Object.keys(b).forEach(D=>{b[D]||delete b[D]}),b},u7=n=>tb(Ti(n.node,"EventStream").map(e=>{const t=ps(e),r=t.schemeIdUri;return Ti(e,"Event").map(i=>{const s=ps(i),c=t.timescale||1,y=(s.presentationTime||0)/c+n.attributes.start;return{schemeIdUri:r,value:t.value,id:s.id,start:y,end:y+(s.duration||0)/c,messageData:Fw(i)||s.messageData,contentEncoding:t.contentEncoding,presentationTimeOffset:t.presentationTimeOffset||0}})})),l7=(n,e,t)=>r=>{const i=ps(r),s=xD(e,Ti(r,"BaseURL")),a=Ti(r,"Role")[0],c={role:ps(a)};let f=Ks(n,i,c);const y=Ti(r,"Accessibility")[0],b=(n=>"urn:scte:dash:cc:cea-608:2015"===n.schemeIdUri?("string"!=typeof n.value?[]:n.value.split(";")).map(t=>{let r,i;return i=t,/^CC\d=/.test(t)?[r,i]=t.split("="):/^CC\d$/.test(t)&&(r=t),{channel:r,language:i}}):"urn:scte:dash:cc:cea-708:2015"===n.schemeIdUri?("string"!=typeof n.value?[]:n.value.split(";")).map(t=>{const r={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){const[i,s=""]=t.split("=");r.channel=i,r.language=t,s.split(",").forEach(a=>{const[c,f]=a.split(":");"lang"===c?r.language=f:"er"===c?r.easyReader=Number(f):"war"===c?r.aspectRatio=Number(f):"3D"===c&&(r["3D"]=Number(f))})}else r.language=t;return r.channel&&(r.channel="SERVICE"+r.channel),r}):void 0)(ps(y));b&&(f=Ks(f,{captionServices:b}));const D=Ti(r,"Label")[0];if(D&&D.childNodes.length){const ie=D.childNodes[0].nodeValue.trim();f=Ks(f,{label:ie})}const N=(n=>n.reduce((e,t)=>{const r=ps(t);r.schemeIdUri&&(r.schemeIdUri=r.schemeIdUri.toLowerCase());const i=i7[r.schemeIdUri];if(i){e[i]={attributes:r};const s=Ti(t,"cenc:pssh")[0];if(s){const a=Fw(s);e[i].pssh=a&&function E9(n){for(var e=function(e){return fe().atob?fe().atob(e):Buffer.from(e,"base64").toString("binary")}(n),t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(a)}}return e},{}))(Ti(r,"ContentProtection"));Object.keys(N).length&&(f=Ks(f,{contentProtection:N}));const B=vM(r),U=Ti(r,"Representation"),K=Ks(t,B);return tb(U.map(((n,e,t)=>r=>{const i=Ti(r,"BaseURL"),s=xD(e,i),a=Ks(n,ps(r)),c=vM(r);return s.map(f=>({segmentInfo:Ks(t,c),attributes:Ks(a,f)}))})(f,s,K)))},c7=(n,e)=>(t,r)=>{const i=xD(e,Ti(t.node,"BaseURL")),s=Ks(n,{periodStart:t.attributes.start});"number"==typeof t.attributes.duration&&(s.periodDuration=t.attributes.duration);const a=Ti(t.node,"AdaptationSet"),c=vM(t.node);return tb(a.map(l7(s,i,c)))},d7=(n,e)=>{if(n.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!n.length)return null;const t=Ks({serverURL:Fw(n[0])},ps(n[0]));return t.queryBeforeStart="true"===t.queryBeforeStart,t},eF=n=>{if(""===n)throw new Error("DASH_EMPTY_MANIFEST");const e=new w9.DOMParser;let t,r;try{t=e.parseFromString(n,"application/xml"),r=t&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(i){}if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return r};var TM,_7=$(7459),y7=$.n(_7),v7=dn([73,68,51]),Uw=function n(e,t){return void 0===t&&(t=0),(e=dn(e)).length-t<10||!bi(e,v7,{offset:t})?t:(t+=function(e,t){void 0===t&&(t=0);var i=(e=dn(e))[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?i+20:i+10}(e,t),n(e,t))},bM=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"==typeof e?jL(e):e}),EM=function(e){e=dn(e);for(var t=[],r=0;e.length>r;){var i=e[r],s=0,a=0,c=e[++a];for(a++;128&c;)s=(127&c)<<7,c=e[a],a++;s+=127&c;for(var f=0;f<TM.length;f++){var y=TM[f];if(i===y.id){t.push((0,y.parser)(e.subarray(a,a+s)));break}}r+=s+a}return t};TM=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var r=e[t.size];t.url=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,dn(e));try{return decodeURIComponent(escape(t))}catch(r){}return t}(e.subarray(t.size+1,t.size+1+r)),t.size+=r}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=EM(e.subarray(t.size))||[],t}},{id:4,parser:function(e){return{tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:EM(e.subarray(13))}}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var La=function n(e,t,r){void 0===r&&(r=!1),t=function(e){return Array.isArray(e)?e.map(function(t){return bM(t)}):[bM(e)]}(t),e=dn(e);var i=[];if(!t.length)return i;for(var s=0;s<e.length;){var a=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,c=e.subarray(s+4,s+8);if(0===a)break;var f=s+a;if(f>e.length){if(r)break;f=e.length}var y=e.subarray(s+8,f);bi(c,t[0])&&(1===t.length?i.push(y):i.push.apply(i,n(y,t.slice(1),r))),s=f}return i},hi={EBML:dn([26,69,223,163]),DocType:dn([66,130]),Segment:dn([24,83,128,103]),SegmentInfo:dn([21,73,169,102]),Tracks:dn([22,84,174,107]),Track:dn([174]),TrackNumber:dn([215]),DefaultDuration:dn([35,227,131]),TrackEntry:dn([174]),TrackType:dn([131]),FlagDefault:dn([136]),CodecID:dn([134]),CodecPrivate:dn([99,162]),VideoTrack:dn([224]),AudioTrack:dn([225]),Cluster:dn([31,67,182,117]),Timestamp:dn([231]),TimestampScale:dn([42,215,177]),BlockGroup:dn([160]),BlockDuration:dn([155]),Block:dn([161]),SimpleBlock:dn([163])},wM=[128,64,32,16,8,4,2,1],Ey=function(e,t,r,i){void 0===r&&(r=!0),void 0===i&&(i=!1);var s=function(e){for(var t=1,r=0;r<wM.length&&!(e&wM[r]);r++)t++;return t}(e[t]),a=e.subarray(t,t+s);return r&&((a=Array.prototype.slice.call(e,t,t+s))[0]^=wM[s-1]),{length:s,value:m9(a,{signed:i}),bytes:a}},tF=function n(e){return"string"==typeof e?e.match(/.{1,2}/g).map(function(t){return n(t)}):"number"==typeof e?function(e,t){var i=(void 0===t?{}:t).le,s=void 0!==i&&i;("bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e)&&(e=0);for(var a=function(e){return Math.ceil(function(e){return e.toString(2).length}(e)/8)}(e=bo(e)),c=new Uint8Array(new ArrayBuffer(a)),f=0;f<a;f++){var y=s?f:Math.abs(f+1-c.length);c[y]=Number(e/pM[f]&bo(255)),e<0&&(c[y]=Math.abs(~c[y]),c[y]-=0===f?1:2)}return c}(e):e},x7=function n(e,t,r){if(r>=t.length)return t.length;var i=Ey(t,r,!1);if(bi(e.bytes,i.bytes))return r;var s=Ey(t,r+i.length);return n(e,t,r+s.length+s.value+i.length)},Mi=function n(e,t){t=function(e){return Array.isArray(e)?e.map(function(t){return tF(t)}):[tF(e)]}(t),e=dn(e);var r=[];if(!t.length)return r;for(var i=0;i<e.length;){var s=Ey(e,i,!1),a=Ey(e,i+s.length),c=i+s.length+a.length;127===a.value&&(a.value=x7(s,e,c),a.value!==e.length&&(a.value-=c));var y=e.subarray(c,c+a.value>e.length?e.length:c+a.value);bi(t[0],s.bytes)&&(1===t.length?r.push(y):r=r.concat(n(y,t.slice(1)))),i+=s.length+a.length+y.length}return r},k7=dn([0,0,0,1]),M7=dn([0,0,1]),P7=dn([0,0,3]),R7=function(e){for(var t=[],r=1;r<e.length-2;)bi(e.subarray(r,r+3),P7)&&(t.push(r+2),r++),r++;if(0===t.length)return e;var i=e.length-t.length,s=new Uint8Array(i),a=0;for(r=0;r<i;a++,r++)a===t[0]&&(a++,t.shift()),s[r]=e[a];return s},nF=function(e,t,r,i){void 0===i&&(i=1/0),e=dn(e),r=[].concat(r);for(var a,s=0,c=0;s<e.length&&(c<i||a);){var f=void 0;if(bi(e.subarray(s),k7)?f=4:bi(e.subarray(s),M7)&&(f=3),f){if(c++,a)return R7(e.subarray(a,s));var y=void 0;"h264"===t?y=31&e[s+f]:"h265"===t&&(y=e[s+f]>>1&63),-1!==r.indexOf(y)&&(a=s+f),s+=f+("h264"===t?1:2)}else s++}return e.subarray(0,0)},da={webm:dn([119,101,98,109]),matroska:dn([109,97,116,114,111,115,107,97]),flac:dn([102,76,97,67]),ogg:dn([79,103,103,83]),ac3:dn([11,119]),riff:dn([82,73,70,70]),avi:dn([65,86,73]),wav:dn([87,65,86,69]),"3gp":dn([102,116,121,112,51,103]),mp4:dn([102,116,121,112]),fmp4:dn([115,116,121,112]),mov:dn([102,116,121,112,113,116]),moov:dn([109,111,111,118]),moof:dn([109,111,111,102])},sb={aac:function(e){var t=Uw(e);return bi(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=Uw(e);return bi(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=Mi(e,[hi.EBML,hi.DocType])[0];return bi(t,da.webm)},mkv:function(e){var t=Mi(e,[hi.EBML,hi.DocType])[0];return bi(t,da.matroska)},mp4:function(e){return!sb["3gp"](e)&&!sb.mov(e)&&(!!(bi(e,da.mp4,{offset:4})||bi(e,da.fmp4,{offset:4})||bi(e,da.moof,{offset:4})||bi(e,da.moov,{offset:4}))||void 0)},mov:function(e){return bi(e,da.mov,{offset:4})},"3gp":function(e){return bi(e,da["3gp"],{offset:4})},ac3:function(e){var t=Uw(e);return bi(e,da.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=Uw(e);return bi(e,da.flac,{offset:t})},ogg:function(e){return bi(e,da.ogg)},avi:function(e){return bi(e,da.riff)&&bi(e,da.avi,{offset:8})},wav:function(e){return bi(e,da.riff)&&bi(e,da.wav,{offset:8})},h264:function(e){return function(e,t,r){return nF(e,"h264",7,3)}(e).length},h265:function(e){return function(e,t,r){return nF(e,"h265",[32,33],3)}(e).length}},CM=Object.keys(sb).filter(function(n){return"ts"!==n&&"h264"!==n&&"h265"!==n}).concat(["ts","h264","h265"]);CM.forEach(function(n){var e=sb[n];sb[n]=function(t){return e(dn(t))}});var L7=sb,SM=function(e){e=dn(e);for(var t=0;t<CM.length;t++){var r=CM[t];if(L7[r](e))return r}return""},DD=$(6277);const ap={},gm=function(n,e){return ap[n]=ap[n]||[],e&&(ap[n]=ap[n].concat(e)),ap[n]},iF=function(n,e){const t=gm(n).indexOf(e);return!(t<=-1||(ap[n]=ap[n].slice(),ap[n].splice(t,1),0))},ID={prefixed:!0},AD=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],sF=AD[0];let Vw;for(let n=0;n<AD.length;n++)if(AD[n][1]in Lt()){Vw=AD[n];break}if(Vw){for(let n=0;n<Vw.length;n++)ID[sF[n]]=Vw[n];ID.prefixed=Vw[0]!==sF[0]}let Fa=[];const sr=function xM(n,e=":",t=""){let i,r="info";const s=function(...a){i("log",r,a)};return i=((n,e,t)=>(r,i,s)=>{const a=e.levels[i],c=new RegExp(`^(${a})$`);let f=n;if("log"!==r&&s.unshift(r.toUpperCase()+":"),t&&(f=`%c${n}`,s.unshift(t)),s.unshift(f+":"),Fa){Fa.push([].concat(s));const b=Fa.length-1e3;Fa.splice(0,b>0?b:0)}if(!fe().console)return;let y=fe().console[r];!y&&"debug"===r&&(y=fe().console.info||fe().console.log),y&&a&&c.test(r)&&y[Array.isArray(s)?"apply":"call"](fe().console,s)})(n,s,t),s.createLogger=(a,c,f)=>{const y=void 0!==c?c:e;return xM(`${n} ${y} ${a}`,y,void 0!==f?f:t)},s.createNewLogger=(a,c,f)=>xM(a,c,f),s.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},s.level=a=>{if("string"==typeof a){if(!s.levels.hasOwnProperty(a))throw new Error(`"${a}" in not a valid log level`);r=a}return r},(s.history=()=>Fa?[].concat(Fa):[]).filter=a=>(Fa||[]).filter(c=>new RegExp(`.*${a}.*`).test(c[0])),s.history.clear=()=>{Fa&&(Fa.length=0)},s.history.disable=()=>{null!==Fa&&(Fa.length=0,Fa=null)},s.history.enable=()=>{null===Fa&&(Fa=[])},s.error=(...a)=>i("error",r,a),s.warn=(...a)=>i("warn",r,a),s.debug=(...a)=>i("debug",r,a),s}("VIDEOJS"),oF=sr.createLogger,j7=Object.prototype.toString,aF=function(n){return oh(n)?Object.keys(n):[]};function ob(n,e){aF(n).forEach(t=>e(n[t],t))}function uF(n,e,t=0){return aF(n).reduce((r,i)=>e(r,n[i],i),t)}function oh(n){return!!n&&"object"==typeof n}function ab(n){return oh(n)&&"[object Object]"===j7.call(n)&&n.constructor===Object}function ei(...n){const e={};return n.forEach(t=>{!t||ob(t,(r,i)=>{ab(r)?(ab(e[i])||(e[i]={}),e[i]=ei(e[i],r)):e[i]=r})}),e}function lF(n={}){const e=[];for(const t in n)n.hasOwnProperty(t)&&e.push(n[t]);return e}function kD(n,e,t,r=!0){const i=a=>Object.defineProperty(n,e,{value:a,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const a=t();return i(a),a}};return r&&(s.set=i),Object.defineProperty(n,e,s)}var $7=Object.freeze({__proto__:null,each:ob,reduce:uF,isObject:oh,isPlain:ab,merge:ei,values:lF,defineLazyProperty:kD});let dF,DM=!1,cF=null,ah=!1,hF=!1,ub=!1,lb=!1,uh=!1,IM=null,MD=null,fF=null,PD=!1,RD=!1,OD=!1,ND=!1;const jw=Boolean(cb()&&("ontouchstart"in fe()||fe().navigator.maxTouchPoints||fe().DocumentTouch&&fe().document instanceof fe().DocumentTouch)),mm=fe().navigator&&fe().navigator.userAgentData;if(mm&&mm.platform&&mm.brands&&(ah="Android"===mm.platform,ub=Boolean(mm.brands.find(n=>"Microsoft Edge"===n.brand)),lb=Boolean(mm.brands.find(n=>"Chromium"===n.brand)),uh=!ub&&lb,IM=MD=(mm.brands.find(n=>"Chromium"===n.brand)||{}).version||null,RD="Windows"===mm.platform),!lb){const n=fe().navigator&&fe().navigator.userAgent||"";DM=/iPod/i.test(n),cF=function(){const e=n.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),ah=/Android/i.test(n),dF=function(){const e=n.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),r=e[2]&&parseFloat(e[2]);return t&&r?parseFloat(e[1]+"."+e[2]):t||null}(),hF=/Firefox/i.test(n),ub=/Edg/i.test(n),lb=/Chrome/i.test(n)||/CriOS/i.test(n),uh=!ub&&lb,IM=MD=function(){const e=n.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),fF=function(){const e=/MSIE\s(\d+)\.\d/.exec(n);let t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(n)&&/rv:11.0/.test(n)&&(t=11),t}(),PD=/Safari/i.test(n)&&!uh&&!ah&&!ub,RD=/Windows/i.test(n),OD=/iPad/i.test(n)||PD&&jw&&!/iPhone/i.test(n),ND=/iPhone/i.test(n)&&!OD}const ha=ND||OD||DM,LD=(PD||ha)&&!uh;var H7=Object.freeze({__proto__:null,get IS_IPOD(){return DM},get IOS_VERSION(){return cF},get IS_ANDROID(){return ah},get ANDROID_VERSION(){return dF},get IS_FIREFOX(){return hF},get IS_EDGE(){return ub},get IS_CHROMIUM(){return lb},get IS_CHROME(){return uh},get CHROMIUM_VERSION(){return IM},get CHROME_VERSION(){return MD},get IE_VERSION(){return fF},get IS_SAFARI(){return PD},get IS_WINDOWS(){return RD},get IS_IPAD(){return OD},get IS_IPHONE(){return ND},TOUCH_ENABLED:jw,IS_IOS:ha,IS_ANY_SAFARI:LD});function pF(n){return"string"==typeof n&&Boolean(n.trim())}function cb(){return Lt()===fe().document}function db(n){return oh(n)&&1===n.nodeType}function gF(){try{return fe().parent!==fe().self}catch(n){return!0}}function mF(n){return function(e,t){if(!pF(e))return Lt()[n](null);pF(t)&&(t=Lt().querySelector(t));const r=db(t)?t:Lt();return r[n]&&r[n](e)}}function Gn(n="div",e={},t={},r){const i=Lt().createElement(n);return Object.getOwnPropertyNames(e).forEach(function(s){const a=e[s];"textContent"===s?_m(i,a):(i[s]!==a||"tabIndex"===s)&&(i[s]=a)}),Object.getOwnPropertyNames(t).forEach(function(s){i.setAttribute(s,t[s])}),r&&kM(i,r),i}function _m(n,e){return void 0===n.textContent?n.innerText=e:n.textContent=e,n}function AM(n,e){e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}function $w(n,e){return function q7(n){if(n.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}(e),n.classList.contains(e)}function wy(n,...e){return n.classList.add(...e.reduce((t,r)=>t.concat(r.split(/\s+/)),[])),n}function FD(n,...e){return n?(n.classList.remove(...e.reduce((t,r)=>t.concat(r.split(/\s+/)),[])),n):(sr.warn("removeClass was called with an element that doesn't exist"),null)}function _F(n,e,t){return"function"==typeof t&&(t=t(n,e)),"boolean"!=typeof t&&(t=void 0),e.split(/\s+/).forEach(r=>n.classList.toggle(r,t)),n}function yF(n,e){Object.getOwnPropertyNames(e).forEach(function(t){const r=e[t];null==r||!1===r?n.removeAttribute(t):n.setAttribute(t,!0===r?"":r)})}function ym(n){const e={},t=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(n&&n.attributes&&n.attributes.length>0){const r=n.attributes;for(let i=r.length-1;i>=0;i--){const s=r[i].name;let a=r[i].value;t.includes(s)&&(a=null!==a),e[s]=a}}return e}function vF(n,e){return n.getAttribute(e)}function hb(n,e,t){n.setAttribute(e,t)}function UD(n,e){n.removeAttribute(e)}function bF(){Lt().body.focus(),Lt().onselectstart=function(){return!1}}function TF(){Lt().onselectstart=function(){return!0}}function fb(n){if(n&&n.getBoundingClientRect&&n.parentNode){const e=n.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(r=>{void 0!==e[r]&&(t[r]=e[r])}),t.height||(t.height=parseFloat(pb(n,"height"))),t.width||(t.width=parseFloat(pb(n,"width"))),t}}function Hw(n){if(!n||n&&!n.offsetParent)return{left:0,top:0,width:0,height:0};const e=n.offsetWidth,t=n.offsetHeight;let r=0,i=0;for(;n.offsetParent&&n!==Lt()[ID.fullscreenElement];)r+=n.offsetLeft,i+=n.offsetTop,n=n.offsetParent;return{left:r,top:i,width:e,height:t}}function BD(n,e){const t={x:0,y:0};if(ha){let b=n;for(;b&&"html"!==b.nodeName.toLowerCase();){const D=pb(b,"transform");if(/^matrix/.test(D)){const N=D.slice(7,-1).split(/,\s/).map(Number);t.x+=N[4],t.y+=N[5]}else if(/^matrix3d/.test(D)){const N=D.slice(9,-1).split(/,\s/).map(Number);t.x+=N[12],t.y+=N[13]}b=b.parentNode}}const r={},i=Hw(e.target),s=Hw(n),a=s.width;let f=e.offsetY-(s.top-i.top),y=e.offsetX-(s.left-i.left);return e.changedTouches&&(y=e.changedTouches[0].pageX-s.left,f=e.changedTouches[0].pageY+s.top,ha&&(y-=t.x,f-=t.y)),r.y=1-Math.max(0,Math.min(1,f/s.height)),r.x=Math.max(0,Math.min(1,y/a)),r}function EF(n){return oh(n)&&3===n.nodeType}function VD(n){for(;n.firstChild;)n.removeChild(n.firstChild);return n}function wF(n){return"function"==typeof n&&(n=n()),(Array.isArray(n)?n:[n]).map(e=>("function"==typeof e&&(e=e()),db(e)||EF(e)?e:"string"==typeof e&&/\S/.test(e)?Lt().createTextNode(e):void 0)).filter(e=>e)}function kM(n,e){return wF(e).forEach(t=>n.appendChild(t)),n}function CF(n,e){return kM(VD(n),e)}function qw(n){return void 0===n.button&&void 0===n.buttons||0===n.button&&void 0===n.buttons||"mouseup"===n.type&&0===n.button&&0===n.buttons||!(0!==n.button||1!==n.buttons)}const vm=mF("querySelector"),SF=mF("querySelectorAll");function pb(n,e){if(!n||!e)return"";if("function"==typeof fe().getComputedStyle){let t;try{t=fe().getComputedStyle(n)}catch(r){return""}return t?t.getPropertyValue(e)||t[e]:""}return""}function xF(n){[...Lt().styleSheets].forEach(e=>{try{const t=[...e.cssRules].map(i=>i.cssText).join(""),r=Lt().createElement("style");r.textContent=t,n.document.head.appendChild(r)}catch(t){const r=Lt().createElement("link");r.rel="stylesheet",r.type=e.type,r.media=e.media.mediaText,r.href=e.href,n.document.head.appendChild(r)}})}var DF=Object.freeze({__proto__:null,isReal:cb,isEl:db,isInFrame:gF,createEl:Gn,textContent:_m,prependTo:AM,hasClass:$w,addClass:wy,removeClass:FD,toggleClass:_F,setAttributes:yF,getAttributes:ym,getAttribute:vF,setAttribute:hb,removeAttribute:UD,blockTextSelection:bF,unblockTextSelection:TF,getBoundingClientRect:fb,findPosition:Hw,getPointerPosition:BD,isTextNode:EF,emptyEl:VD,normalizeContent:wF,appendContent:kM,insertContent:CF,isSingleLeftClick:qw,$:vm,$$:SF,computedStyle:pb,copyStyleSheetsToWindow:xF});let MM,IF=!1;const G7=function(){if(!1===MM.options.autoSetup)return;const n=Array.prototype.slice.call(Lt().getElementsByTagName("video")),e=Array.prototype.slice.call(Lt().getElementsByTagName("audio")),t=Array.prototype.slice.call(Lt().getElementsByTagName("video-js")),r=n.concat(e,t);if(r&&r.length>0)for(let i=0,s=r.length;i<s;i++){const a=r[i];if(!a||!a.getAttribute){PM(1);break}void 0===a.player&&null!==a.getAttribute("data-setup")&&MM(a)}else IF||PM(1)};function PM(n,e){!cb()||(e&&(MM=e),fe().setTimeout(G7,n))}function RM(){IF=!0,fe().removeEventListener("load",RM)}cb()&&("complete"===Lt().readyState?RM():fe().addEventListener("load",RM));const AF=function(n){const e=Lt().createElement("style");return e.className=n,e},kF=function(n,e){n.styleSheet?n.styleSheet.cssText=e:n.textContent=e};var fa=new WeakMap;let $D,z7=3;function lh(){return z7++}function MF(n,e){if(!fa.has(n))return;const t=fa.get(n);0===t.handlers[e].length&&(delete t.handlers[e],n.removeEventListener?n.removeEventListener(e,t.dispatcher,!1):n.detachEvent&&n.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),0===Object.getOwnPropertyNames(t).length&&fa.delete(n)}function OM(n,e,t,r){t.forEach(function(i){n(e,i,r)})}function jD(n){if(n.fixed_)return n;function e(){return!0}function t(){return!1}if(!n||!n.isPropagationStopped||!n.isImmediatePropagationStopped){const r=n||fe().event;n={};for(const i in r)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&"path"!==i&&("returnValue"===i&&r.preventDefault||(n[i]=r[i]));if(n.target||(n.target=n.srcElement||Lt()),n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.preventDefault=function(){r.preventDefault&&r.preventDefault(),n.returnValue=!1,r.returnValue=!1,n.defaultPrevented=!0},n.defaultPrevented=!1,n.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),n.cancelBubble=!0,r.cancelBubble=!0,n.isPropagationStopped=e},n.isPropagationStopped=t,n.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),n.isImmediatePropagationStopped=e,n.stopPropagation()},n.isImmediatePropagationStopped=t,null!=n.clientX){const i=Lt().documentElement,s=Lt().body;n.pageX=n.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),n.pageY=n.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)}n.which=n.charCode||n.keyCode,null!=n.button&&(n.button=1&n.button?0:4&n.button?1:2&n.button?2:0)}return n.fixed_=!0,n}const K7=["touchstart","touchmove"];function Su(n,e,t){if(Array.isArray(e))return OM(Su,n,e,t);fa.has(n)||fa.set(n,{});const r=fa.get(n);if(r.handlers||(r.handlers={}),r.handlers[e]||(r.handlers[e]=[]),t.guid||(t.guid=lh()),r.handlers[e].push(t),r.dispatcher||(r.disabled=!1,r.dispatcher=function(i,s){if(r.disabled)return;i=jD(i);const a=r.handlers[i.type];if(a){const c=a.slice(0);for(let f=0,y=c.length;f<y&&!i.isImmediatePropagationStopped();f++)try{c[f].call(n,i,s)}catch(b){sr.error(b)}}}),1===r.handlers[e].length)if(n.addEventListener){let i=!1;(function(){if("boolean"!=typeof $D){$D=!1;try{const n=Object.defineProperty({},"passive",{get(){$D=!0}});fe().addEventListener("test",null,n),fe().removeEventListener("test",null,n)}catch(n){}}return $D})()&&K7.indexOf(e)>-1&&(i={passive:!0}),n.addEventListener(e,r.dispatcher,i)}else n.attachEvent&&n.attachEvent("on"+e,r.dispatcher)}function Go(n,e,t){if(!fa.has(n))return;const r=fa.get(n);if(!r.handlers)return;if(Array.isArray(e))return OM(Go,n,e,t);const i=function(a,c){r.handlers[c]=[],MF(a,c)};if(void 0===e){for(const a in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},a)&&i(n,a);return}const s=r.handlers[e];if(s){if(!t)return void i(n,e);if(t.guid)for(let a=0;a<s.length;a++)s[a].guid===t.guid&&s.splice(a--,1);MF(n,e)}}function gb(n,e,t){const r=fa.has(n)?fa.get(n):{},i=n.parentNode||n.ownerDocument;if("string"==typeof e?e={type:e,target:n}:e.target||(e.target=n),e=jD(e),r.dispatcher&&r.dispatcher.call(n,e,t),i&&!e.isPropagationStopped()&&!0===e.bubbles)gb.call(null,i,e,t);else if(!i&&!e.defaultPrevented&&e.target&&e.target[e.type]){fa.has(e.target)||fa.set(e.target,{});const s=fa.get(e.target);e.target[e.type]&&(s.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function HD(n,e,t){if(Array.isArray(e))return OM(HD,n,e,t);const r=function(){Go(n,e,r),t.apply(this,arguments)};r.guid=t.guid=t.guid||lh(),Su(n,e,r)}function NM(n,e,t){const r=function(){Go(n,e,r),t.apply(this,arguments)};r.guid=t.guid=t.guid||lh(),Su(n,e,r)}var Z7=Object.freeze({__proto__:null,fixEvent:jD,on:Su,off:Go,trigger:gb,one:HD,any:NM});const ti=function(n,e,t){e.guid||(e.guid=lh());const r=e.bind(n);return r.guid=t?t+"_"+e.guid:e.guid,r},ch=function(n,e){let t=fe().performance.now();return function(...i){const s=fe().performance.now();s-t>=e&&(n(...i),t=s)}},PF=function(n,e,t,r=fe()){let i;const a=function(){const c=this,f=arguments;let y=function(){i=null,y=null,t||n.apply(c,f)};!i&&t&&n.apply(c,f),r.clearTimeout(i),i=r.setTimeout(y,e)};return a.cancel=()=>{r.clearTimeout(i),i=null},a};var Y7=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:30,bind_:ti,throttle:ch,debounce:PF});let Gw;class Al{on(e,t){const r=this.addEventListener;this.addEventListener=()=>{},Su(this,e,t),this.addEventListener=r}off(e,t){Go(this,e,t)}one(e,t){const r=this.addEventListener;this.addEventListener=()=>{},HD(this,e,t),this.addEventListener=r}any(e,t){const r=this.addEventListener;this.addEventListener=()=>{},NM(this,e,t),this.addEventListener=r}trigger(e){const t=e.type||e;"string"==typeof e&&(e={type:t}),e=jD(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),gb(this,e)}queueTrigger(e){Gw||(Gw=new Map);const t=e.type||e;let r=Gw.get(this);r||(r=new Map,Gw.set(this,r));const i=r.get(t);r.delete(t),fe().clearTimeout(i);const s=fe().setTimeout(()=>{r.delete(t),0===r.size&&(r=null,Gw.delete(this)),this.trigger(e)},0);r.set(t,s)}}Al.prototype.allowedEvents_={},Al.prototype.addEventListener=Al.prototype.on,Al.prototype.removeEventListener=Al.prototype.off,Al.prototype.dispatchEvent=Al.prototype.trigger;const qD=n=>"function"==typeof n.name?n.name():"string"==typeof n.name?n.name:n.name_?n.name_:n.constructor&&n.constructor.name?n.constructor.name:typeof n,up=n=>n instanceof Al||!!n.eventBusEl_&&["on","one","off","trigger"].every(e=>"function"==typeof n[e]),LM=n=>"string"==typeof n&&/\S/.test(n)||Array.isArray(n)&&!!n.length,GD=(n,e,t)=>{if(!n||!n.nodeName&&!up(n))throw new Error(`Invalid target for ${qD(e)}#${t}; must be a DOM node or evented object.`)},RF=(n,e,t)=>{if(!LM(n))throw new Error(`Invalid event type for ${qD(e)}#${t}; must be a non-empty string or array.`)},OF=(n,e,t)=>{if("function"!=typeof n)throw new Error(`Invalid listener for ${qD(e)}#${t}; must be a function.`)},FM=(n,e,t)=>{const r=e.length<3||e[0]===n||e[0]===n.eventBusEl_;let i,s,a;return r?(i=n.eventBusEl_,e.length>=3&&e.shift(),[s,a]=e):[i,s,a]=e,GD(i,n,t),RF(s,n,t),OF(a,n,t),a=ti(n,a),{isTargetingSelf:r,target:i,type:s,listener:a}},Cy=(n,e,t,r)=>{GD(n,n,e),n.nodeName?Z7[e](n,t,r):n[e](t,r)},X7={on(...n){const{isTargetingSelf:e,target:t,type:r,listener:i}=FM(this,n,"on");if(Cy(t,"on",r,i),!e){const s=()=>this.off(t,r,i);s.guid=i.guid;const a=()=>this.off("dispose",s);a.guid=i.guid,Cy(this,"on","dispose",s),Cy(t,"on","dispose",a)}},one(...n){const{isTargetingSelf:e,target:t,type:r,listener:i}=FM(this,n,"one");if(e)Cy(t,"one",r,i);else{const s=(...a)=>{this.off(t,r,s),i.apply(null,a)};s.guid=i.guid,Cy(t,"one",r,s)}},any(...n){const{isTargetingSelf:e,target:t,type:r,listener:i}=FM(this,n,"any");if(e)Cy(t,"any",r,i);else{const s=(...a)=>{this.off(t,r,s),i.apply(null,a)};s.guid=i.guid,Cy(t,"any",r,s)}},off(n,e,t){if(!n||LM(n))Go(this.eventBusEl_,n,e);else{const r=n,i=e;GD(r,this,"off"),RF(i,this,"off"),OF(t,this,"off"),t=ti(this,t),this.off("dispose",t),r.nodeName?(Go(r,i,t),Go(r,"dispose",t)):up(r)&&(r.off(i,t),r.off("dispose",t))}},trigger(n,e){if(GD(this.eventBusEl_,this,"trigger"),!LM(n&&"string"!=typeof n?n.type:n))throw new Error(`Invalid event type for ${qD(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return gb(this.eventBusEl_,n,e)}};function UM(n,e={}){const{eventBusKey:t}=e;if(t){if(!n[t].nodeName)throw new Error(`The eventBusKey "${t}" does not refer to an element.`);n.eventBusEl_=n[t]}else n.eventBusEl_=Gn("span",{className:"vjs-event-bus"});return Object.assign(n,X7),n.eventedCallbacks&&n.eventedCallbacks.forEach(r=>{r()}),n.on("dispose",()=>{n.off(),[n,n.el_,n.eventBusEl_].forEach(function(r){r&&fa.has(r)&&fa.delete(r)}),fe().setTimeout(()=>{n.eventBusEl_=null},0)}),n}const J7={state:{},setState(n){let e;return"function"==typeof n&&(n=n()),ob(n,(t,r)=>{this.state[r]!==t&&(e=e||{},e[r]={from:this.state[r],to:t}),this.state[r]=t}),e&&up(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function NF(n,e){return Object.assign(n,J7),n.state=Object.assign({},n.state,e),"function"==typeof n.handleStateChanged&&up(n)&&n.on("statechanged",n.handleStateChanged),n}const zw=function(n){return"string"!=typeof n?n:n.replace(/./,e=>e.toLowerCase())},Hi=function(n){return"string"!=typeof n?n:n.replace(/./,e=>e.toUpperCase())},LF=function(n,e){return Hi(n)===Hi(e)};var e$=Object.freeze({__proto__:null,toLowerCase:zw,toTitleCase:Hi,titleCaseEquals:LF});class bt{constructor(e,t,r){if(this.player_=!e&&this.play?e=this:e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=ei({},this.options_),t=this.options_=ei(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const i=e&&e.id&&e.id()||"no_player";this.id_=`${i}_component_${lh()}`}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(i=>this.addClass(i)),["on","off","one","any","trigger"].forEach(i=>{this[i]=void 0}),!1!==t.evented&&(UM(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),NF(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(r),!1!==t.reportTouchActivity&&this.enableTouchActivity()}on(e,t){}off(e,t){}one(e,t){}any(e,t){}trigger(e,t){}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return Boolean(this.isDisposed_)}player(){return this.player_}options(e){return e?(this.options_=ei(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,r){return Gn(e,t,r)}localize(e,t,r=e){const i=this.player_.language&&this.player_.language(),s=this.player_.languages&&this.player_.languages(),a=s&&s[i],c=i&&i.split("-")[0],f=s&&s[c];let y=r;return a&&a[e]?y=a[e]:f&&f[e]&&(y=f[e]),t&&(y=y.replace(/\{(\d+)\}/g,function(b,D){const N=t[D-1];let B=N;return void 0===N&&(B=b),B})),y}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((r,i)=>r.concat(i),[]);let t=this;for(let r=0;r<e.length;r++)if(t=t.getChild(e[r]),!t||!t.getChild)return;return t}setIcon(e,t=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const r="http://www.w3.org/2000/svg",i=Gn("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),s=Lt().createElementNS(r,"svg");s.setAttributeNS(null,"viewBox","0 0 512 512");const a=Lt().createElementNS(r,"use");return s.appendChild(a),a.setAttributeNS(null,"href",`#vjs-icon-${e}`),i.appendChild(s),this.iconIsSet_?t.replaceChild(i,t.querySelector(".vjs-icon-placeholder")):t.appendChild(i),this.iconIsSet_=!0,i}addChild(e,t={},r=this.children_.length){let i,s;if("string"==typeof e){s=Hi(e);const a=t.componentClass||s;t.name=s;const c=bt.getComponent(a);if(!c)throw new Error(`Component ${a} does not exist`);if("function"!=typeof c)return null;i=new c(this.player_||this,t)}else i=e;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(r,0,i),i.parentComponent_=this,"function"==typeof i.id&&(this.childIndex_[i.id()]=i),s=s||i.name&&Hi(i.name()),s&&(this.childNameIndex_[s]=i,this.childNameIndex_[zw(s)]=i),"function"==typeof i.el&&i.el()){let a=null;this.children_[r+1]&&(this.children_[r+1].el_?a=this.children_[r+1].el_:db(this.children_[r+1])&&(a=this.children_[r+1])),this.contentEl().insertBefore(i.el(),a)}return i}removeChild(e){if("string"==typeof e&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Hi(e.name())]=null,this.childNameIndex_[zw(e.name())]=null;const r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,r=a=>{const c=a.name;let f=a.opts;if(void 0!==t[c]&&(f=t[c]),!1===f)return;!0===f&&(f={}),f.playerOptions=this.options_.playerOptions;const y=this.addChild(c,f);y&&(this[c]=y)};let i;const s=bt.getComponent("Tech");i=Array.isArray(e)?e:Object.keys(e),i.concat(Object.keys(this.options_).filter(function(a){return!i.some(function(c){return"string"==typeof c?a===c:a===c.name})})).map(a=>{let c,f;return"string"==typeof a?(c=a,f=e[c]||this.options_[c]||{}):(c=a.name,f=a),{name:c,opts:f}}).filter(a=>{const c=bt.getComponent(a.opts.componentClass||Hi(a.name));return c&&!s.isTech(c)}).forEach(r)}}buildCSSClass(){return""}ready(e,t=!1){if(e){if(!this.isReady_)return this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e);t?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)}$(e,t){return vm(e,t||this.contentEl())}$$(e,t){return SF(e,t||this.contentEl())}hasClass(e){return $w(this.el_,e)}addClass(...e){wy(this.el_,...e)}removeClass(...e){FD(this.el_,...e)}toggleClass(e,t){_F(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return vF(this.el_,e)}setAttribute(e,t){hb(this.el_,e,t)}removeAttribute(e){UD(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,r){if(void 0!==t)return(null===t||t!=t)&&(t=0),this.el_.style[e]=-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?t:"auto"===t?"":t+"px",void(r||this.trigger("componentresize"));if(!this.el_)return 0;const i=this.el_.style[e],s=i.indexOf("px");return parseInt(-1!==s?i.slice(0,s):this.el_["offset"+Hi(e)],10)}currentDimension(e){let t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=pb(this.el_,e),t=parseFloat(t),0===t||isNaN(t)){const r=`offset${Hi(e)}`;t=this.el_[r]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(Un().isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let s,e=0,t=null;this.on("touchstart",function(c){1===c.touches.length&&(t={pageX:c.touches[0].pageX,pageY:c.touches[0].pageY},e=fe().performance.now(),s=!0)}),this.on("touchmove",function(c){if(c.touches.length>1)s=!1;else if(t){const f=c.touches[0].pageX-t.pageX,y=c.touches[0].pageY-t.pageY;Math.sqrt(f*f+y*y)>10&&(s=!1)}});const a=function(){s=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",function(c){t=null,!0===s&&fe().performance.now()-e<200&&(c.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=ti(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});const r=function(i){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",r),this.on("touchcancel",r)}setTimeout(e,t){var r;return e=ti(this,e),this.clearTimersOnDispose_(),r=fe().setTimeout(()=>{this.setTimeoutIds_.has(r)&&this.setTimeoutIds_.delete(r),e()},t),this.setTimeoutIds_.add(r),r}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),fe().clearTimeout(e)),e}setInterval(e,t){e=ti(this,e),this.clearTimersOnDispose_();const r=fe().setInterval(e,t);return this.setIntervalIds_.add(r),r}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),fe().clearInterval(e)),e}requestAnimationFrame(e){var t;return this.clearTimersOnDispose_(),e=ti(this,e),t=fe().requestAnimationFrame(()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()}),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){if(this.namedRafs_.has(e))return;this.clearTimersOnDispose_(),t=ti(this,t);const r=this.requestAnimationFrame(()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,r),e}cancelNamedAnimationFrame(e){!this.namedRafs_.has(e)||(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),fe().cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,t])=>{this[e].forEach((r,i)=>this[t](i))}),this.clearingTimersOnDispose_=!1}))}static registerComponent(e,t){if("string"!=typeof e||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const r=bt.getComponent("Tech"),i=r&&r.isTech(t),s=bt===t||bt.prototype.isPrototypeOf(t.prototype);if(i||!s){let c;throw c=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${e}"; ${c}.`)}e=Hi(e),bt.components_||(bt.components_={});const a=bt.getComponent("Player");if("Player"===e&&a&&a.players){const c=a.players,f=Object.keys(c);if(c&&f.length>0&&f.map(y=>c[y]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return bt.components_[e]=t,bt.components_[zw(e)]=t,t}static getComponent(e){if(e&&bt.components_)return bt.components_[e]}}function FF(n,e,t,r){return function t$(n,e,t){if("number"!=typeof e||e<0||e>t)throw new Error(`Failed to execute '${n}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${t}).`)}(n,r,t.length-1),t[r][e]}function BM(n){let e;return e=void 0===n||0===n.length?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:n.length,start:FF.bind(null,"start",0,n),end:FF.bind(null,"end",1,n)},fe().Symbol&&fe().Symbol.iterator&&(e[fe().Symbol.iterator]=()=>(n||[]).values()),e}function Nc(n,e){return Array.isArray(n)?BM(n):void 0===n||void 0===e?BM():BM([[n,e]])}bt.registerComponent("Component",bt);const UF=function(n,e){n=n<0?0:n;let t=Math.floor(n%60),r=Math.floor(n/60%60),i=Math.floor(n/3600);const s=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(n)||n===1/0)&&(i=r=t="-"),i=i>0||a>0?i+":":"",r=((i||s>=10)&&r<10?"0"+r:r)+":",t=t<10?"0"+t:t,i+r+t};let VM=UF;function BF(n){VM=n}function VF(){VM=UF}function Sy(n,e=n){return VM(n,e)}var n$=Object.freeze({__proto__:null,createTimeRanges:Nc,createTimeRange:Nc,setFormatTime:BF,resetFormatTime:VF,formatTime:Sy});function jF(n,e){let r,i,t=0;if(!e)return 0;(!n||!n.length)&&(n=Nc(0,0));for(let s=0;s<n.length;s++)r=n.start(s),i=n.end(s),i>e&&(i=e),t+=i-r;return t/e}function pa(n){if(n instanceof pa)return n;"number"==typeof n?this.code=n:"string"==typeof n?this.message=n:oh(n)&&("number"==typeof n.code&&(this.code=n.code),Object.assign(this,n)),this.message||(this.message=pa.defaultMessages[this.code]||"")}pa.prototype.code=0,pa.prototype.message="",pa.prototype.status=null,pa.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],pa.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(let n=0;n<pa.errorTypes.length;n++)pa[pa.errorTypes[n]]=n,pa.prototype[pa.errorTypes[n]]=n;function Ww(n){return null!=n&&"function"==typeof n.then}function dh(n){Ww(n)&&n.then(null,e=>{})}const jM=function(n){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,r,i)=>(n[r]&&(t[r]=n[r]),t),{cues:n.cues&&Array.prototype.map.call(n.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})};const $M="vjs-modal-dialog";class mb extends bt{constructor(e,t){super(e,t),this.handleKeyDown_=r=>this.handleKeyDown(r),this.close_=r=>this.close(r),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=Gn("div",{className:`${$M}-content`},{role:"document"}),this.descEl_=Gn("p",{className:`${$M}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),_m(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${$M} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(!this.opened_){const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}opened(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if("boolean"==typeof e){const t=this.closeable_=!!e;let r=this.getChild("closeButton");if(t&&!r){const i=this.contentEl_;this.contentEl_=this.el_,r=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(r,"close",this.close_)}!t&&r&&(this.off(r,"close",this.close_),this.removeChild(r),r.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),r=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,r.removeChild(t),this.empty(),CF(t,e),this.trigger("modalfill"),i?r.insertBefore(t,i):r.appendChild(t);const s=this.getChild("closeButton");s&&r.appendChild(s.el_)}empty(){this.trigger("beforemodalempty"),VD(this.contentEl()),this.trigger("modalempty")}content(e){return void 0!==e&&(this.content_=e),this.content_}conditionalFocus_(){const e=Lt().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(e.stopPropagation(),Un().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(!Un().isEventKey(e,"Tab"))return;const t=this.focusableEls_(),r=this.el_.querySelector(":focus");let i;for(let s=0;s<t.length;s++)if(r===t[s]){i=s;break}Lt().activeElement===this.el_&&(i=0),e.shiftKey&&0===i?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&i===t.length-1&&(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,t=>(t instanceof fe().HTMLAnchorElement||t instanceof fe().HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof fe().HTMLInputElement||t instanceof fe().HTMLSelectElement||t instanceof fe().HTMLTextAreaElement||t instanceof fe().HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof fe().HTMLIFrameElement||t instanceof fe().HTMLObjectElement||t instanceof fe().HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable"))}}mb.prototype.options_={pauseOnOpen:!0,temporary:!0},bt.registerComponent("ModalDialog",mb);class _b extends Al{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},up(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let r=0,i=this.length;r<i;r++)if(this[r]===e){t=this[r],t.off&&t.off(),this.tracks_.splice(r,1);break}!t||this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let r=0,i=this.length;r<i;r++){const s=this[r];if(s.id===e){t=s;break}}return t}}_b.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const n in _b.prototype.allowedEvents_)_b.prototype["on"+n]=null;const HM=function(n,e){for(let t=0;t<n.length;t++)!Object.keys(n[t]).length||e.id===n[t].id||(n[t].enabled=!1)},qM=function(n,e){for(let t=0;t<n.length;t++)!Object.keys(n[t]).length||e.id===n[t].id||(n[t].selected=!1)};class HF extends _b{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class zD{constructor(e){zD.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let r=0;const i=e.length;this.cues_=e,this.length_=e.length;const s=function(a){""+a in this||Object.defineProperty(this,""+a,{get(){return this.cues_[a]}})};if(t<i)for(r=t;r<i;r++)s.call(this,r)}getCueById(e){let t=null;for(let r=0,i=this.length;r<i;r++){const s=this[r];if(s.id===e){t=s;break}}return t}}const o$={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},a$={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},u$={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},qF={disabled:"disabled",hidden:"hidden",showing:"showing"};class GM extends Al{constructor(e={}){super();const t={id:e.id||"vjs_track_"+lh(),kind:e.kind||"",language:e.language||""};let r=e.label||"";for(const i in t)Object.defineProperty(this,i,{get:()=>t[i],set(){}});Object.defineProperty(this,"label",{get:()=>r,set(i){i!==r&&(r=i,this.trigger("labelchange"))}})}}const zM=function(n){const e=["protocol","hostname","port","pathname","search","hash","host"],t=Lt().createElement("a");t.href=n;const r={};for(let i=0;i<e.length;i++)r[e[i]]=t[e[i]];return"http:"===r.protocol&&(r.host=r.host.replace(/:80$/,"")),"https:"===r.protocol&&(r.host=r.host.replace(/:443$/,"")),r.protocol||(r.protocol=fe().location.protocol),r.host||(r.host=fe().location.host),r},GF=function(n){if(!n.match(/^https?:\/\//)){const e=Lt().createElement("a");e.href=n,n=e.href}return n},WM=function(n){if("string"==typeof n){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(n);if(t)return t.pop().toLowerCase()}return""},WD=function(n,e=fe().location){const t=zM(n);return(":"===t.protocol?e.protocol:t.protocol)+t.host!==e.protocol+e.host};var l$=Object.freeze({__proto__:null,parseUrl:zM,getAbsoluteURL:GF,getFileExtension:WM,isCrossOrigin:WD});const zF=function(n,e){const t=new(fe().WebVTT.Parser)(fe(),fe().vttjs,fe().WebVTT.StringDecoder()),r=[];t.oncue=function(i){e.addCue(i)},t.onparsingerror=function(i){r.push(i)},t.onflush=function(){e.trigger({type:"loadeddata",target:e})},t.parse(n),r.length>0&&(fe().console&&fe().console.groupCollapsed&&fe().console.groupCollapsed(`Text Track parsing errors for ${e.src}`),r.forEach(i=>sr.error(i)),fe().console&&fe().console.groupEnd&&fe().console.groupEnd()),t.flush()},WF=function(n,e){const t={uri:n},r=WD(n);r&&(t.cors=r);const i="use-credentials"===e.tech_.crossOrigin();i&&(t.withCredentials=i),kL()(t,ti(this,function(s,a,c){if(s)return sr.error(s,a);e.loaded_=!0,"function"!=typeof fe().WebVTT?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],f=>{if("vttjserror"!==f.type)return zF(c,e);sr.error(`vttjs failed to load, stopping trying to process ${e.src}`)}):zF(c,e)}))};class Kw extends GM{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=ei(e,{kind:u$[e.kind]||"subtitles",language:e.language||e.srclang||""});let r=qF[t.mode]||"disabled";const i=t.default;("metadata"===t.kind||"chapters"===t.kind)&&(r="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=!1!==this.tech_.preloadTextTracks;const s=new zD(this.cues_),a=new zD(this.activeCues_);let c=!1;this.timeupdateHandler=ti(this,function(y={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_)return void("timeupdate"!==y.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)));this.activeCues=this.activeCues,c&&(this.trigger("cuechange"),c=!1),"timeupdate"!==y.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}}),this.tech_.one("dispose",()=>{this.stopTracking()}),"disabled"!==r&&this.startTracking(),Object.defineProperties(this,{default:{get:()=>i,set(){}},mode:{get:()=>r,set(y){!qF[y]||r!==y&&(r=y,!this.preload_&&"disabled"!==r&&0===this.cues.length&&WF(this.src,this),this.stopTracking(),"disabled"!==r&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?s:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0===this.cues.length)return a;const y=this.tech_.currentTime(),b=[];for(let D=0,N=this.cues.length;D<N;D++){const B=this.cues[D];B.startTime<=y&&B.endTime>=y&&b.push(B)}if(c=!1,b.length!==this.activeCues_.length)c=!0;else for(let D=0;D<b.length;D++)-1===this.activeCues_.indexOf(b[D])&&(c=!0);return this.activeCues_=b,a.setCues_(this.activeCues_),a},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==t.kind&&"captions"!==t.kind)&&WF(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(!("getCueAsHTML"in t)){t=new(fe().vttjs.VTTCue)(e.startTime,e.endTime,e.text);for(const i in e)i in t||(t[i]=e[i]);t.id=e.id,t.originalCue_=e}const r=this.tech_.textTracks();for(let i=0;i<r.length;i++)r[i]!==this&&r[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}removeCue(e){let t=this.cues_.length;for(;t--;){const r=this.cues_[t];if(r===e||r.originalCue_&&r.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}Kw.prototype.allowedEvents_={cuechange:"cuechange"};class KF extends GM{constructor(e={}){const t=ei(e,{kind:a$[e.kind]||""});super(t);let r=!1;Object.defineProperty(this,"enabled",{get:()=>r,set(i){"boolean"!=typeof i||i===r||(r=i,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class ZF extends GM{constructor(e={}){const t=ei(e,{kind:o$[e.kind]||""});super(t);let r=!1;Object.defineProperty(this,"selected",{get:()=>r,set(i){"boolean"!=typeof i||i===r||(r=i,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class lp extends Al{constructor(e={}){let t;super();const r=new Kw(e);this.kind=r.kind,this.src=r.src,this.srclang=r.language,this.label=r.label,this.default=r.default,Object.defineProperties(this,{readyState:{get:()=>t},track:{get:()=>r}}),t=lp.NONE,r.addEventListener("loadeddata",()=>{t=lp.LOADED,this.trigger({type:"load",target:this})})}}lp.prototype.allowedEvents_={load:"load"},lp.NONE=0,lp.LOADING=1,lp.LOADED=2,lp.ERROR=3;const kl={audio:{ListClass:class r$ extends _b{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){HM(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&HM(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,HM(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}},TrackClass:KF,capitalName:"Audio"},video:{ListClass:class i$ extends _b{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){qM(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(e){e.selected&&qM(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,qM(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}},TrackClass:ZF,capitalName:"Video"},text:{ListClass:HF,TrackClass:Kw,capitalName:"Text"}};Object.keys(kl).forEach(function(n){kl[n].getterName=`${n}Tracks`,kl[n].privateName=`${n}Tracks_`});const yb={remoteText:{ListClass:HF,TrackClass:Kw,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:class s${constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,r=e.length;t<r;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let r=0,i=this.trackElements_.length;r<i;r++)if(e===this.trackElements_[r].track){t=this.trackElements_[r];break}return t}removeTrackElement_(e){for(let t=0,r=this.trackElements_.length;t<r;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}},TrackClass:lp,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ga=Object.assign({},kl,yb);yb.names=Object.keys(yb),kl.names=Object.keys(kl),ga.names=[].concat(yb.names).concat(kl.names);class jn extends bt{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=r=>this.onDurationChange(r),this.trackProgress_=r=>this.trackProgress(r),this.trackCurrentTime_=r=>this.trackCurrentTime(r),this.stopTrackingCurrentTime_=r=>this.stopTrackingCurrentTime(r),this.disposeSourceHandler_=r=>this.disposeSourceHandler(r),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),ga.names.forEach(r=>{const i=ga[r];e&&e[i.getterName]&&(this[i.privateName]=e[i.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(r=>{!1===e[`native${r}Tracks`]&&(this[`featuresNative${r}Tracks`]=!1)}),!1===e.nativeCaptions||!1===e.nativeTextTracks?this.featuresNativeTextTracks=!1:(!0===e.nativeCaptions||!0===e.nativeTextTracks)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=!1!==e.preloadTextTracks,this.autoRemoteTextTracks_=new ga.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ti(this,function(){const t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,1===t&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return Nc(0,0)}bufferedPercent(){return jF(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(kl.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){(e=[].concat(e)).forEach(t=>{const r=this[`${t}Tracks`]()||[];let i=r.length;for(;i--;){const s=r[i];"text"===t&&this.removeRemoteTextTrack(s),r.removeTrack(s)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;for(;t--;)this.removeRemoteTextTrack(e[t])}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return void 0!==e&&(this.error_=new pa(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?Nc(0,0):Nc()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){kl.names.forEach(e=>{const r=()=>{this.trigger(`${e}trackchange`)},i=this[kl[e].getterName]();i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),this.on("dispose",()=>{i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r)})})}addWebVttScript_(){if(!fe().WebVTT)if(Lt().body.contains(this.el())){if(!this.options_["vtt.js"]&&ab(ML())&&Object.keys(ML()).length>0)return void this.trigger("vttjsloaded");const e=Lt().createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),fe().WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),r=c=>e.addTrack(c.track),i=c=>e.removeTrack(c.track);t.on("addtrack",r),t.on("removetrack",i),this.addWebVttScript_();const s=()=>this.trigger("texttrackchange"),a=()=>{s();for(let c=0;c<e.length;c++){const f=e[c];f.removeEventListener("cuechange",s),"showing"===f.mode&&f.addEventListener("cuechange",s)}};a(),e.addEventListener("change",a),e.addEventListener("addtrack",a),e.addEventListener("removetrack",a),this.on("dispose",function(){t.off("addtrack",r),t.off("removetrack",i),e.removeEventListener("change",a),e.removeEventListener("addtrack",a),e.removeEventListener("removetrack",a);for(let c=0;c<e.length;c++)e[c].removeEventListener("cuechange",s)})}addTextTrack(e,t,r){if(!e)throw new Error("TextTrack kind is required but was not provided");return function c$(n,e,t,r,i={}){const s=n.textTracks();i.kind=e,t&&(i.label=t),r&&(i.language=r),i.tech=n;const a=new ga.text.TrackClass(i);return s.addTrack(a),a}(this,e,t,r)}createRemoteTextTrack(e){const t=ei(e,{tech:this});return new yb.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const r=this.createRemoteTextTrack(e);return"boolean"!=typeof t&&(t=!1),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),!1===t&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(r.track)),r}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=lh();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())})):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return jn.canPlayType(e.type)}static isTech(e){return e.prototype instanceof jn||e instanceof jn||e===jn}static registerTech(e,t){if(jn.techs_||(jn.techs_={}),!jn.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!jn.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!jn.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Hi(e),jn.techs_[e]=t,jn.techs_[zw(e)]=t,"Tech"!==e&&jn.defaultTechOrder_.push(e),t}static getTech(e){if(e){if(jn.techs_&&jn.techs_[e])return jn.techs_[e];if(e=Hi(e),fe()&&fe().videojs&&fe().videojs[e])return sr.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),fe().videojs[e]}}}ga.names.forEach(function(n){const e=ga[n];jn.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}}),jn.prototype.featuresVolumeControl=!0,jn.prototype.featuresMuteControl=!0,jn.prototype.featuresFullscreenResize=!1,jn.prototype.featuresPlaybackRate=!1,jn.prototype.featuresProgressEvents=!1,jn.prototype.featuresSourceset=!1,jn.prototype.featuresTimeupdateEvents=!1,jn.prototype.featuresNativeTextTracks=!1,jn.prototype.featuresVideoFrameCallback=!1,jn.withSourceHandlers=function(n){n.registerSourceHandler=function(t,r){let i=n.sourceHandlers;i||(i=n.sourceHandlers=[]),void 0===r&&(r=i.length),i.splice(r,0,t)},n.canPlayType=function(t){const r=n.sourceHandlers||[];let i;for(let s=0;s<r.length;s++)if(i=r[s].canPlayType(t),i)return i;return""},n.selectSourceHandler=function(t,r){const i=n.sourceHandlers||[];let s;for(let a=0;a<i.length;a++)if(s=i[a].canHandleSource(t,r),s)return i[a];return null},n.canPlaySource=function(t,r){const i=n.selectSourceHandler(t,r);return i?i.canHandleSource(t,r):""},["seekable","seeking","duration"].forEach(function(t){const r=this[t];"function"==typeof r&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):r.apply(this,arguments)})},n.prototype),n.prototype.setSource=function(t){let r=n.selectSourceHandler(t,this.options_);r||(n.nativeSourceHandler?r=n.nativeSourceHandler:sr.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),r!==n.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=r.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},n.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},bt.registerComponent("Tech",jn),jn.registerTech("Tech",jn),jn.defaultTechOrder_=[];const xy={},KM={},KD={};function h$(n,e,t){n.setTimeout(()=>Dy(e,xy[e.type],t,n),1)}function YF(n,e,t,r=null){const i="call"+Hi(t),s=n.reduce(ZM(i),r),a=s===KD,c=a?null:e[t](s);return function y$(n,e,t,r){for(let i=n.length-1;i>=0;i--){const s=n[i];s[e]&&s[e](r,t)}}(n,t,c,a),c}const m$={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},_$={setCurrentTime:1,setMuted:1,setVolume:1},QF={play:1,pause:1};function ZM(n){return(e,t)=>e===KD?KD:t[n]?t[n](e):e}function Dy(n={},e=[],t,r,i=[],s=!1){const[a,...c]=e;if("string"==typeof a)Dy(n,xy[a],t,r,i,s);else if(a){const f=function b$(n,e){const t=KM[n.id()];let r=null;if(null==t)return r=e(n),KM[n.id()]=[[e,r]],r;for(let i=0;i<t.length;i++){const[s,a]=t[i];s===e&&(r=a)}return null===r&&(r=e(n),t.push([e,r])),r}(r,a);if(!f.setSource)return i.push(f),Dy(n,c,t,r,i,s);f.setSource(Object.assign({},n),function(y,b){if(y)return Dy(n,c,t,r,i,s);i.push(f),Dy(b,n.type===b.type?c:xy[b.type],t,r,i,s)})}else c.length?Dy(n,c,t,r,i,s):s?t(n,i):Dy(n,xy["*"],t,r,i,!0)}const T$={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},ZD=function(n=""){const e=WM(n);return T$[e.toLowerCase()]||""},XF=function(n){if(Array.isArray(n)){let e=[];n.forEach(function(t){t=XF(t),Array.isArray(t)?e=e.concat(t):oh(t)&&e.push(t)}),n=e}else n="string"==typeof n&&n.trim()?[JF({src:n})]:oh(n)&&"string"==typeof n.src&&n.src&&n.src.trim()?[JF(n)]:[];return n};function JF(n){if(!n.type){const e=ZD(n.src);e&&(n.type=e)}return n}bt.registerComponent("MediaLoader",class C$ extends bt{constructor(e,t,r){if(super(e,ei({createEl:!1},t),r),t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(let s=0,a=t.playerOptions.techOrder;s<a.length;s++){const c=Hi(a[s]);let f=jn.getTech(c);if(c||(f=bt.getComponent(c)),f&&f.isSupported()){e.loadTech_(c);break}}}});class YD extends bt{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=r=>this.handleMouseOver(r),this.handleMouseOut_=r=>this.handleMouseOut(r),this.handleClick_=r=>this.handleClick(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.emitTapEvents(),this.enable()}createEl(e="div",t={},r={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&sr.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),r=Object.assign({role:"button"},r),this.tabIndex_=t.tabIndex;const i=Gn(e,t,r);return this.player_.options_.experimentalSvgIcons||i.appendChild(Gn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=Gn("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(void 0===e)return this.controlText_||"Need Text";const r=this.localize(e);this.controlText_=e,_m(this.controlTextEl_,r),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&t.setAttribute("title",r)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){Un().isEventKey(e,"Space")||Un().isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}bt.registerComponent("ClickableComponent",YD);class YM extends YD{constructor(e,t){super(e,t),this.update(),this.update_=r=>this.update(r),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return Gn("div",{className:"vjs-poster"})}crossOrigin(e){if(void 0===e)return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null===e||"anonymous"===e||"use-credentials"===e?this.$("img")&&(this.$("img").crossOrigin=e):this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){e?(this.$("img")||this.el_.appendChild(Gn("picture",{className:"vjs-poster",tabIndex:-1},{},Gn("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e):this.el_.textContent=""}handleClick(e){!this.player_.controls()||(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?dh(this.player_.play()):this.player_.pause())}}YM.prototype.crossorigin=YM.prototype.crossOrigin,bt.registerComponent("PosterImage",YM);const S$={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function QM(n,e){let t;if(4===n.length)t=n[1]+n[1]+n[2]+n[2]+n[3]+n[3];else{if(7!==n.length)throw new Error("Invalid color code provided, "+n+"; must be formatted as e.g. #f0e or #f604e2.");t=n.slice(1)}return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function Zw(n,e,t){try{n.style[e]=t}catch(r){return}}function t3(n){return n?`${n}px`:""}bt.registerComponent("TextTrackDisplay",class x$ extends bt{constructor(e,t,r){super(e,t,r);const s=a=>{this.updateDisplayOverlay(),this.updateDisplay(a)};e.on("loadstart",a=>this.toggleDisplay(a)),e.on("texttrackchange",a=>this.updateDisplay(a)),e.on("loadedmetadata",a=>{this.updateDisplayOverlay(),this.preselectTrack(a)}),e.ready(ti(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)return void this.hide();e.on("fullscreenchange",s),e.on("playerresize",s);const a=fe().screen.orientation||fe(),c=fe().screen.orientation?"change":"orientationchange";a.addEventListener(c,s),e.on("dispose",()=>a.removeEventListener(c,s));const f=this.options_.playerOptions.tracks||[];for(let y=0;y<f.length;y++)this.player_.addRemoteTextTrack(f[y],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),r=this.player_.cache_.selectedLanguage;let i,s,a;for(let c=0;c<t.length;c++){const f=t[c];r&&r.enabled&&r.language&&r.language===f.language&&f.kind in e?f.kind===r.kind?a=f:a||(a=f):r&&!r.enabled?(a=null,i=null,s=null):f.default&&("descriptions"!==f.kind||i?f.kind in e&&!s&&(s=f):i=f)}a?a.mode="showing":s?s.mode="showing":i&&(i.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"==typeof fe().WebVTT&&fe().WebVTT.processCues(fe(),[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const a=[];for(let c=0;c<e.length;++c){const f=e[c];"showing"===f.mode&&a.push(f)}return void this.updateForTrack(a)}let r=null,i=null,s=e.length;for(;s--;){const a=e[s];"showing"===a.mode&&("descriptions"===a.kind?r=a:i=a)}i?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):r&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(r))}updateDisplayOverlay(){if(!this.player_.videoHeight()||!fe().CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),t=this.player_.currentHeight(),r=e/t,i=this.player_.videoWidth()/this.player_.videoHeight();let s=0,a=0;Math.abs(r-i)>.1&&(r>i?s=Math.round((e-t*i)/2):a=Math.round((t-e/i)/2)),Zw(this.el_,"insetInline",t3(s)),Zw(this.el_,"insetBlock",t3(a))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),r=e.activeCues;let i=r.length;for(;i--;){const s=r[i];if(!s)continue;const a=s.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&Zw(a.firstChild,"color",QM(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Zw(a.firstChild,"backgroundColor",QM(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Zw(a,"backgroundColor",QM(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===t.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),t.fontPercent&&1!==t.fontPercent){const c=fe().parseFloat(a.style.fontSize);a.style.fontSize=c*t.fontPercent+"px",a.style.height="auto",a.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=S$[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),"function"!=typeof fe().WebVTT||e.every(r=>!r.activeCues))return;const t=[];for(let r=0;r<e.length;++r){const i=e[r];for(let s=0;s<i.activeCues.length;++s)t.push(i.activeCues[s])}fe().WebVTT.processCues(fe(),t,this.el_);for(let r=0;r<e.length;++r){const i=e[r];for(let s=0;s<i.activeCues.length;++s){const a=i.activeCues[s].displayState;wy(a,"vjs-text-track-cue","vjs-text-track-cue-"+(i.language?i.language:r)),i.language&&hb(a,"lang",i.language)}this.player_.textTrackSettings&&this.updateDisplayState(i)}}}),bt.registerComponent("LoadingSpinner",class D$ extends bt{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),r=Gn("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),i=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(r),i}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}});class xu extends YD{createEl(e,t={},r={}){const i=Gn("button",t=Object.assign({className:this.buildCSSClass()},t),r=Object.assign({type:"button"},r));return this.player_.options_.experimentalSvgIcons||i.appendChild(Gn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}addChild(e,t={}){return sr.warn(`Adding an actionable (user controllable) child to a Button (${this.constructor.name}) is not supported; use a ClickableComponent instead.`),bt.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){Un().isEventKey(e,"Space")||Un().isEventKey(e,"Enter")?e.stopPropagation():super.handleKeyDown(e)}}bt.registerComponent("Button",xu);class n3 extends xu{constructor(e,t){super(e,t),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",r=>this.handleMouseDown(r))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e)return dh(t),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());const r=this.player_.getChild("controlBar"),i=r&&r.getChild("playToggle");if(!i)return void this.player_.tech(!0).focus();const s=()=>i.focus();Ww(t)?t.then(s,()=>{}):this.setTimeout(s,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}n3.prototype.controlText_="Play Video",bt.registerComponent("BigPlayButton",n3),bt.registerComponent("CloseButton",class I$ extends xu{constructor(e,t){super(e,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){Un().isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}});class r3 extends xu{constructor(e,t={}){super(e,t),t.replay=void 0===t.replay||t.replay,this.setIcon("play"),this.on(e,"play",r=>this.handlePlay(r)),this.on(e,"pause",r=>this.handlePause(r)),t.replay&&this.on(e,"ended",r=>this.handleEnded(r))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?dh(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",t=>this.handleSeeked(t))}}r3.prototype.controlText_="Play",bt.registerComponent("PlayToggle",r3);class vb extends bt{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended","seeking"],r=>this.update(r)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),r=Gn("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}\xa0`},{role:"presentation"});return t.appendChild(r),this.contentEl_=Gn("span",{className:`${e}-display`},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&"seeking"===e.type||this.updateContent(e)}updateTextNode_(e=0){e=Sy(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let t=this.textNode_;t&&this.contentEl_.firstChild!==t&&(t=null,sr.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=Lt().createTextNode(this.formattedTime_),this.textNode_&&(t?this.contentEl_.replaceChild(this.textNode_,t):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}vb.prototype.labelText_="Time",vb.prototype.controlText_="Time",bt.registerComponent("TimeDisplay",vb);class XM extends vb{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}XM.prototype.labelText_="Current Time",XM.prototype.controlText_="Current Time",bt.registerComponent("CurrentTimeDisplay",XM);class JM extends vb{constructor(e,t){super(e,t);const r=i=>this.updateContent(i);this.on(e,"durationchange",r),this.on(e,"loadstart",r),this.on(e,"loadedmetadata",r)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}}JM.prototype.labelText_="Duration",JM.prototype.controlText_="Duration",bt.registerComponent("DurationDisplay",JM),bt.registerComponent("TimeDivider",class A$ extends bt{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),r=super.createEl("span",{textContent:"/"});return t.appendChild(r),e.appendChild(t),e}});class eP extends vb{constructor(e,t){super(e,t),this.on(e,"durationchange",r=>this.updateContent(r))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return!1!==this.options_.displayNegative&&e.insertBefore(Gn("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if("number"!=typeof this.player_.duration())return;let t;t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t)}}eP.prototype.labelText_="Remaining Time",eP.prototype.controlText_="Remaining Time",bt.registerComponent("RemainingTimeDisplay",eP),bt.registerComponent("LiveDisplay",class k$ extends bt{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",r=>this.updateShowing(r))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Gn("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Gn("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}\xa0`})),this.contentEl_.appendChild(Lt().createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}});class i3 extends xu{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=r=>this.updateLiveEdgeStatus(r),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=Gn("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function Yw(n,e,t){return n=Number(n),Math.min(t,Math.max(e,isNaN(n)?e:n))}i3.prototype.controlText_="Seek to live, currently playing live",bt.registerComponent("SeekToLive",i3);var M$=Object.freeze({__proto__:null,clamp:Yw});class tP extends bt{constructor(e,t){super(e,t),this.handleMouseDown_=r=>this.handleMouseDown(r),this.handleMouseUp_=r=>this.handleMouseUp(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.handleClick_=r=>this.handleClick(r),this.handleMouseMove_=r=>this.handleMouseMove(r),this.update_=r=>this.update(r),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},r={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),r=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},r),super.createEl(e,t,r)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"===e.type&&!uh&&e.preventDefault(),bF(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const t=this.bar.el_.ownerDocument;TF(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(100*e).toFixed(2)+"%"})),e}getProgress(){return Number(Yw(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=BD(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){Un().isEventKey(e,"Left")||Un().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):Un().isEventKey(e,"Right")||Un().isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")}}bt.registerComponent("Slider",tP);const nP=(n,e)=>Yw(n/e*100,0,100).toFixed(2)+"%";bt.registerComponent("LoadProgressBar",class P$ extends bt{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",r=>this.update(r))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=Gn("span",{className:"vjs-control-text"}),r=Gn("span",{textContent:this.localize("Loaded")}),i=Lt().createTextNode(": ");return this.percentageEl_=Gn("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(r),t.appendChild(i),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const t=this.player_.liveTracker,r=this.player_.buffered(),i=t&&t.isLive()?t.seekableEnd():this.player_.duration(),s=this.player_.bufferedEnd(),a=this.partEls_,c=nP(s,i);this.percent_!==c&&(this.el_.style.width=c,_m(this.percentageEl_,c),this.percent_=c);for(let f=0;f<r.length;f++){const y=r.start(f),b=r.end(f);let D=a[f];D||(D=this.el_.appendChild(Gn()),a[f]=D),(D.dataset.start!==y||D.dataset.end!==b)&&(D.dataset.start=y,D.dataset.end=b,D.style.left=nP(y,s),D.style.width=nP(b-y,s))}for(let f=a.length;f>r.length;f--)this.el_.removeChild(a[f-1]);a.length=r.length})}}),bt.registerComponent("TimeTooltip",class R$ extends bt{constructor(e,t){super(e,t),this.update=ch(ti(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,r){const i=Hw(this.el_),s=fb(this.player_.el()),a=e.width*t;if(!s||!i)return;const c=e.left-s.left+a,f=e.width-a+(s.right-e.right);let y=i.width/2;c<y?y+=y-c:f<y&&(y=f),y<0?y=0:y>i.width&&(y=i.width),y=Math.round(y),this.el_.style.right=`-${y}px`,this.write(r)}write(e){_m(this.el_,e)}updateTime(e,t,r,i){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let s;const a=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const c=this.player_.liveTracker.liveWindow(),f=c-t*c;s=(f<1?"":"-")+Sy(f,c)}else s=Sy(r,a);this.update(e,t,s),i&&i()})}});class rP extends bt{constructor(e,t){super(e,t),this.setIcon("circle"),this.update=ch(ti(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t){const r=this.getChild("timeTooltip");if(!r)return;const i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();r.updateTime(e,t,i)}}rP.prototype.options_={children:[]},!ha&&!ah&&rP.prototype.options_.children.push("timeTooltip"),bt.registerComponent("PlayProgressBar",rP);class s3 extends bt{constructor(e,t){super(e,t),this.update=ch(ti(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const r=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,r,()=>{this.el_.style.left=e.width*t+"px"})}}s3.prototype.options_={children:["timeTooltip"]},bt.registerComponent("MouseTimeDisplay",s3);class iP extends tP{constructor(e,t){super(e,t),this.setEventHandlers_()}setEventHandlers_(){this.update_=ti(this,this.update),this.update=ch(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Lt()&&"visibilityState"in Lt()&&this.on(Lt(),"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){"hidden"===Lt().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if("hidden"===Lt().visibilityState)return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const r=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),i=this.player_.liveTracker;let s=this.player_.duration();i&&i.isLive()&&(s=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.percent_=t),(this.currentTime_!==r||this.duration_!==s)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Sy(r,s),Sy(s,s)],"{1} of {2}")),this.currentTime_=r,this.duration_=s),this.bar&&this.bar.update(fb(this.el()),this.getProgress())}),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let t;const r=this.player_.liveTracker;return r&&r.isLive()?(t=(e-r.seekableStart())/r.liveWindow(),r.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){!qw(e)||(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!qw(e)||isNaN(this.player_.duration()))return;let r;!t&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);const i=this.calculateDistance(e),s=this.player_.liveTracker;if(s&&s.isLive()){if(i>=.99)return void s.seekToLiveEdge();const a=s.seekableStart(),c=s.liveCurrentTime();if(r=a+i*s.liveWindow(),r>=c&&(r=c),r<=a&&(r=a+.1),r===1/0)return}else r=i*this.player_.duration(),r===this.player_.duration()&&(r-=.1);this.userSeek_(r),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");!e||e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");!e||e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?dh(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+5)}stepBack(){this.userSeek_(this.player_.currentTime()-5)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(Un().isEventKey(e,"Space")||Un().isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(Un().isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(Un().isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Un()(e))){e.preventDefault(),e.stopPropagation();const r=10*(Un().codes[Un()(e)]-Un().codes[0])/100;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*r):this.userSeek_(this.player_.duration()*r)}else Un().isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):Un().isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Lt()&&"visibilityState"in Lt()&&this.off(Lt(),"visibilitychange",this.toggleVisibility_),super.dispose()}}iP.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!ha&&!ah&&iP.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),bt.registerComponent("SeekBar",iP);class a3 extends bt{constructor(e,t){super(e,t),this.handleMouseMove=ch(ti(this,this.handleMouseMove),30),this.throttledHandleMouseSeek=ch(ti(this,this.handleMouseSeek),30),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.handleMouseDownHandler_=r=>this.handleMouseDown(r),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const r=t.getChild("playProgressBar"),i=t.getChild("mouseTimeDisplay");if(!r&&!i)return;const s=t.el(),a=Hw(s);let c=BD(s,e).x;c=Yw(c,0,1),i&&i.update(a,c),r&&r.update(a,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&dh(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,r=this.getChild("seekBar");r&&r.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}a3.prototype.options_={children:["seekBar"]},bt.registerComponent("ProgressControl",a3);class u3 extends xu{constructor(e,t){super(e,t),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],r=>this.handlePictureInPictureChange(r)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],r=>this.handlePictureInPictureEnabledChange(r)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){"audio"===this.player_.currentType().substring(0,5)||this.player_.audioPosterMode()||this.player_.audioOnlyMode()?(this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()):this.show()}handlePictureInPictureEnabledChange(){Lt().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in fe()?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){"function"==typeof Lt().exitPictureInPicture&&super.show()}}u3.prototype.controlText_="Picture-in-Picture",bt.registerComponent("PictureInPictureToggle",u3);class l3 extends xu{constructor(e,t){super(e,t),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",r=>this.handleFullscreenChange(r)),!1===Lt()[e.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}l3.prototype.controlText_="Fullscreen",bt.registerComponent("FullscreenToggle",l3),bt.registerComponent("VolumeLevel",class N$ extends bt{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}),bt.registerComponent("VolumeLevelTooltip",class L$ extends bt{constructor(e,t){super(e,t),this.update=ch(ti(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,r,i){if(!r){const s=fb(this.el_),a=fb(this.player_.el()),c=e.width*t;if(!a||!s)return;const f=e.left-a.left+c,y=e.width-c+(a.right-e.right);let b=s.width/2;f<b?b+=b-f:y<b&&(b=y),b<0?b=0:b>s.width&&(b=s.width),this.el_.style.right=`-${b}px`}this.write(`${i}%`)}write(e){_m(this.el_,e)}updateVolume(e,t,r,i,s){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,t,r,i.toFixed(0)),s&&s()})}});class c3 extends bt{constructor(e,t){super(e,t),this.update=ch(ti(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,r){const i=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,r,i,()=>{r?this.el_.style.bottom=e.height*t+"px":this.el_.style.left=e.width*t+"px"})}}c3.prototype.options_={children:["volumeLevelTooltip"]},bt.registerComponent("MouseVolumeLevelDisplay",c3);class XD extends tP{constructor(e,t){super(e,t),this.on("slideractive",r=>this.updateLastVolume_(r)),this.on(e,"volumechange",r=>this.updateARIAAttributes(r)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){!qw(e)||super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const r=this.el(),i=fb(r),s=this.vertical();let a=BD(r,e);a=s?a.y:a.x,a=Yw(a,0,1),t.update(i,a,s)}!qw(e)||(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{0===this.player_.volume()&&this.player_.lastVolume_(e)})}}XD.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!ha&&!ah&&XD.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),XD.prototype.playerEvent="volumechange",bt.registerComponent("VolumeBar",XD);class d3 extends bt{constructor(e,t={}){t.vertical=t.vertical||!1,(void 0===t.volumeBar||ab(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),function(n,e){e.tech_&&!e.tech_.featuresVolumeControl&&n.addClass("vjs-hidden"),n.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")})}(this,e),this.throttledHandleMouseMove=ch(ti(this,this.handleMouseMove),30),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.on("mousedown",r=>this.handleMouseDown(r)),this.on("touchstart",r=>this.handleMouseDown(r)),this.on("mousemove",r=>this.handleMouseMove(r)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}d3.prototype.options_={children:["volumeBar"]},bt.registerComponent("VolumeControl",d3);class h3 extends xu{constructor(e,t){super(e,t),function(n,e){e.tech_&&!e.tech_.featuresMuteControl&&n.addClass("vjs-hidden"),n.on(e,"loadstart",function(){e.tech_.featuresMuteControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")})}(this,e),this.on(e,["loadstart","volumechange"],r=>this.update(r))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),r=this.player_.lastVolume_();0===t?(this.player_.volume(r<.1?.1:r),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;this.setIcon("volume-high"),ha&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?(this.setIcon("volume-mute"),t=0):e<.33?(this.setIcon("volume-low"),t=1):e<.67&&(this.setIcon("volume-medium"),t=2),FD(this.el_,[0,1,2,3].reduce((r,i)=>r+`${i?" ":""}vjs-vol-${i}`,"")),wy(this.el_,`vjs-vol-${t}`)}updateControlText_(){const t=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}}h3.prototype.controlText_="Mute",bt.registerComponent("MuteToggle",h3);class f3 extends bt{constructor(e,t={}){t.inline=void 0===t.inline||t.inline,(void 0===t.volumeControl||ab(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=r=>this.handleKeyPress(r),this.on(e,["loadstart"],r=>this.volumePanelState_(r)),this.on(this.muteToggle,"keyup",r=>this.handleKeyPress(r)),this.on(this.volumeControl,"keyup",r=>this.handleVolumeControlKeyUp(r)),this.on("keydown",r=>this.handleKeyPress(r)),this.on("mouseover",r=>this.handleMouseOver(r)),this.on("mouseout",r=>this.handleMouseOut(r)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){Un().isEventKey(e,"Esc")&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),Su(Lt(),"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),Go(Lt(),"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){Un().isEventKey(e,"Esc")&&this.handleMouseOut()}}f3.prototype.options_={children:["muteToggle","volumeControl"]},bt.registerComponent("VolumePanel",f3);class p3 extends xu{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const t=this.player_.currentTime(),r=this.player_.liveTracker,i=r&&r.isLive()?r.seekableEnd():this.player_.duration();let s;s=t+this.skipTime<=i?t+this.skipTime:i,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}p3.prototype.controlText_="Skip Forward",bt.registerComponent("SkipForward",p3);class g3 extends xu{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),r=this.player_.liveTracker,i=r&&r.isLive()&&r.seekableStart();let s;s=i&&t-this.skipTime<=i?i:t>=this.skipTime?t-this.skipTime:0,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}g3.prototype.controlText_="Skip Backward",bt.registerComponent("SkipBackward",g3);class m3 extends bt{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",r=>this.handleKeyDown(r)),this.boundHandleBlur_=r=>this.handleBlur(r),this.boundHandleTapClick_=r=>this.handleTapClick(r)}addEventListenerForItem(e){e instanceof bt&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof bt&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){this.contentEl_=Gn(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),Su(t,"click",function(r){r.preventDefault(),r.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||Lt().activeElement;if(!this.children().some(r=>r.el()===t)){const r=this.menuButton_;r&&r.buttonPressed_&&t!==r.el().firstChild&&r.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const r=t.filter(i=>i.el()===e.target)[0];if(!r)return;"CaptionSettingsMenuItem"!==r.name()&&this.menuButton_.focus()}}handleKeyDown(e){Un().isEventKey(e,"Left")||Un().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(Un().isEventKey(e,"Right")||Un().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}bt.registerComponent("Menu",m3);class sP extends bt{constructor(e,t={}){super(e,t),this.menuButton_=new xu(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const r=xu.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+r,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const i=s=>this.handleClick(s);this.handleMenuKeyUp_=s=>this.handleMenuKeyUp(s),this.on(this.menuButton_,"tap",i),this.on(this.menuButton_,"click",i),this.on(this.menuButton_,"keydown",s=>this.handleKeyDown(s)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),Su(Lt(),"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",s=>this.handleMouseLeave(s)),this.on("keydown",s=>this.handleSubmenuKeyDown(s))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new m3(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=Gn("li",{className:"vjs-menu-title",textContent:Hi(this.options_.title),tabIndex:-1}),r=new bt(this.player_,{el:t});e.addItem(r)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";return e+=!0===this.options_.inline?"-inline":"-popup",`vjs-menu-button ${e} ${xu.prototype.buildCSSClass()} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return e+=!0===this.options_.inline?"-inline":"-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),Go(Lt(),"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){Un().isEventKey(e,"Esc")||Un().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),Un().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(Un().isEventKey(e,"Up")||Un().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(Un().isEventKey(e,"Esc")||Un().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(Un().isEventKey(e,"Esc")||Un().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Un().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ha&&gF())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}bt.registerComponent("MenuButton",sP);class oP extends sP{constructor(e,t){const r=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!r)return;const i=ti(this,this.update);r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),r.addEventListener("labelchange",i),this.player_.on("ready",i),this.player_.on("dispose",function(){r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i),r.removeEventListener("labelchange",i)})}}bt.registerComponent("TrackButton",oP);const U$=["Tab","Esc","Up","Down","Right","Left"];class Qw extends YD{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.el_.setAttribute("role",this.selectable?this.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem")}createEl(e,t,r){this.nonIconControl=!0;const i=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),r),s=Gn("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?i.appendChild(s):i.replaceChild(s,i.querySelector(".vjs-icon-placeholder")),i}handleKeyDown(e){U$.some(t=>Un().isEventKey(e,t))||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}bt.registerComponent("MenuItem",Qw);class Xw extends Qw{constructor(e,t){const r=t.track,i=e.textTracks();t.label=r.label||r.language||"Unknown",t.selected="showing"===r.mode,super(e,t),this.track=r,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const s=(...c)=>{this.handleTracksChange.apply(this,c)},a=(...c)=>{this.handleSelectedLanguageChange.apply(this,c)};if(e.on(["loadstart","texttrackchange"],s),i.addEventListener("change",s),i.addEventListener("selectedlanguagechange",a),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),i.removeEventListener("change",s),i.removeEventListener("selectedlanguagechange",a)}),void 0===i.onchange){let c;this.on(["tap","click"],function(){if("object"!=typeof fe().Event)try{c=new(fe().Event)("change")}catch(f){}c||(c=Lt().createEvent("Event"),c.initEvent("change",!0,!0)),i.dispatchEvent(c)})}this.handleTracksChange()}handleClick(e){const t=this.track,r=this.player_.textTracks();if(super.handleClick(e),r)for(let i=0;i<r.length;i++){const s=r[i];-1!==this.kinds.indexOf(s.kind)&&(s===t?"showing"!==s.mode&&(s.mode="showing"):"disabled"!==s.mode&&(s.mode="disabled"))}}handleTracksChange(e){const t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if("showing"===this.track.mode){const t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}bt.registerComponent("TextTrackMenuItem",Xw);class _3 extends Xw{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.track.label=t.label?t.label:t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let r=!0;for(let i=0,s=t.length;i<s;i++){const a=t[i];if(this.options_.kinds.indexOf(a.kind)>-1&&"showing"===a.mode){r=!1;break}}r!==this.isSelected_&&this.selected(r)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let r=!0;for(let i=0,s=t.length;i<s;i++){const a=t[i];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&"showing"===a.mode){r=!1;break}}r&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}bt.registerComponent("OffTextTrackMenuItem",_3);class bb extends oP{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=Xw){let r;this.label_&&(r=`${this.label_} off`),e.push(new _3(this.player_,{kinds:this.kinds_,kind:this.kind_,label:r})),this.hideThreshold_+=1;const i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let s=0;s<i.length;s++){const a=i[s];if(this.kinds_.indexOf(a.kind)>-1){const c=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});c.addClass(`vjs-${a.kind}-menu-item`),e.push(c)}}return e}}bt.registerComponent("TextTrackButton",bb);class y3 extends Qw{constructor(e,t){const r=t.track,i=t.cue,s=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=i.text,t.selected=i.startTime<=s&&s<i.endTime,super(e,t),this.track=r,this.cue=i}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}bt.registerComponent("ChaptersTrackMenuItem",y3);class aP extends bb{constructor(e,t,r){super(e,t,r),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(i=>{i.selected(this.track_.activeCues[0]===i.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&"chapters"!==e.track.kind)return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const r=e[t];if(r.kind===this.kind_)return r}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Hi(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let r=0,i=t.length;r<i;r++){const a=new y3(this.player_,{track:this.track_,cue:t[r]});e.push(a)}return e}}aP.prototype.kind_="chapters",aP.prototype.controlText_="Chapters",bt.registerComponent("ChaptersButton",aP);class uP extends bb{constructor(e,t,r){super(e,t,r),this.setIcon("audio-description");const i=e.textTracks(),s=ti(this,this.handleTracksChange);i.addEventListener("change",s),this.on("dispose",function(){i.removeEventListener("change",s)})}handleTracksChange(e){const t=this.player().textTracks();let r=!1;for(let i=0,s=t.length;i<s;i++){const a=t[i];if(a.kind!==this.kind_&&"showing"===a.mode){r=!0;break}}r?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}uP.prototype.kind_="descriptions",uP.prototype.controlText_="Descriptions",bt.registerComponent("DescriptionsButton",uP);class lP extends bb{constructor(e,t,r){super(e,t,r),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}lP.prototype.kind_="subtitles",lP.prototype.controlText_="Subtitles",bt.registerComponent("SubtitlesButton",lP);class cP extends Xw{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}bt.registerComponent("CaptionSettingsMenuItem",cP);class dP extends bb{constructor(e,t,r){super(e,t,r),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new cP(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}dP.prototype.kind_="captions",dP.prototype.controlText_="Captions",bt.registerComponent("CaptionsButton",dP);class v3 extends Xw{createEl(e,t,r){const i=super.createEl(e,t,r),s=i.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",i):s.appendChild(Gn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(Gn("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),i}}bt.registerComponent("SubsCapsMenuItem",v3);class hP extends bb{constructor(e,t={}){super(e,t),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(Hi(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new cP(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,v3),e}}hP.prototype.kinds_=["captions","subtitles"],hP.prototype.controlText_="Subtitles",bt.registerComponent("SubsCapsButton",hP);class b3 extends Qw{constructor(e,t){const r=t.track,i=e.audioTracks();t.label=r.label||r.language||"Unknown",t.selected=r.enabled,super(e,t),this.track=r,this.addClass(`vjs-${r.kind}-menu-item`);const s=(...a)=>{this.handleTracksChange.apply(this,a)};i.addEventListener("change",s),this.on("dispose",()=>{i.removeEventListener("change",s)})}createEl(e,t,r){const i=super.createEl(e,t,r),s=i.querySelector(".vjs-menu-item-text");return["main-desc","description"].indexOf(this.options_.track.kind)>=0&&(s.appendChild(Gn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(Gn("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),i}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const t=this.player_.audioTracks();for(let r=0;r<t.length;r++){const i=t[r];i!==this.track&&(i.enabled=i===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}bt.registerComponent("AudioTrackMenuItem",b3);class T3 extends oP{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let r=0;r<t.length;r++)e.push(new b3(this.player_,{track:t[r],selectable:!0,multiSelectable:!1}));return e}}T3.prototype.controlText_="Audio Track",bt.registerComponent("AudioTrackButton",T3);class fP extends Qw{constructor(e,t){const r=t.rate,i=parseFloat(r,10);t.label=r,t.selected=i===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=r,this.rate=i,this.on(e,"ratechange",s=>this.update(s))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}fP.prototype.contentElType="button",bt.registerComponent("PlaybackRateMenuItem",fP);class E3 extends sP{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",r=>this.updateVisibility(r)),this.on(e,"ratechange",r=>this.updateLabel(r)),this.on(e,"playbackrateschange",r=>this.handlePlaybackRateschange(r))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Gn("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let r=e.length-1;r>=0;r--)t.push(new fP(this.player(),{rate:e[r]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}E3.prototype.controlText_="Playback Rate",bt.registerComponent("PlaybackRateMenuButton",E3);class w3 extends bt{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},r={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,r)}}bt.registerComponent("Spacer",w3),bt.registerComponent("CustomControlSpacer",class B$ extends w3{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:"\xa0"})}});class C3 extends bt{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}C3.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]},bt.registerComponent("ControlBar",C3);class S3 extends mb{constructor(e,t){super(e,t),this.on(e,"error",r=>{this.close(),this.open(r)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}S3.prototype.options_=Object.assign({},mb.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),bt.registerComponent("ErrorDisplay",S3);const pP="vjs-text-track-settings",x3=["#000","Black"],D3=["#00F","Blue"],I3=["#0FF","Cyan"],A3=["#0F0","Green"],k3=["#F0F","Magenta"],M3=["#F00","Red"],P3=["#FFF","White"],R3=["#FF0","Yellow"],gP=["1","Opaque"],mP=["0.5","Semi-Transparent"],O3=["0","Transparent"],Iy={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[x3,P3,M3,A3,D3,R3,k3,I3]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[gP,mP,O3]},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[P3,x3,M3,A3,D3,R3,k3,I3]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:n=>"1.00"===n?null:Number(n)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[gP,mP]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[O3,mP,gP]}};function N3(n,e){if(e&&(n=e(n)),n&&"none"!==n)return n}Iy.windowColor.options=Iy.backgroundColor.options,bt.registerComponent("TextTrackSettings",class $$ extends mb{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=Gn("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),void 0===t.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),"click",()=>{this.setDefaults(),this.updateDisplay()}),ob(Iy,r=>{this.on(this.$(r.selector),"change",this.updateDisplay)}),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(e,t="",r="label"){const i=Iy[e],s=i.id.replace("%s",this.id_),a=[t,s].join(" ").trim();return[`<${r} id="${s}" class="${"label"===r?"vjs-label":""}">`,this.localize(i.label),`</${r}>`,`<select aria-labelledby="${a}">`].concat(i.options.map(c=>{const f=s+"-"+c[1].replace(/\W+/g,"");return[`<option id="${f}" value="${c[0]}" `,`aria-labelledby="${a} ${f}">`,this.localize(c[1]),"</option>"].join("")})).concat("</select>").join("")}createElFgColor_(){const e=`captions-text-legend-${this.id_}`;return['<fieldset class="vjs-fg vjs-track-setting">',`<legend id="${e}">`,this.localize("Text"),"</legend>",'<span class="vjs-text-color">',this.createElSelect_("color",e),"</span>",'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")}createElBgColor_(){const e=`captions-background-${this.id_}`;return['<fieldset class="vjs-bg vjs-track-setting">',`<legend id="${e}">`,this.localize("Text Background"),"</legend>",'<span class="vjs-bg-color">',this.createElSelect_("backgroundColor",e),"</span>",'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")}createElWinColor_(){const e=`captions-window-${this.id_}`;return['<fieldset class="vjs-window vjs-track-setting">',`<legend id="${e}">`,this.localize("Caption Area Background"),"</legend>",'<span class="vjs-window-color">',this.createElSelect_("windowColor",e),"</span>",'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")}createElColors_(){return Gn("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return Gn("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){const e=this.localize("restore all settings to the default values");return Gn("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${e}">`,this.localize("Reset"),`<span class="vjs-control-text"> ${e}</span>`,"</button>",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return uF(Iy,(e,t,r)=>{const i=function V$(n,e){return N3(n.options[n.options.selectedIndex].value,e)}(this.$(t.selector),t.parser);return void 0!==i&&(e[r]=i),e},{})}setValues(e){ob(Iy,(t,r)=>{!function j$(n,e,t){if(e)for(let r=0;r<n.options.length;r++)if(N3(n.options[r].value,t)===e){n.selectedIndex=r;break}}(this.$(t.selector),e[r],t.parser)})}setDefaults(){ob(Iy,e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t})}restoreSettings(){let e;try{e=JSON.parse(fe().localStorage.getItem(pP))}catch(t){sr.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?fe().localStorage.setItem(pP,JSON.stringify(e)):fe().localStorage.removeItem(pP)}catch(t){sr.warn(t)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;const e=this.player_.controlBar,t=e&&e.subsCapsButton,r=e&&e.captionsButton;t?t.focus():r&&r.focus()}handleLanguagechange(){this.fill()}}),bt.registerComponent("ResizeManager",class H$ extends bt{constructor(e,t){let r=t.ResizeObserver||fe().ResizeObserver;null===t.ResizeObserver&&(r=!1),super(e,ei({createEl:!r,reportTouchActivity:!1},t)),this.ResizeObserver=t.ResizeObserver||fe().ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=PF(()=>{this.resizeHandler()},100,!1,this),r?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const s=this.debouncedHandler_;let a=this.unloadListener_=function(){Go(this,"resize",s),Go(this,"unload",a),a=null};Su(this.el_.contentWindow,"unload",a),Su(this.el_.contentWindow,"resize",s)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}});const q$={trackingThreshold:20,liveTolerance:15};bt.registerComponent("LiveTracker",class G$ extends bt{constructor(e,t){super(e,ei(q$,t,{createEl:!1})),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=i=>this.handlePlay(i),this.handleFirstTimeupdate_=i=>this.handleFirstTimeupdate(i),this.handleSeeked_=i=>this.handleSeeked(i),this.seekToLiveEdge_=i=>this.seekToLiveEdge(i),this.reset_(),this.on(this.player_,"durationchange",i=>this.handleDurationchange(i)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(fe().performance.now().toFixed(4)),r=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+r;const i=this.liveCurrentTime(),s=this.player_.currentTime();let a=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-s)>this.options_.liveTolerance;(!this.timeupdateSeen_||i===1/0)&&(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){!this.isTracking()||(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let r=e?e.length:0;for(;r--;)t.push(e.end(r));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let r=e?e.length:0;for(;r--;)t.push(e.start(r));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"==typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}),bt.registerComponent("TitleBar",class z$ extends bt{constructor(e,t){super(e,t),this.on("statechanged",r=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:Gn("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${lh()}`}),description:Gn("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${lh()}`})},Gn("div",{className:"vjs-title-bar"},{},lF(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,r={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(i=>{const s=this.state[i],a=this.els[i],c=r[i];VD(a),s&&_m(a,s),t&&(t.removeAttribute(c),s&&t.setAttribute(c,a.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}});const _P=n=>{const e=n.el();if(e.hasAttribute("src"))return n.triggerSourceset(e.src),!0;const t=n.$$("source"),r=[];let i="";if(!t.length)return!1;for(let s=0;s<t.length;s++){const a=t[s].src;a&&-1===r.indexOf(a)&&r.push(a)}return!!r.length&&(1===r.length&&(i=r[0]),n.triggerSourceset(i),!0)},W$=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(n){const e=Lt().createElement(this.nodeName.toLowerCase());e.innerHTML=n;const t=Lt().createDocumentFragment();for(;e.childNodes.length;)t.appendChild(e.childNodes[0]);return this.innerText="",fe().Element.prototype.appendChild.call(this,t),this.innerHTML}}),L3=(n,e)=>{let t={};for(let r=0;r<n.length&&(t=Object.getOwnPropertyDescriptor(n[r],e),!(t&&t.set&&t.get));r++);return t.enumerable=!0,t.configurable=!0,t},F3=function(n){const e=n.el();if(e.resetSourceWatch_)return;const t={},r=(n=>L3([n.el(),fe().HTMLMediaElement.prototype,fe().Element.prototype,W$],"innerHTML"))(n),i=s=>(...a)=>{const c=s.apply(e,a);return _P(n),c};["append","appendChild","insertAdjacentHTML"].forEach(s=>{!e[s]||(t[s]=e[s],e[s]=i(t[s]))}),Object.defineProperty(e,"innerHTML",ei(r,{set:i(r.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(t).forEach(s=>{e[s]=t[s]}),Object.defineProperty(e,"innerHTML",r)},n.one("sourceset",e.resetSourceWatch_)},Z$=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?GF(fe().Element.prototype.getAttribute.call(this,"src")):""},set(n){return fe().Element.prototype.setAttribute.call(this,"src",n),n}});class Qt extends jn{constructor(e,t){super(e,t);const r=e.source;let i=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&"VIDEO"===this.el_.tagName,r&&(this.el_.currentSrc!==r.src||e.tag&&3===e.tag.initNetworkState_)?this.setSource(r):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const s=this.el_.childNodes;let a=s.length;const c=[];for(;a--;){const f=s[a];"track"===f.nodeName.toLowerCase()&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(f),this.remoteTextTracks().addTrack(f.track),this.textTracks().addTrack(f.track),!i&&!this.el_.hasAttribute("crossorigin")&&WD(f.src)&&(i=!0)):c.push(f))}for(let f=0;f<c.length;f++)this.el_.removeChild(c[f])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&i&&sr.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),this.restoreMetadataTracksInIOSNativePlayer_(),(jw||ND)&&!0===e.nativeControlsForTouch&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Qt.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){!function(n){if(!n.featuresSourceset)return;const e=n.el();if(e.resetSourceset_)return;const t=(n=>L3([n.el(),fe().HTMLMediaElement.prototype,Z$],"src"))(n),r=e.setAttribute,i=e.load;Object.defineProperty(e,"src",ei(t,{set:s=>{const a=t.set.call(e,s);return n.triggerSourceset(e.src),a}})),e.setAttribute=(s,a)=>{const c=r.call(e,s,a);return/src/i.test(s)&&n.triggerSourceset(e.src),c},e.load=()=>{const s=i.call(e);return _P(n)||(n.triggerSourceset(""),F3(n)),s},e.currentSrc?n.triggerSourceset(e.currentSrc):_P(n)||F3(n),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=i,e.setAttribute=r,Object.defineProperty(e,"src",t),e.resetSourceWatch_&&e.resetSourceWatch_()}}(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const r=()=>{t=[];for(let s=0;s<e.length;s++){const a=e[s];"metadata"===a.kind&&t.push({track:a,storedMode:a.mode})}};r(),e.addEventListener("change",r),this.on("dispose",()=>e.removeEventListener("change",r));const i=()=>{for(let s=0;s<t.length;s++){const a=t[s];"disabled"===a.track.mode&&a.track.mode!==a.storedMode&&(a.track.mode=a.storedMode)}e.removeEventListener("change",i)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",r),e.removeEventListener("change",i),e.addEventListener("change",i)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",r),e.addEventListener("change",r),e.removeEventListener("change",i)})}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const r=e.toLowerCase();this[`${r}TracksListeners_`]&&Object.keys(this[`${r}TracksListeners_`]).forEach(i=>{this.el()[`${r}Tracks`].removeEventListener(i,this[`${r}TracksListeners_`][i])}),this[`featuresNative${e}Tracks`]=!t,this[`${r}TracksListeners_`]=null,this.proxyNativeTracksForType_(r)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=kl[e],r=this.el()[t.getterName],i=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!r||!r.addEventListener)return;const s={change:c=>{const f={type:"change",target:i,currentTarget:i,srcElement:i};i.trigger(f),"text"===e&&this[yb.remoteText.getterName]().trigger(f)},addtrack(c){i.addTrack(c.track)},removetrack(c){i.removeTrack(c.track)}},a=function(){const c=[];for(let f=0;f<i.length;f++){let y=!1;for(let b=0;b<r.length;b++)if(r[b]===i[f]){y=!0;break}y||c.push(i[f])}for(;c.length;)i.removeTrack(c.shift())};this[t.getterName+"Listeners_"]=s,Object.keys(s).forEach(c=>{const f=s[c];r.addEventListener(c,f),this.on("dispose",y=>r.removeEventListener(c,f))}),this.on("loadstart",a),this.on("dispose",c=>this.off("loadstart",a))}proxyNativeTracks_(){kl.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){const r=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(r,e),Qt.disposeMediaElement(e),e=r}else{e=Lt().createElement("video");const i=ei({},this.options_.tag&&ym(this.options_.tag));(!jw||!0!==this.options_.nativeControlsForTouch)&&delete i.controls,yF(e,Object.assign(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&hb(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let r=0;r<t.length;r++){const i=t[r],s=this.options_[i];void 0!==s&&(s?hb(e,i,i):UD(e,i),e[i]=s)}return e}handleLateInit_(e){if(0===e.networkState||3===e.networkState)return;if(0===e.readyState){let r=!1;const i=function(){r=!0};this.on("loadstart",i);const s=function(){r||this.trigger("loadstart")};return this.on("loadedmetadata",s),void this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",s),r||this.trigger("loadstart")})}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready(function(){t.forEach(function(r){this.trigger(r)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&LD?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){sr(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&ah&&uh&&0===this.el_.currentTime){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return"function"==typeof this.el_.webkitEnterFullScreen}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)dh(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(void 0===e)return this.el_.src;this.setSrc(e)}reset(){Qt.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,r):super.addTextTrack(e,t,r)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=Lt().createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const r=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(r),r}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let r=t.length;for(;r--;)(e===t[r]||e===t[r].track)&&this.el().removeChild(t[r])}}getVideoPlaybackQuality(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();const e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),fe().performance&&(e.creationTime=fe().performance.now()),e}}kD(Qt,"TEST_VID",function(){if(!cb())return;const n=Lt().createElement("video"),e=Lt().createElement("track");return e.kind="captions",e.srclang="en",e.label="English",n.appendChild(e),n}),Qt.isSupported=function(){try{Qt.TEST_VID.volume=.5}catch(n){return!1}return!(!Qt.TEST_VID||!Qt.TEST_VID.canPlayType)},Qt.canPlayType=function(n){return Qt.TEST_VID.canPlayType(n)},Qt.canPlaySource=function(n,e){return Qt.canPlayType(n.type)},Qt.canControlVolume=function(){try{const n=Qt.TEST_VID.volume;Qt.TEST_VID.volume=n/2+.1;const e=n!==Qt.TEST_VID.volume;return e&&ha?(fe().setTimeout(()=>{Qt&&Qt.prototype&&(Qt.prototype.featuresVolumeControl=n!==Qt.TEST_VID.volume)}),!1):e}catch(n){return!1}},Qt.canMuteVolume=function(){try{const n=Qt.TEST_VID.muted;return Qt.TEST_VID.muted=!n,Qt.TEST_VID.muted?hb(Qt.TEST_VID,"muted","muted"):UD(Qt.TEST_VID,"muted"),n!==Qt.TEST_VID.muted}catch(n){return!1}},Qt.canControlPlaybackRate=function(){if(ah&&uh&&MD<58)return!1;try{const n=Qt.TEST_VID.playbackRate;return Qt.TEST_VID.playbackRate=n/2+.1,n!==Qt.TEST_VID.playbackRate}catch(n){return!1}},Qt.canOverrideAttributes=function(){try{const n=()=>{};Object.defineProperty(Lt().createElement("video"),"src",{get:n,set:n}),Object.defineProperty(Lt().createElement("audio"),"src",{get:n,set:n}),Object.defineProperty(Lt().createElement("video"),"innerHTML",{get:n,set:n}),Object.defineProperty(Lt().createElement("audio"),"innerHTML",{get:n,set:n})}catch(n){return!1}return!0},Qt.supportsNativeTextTracks=function(){return LD||ha&&uh},Qt.supportsNativeVideoTracks=function(){return!(!Qt.TEST_VID||!Qt.TEST_VID.videoTracks)},Qt.supportsNativeAudioTracks=function(){return!(!Qt.TEST_VID||!Qt.TEST_VID.audioTracks)},Qt.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([n,e]){kD(Qt.prototype,n,()=>Qt[e](),!0)}),Qt.prototype.featuresVolumeControl=Qt.canControlVolume(),Qt.prototype.movingMediaElementInDOM=!ha,Qt.prototype.featuresFullscreenResize=!0,Qt.prototype.featuresProgressEvents=!0,Qt.prototype.featuresTimeupdateEvents=!0,Qt.prototype.featuresVideoFrameCallback=!(!Qt.TEST_VID||!Qt.TEST_VID.requestVideoFrameCallback),Qt.disposeMediaElement=function(n){if(n){for(n.parentNode&&n.parentNode.removeChild(n);n.hasChildNodes();)n.removeChild(n.firstChild);n.removeAttribute("src"),"function"==typeof n.load&&function(){try{n.load()}catch(e){}}()}},Qt.resetMediaElement=function(n){if(!n)return;const e=n.querySelectorAll("source");let t=e.length;for(;t--;)n.removeChild(e[t]);n.removeAttribute("src"),"function"==typeof n.load&&function(){try{n.load()}catch(r){}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(n){Qt.prototype[n]=function(){return this.el_[n]||this.el_.hasAttribute(n)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(n){Qt.prototype["set"+Hi(n)]=function(e){this.el_[n]=e,e?this.el_.setAttribute(n,n):this.el_.removeAttribute(n)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(n){Qt.prototype[n]=function(){return this.el_[n]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(n){Qt.prototype["set"+Hi(n)]=function(e){this.el_[n]=e}}),["pause","load","play"].forEach(function(n){Qt.prototype[n]=function(){return this.el_[n]()}}),jn.withSourceHandlers(Qt),Qt.nativeSourceHandler={},Qt.nativeSourceHandler.canPlayType=function(n){try{return Qt.TEST_VID.canPlayType(n)}catch(e){return""}},Qt.nativeSourceHandler.canHandleSource=function(n,e){if(n.type)return Qt.nativeSourceHandler.canPlayType(n.type);if(n.src){const t=WM(n.src);return Qt.nativeSourceHandler.canPlayType(`video/${t}`)}return""},Qt.nativeSourceHandler.handleSource=function(n,e,t){e.setSrc(n.src)},Qt.nativeSourceHandler.dispose=function(){},Qt.registerSourceHandler(Qt.nativeSourceHandler),jn.registerTech("Html5",Qt);const U3=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],yP={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},vP=["tiny","xsmall","small","medium","large","xlarge","huge"],JD={};vP.forEach(n=>{const e="x"===n.charAt(0)?`x-${n.substring(1)}`:n;JD[n]=`vjs-layout-${e}`});const X$={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class fi extends bt{constructor(e,t,r){if(e.id=e.id||t.id||`vjs_video_${lh()}`,(t=Object.assign(fi.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const a=e.closest("[lang]");a&&(t.language=a.getAttribute("lang"))}if(super(null,t,r),this.boundDocumentFullscreenChange_=a=>this.documentFullscreenChange_(a),this.boundFullWindowOnEscKey_=a=>this.fullWindowOnEscKey(a),this.boundUpdateStyleEl_=a=>this.updateStyleEl_(a),this.boundApplyInitTime_=a=>this.applyInitTime_(a),this.boundUpdateCurrentBreakpoint_=a=>this.updateCurrentBreakpoint_(a),this.boundHandleTechClick_=a=>this.handleTechClick_(a),this.boundHandleTechDoubleClick_=a=>this.handleTechDoubleClick_(a),this.boundHandleTechTouchStart_=a=>this.handleTechTouchStart_(a),this.boundHandleTechTouchMove_=a=>this.handleTechTouchMove_(a),this.boundHandleTechTouchEnd_=a=>this.handleTechTouchEnd_(a),this.boundHandleTechTap_=a=>this.handleTechTap_(a),this.isFullscreen_=!1,this.log=oF(this.id_),this.fsApi_=ID,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&ym(e),this.language(this.options_.language),t.languages){const a={};Object.getOwnPropertyNames(t.languages).forEach(function(c){a[c.toLowerCase()]=t.languages[c]}),this.languages_=a}else this.languages_=fi.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(a=>{if("function"!=typeof this[a])throw new Error(`plugin "${a}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),UM(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Su(Lt(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const i=ei(this.options_);if(t.plugins&&Object.keys(t.plugins).forEach(a=>{this[a](t.plugins[a])}),t.debug&&this.debug(!0),this.options_.playerOptions=i,this.middleware_=[],this.playbackRates(t.playbackRates),t.experimentalSvgIcons){const c=(new(fe().DOMParser)).parseFromString('<svg xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play">\n      <path d="M16 10v28l22-14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">\n      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">\n      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">\n      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">\n      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">\n      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">\n      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">\n      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">\n      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">\n      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">\n      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">\n      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">\n      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">\n      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">\n      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">\n      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">\n      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">\n      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">\n      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-share">\n      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">\n      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-square">\n      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">\n      <circle cx="24" cy="24" r="20"></circle>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">\n      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">\n      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">\n      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">\n      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">\n      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">\n      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">\n      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">\n      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">\n      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">\n      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">\n      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">\n      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">\n      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">\n      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">\n      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">\n      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>\n      <path fill="none" d="M-1-3h24v24H-1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">\n      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">\n      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-twitter">\n      <path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5T1369.5 1125 1185 1335.5t-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5T285 1033q33 5 61 5 43 0 85-11-112-23-185.5-111.5T172 710v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5T884 653q-8-38-8-74 0-134 94.5-228.5T1199 256q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">\n      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">\n      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>\n    </symbol>\n  </defs>\n</svg>',"image/svg+xml");if(c.querySelector("parsererror"))sr.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const y=c.documentElement;y.style.display="none",this.el_.appendChild(y),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio("audio"===e.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),jw&&this.addClass("vjs-touch-enabled"),ha||this.addClass("vjs-workinghover"),fi.players[this.id_]=this;const s="8.9.0".split(".")[0];this.addClass(`vjs-v${s}`),this.userActive(!0),this.reportUserActivity(),this.one("play",a=>this.listenForUserActivity_(a)),this.on("keydown",a=>this.handleKeyDown(a)),this.on("languagechange",a=>this.handleLanguagechange(a)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),Go(Lt(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Go(Lt(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),fi.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function v$(n){KM[n.id()]=null}(this),ga.names.forEach(e=>{const r=this[ga[e].getterName]();r&&r.off&&r.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let t,e=this.tag,r=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const i="video-js"===this.tag.tagName.toLowerCase();r?t=this.el_=e.parentNode:i||(t=this.el_=super.createEl("div"));const s=ym(e);if(i){for(t=this.el_=e,e=this.tag=Lt().createElement("video");t.children.length;)e.appendChild(t.firstChild);$w(t,"video-js")||wy(t,"video-js"),t.appendChild(e),r=this.playerElIngest_=t,Object.keys(t).forEach(c=>{try{e[c]=t[c]}catch(f){}})}if(e.setAttribute("tabindex","-1"),s.tabindex="-1",uh&&RD&&(e.setAttribute("role","application"),s.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(c){i&&"class"===c||t.setAttribute(c,s[c]),i&&e.setAttribute(c,s[c])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused"),!0!==fe().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=AF("vjs-styles-dimensions");const c=vm(".vjs-styles-defaults"),f=vm("head");f.insertBefore(this.styleEl_,c?c.nextSibling:f.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const a=e.getElementsByTagName("a");for(let c=0;c<a.length;c++){const f=a.item(c);wy(f,"vjs-hidden"),f.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!r&&e.parentNode.insertBefore(t,e),AM(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(e){if(void 0===e)return this.techGet_("crossOrigin");null===e||"anonymous"===e||"use-credentials"===e?(this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)):sr.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const r=e+"_";if(void 0===t)return this[r]||0;if(""===t||"auto"===t)return this[r]=void 0,void this.updateStyleEl_();const i=parseFloat(t);isNaN(i)?sr.error(`Improper value "${t}" supplied for for ${e}`):(this[r]=i,this.updateStyleEl_())}fluid(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,up(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),((n,e)=>{up(n)?e():(n.eventedCallbacks||(n.eventedCallbacks=[]),n.eventedCallbacks.push(e))})(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(!0===fe().VIDEOJS_NO_DYNAMIC_STYLE){const c="number"==typeof this.width_?this.width_:this.options_.width,f="number"==typeof this.height_?this.height_:this.options_.height,y=this.tech_&&this.tech_.el();return void(y&&(c>=0&&(y.width=c),f>=0&&(y.height=f)))}let e,t,r,i;r=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";const s=r.split(":"),a=s[1]/s[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/a:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*a,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),kF(this.styleEl_,`\n      .${i} {\n        width: ${e}px;\n        height: ${t}px;\n      }\n\n      .${i}.vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ${100*a}%;\n      }\n    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const r=Hi(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==r&&this.tag&&(jn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;let s=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(s=!1);const a={source:t,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${i}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};ga.names.forEach(f=>{const y=ga[f];a[y.getterName]=this[y.privateName]}),Object.assign(a,this.options_[r]),Object.assign(a,this.options_[i]),Object.assign(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);const c=jn.getTech(e);if(!c)throw new Error(`No Tech named '${r}' exists! '${r}' should be registered using videojs.registerTech()'`);this.tech_=new c(a),this.tech_.ready(ti(this,this.handleTechReady_),!0),function(n,e){n.forEach(function(t){const r=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(i=>r.addCue(i))}),e.textTracks()}(this.textTracksJson_||[],this.tech_),U3.forEach(f=>{this.on(this.tech_,f,y=>this[`handleTech${Hi(f)}_`](y))}),Object.keys(yP).forEach(f=>{this.on(this.tech_,f,y=>{0===this.tech_.playbackRate()&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${yP[f]}_`].bind(this),event:y}):this[`handleTech${yP[f]}_`](y)})}),this.on(this.tech_,"loadstart",f=>this.handleTechLoadStart_(f)),this.on(this.tech_,"sourceset",f=>this.handleTechSourceset_(f)),this.on(this.tech_,"waiting",f=>this.handleTechWaiting_(f)),this.on(this.tech_,"ended",f=>this.handleTechEnded_(f)),this.on(this.tech_,"seeking",f=>this.handleTechSeeking_(f)),this.on(this.tech_,"play",f=>this.handleTechPlay_(f)),this.on(this.tech_,"pause",f=>this.handleTechPause_(f)),this.on(this.tech_,"durationchange",f=>this.handleTechDurationChange_(f)),this.on(this.tech_,"fullscreenchange",(f,y)=>this.handleTechFullscreenChange_(f,y)),this.on(this.tech_,"fullscreenerror",(f,y)=>this.handleTechFullscreenError_(f,y)),this.on(this.tech_,"enterpictureinpicture",f=>this.handleTechEnterPictureInPicture_(f)),this.on(this.tech_,"leavepictureinpicture",f=>this.handleTechLeavePictureInPicture_(f)),this.on(this.tech_,"error",f=>this.handleTechError_(f)),this.on(this.tech_,"posterchange",f=>this.handleTechPosterChange_(f)),this.on(this.tech_,"textdata",f=>this.handleTechTextData_(f)),this.on(this.tech_,"ratechange",f=>this.handleTechRateChange_(f)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&("Html5"!==r||!this.tag)&&AM(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){ga.names.forEach(e=>{const t=ga[e];this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=function(n){const e=n.$$("track"),t=Array.prototype.map.call(e,i=>i.track);return Array.prototype.map.call(e,function(i){const s=jM(i.track);return i.src&&(s.src=i.src),s}).concat(Array.prototype.filter.call(n.textTracks(),function(i){return-1===t.indexOf(i)}).map(jM))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return void 0===e&&sr.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||"string"!=typeof e)return;const t=()=>{const i=this.muted();this.muted(!0);const s=()=>{this.muted(i)};this.playTerminatedQueue_.push(s);const a=this.play();if(Ww(a))return a.catch(c=>{throw s(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${c||""}`)})};let r;return"any"!==e||this.muted()?r="muted"!==e||this.muted()?this.play():t():(r=this.play(),Ww(r)&&(r=r.catch(t))),Ww(r)?r.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})}):void 0}updateSourceCaches_(e=""){let t=e,r="";"string"!=typeof t&&(t=e.src,r=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!r&&(r=((n,e)=>{if(!e)return"";if(n.cache_.source.src===e&&n.cache_.source.type)return n.cache_.source.type;const t=n.cache_.sources.filter(i=>i.src===e);if(t.length)return t[0].type;const r=n.$$("source");for(let i=0;i<r.length;i++){const s=r[i];if(s.type&&s.src&&s.src===e)return s.type}return ZD(e)})(this,t)),this.cache_.source=ei({},e,{src:t,type:r});const i=this.cache_.sources.filter(f=>f.src&&f.src===t),s=[],a=this.$$("source"),c=[];for(let f=0;f<a.length;f++){const y=ym(a[f]);s.push(y),y.src&&y.src===t&&c.push(y.src)}c.length&&!i.length?this.cache_.sources=s:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=s=>this.updateSourceCaches_(s);const r=this.currentSource().src,i=e.src;r&&!/^blob:/.test(r)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==r)&&(t=()=>{}),t(i),e.src||this.tech_.any(["sourceset","loadstart"],s=>{if("sourceset"===s.type)return;const a=this.techGet_("currentSrc");this.lastSource_.tech=a,this.updateSourceCaches_(a)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){!this.controls_||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.click||!1!==this.options_.userActions.click)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?dh(this.play()):this.pause())}handleTechDoubleClick_(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),r=>r.contains(e.target))||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.doubleClick||!1!==this.options_.userActions.doubleClick)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const r=this.el();let i=Lt()[this.fsApi_.fullscreenElement]===r;!i&&r.matches&&(i=r.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready(function(){if(e in _$)return function g$(n,e,t,r){return e[t](n.reduce(ZM(t),r))}(this.middleware_,this.tech_,e,t);if(e in QF)return YF(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(r){throw sr(r),r}},!0)}techGet_(e){if(this.tech_&&this.tech_.isReady_){if(e in m$)return function p$(n,e,t){return n.reduceRight(ZM(t),e[t]())}(this.middleware_,this.tech_,e);if(e in QF)return YF(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw void 0===this.tech_[e]?(sr(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t):"TypeError"===t.name?(sr(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t):(sr(t),t)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=dh){this.playCallbacks_.push(e);const t=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),r=Boolean(LD||ha);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t)return this.waitToPlay_=a=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!t&&r&&this.load());const i=this.techGet_("play");r&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===i?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(t){t()})}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(r){r(e)})}pause(){this.techCall_("pause")}paused(){return!1!==this.techGet_("paused")}played(){return this.techGet_("played")||Nc(0,0)}scrubbing(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){return void 0===e?(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime):(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),this.cache_.initTime=0,void(isFinite(e)&&(this.cache_.currentTime=Number(e)))):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_)))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=Nc(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=Nc(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return jF(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let r=e.end(e.length-1);return r>t&&(r=t),r}volume(e){let t;return void 0!==e?(t=Math.max(0,Math.min(1,e)),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)}muted(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)}defaultMuted(e){return void 0!==e&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(void 0!==e){const t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise((r,i)=>{function s(){t.off("fullscreenerror",c),t.off("fullscreenchange",a)}function a(){s(),r()}function c(y,b){s(),i(b)}t.one("fullscreenchange",a),t.one("fullscreenerror",c);const f=t.requestFullscreenHelper_(e);f&&(f.then(s,s),f.then(r,i))})}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){const r=this.el_[this.fsApi_.requestFullscreen](t);return r&&r.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),r}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((t,r)=>{function i(){e.off("fullscreenerror",a),e.off("fullscreenchange",s)}function s(){i(),t()}function a(f,y){i(),r(y)}e.one("fullscreenchange",s),e.one("fullscreenerror",a);const c=e.exitFullscreenHelper_();c&&(c.then(i,i),c.then(t,r))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=Lt()[this.fsApi_.exitFullscreen]();return e&&dh(e.then(()=>this.isFullscreen(!1))),e}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Lt().documentElement.style.overflow,Su(Lt(),"keydown",this.boundFullWindowOnEscKey_),Lt().documentElement.style.overflow="hidden",wy(Lt().body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){Un().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,Go(Lt(),"keydown",this.boundFullWindowOnEscKey_),Lt().documentElement.style.overflow=this.docOrigOverflow,FD(Lt().body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&fe().documentPictureInPicture){const e=Lt().createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(Gn("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),fe().documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(t=>(xF(t),this.el_.parentNode.insertBefore(e,this.el_),t.document.body.appendChild(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger("enterpictureinpicture"),t.addEventListener("pagehide",r=>{const i=r.target.querySelector(".video-js");e.parentNode.replaceChild(i,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),t))}return"pictureInPictureEnabled"in Lt()&&!1===this.disablePictureInPicture()?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){return fe().documentPictureInPicture&&fe().documentPictureInPicture.window?(fe().documentPictureInPicture.window.close(),Promise.resolve()):"pictureInPictureEnabled"in Lt()?Lt().exitPictureInPicture():void 0}handleKeyDown(e){const{userActions:t}=this.options_;!t||!t.hotkeys||(i=>{const s=i.tagName.toLowerCase();return!!i.isContentEditable||("input"===s?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(i.type):-1!==["textarea"].indexOf(s))})(this.el_.ownerDocument.activeElement)||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:r=(a=>Un().isEventKey(a,"f")),muteKey:i=(a=>Un().isEventKey(a,"m")),playPauseKey:s=(a=>Un().isEventKey(a,"k")||Un().isEventKey(a,"Space"))}=t;if(r.call(this,e)){e.preventDefault(),e.stopPropagation();const a=bt.getComponent("FullscreenToggle");!1!==Lt()[this.fsApi_.fullscreenEnabled]&&a.prototype.handleClick.call(this,e)}else i.call(this,e)?(e.preventDefault(),e.stopPropagation(),bt.getComponent("MuteToggle").prototype.handleClick.call(this,e)):s.call(this,e)&&(e.preventDefault(),e.stopPropagation(),bt.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let r=0,i=this.options_.techOrder;r<i.length;r++){const s=i[r];let a=jn.getTech(s);if(a||(a=bt.getComponent(s)),a){if(a.isSupported()&&(t=a.canPlayType(e),t))return t}else sr.error(`The "${s}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(e){const t=this.options_.techOrder.map(c=>[c,jn.getTech(c)]).filter(([c,f])=>f?f.isSupported():(sr.error(`The "${c}" tech is undefined. Skipped browser support check for that tech.`),!1)),r=function(c,f,y){let b;return c.some(D=>f.some(N=>{if(b=y(D,N),b)return!0})),b};let i;const a=([c,f],y)=>{if(f.canPlaySource(y,this.options_[c.toLowerCase()]))return{source:y,tech:c}};return i=this.options_.sourceOrder?r(e,t,(c=a,(f,y)=>c(y,f))):r(t,e,a),i||!1;var c}handleSrc_(e,t){if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const r=XF(e);if(r.length){if(this.changingSrc_=!0,t||(this.cache_.sources=r),this.updateSourceCaches_(r[0]),h$(this,r[0],(i,s)=>{if(this.middleware_=s,t||(this.cache_.sources=r),this.updateSourceCaches_(i),this.src_(i))return r.length>1?this.handleSrc_(r.slice(1)):(this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void this.triggerReady());!function f$(n,e){n.forEach(t=>t.setTech&&t.setTech(e))}(s,this.tech_)}),r.length>1){const i=()=>{this.error(null),this.handleSrc_(r.slice(1),!0)},s=()=>{this.off("error",i)};this.one("error",i),this.one("playing",s),this.resetRetryOnError_=()=>{this.off("error",i),this.off("playing",s)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return!t||(LF(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1))}load(){this.tech_&&this.tech_.vhs?this.src(this.currentSource()):this.techCall_("load")}reset(){this.paused()?this.doReset_():dh(this.play().then(()=>this.doReset_()))}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),up(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:t,progressControl:r,remainingTimeDisplay:i}=this.controlBar||{},{seekBar:s}=r||{};e&&e.updateContent(),t&&t.updateContent(),i&&i.updateContent(),s&&(s.update(),s.loadProgressBar&&s.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")}autoplay(e){if(void 0===e)return this.options_.autoplay||!1;let t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return void 0!==e&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")}poster(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(void 0===e)return!!this.controls_;this.controls_!==(e=!!e)&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(void 0===e)return!!this.usingNativeControls_;this.usingNativeControls_!==(e=!!e)&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(void 0===e)return this.error_||null;if(gm("beforeerror").forEach(t=>{const r=t(this,e);oh(r)&&!Array.isArray(r)||"string"==typeof r||"number"==typeof r||null===r?e=r:this.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&e&&4===e.code){const t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",function(){this.off(["click","touchstart"],t)})}if(null===e)return this.error_=null,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new pa(e),this.addClass("vjs-error"),sr.error(`(CODE:${this.error_.code} ${pa.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),gm("error").forEach(t=>t(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,r;const i=ti(this,this.reportUserActivity),c=function(D){i(),this.clearInterval(e)};this.on("mousedown",function(){i(),this.clearInterval(e),e=this.setInterval(i,250)}),this.on("mousemove",function(D){(D.screenX!==t||D.screenY!==r)&&(t=D.screenX,r=D.screenY,i())}),this.on("mouseup",c),this.on("mouseleave",c);const f=this.getChild("controlBar");let y;f&&!ha&&!ah&&(f.on("mouseenter",function(D){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),f.on("mouseleave",function(D){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",i),this.on("keyup",i),this.setInterval(function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(y);const D=this.options_.inactivityTimeout;D<=0||(y=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},D))},250)}playbackRate(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)}defaultPlaybackRate(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),r=t&&t.currentHeight();e.forEach(i=>{i!==t&&i.el_&&!i.hasClass("vjs-hidden")&&(i.hide(),this.audioOnlyCache_.hiddenChildren.push(i))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(r),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const t=[];return this.isInPictureInPicture()&&t.push(this.exitPictureInPicture()),this.isFullscreen()&&t.push(this.exitFullscreen()),this.audioPosterMode()&&t.push(this.audioPosterMode(!1)),Promise.all(t).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return"boolean"!=typeof e||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,r){if(this.tech_)return this.tech_.addTextTrack(e,t,r)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),up(this)&&this.trigger("languagechange"))}languages(){return ei(fi.prototype.options_.languages,this.languages_)}toJSON(){const e=ei(this.options_),t=e.tracks;e.tracks=[];for(let r=0;r<t.length;r++){let i=t[r];i=ei(i),i.player=void 0,e.tracks[r]=i}return e}createModal(e,t){(t=t||{}).content=e||"";const r=new mb(this,t);return this.addChild(r),r.on("dispose",()=>{this.removeChild(r)}),r.open(),r}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let r=0;r<vP.length;r++){const i=vP[r];if(t<=this.breakpoints_[i]){if(e===i)return;e&&this.removeClass(JD[e]),this.addClass(JD[i]),this.breakpoint_=i;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=Object.assign({},X$,e),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return JD[this.breakpoint_]||""}loadMedia(e,t){if(!e||"object"!=typeof e)return;const r=this.crossOrigin();this.reset(),this.cache_.media=ei(e);const{artist:i,artwork:s,description:a,poster:c,src:f,textTracks:y,title:b}=this.cache_.media;!s&&c&&(this.cache_.media.artwork=[{src:c,type:ZD(c)}]),r&&this.crossOrigin(r),f&&this.src(f),c&&this.poster(c),Array.isArray(y)&&y.forEach(D=>this.addRemoteTextTrack(D,!1)),this.titleBar&&this.titleBar.update({title:b,description:a||i||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),i={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),s=>({kind:s.kind,label:s.label,language:s.language,src:s.src}))};return e&&(i.poster=e,i.artwork=[{src:i.poster,type:ZD(i.poster)}]),i}return ei(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},r=ym(e),i=r["data-setup"];if($w(e,"vjs-fill")&&(r.fill=!0),$w(e,"vjs-fluid")&&(r.fluid=!0),null!==i){const[s,a]=zj()(i||"{}");s&&sr.error(s),Object.assign(r,a)}if(Object.assign(t,r),e.hasChildNodes()){const s=e.childNodes;for(let a=0,c=s.length;a<c;a++){const f=s[a],y=f.nodeName.toLowerCase();"source"===y?t.sources.push(ym(f)):"track"===y&&t.tracks.push(ym(f))}}return t}debug(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(void 0===e)return this.cache_.playbackRates;!Array.isArray(e)||!e.every(t=>"number"==typeof t)||(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}ga.names.forEach(function(n){const e=ga[n];fi.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}}),fi.prototype.crossorigin=fi.prototype.crossOrigin,fi.players={};const Jw=fe().navigator;fi.prototype.options_={techOrder:jn.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Jw&&(Jw.languages&&Jw.languages[0]||Jw.userLanguage||Jw.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,enableSmoothSeeking:!1},U3.forEach(function(n){fi.prototype[`handleTech${Hi(n)}_`]=function(){return this.trigger(n)}}),bt.registerComponent("Player",fi);const eI="plugin",Tb="activePlugins_",Eb={},tI=n=>Eb.hasOwnProperty(n),nI=n=>tI(n)?Eb[n]:void 0,B3=(n,e)=>{n[Tb]=n[Tb]||{},n[Tb][e]=!0},rI=(n,e,t)=>{const r=(t?"before":"")+"pluginsetup";n.trigger(r,e),n.trigger(r+":"+e.name,e)},V3=(n,e)=>(e.prototype.name=n,function(...t){rI(this,{name:n,plugin:e,instance:null},!0);const r=new e(...[this,...t]);return this[n]=()=>r,rI(this,r.getEventHash()),r});let bm=(()=>{class n{constructor(t){if(this.constructor===n)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),UM(this),delete this.trigger,NF(this,this.constructor.defaultState),B3(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(t={}){return t.name=this.name,t.plugin=this.constructor,t.instance=this,t}trigger(t,r={}){return gb(this.eventBusEl_,t,this.getEventHash(r))}handleStateChanged(t){}dispose(){const{name:t,player:r}=this;this.trigger("dispose"),this.off(),r.off("dispose",this.dispose),r[Tb][t]=!1,this.player=this.state=null,r[t]=V3(t,Eb[t])}static isBasic(t){const r="string"==typeof t?nI(t):t;return"function"==typeof r&&!n.prototype.isPrototypeOf(r.prototype)}static registerPlugin(t,r){if("string"!=typeof t)throw new Error(`Illegal plugin name, "${t}", must be a string, was ${typeof t}.`);if(tI(t))sr.warn(`A plugin named "${t}" already exists. You may want to avoid re-registering plugins!`);else if(fi.prototype.hasOwnProperty(t))throw new Error(`Illegal plugin name, "${t}", cannot share a name with an existing player method!`);if("function"!=typeof r)throw new Error(`Illegal plugin for "${t}", must be a function, was ${typeof r}.`);return Eb[t]=r,t!==eI&&(fi.prototype[t]=n.isBasic(r)?function(n,e){const t=function(){rI(this,{name:n,plugin:e,instance:null},!0);const r=e.apply(this,arguments);return B3(this,n),rI(this,{name:n,plugin:e,instance:r}),r};return Object.keys(e).forEach(function(r){t[r]=e[r]}),t}(t,r):V3(t,r)),r}static deregisterPlugin(t){if(t===eI)throw new Error("Cannot de-register base plugin.");tI(t)&&(delete Eb[t],delete fi.prototype[t])}static getPlugins(t=Object.keys(Eb)){let r;return t.forEach(i=>{const s=nI(i);s&&(r=r||{},r[i]=s)}),r}static getPluginVersion(t){const r=nI(t);return r&&r.VERSION||""}}return n.getPlugin=nI,n.BASE_PLUGIN_NAME=eI,n})();function Lc(n,e,t,r){return function eH(n,e){let t=!1;return function(...r){return t||sr.warn(n),t=!0,e.apply(this,r)}}(`${e} is deprecated and will be removed in ${n}.0; please use ${t} instead.`,r)}bm.registerPlugin(eI,bm),fi.prototype.usingPlugin=function(n){return!!this[Tb]&&!0===this[Tb][n]},fi.prototype.hasPlugin=function(n){return!!tI(n)};const j3=n=>0===n.indexOf("#")?n.slice(1):n;function ht(n,e,t){let r=ht.getPlayer(n);if(r)return e&&sr.warn(`Player "${n}" is already initialised. Options will not be applied.`),t&&r.ready(t),r;const i="string"==typeof n?vm("#"+j3(n)):n;if(!db(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");const a="getRootNode"in i&&i.getRootNode()instanceof fe().ShadowRoot?i.getRootNode():i.ownerDocument.body;(!i.ownerDocument.defaultView||!a.contains(i))&&sr.warn("The element supplied is not included in the DOM"),!0===(e=e||{}).restoreEl&&(e.restoreEl=(i.parentNode&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),gm("beforesetup").forEach(f=>{const y=f(i,ei(e));oh(y)&&!Array.isArray(y)?e=ei(e,y):sr.error("please return an object in beforesetup hooks")});const c=bt.getComponent("Player");return r=new c(i,e,t),gm("setup").forEach(f=>f(r)),r}if(ht.hooks_=ap,ht.hooks=gm,ht.hook=function(n,e){gm(n,e)},ht.hookOnce=function(n,e){gm(n,[].concat(e).map(t=>{const r=(...i)=>(iF(n,r),t(...i));return r}))},ht.removeHook=iF,!0!==fe().VIDEOJS_NO_DYNAMIC_STYLE&&cb()){let n=vm(".vjs-styles-defaults");if(!n){n=AF("vjs-styles-defaults");const e=vm("head");e&&e.insertBefore(n,e.firstChild),kF(n,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}PM(1,ht),ht.VERSION="8.9.0",ht.options=fi.prototype.options_,ht.getPlayers=()=>fi.players,ht.getPlayer=n=>{const e=fi.players;let t;if("string"==typeof n){const r=j3(n),i=e[r];if(i)return i;t=vm("#"+r)}else t=n;if(db(t)){const{player:r,playerId:i}=t;if(r||e[i])return r||e[i]}},ht.getAllPlayers=()=>Object.keys(fi.players).map(n=>fi.players[n]).filter(Boolean),ht.players=fi.players,ht.getComponent=bt.getComponent,ht.registerComponent=(n,e)=>(jn.isTech(e)&&sr.warn(`The ${n} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),bt.registerComponent.call(bt,n,e)),ht.getTech=jn.getTech,ht.registerTech=jn.registerTech,ht.use=function d$(n,e){xy[n]=xy[n]||[],xy[n].push(e)},Object.defineProperty(ht,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(ht.middleware,"TERMINATOR",{value:KD,writeable:!1,enumerable:!0}),ht.browser=H7,ht.obj=$7,ht.mergeOptions=Lc(9,"videojs.mergeOptions","videojs.obj.merge",ei),ht.defineLazyProperty=Lc(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",kD),ht.bind=Lc(9,"videojs.bind","native Function.prototype.bind",ti),ht.registerPlugin=bm.registerPlugin,ht.deregisterPlugin=bm.deregisterPlugin,ht.plugin=(n,e)=>(sr.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),bm.registerPlugin(n,e)),ht.getPlugins=bm.getPlugins,ht.getPlugin=bm.getPlugin,ht.getPluginVersion=bm.getPluginVersion,ht.addLanguage=function(n,e){return n=(""+n).toLowerCase(),(ht.options.languages=ei(ht.options.languages,{[n]:e}))[n]},ht.log=sr,ht.createLogger=oF,ht.time=n$,ht.createTimeRange=Lc(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Nc),ht.createTimeRanges=Lc(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Nc),ht.formatTime=Lc(9,"videojs.formatTime","videojs.time.formatTime",Sy),ht.setFormatTime=Lc(9,"videojs.setFormatTime","videojs.time.setFormatTime",BF),ht.resetFormatTime=Lc(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",VF),ht.parseUrl=Lc(9,"videojs.parseUrl","videojs.url.parseUrl",zM),ht.isCrossOrigin=Lc(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",WD),ht.EventTarget=Al,ht.any=NM,ht.on=Su,ht.one=HD,ht.off=Go,ht.trigger=gb,ht.xhr=kL(),ht.TextTrack=Kw,ht.AudioTrack=KF,ht.VideoTrack=ZF,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(n=>{ht[n]=function(){return sr.warn(`videojs.${n}() is deprecated; use videojs.dom.${n}() instead`),DF[n].apply(null,arguments)}}),ht.computedStyle=Lc(9,"videojs.computedStyle","videojs.dom.computedStyle",pb),ht.dom=DF,ht.fn=Y7,ht.num=M$,ht.str=e$,ht.url=l$;class tH{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get:()=>t.enabled_(),set(r){t.enabled_(r)}}),t}}class iI extends ht.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get:()=>e.selectedIndex_}),Object.defineProperty(e,"length",{get:()=>e.levels_.length}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const r=this.levels_.length;return t=new tH(e),""+r in this||Object.defineProperty(this,r,{get(){return this.levels_[r]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let r=0,i=this.length;r<i;r++)if(this[r]===e){t=this.levels_.splice(r,1)[0],this.selectedIndex_===r?this.selectedIndex_=-1:this.selectedIndex_>r&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,r=this.length;t<r;t++){const i=this[t];if(i.id===e)return i}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}iI.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const n in iI.prototype.allowedEvents_)iI.prototype["on"+n]=null;const H3=function(n){return function(n,e){const t=n.qualityLevels,r=new iI,i=function(){r.dispose(),n.qualityLevels=t,n.off("dispose",i)};return n.on("dispose",i),n.qualityLevels=()=>r,n.qualityLevels.VERSION="4.0.0",r}(this,ht.obj.merge({},n))};ht.registerPlugin("qualityLevels",H3),H3.VERSION="4.0.0";const Ua=wD,sI=(n,e)=>e&&e.responseURL&&n!==e.responseURL?e.responseURL:n,Pl=n=>ht.log.debug?ht.log.debug.bind(ht,"VHS:",`${n} >`):function(){};function Dr(...n){const e=ht.obj||ht;return(e.merge||e.mergeOptions).apply(e,n)}function zo(...n){const e=ht.time||ht;return(e.createTimeRanges||e.createTimeRanges).apply(e,n)}const hh=1/30,fh=.1,q3=function(n,e){const t=[];let r;if(n&&n.length)for(r=0;r<n.length;r++)e(n.start(r),n.end(r))&&t.push([n.start(r),n.end(r)]);return zo(t)},wb=function(n,e){return q3(n,function(t,r){return t-fh<=e&&r+fh>=e})},oI=function(n,e){return q3(n,function(t){return t-hh>=e})},G3=n=>{const e=[];if(!n||!n.length)return"";for(let t=0;t<n.length;t++)e.push(n.start(t)+" => "+n.end(t));return e.join(", ")},Ay=n=>{const e=[];for(let t=0;t<n.length;t++)e.push({start:n.start(t),end:n.end(t)});return e},z3=function(n){if(n&&n.length&&n.end)return n.end(n.length-1)},bP=function(n,e){let t=0;if(!n||!n.length)return t;for(let r=0;r<n.length;r++){const i=n.start(r),s=n.end(r);if(!(e>s)){if(e>i&&e<=s){t+=s-e;continue}t+=s-i}}return t},TP=(n,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(r){t+=r.duration}),(e.preloadHints||[]).forEach(function(r){"PART"===r.type&&(t+=n.partTargetDuration)}),t},EP=n=>(n.segments||[]).reduce((e,t,r)=>(t.parts?t.parts.forEach(function(i,s){e.push({duration:i.duration,segmentIndex:r,partIndex:s,part:i,segment:t})}):e.push({duration:t.duration,segmentIndex:r,partIndex:null,segment:t,part:null}),e),[]),W3=n=>{const e=n.segments&&n.segments.length&&n.segments[n.segments.length-1];return e&&e.parts||[]},K3=({preloadSegment:n})=>{if(!n)return;const{parts:e,preloadHints:t}=n;let r=(t||[]).reduce((i,s)=>i+("PART"===s.type?1:0),0);return r+=e&&e.length?e.length:0,r},Z3=(n,e)=>{if(e.endList)return 0;if(n&&n.suggestedPresentationDelay)return n.suggestedPresentationDelay;const t=W3(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?3*e.partTargetDuration:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?3*e.targetDuration:0},Y3=function(n,e,t){if(void 0===e&&(e=n.mediaSequence+n.segments.length),e<n.mediaSequence)return 0;const r=function(n,e){let t=0,r=e-n.mediaSequence,i=n.segments[r];if(i){if(void 0!==i.start)return{result:i.start,precise:!0};if(void 0!==i.end)return{result:i.end-i.duration,precise:!0}}for(;r--;){if(i=n.segments[r],void 0!==i.end)return{result:t+i.end,precise:!0};if(t+=TP(n,i),void 0!==i.start)return{result:t+i.start,precise:!0}}return{result:t,precise:!1}}(n,e);if(r.precise)return r.result;const i=function(n,e){let r,t=0,i=e-n.mediaSequence;for(;i<n.segments.length;i++){if(r=n.segments[i],void 0!==r.start)return{result:r.start-t,precise:!0};if(t+=TP(n,r),void 0!==r.end)return{result:r.end-t,precise:!0}}return{result:-1,precise:!1}}(n,e);return i.precise?i.result:r.result+t},Q3=function(n,e,t){if(!n)return 0;if("number"!=typeof t&&(t=0),void 0===e){if(n.totalDuration)return n.totalDuration;if(!n.endList)return fe()[1/0]}return Y3(n,e,t)},eC=function({defaultDuration:n,durationList:e,startIndex:t,endIndex:r}){let i=0;if(t>r&&([t,r]=[r,t]),t<0){for(let s=t;s<Math.min(0,r);s++)i+=n;t=0}for(let s=t;s<r;s++)i+=e[s].duration;return i},X3=function(n,e,t,r){if(!n||!n.segments)return null;if(n.endList)return Q3(n);if(null===e)return null;let i=Y3(n,n.mediaSequence+n.segments.length,e=e||0);return t&&(i-=r="number"==typeof r?r:Z3(null,n)),Math.max(0,i)},J3=function(n){return n.excludeUntil&&n.excludeUntil>Date.now()},wP=function(n){return n.excludeUntil&&n.excludeUntil===1/0},aI=function(n){const e=J3(n);return!n.disabled&&!e},eU=function(n,e){return e.attributes&&e.attributes[n]},CP=(n,e)=>{if(1===n.playlists.length)return!0;const t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===n.playlists.filter(r=>!!aI(r)&&(r.attributes.BANDWIDTH||0)<t).length},SP=(n,e)=>!(!n&&!e||!n&&e||n&&!e||!(n===e||n.id&&e.id&&n.id===e.id||n.resolvedUri&&e.resolvedUri&&n.resolvedUri===e.resolvedUri||n.uri&&e.uri&&n.uri===e.uri)),tU=function(n,e){const t=n&&n.mediaGroups&&n.mediaGroups.AUDIO||{};let r=!1;for(const i in t){for(const s in t[i])if(r=e(t[i][s]),r)break;if(r)break}return!!r},tC=n=>{if(!n||!n.playlists||!n.playlists.length)return tU(n,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<n.playlists.length;e++){const t=n.playlists[e],r=t.attributes&&t.attributes.CODECS;if(!(r&&r.split(",").every(s=>NL(s))||tU(n,s=>SP(t,s))))return!1}return!0};var Ba={liveEdgeDelay:Z3,duration:Q3,seekable:function(n,e,t){const i=e||0;let s=X3(n,e,!0,t);return null===s?zo():(s<i&&(s=i),zo(i,s))},getMediaInfoForTime:function({playlist:n,currentTime:e,startingSegmentIndex:t,startingPartIndex:r,startTime:i,exactManifestTimings:s}){let a=e-i;const c=EP(n);let f=0;for(let y=0;y<c.length;y++){const b=c[y];if(t===b.segmentIndex&&("number"!=typeof r||"number"!=typeof b.partIndex||r===b.partIndex)){f=y;break}}if(a<0){if(f>0)for(let y=f-1;y>=0;y--){const b=c[y];if(a+=b.duration,s){if(a<0)continue}else if(a+hh<=0)continue;return{partIndex:b.partIndex,segmentIndex:b.segmentIndex,startTime:i-eC({defaultDuration:n.targetDuration,durationList:c,startIndex:f,endIndex:y})}}return{partIndex:c[0]&&c[0].partIndex||null,segmentIndex:c[0]&&c[0].segmentIndex||0,startTime:e}}if(f<0){for(let y=f;y<0;y++)if(a-=n.targetDuration,a<0)return{partIndex:c[0]&&c[0].partIndex||null,segmentIndex:c[0]&&c[0].segmentIndex||0,startTime:e};f=0}for(let y=f;y<c.length;y++){const b=c[y];a-=b.duration;const B=b.duration>hh&&a+hh>=0;if(0!==a&&!B||y===c.length-1){if(s){if(a>0)continue}else if(a-hh>=0)continue;return{partIndex:b.partIndex,segmentIndex:b.segmentIndex,startTime:i+eC({defaultDuration:n.targetDuration,durationList:c,startIndex:f,endIndex:y})}}}return{segmentIndex:c[c.length-1].segmentIndex,partIndex:c[c.length-1].partIndex,startTime:e}},isEnabled:aI,isDisabled:function(n){return n.disabled},isExcluded:J3,isIncompatible:wP,playlistEnd:X3,isAes:function(n){for(let e=0;e<n.segments.length;e++)if(n.segments[e].key)return!0;return!1},hasAttribute:eU,estimateSegmentRequestTime:function(n,e,t,r=0){return eU("BANDWIDTH",t)?(n*t.attributes.BANDWIDTH-8*r)/e:NaN},isLowestEnabledRendition:CP,isAudioOnly:tC,playlistMatch:SP,segmentDurationWithParts:TP};const{log:nU}=ht,Cb=(n,e)=>`${n}-${e}`,rU=(n,e,t)=>`placeholder-uri-${n}-${e}-${t}`,Sb=(n,e)=>{!n.mediaGroups||["AUDIO","SUBTITLES"].forEach(t=>{if(n.mediaGroups[t])for(const r in n.mediaGroups[t])for(const i in n.mediaGroups[t][r])e(n.mediaGroups[t][r][i],t,r,i)})},iU=({playlist:n,uri:e,id:t})=>{n.id=t,n.playlistErrors_=0,e&&(n.uri=e),n.attributes=n.attributes||{}},sU=(n,e,t=rU)=>{n.uri=e;for(let i=0;i<n.playlists.length;i++)n.playlists[i].uri||(n.playlists[i].uri=`placeholder-uri-${i}`);const r=tC(n);Sb(n,(i,s,a,c)=>{if(!i.playlists||!i.playlists.length){if(r&&"AUDIO"===s&&!i.uri)for(let f=0;f<n.playlists.length;f++){const y=n.playlists[f];if(y.attributes&&y.attributes.AUDIO&&y.attributes.AUDIO===a)return}i.playlists=[Oc({},i)]}i.playlists.forEach(function(f,y){const b=t(s,a,c,f),D=Cb(y,b);f.uri?f.resolvedUri=f.resolvedUri||Ua(n.uri,f.uri):(f.uri=0===y?b:D,f.resolvedUri=f.uri),f.id=f.id||D,f.attributes=f.attributes||{},n.playlists[f.id]=f,n.playlists[f.uri]=f})}),(n=>{let e=n.playlists.length;for(;e--;){const t=n.playlists[e];iU({playlist:t,id:Cb(e,t.uri)}),t.resolvedUri=Ua(n.uri,t.uri),n.playlists[t.id]=t,n.playlists[t.uri]=t,t.attributes.BANDWIDTH||nU.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}})(n),(n=>{Sb(n,e=>{e.uri&&(e.resolvedUri=Ua(n.uri,e.uri))})})(n)};class oU{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(null!==this.offset_||!e.length)return;const[t]=e;void 0!==t.programDateTime&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[t]=e,r=t.startDate.getTime();this.trimProcessedDateRanges_(r),this.pendingDateRanges_=e.reduce((i,s)=>(i.set(s.id,s),i),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(null===this.offset_)return[];const e={},t=[];this.pendingDateRanges_.forEach((r,i)=>{if(!this.processedDateRanges_.has(i)&&(r.startTime=r.startDate.getTime()/1e3-this.offset_,r.processDateRange=()=>this.processDateRange(r),t.push(r),r.class))if(e[r.class]){const s=e[r.class].push(r);r.classListIndex=s-1}else e[r.class]=[r],r.classListIndex=0});for(const r of t){const i=e[r.class]||[];r.endTime=r.endDate?r.endDate.getTime()/1e3-this.offset_:r.endOnNext&&i[r.classListIndex+1]?i[r.classListIndex+1].startTime:r.duration?r.startTime+r.duration:r.plannedDuration?r.startTime+r.plannedDuration:r.startTime}return t}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((r,i)=>{r.startDate.getTime()<e&&this.processedDateRanges_.delete(i)})}}const{EventTarget:yH}=ht,bH=(n,e)=>{if(!n)return e;const t=Dr(n,e);if(n.preloadHints&&!e.preloadHints&&delete t.preloadHints,n.parts&&!e.parts)delete t.parts;else if(n.parts&&e.parts)for(let r=0;r<e.parts.length;r++)n.parts&&n.parts[r]&&(t.parts[r]=Dr(n.parts[r],e.parts[r]));return!n.skipped&&e.skipped&&(t.skipped=!1),n.preload&&!e.preload&&(t.preload=!1),t},aU=(n,e)=>{!n.resolvedUri&&n.uri&&(n.resolvedUri=Ua(e,n.uri)),n.key&&!n.key.resolvedUri&&(n.key.resolvedUri=Ua(e,n.key.uri)),n.map&&!n.map.resolvedUri&&(n.map.resolvedUri=Ua(e,n.map.uri)),n.map&&n.map.key&&!n.map.key.resolvedUri&&(n.map.key.resolvedUri=Ua(e,n.map.key.uri)),n.parts&&n.parts.length&&n.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=Ua(e,t.uri))}),n.preloadHints&&n.preloadHints.length&&n.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=Ua(e,t.uri))})},uU=function(n){const e=n.segments||[],t=n.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints)for(let r=0;r<t.preloadHints.length;r++)if("MAP"===t.preloadHints[r].type)return e;t.duration=n.targetDuration,t.preload=!0,e.push(t)}return e},lU=(n,e)=>n===e||n.segments&&e.segments&&n.segments.length===e.segments.length&&n.endList===e.endList&&n.mediaSequence===e.mediaSequence&&n.preloadSegment===e.preloadSegment,xP=(n,e,t=lU)=>{const r=Dr(n,{}),i=r.playlists[e.id];if(!i||t(i,e))return null;e.segments=uU(e);const s=Dr(i,e);if(s.preloadSegment&&!e.preloadSegment&&delete s.preloadSegment,i.segments){if(e.skip){e.segments=e.segments||[];for(let a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}s.segments=((n,e,t)=>{const r=n.slice(),i=e.slice();t=t||0;const s=[];let a;for(let c=0;c<i.length;c++){const f=r[c+t],y=i[c];f?(a=f.map||a,s.push(bH(f,y))):(a&&!y.map&&(y.map=a),s.push(y))}return s})(i.segments,e.segments,e.mediaSequence-i.mediaSequence)}s.segments.forEach(a=>{aU(a,s.resolvedUri)});for(let a=0;a<r.playlists.length;a++)r.playlists[a].id===e.id&&(r.playlists[a]=s);return r.playlists[e.id]=s,r.playlists[e.uri]=s,Sb(n,(a,c,f,y)=>{if(a.playlists)for(let b=0;b<a.playlists.length;b++)e.id===a.playlists[b].id&&(a.playlists[b]=s)}),r},DP=(n,e)=>{const t=n.segments||[],r=t[t.length-1],i=r&&r.parts&&r.parts[r.parts.length-1],s=i&&i.duration||r&&r.duration;return e&&s?1e3*s:500*(n.partTargetDuration||n.targetDuration||10)};class xb extends yH{constructor(e,t,r={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=Pl("PlaylistLoader");const{withCredentials:i=!1}=r;this.src=e,this.vhs_=t,this.withCredentials=i,this.addDateRangesToTextTrack_=r.addDateRangesToTextTrack;const s=t.options_;this.customTagParsers=s&&s.customTagParsers||[],this.customTagMappers=s&&s.customTagMappers||[],this.llhls=s&&s.llhls,this.dateRangesStorage_=new oU,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const t=this.dateRangesStorage_.getDateRangesToProcess();!t.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if("HAVE_METADATA"!==this.state)return;const e=this.media();let t=Ua(this.main.uri,e.uri);this.llhls&&(t=((n,e)=>{if(e.endList||!e.serverControl)return n;const t={};if(e.serverControl.canBlockReload){const{preloadSegment:r}=e;let i=e.mediaSequence+e.segments.length;if(r){const s=r.parts||[],a=K3(e)-1;a>-1&&a!==s.length-1&&(t._HLS_part=a),(a>-1||s.length)&&i--}t._HLS_msn=i}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){const r=new(fe().URL)(n);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(i){!t.hasOwnProperty(i)||r.searchParams.set(i,t[i])}),n=r.toString()}return n})(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials},(r,i)=>{if(this.request){if(r)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,r){const{uri:i,id:s}=t;this.request=null,r&&(this.state=r),this.error={playlist:this.main.playlists[s],status:e.status,message:`HLS playlist request error at URL: ${i}.`,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}parseManifest_({url:e,manifestString:t}){return(({onwarn:n,oninfo:e,manifestString:t,customTagParsers:r=[],customTagMappers:i=[],llhls:s})=>{const a=new i9;n&&a.on("warn",n),e&&a.on("info",e),r.forEach(y=>a.addParser(y)),i.forEach(y=>a.addTagMapper(y)),a.push(t),a.end();const c=a.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(y){c.hasOwnProperty(y)&&delete c[y]}),c.segments&&c.segments.forEach(function(y){["parts","preloadHints"].forEach(function(b){y.hasOwnProperty(b)&&delete y[b]})})),!c.targetDuration){let y=10;c.segments&&c.segments.length&&(y=c.segments.reduce((b,D)=>Math.max(b,D.duration),0)),n&&n({message:`manifest has no targetDuration defaulting to ${y}`}),c.targetDuration=y}const f=W3(c);if(f.length&&!c.partTargetDuration){const y=f.reduce((b,D)=>Math.max(b,D.duration),0);n&&(n({message:`manifest has no partTargetDuration defaulting to ${y}`}),nU.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),c.partTargetDuration=y}return c})({onwarn:({message:r})=>this.logger_(`m3u8-parser warn for ${e}: ${r}`),oninfo:({message:r})=>this.logger_(`m3u8-parser info for ${e}: ${r}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:e,playlistObject:t,url:r,id:i}){this.request=null,this.state="HAVE_METADATA";const s=t||this.parseManifest_({url:r,manifestString:e});s.lastRequest=Date.now(),iU({playlist:s,uri:r,id:i});const a=xP(this.main,s);this.targetDuration=s.partTargetDuration||s.targetDuration,this.pendingMedia_=null,a?(this.main=a,this.media_=this.main.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(DP(this.media(),!!a)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),fe().clearTimeout(this.mediaUpdateTimeout),fe().clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new oU,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(fe().clearTimeout(this.finalRenditionTimeout),t){const a=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=fe().setTimeout(this.media.bind(this,e,!1),a))}const r=this.state,i=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(i&&(this.trigger("mediachanging"),this.trigger("HAVE_MAIN_MANIFEST"===r?"loadedmetadata":"mediachange")));if(this.updateMediaUpdateTimeout_(DP(e,!0)),i){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(a,c)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=sI(e.resolvedUri,c),a)return this.playlistRequestError(this.request,e,r);this.haveMetadata({playlistString:c.responseText,url:e.uri,id:e.id}),this.trigger("HAVE_MAIN_MANIFEST"===r?"loadedmetadata":"mediachange")}})}}pause(){this.mediaUpdateTimeout&&(fe().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(fe().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const r=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=fe().setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},r)}else this.started?this.trigger(t&&!t.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(fe().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=fe().setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=fe().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(e,t)=>{if(!this.request)return;if(this.request=null,e)return this.error={status:t.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:t.responseText,code:2},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.src=sI(this.src,t);const r=this.parseManifest_({manifestString:t.responseText,url:this.src});this.setupInitialPlaylist(r)})}srcUri(){return"string"==typeof this.src?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists)return this.main=e,sU(this.main,this.srcUri()),e.playlists.forEach(r=>{r.segments=uU(r),r.segments.forEach(i=>{aU(i,r.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.main.playlists[0]));const t=this.srcUri()||fe().location.href;this.main=((n,e)=>{const t=Cb(0,e),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:fe().location.href,resolvedUri:fe().location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return r.playlists[t]=r.playlists[0],r.playlists[e]=r.playlists[0],r})(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,t){const r=this.main,i=e.ID;let s=r.playlists.length;for(;s--;){const a=r.playlists[s];if(a.attributes["PATHWAY-ID"]===i){const c=a.resolvedUri,f=a.id;if(t){const y=this.createCloneURI_(a.resolvedUri,e),b=Cb(i,y),D=this.createCloneAttributes_(i,a.attributes),N=this.createClonePlaylist_(a,b,e,D);r.playlists[s]=N,r.playlists[b]=N,r.playlists[y]=N}else r.playlists.splice(s,1);delete r.playlists[f],delete r.playlists[c]}}this.updateOrDeleteCloneMedia(e,t)}updateOrDeleteCloneMedia(e,t){const r=this.main,i=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(r.mediaGroups[s]&&r.mediaGroups[s][i])for(const a in r.mediaGroups[s])if(a===i){for(const c in r.mediaGroups[s][a])r.mediaGroups[s][a][c].playlists.forEach((y,b)=>{const D=r.playlists[y.id],B=D.resolvedUri;delete r.playlists[D.id],delete r.playlists[B]});delete r.mediaGroups[s][a]}}),t&&this.createClonedMediaGroups_(e)}addClonePathway(e,t={}){const r=this.main,i=r.playlists.length,s=this.createCloneURI_(t.resolvedUri,e),a=Cb(e.ID,s),c=this.createCloneAttributes_(e.ID,t.attributes),f=this.createClonePlaylist_(t,a,e,c);r.playlists[i]=f,r.playlists[a]=f,r.playlists[s]=f,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const t=e.ID,r=e["BASE-ID"],i=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(i.mediaGroups[s]&&!i.mediaGroups[s][t])for(const a in i.mediaGroups[s])if(a===r){i.mediaGroups[s][t]={};for(const c in i.mediaGroups[s][a]){const f=i.mediaGroups[s][a][c];i.mediaGroups[s][t][c]=Oc({},f);const y=i.mediaGroups[s][t][c],b=this.createCloneURI_(f.resolvedUri,e);y.resolvedUri=b,y.uri=b,y.playlists=[],f.playlists.forEach((D,N)=>{const B=i.playlists[D.id],U=rU(s,t,c),K=Cb(t,U);if(B&&!i.playlists[K]){const ie=this.createClonePlaylist_(B,K,e),Ae=ie.resolvedUri;i.playlists[K]=ie,i.playlists[Ae]=ie}y.playlists[N]=this.createClonePlaylist_(D,K,e)})}}})}createClonePlaylist_(e,t,r,i){const s=this.createCloneURI_(e.resolvedUri,r),a={resolvedUri:s,uri:s,id:t};return e.segments&&(a.segments=[]),i&&(a.attributes=i),Dr(e,a)}createCloneURI_(e,t){const r=new URL(e);r.hostname=t["URI-REPLACEMENT"].HOST;const i=t["URI-REPLACEMENT"].PARAMS;for(const s of Object.keys(i))r.searchParams.set(s,i[s]);return r.href}createCloneAttributes_(e,t){const r={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(i=>{t[i]&&(r[i]=e)}),r}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const r in e.contentProtection){const i=e.contentProtection[r].attributes.keyId;i&&t.add(i.toLowerCase())}return t}}}const{xhr:EH}=ht,IP=function(n,e,t,r){const i="arraybuffer"===n.responseType?n.response:n.responseText;!e&&i&&(n.responseTime=Date.now(),n.roundTripTime=n.responseTime-n.requestTime,n.bytesReceived=i.byteLength||i.length,n.bandwidth||(n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3))),t.headers&&(n.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(n.timedout=!0),!e&&!n.aborted&&200!==t.statusCode&&206!==t.statusCode&&0!==t.statusCode&&(e=new Error("XHR Failed with a response of: "+(n&&(i||n.responseText)))),r(e,n)},cU=function(){const n=function e(t,r){t=Dr({timeout:45e3},t);const i=e.beforeRequest||ht.Vhs.xhr.beforeRequest,s=e._requestCallbackSet||ht.Vhs.xhr._requestCallbackSet||new Set,a=e._responseCallbackSet||ht.Vhs.xhr._responseCallbackSet;i&&"function"==typeof i&&(ht.log.warn("beforeRequest is deprecated, use onRequest instead."),s.add(i));const c=!0===ht.Vhs.xhr.original?EH:ht.Vhs.xhr,f=((n,e)=>{if(!n||!n.size)return;let t=e;return n.forEach(r=>{t=r(t)}),t})(s,t);s.delete(i);const y=c(f||t,function(D,N){return((n,e,t,r)=>{!n||!n.size||n.forEach(i=>{i(e,t,r)})})(a,y,D,N),IP(y,D,N,r)}),b=y.abort;return y.abort=function(){return y.aborted=!0,b.apply(y,arguments)},y.uri=t.uri,y.requestTime=Date.now(),y};return n.original=!0,n},AP=function(n){const e={};return n.byterange&&(e.Range=function(n){let e;const t=n.offset;return e="bigint"==typeof n.offset||"bigint"==typeof n.length?fe().BigInt(n.offset)+fe().BigInt(n.length)-fe().BigInt(1):n.offset+n.length-1,"bytes="+t+"-"+e}(n.byterange)),e},xH=function(n,e){return n.start(e)+"-"+n.end(e)},DH=function(n,e){const t=n.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},IH=function(n){return n>=32&&n<126?String.fromCharCode(n):"."},dU=function(n){const e={};return Object.keys(n).forEach(t=>{const r=n[t];e[t]=BL(r)?{bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:r}),e},uI=function(n){const e=n.byterange||{length:1/0,offset:0};return[e.length,e.offset,n.resolvedUri].join(",")},hU=function(n){return n.resolvedUri},fU=n=>{const e=Array.prototype.slice.call(n),t=16;let i,s,r="";for(let a=0;a<e.length/t;a++)i=e.slice(a*t,a*t+t).map(DH).join(""),s=e.slice(a*t,a*t+t).map(IH).join(""),r+=i+" "+s+"\n";return r};var AH=Object.freeze({__proto__:null,createTransferableMessage:dU,initSegmentId:uI,segmentKeyId:hU,hexDump:fU,tagDump:({bytes:n})=>fU(n),textRanges:n=>{let t,e="";for(t=0;t<n.length;t++)e+=xH(n,t)+" ";return e}});const gU=({programTime:n,playlist:e,retryCount:t=2,seekTo:r,pauseAfterSeek:i=!0,tech:s,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(void 0===n||!e||!r)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!s.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!(n=>{if(!n.segments||0===n.segments.length)return!1;for(let e=0;e<n.segments.length;e++)if(!n.segments[e].dateTimeObject)return!1;return!0})(e))return a({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const c=((n,e)=>{let t;try{t=new Date(n)}catch(f){return null}if(!e||!e.segments||0===e.segments.length)return null;let r=e.segments[0];if(t<new Date(r.dateTimeObject))return null;for(let f=0;f<e.segments.length-1&&(r=e.segments[f],!(t<new Date(e.segments[f+1].dateTimeObject)));f++);const i=e.segments[e.segments.length-1],s=i.dateTimeObject,a=i.videoTimingInfo?(n=>n.transmuxedPresentationEnd-n.transmuxedPresentationStart-n.transmuxerPrependedSeconds)(i.videoTimingInfo):i.duration+.25*i.duration;return t>new Date(s.getTime()+1e3*a)?null:(t>new Date(s)&&(r=i),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:Ba.duration(e,e.mediaSequence+e.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})})(n,e);if(!c)return a({message:`${n} was not found in the stream`});const f=c.segment,y=((n,e)=>{let t,r;try{t=new Date(n),r=new Date(e)}catch(a){}const i=t.getTime();return(r.getTime()-i)/1e3})(f.dateTimeObject,n);if("estimate"===c.type)return 0===t?a({message:`${n} is not buffered yet. Try again`}):(r(c.estimatedStart+y),void s.one("seeked",()=>{gU({programTime:n,playlist:e,retryCount:t-1,seekTo:r,pauseAfterSeek:i,tech:s,callback:a})}));const b=f.start+y;s.one("seeked",()=>a(null,s.currentTime())),i&&s.pause(),r(b)},kP=(n,e)=>{if(4===n.readyState)return e()},{EventTarget:UH}=ht,mU=function(n,e){if(!lU(n,e)||n.sidx&&e.sidx&&(n.sidx.offset!==e.sidx.offset||n.sidx.length!==e.sidx.length))return!1;if(!n.sidx&&e.sidx||n.sidx&&!e.sidx||n.segments&&!e.segments||!n.segments&&e.segments)return!1;if(!n.segments&&!e.segments)return!0;for(let t=0;t<n.segments.length;t++){const r=n.segments[t],i=e.segments[t];if(r.uri!==i.uri)return!1;if(!r.byterange&&!i.byterange)continue;const s=r.byterange,a=i.byterange;if(s&&!a||!s&&a||s.offset!==a.offset||s.length!==a.length)return!1}return!0},BH=(n,e,t,r)=>`placeholder-uri-${n}-${e}-${r.attributes.NAME||t}`,HH=(n,e)=>(Boolean(!n.map&&!e.map)||Boolean(n.map&&e.map&&n.map.byterange.offset===e.map.byterange.offset&&n.map.byterange.length===e.map.byterange.length))&&n.uri===e.uri&&n.byterange.offset===e.byterange.offset&&n.byterange.length===e.byterange.length,_U=(n,e)=>{const t={};for(const r in n){const s=n[r].sidx;if(s){const a=SD(s);if(!e[a])break;HH(e[a].sidxInfo,s)&&(t[a]=e[a])}}return t};class MP extends UH{constructor(e,t,r={},i){super(),this.mainPlaylistLoader_=i||this,i||(this.isMain_=!0);const{withCredentials:s=!1}=r;if(this.vhs_=t,this.withCredentials=s,this.addMetadataToTextTrack=r.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=Pl("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,t,r){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,r&&(this.state=r),this.trigger("error"),!0):void 0)}addSidxSegments_(e,t,r){const i=e.sidx&&SD(e.sidx);if(!e.sidx||!i||this.mainPlaylistLoader_.sidxMapping_[i])return void(this.mediaRequest_=fe().setTimeout(()=>r(!1),0));const s=sI(e.sidx.resolvedUri),a=(c,f)=>{if(this.requestErrored_(c,f,t))return;const y=this.mainPlaylistLoader_.sidxMapping_;let b;try{b=y7()(dn(f.response).subarray(8))}catch(D){return void this.requestErrored_(D,f,t)}return y[i]={sidxInfo:e.sidx,sidx:b},mM(e,b,e.sidx.resolvedUri),r(!0)};this.request=((n,e,t)=>{let i,r=[],s=!1;const a=function(b,D,N,B){return D.abort(),s=!0,t(b,D,N,B)},c=function(b,D){if(s)return;if(b)return a(b,D,"",r);const N=D.responseText.substring(r&&r.byteLength||0,D.responseText.length);if(r=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if((t=t.filter(function(c){return c&&(c.byteLength||c.length)&&"string"!=typeof c})).length<=1)return dn(t[0]);var i=t.reduce(function(c,f,y){return c+(f.byteLength||f.length)},0),s=new Uint8Array(i),a=0;return t.forEach(function(c){c=dn(c),s.set(c,a),a+=c.byteLength}),s}(r,jL(N,!0)),i=i||Uw(r),r.length<10||i&&r.length<i+2)return kP(D,()=>a(b,D,"",r));const B=SM(r);return"ts"===B&&r.length<188||!B&&r.length<376?kP(D,()=>a(b,D,"",r)):a(null,D,B,r)},y=e({uri:n,beforeSend(b){b.overrideMimeType("text/plain; charset=x-user-defined"),b.addEventListener("progress",function({}){return IP(b,null,{statusCode:b.status},c)})}},function(b,D){return IP(y,b,D,c)});return y})(s,this.vhs_.xhr,(c,f,y,b)=>{if(c)return a(c,f);if(!y||"mp4"!==y)return a({status:f.status,message:`Unsupported ${y||"unknown"} container type for sidx segment at URL: ${s}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},f);const{offset:D,length:N}=e.sidx.byterange;if(b.length>=N+D)return a(c,{response:b.subarray(D,D+N),status:f.status,uri:f.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",headers:AP({byterange:e.sidx.byterange})},a)})}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},fe().clearTimeout(this.minimumUpdatePeriodTimeout_),fe().clearTimeout(this.mediaRequest_),fe().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if("string"==typeof e){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const r=!this.media_||e.id!==this.media_.id;if(r&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));!r||(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,i=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,this.mediaRequest_=null,this.refreshMedia_(t.id),this.trigger("HAVE_MAIN_MANIFEST"===e?"loadedmetadata":"mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),fe().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(fe().clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)}load(e){fe().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const r=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=fe().setTimeout(()=>this.load(),r)}else this.started?t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){this.started=!0,this.isMain_?this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])}):this.mediaRequest_=fe().setTimeout(()=>this.haveMain_(),0)}requestMain_(e){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(t,r)=>{if(this.requestErrored_(t,r))return void("HAVE_NOTHING"===this.state&&(this.started=!1));const i=r.responseText!==this.mainPlaylistLoader_.mainXml_;return this.mainPlaylistLoader_.mainXml_=r.responseText,this.mainLoaded_=r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):Date.now(),this.mainPlaylistLoader_.srcUrl=sI(this.mainPlaylistLoader_.srcUrl,r),i?(this.handleMain_(),void this.syncClientServerClock_(()=>e(r,i))):e(r,i)})}syncClientServerClock_(e){const t=(n=>(n=>{const e=Ti(n,"UTCTiming")[0];if(!e)return null;const t=ps(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return t})(eF(n)))(this.mainPlaylistLoader_.mainXml_);return null===t?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()):"DIRECT"===t.method?(this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:Ua(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials},(r,i)=>{if(!this.request)return;if(r)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();let s;s="HEAD"===t.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):this.mainLoaded_:Date.parse(i.responseText),this.mainPlaylistLoader_.clientOffset_=s-Date.now(),e()}))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main;let t=(({mainXml:n,srcUrl:e,clientOffset:t,sidxMapping:r,previousManifest:i})=>{const s=((n,e={})=>{const t=((n,e={})=>{const{manifestUri:t="",NOW:r=Date.now(),clientOffset:i=0,eventHandler:s=function(){}}=e,a=Ti(n,"Period");if(!a.length)throw new Error("INVALID_NUMBER_OF_PERIOD");const c=Ti(n,"Location"),f=ps(n),y=xD([{baseUrl:t}],Ti(n,"BaseURL")),b=Ti(n,"ContentSteering");f.type=f.type||"static",f.sourceDuration=f.mediaPresentationDuration||0,f.NOW=r,f.clientOffset=i,c.length&&(f.locations=c.map(Fw));const D=[];return a.forEach((N,B)=>{const U=ps(N),K=D[B-1];U.start=(({attributes:n,priorPeriodAttributes:e,mpdType:t})=>"number"==typeof n.start?n.start:e&&"number"==typeof e.start&&"number"==typeof e.duration?e.start+e.duration:e||"static"!==t?null:0)({attributes:U,priorPeriodAttributes:K?K.attributes:null,mpdType:f.type}),D.push({node:N,attributes:U})}),{locations:f.locations,contentSteeringInfo:d7(b,s),representationInfo:tb(D.map(c7(f,y))),eventStream:tb(D.map(u7))}})(eF(n),e),r=(n=>n.map(e7))(t.representationInfo);return z9({dashPlaylists:r,locations:t.locations,contentSteering:t.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:t.eventStream})})(n,{manifestUri:e,clientOffset:t,sidxMapping:r,previousManifest:i});return sU(s,e,BH),s})({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(t=((n,e,t)=>{let r=!0,i=Dr(n,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let s=0;s<e.playlists.length;s++){const a=e.playlists[s];if(a.sidx){const f=SD(a.sidx);t&&t[f]&&t[f].sidx&&mM(a,t[f].sidx,a.sidx.resolvedUri)}const c=xP(i,a,mU);c&&(i=c,r=!1)}return Sb(e,(s,a,c,f)=>{if(s.playlists&&s.playlists.length){const y=s.playlists[0].id,b=xP(i,s.playlists[0],mU);b&&(i=b,f in i.mediaGroups[a][c]||(i.mediaGroups[a][c][f]=s),i.mediaGroups[a][c][f].playlists[0]=i.playlists[y],r=!1)}}),((n,e)=>{Sb(n,(t,r,i,s)=>{s in e.mediaGroups[r][i]||delete n.mediaGroups[r][i][s]})})(i,e),e.minimumUpdatePeriod!==n.minimumUpdatePeriod&&(r=!1),r?null:i})(e,t,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=t||e;const r=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return r&&r!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=r),(!e||t&&t.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(t),Boolean(t)}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(fe().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`):this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=fe().setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{!t||(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=((n,e)=>{let r=_U(n.playlists,e);return Sb(n,(i,s,a,c)=>{i.playlists&&i.playlists.length&&(r=Dr(r,_U(i.playlists,e)))}),r})(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,r=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,r=!this.media_||this.media_!==t[e];if(r?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const i=()=>{this.media().endList||(this.mediaUpdateTimeout=fe().setTimeout(()=>{this.trigger("mediaupdatetimeout"),i()},DP(this.media(),Boolean(r))))};i()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const t=this.mainPlaylistLoader_.main.eventStream.map(r=>({cueTime:r.start,frames:[{data:r.messageData}]}));this.addMetadataToTextTrack("EventStream",t,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const r in e.contentProtection){const i=e.contentProtection[r].attributes["cenc:default_KID"];i&&t.add(i.replace(/-/g,"").toLowerCase())}return t}}}var Zs={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const yU=function(n){return n.on=n.addEventListener,n.off=n.removeEventListener,n},vU=function(n){return function(){const e=function(n){try{return URL.createObjectURL(new Blob([n],{type:"application/javascript"}))}catch(e){const t=new BlobBuilder;return t.append(n),URL.createObjectURL(t.getBlob())}}(n),t=yU(new Worker(e));t.objURL=e;const r=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),r.call(this)},t}},bU=function(n){return`var browserWorkerPolyFill = ${yU.toString()};\nbrowserWorkerPolyFill(self);\n`+n},TU=function(n){return n.toString().replace(/^function.+?{/,"").slice(0,-1)},WH=bU(TU(function(){var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=function(){this.init=function(){var v={};this.on=function(C,A){v[C]||(v[C]=[]),v[C]=v[C].concat(A)},this.off=function(C,A){var I;return!!v[C]&&(I=v[C].indexOf(A),v[C]=v[C].slice(),v[C].splice(I,1),I>-1)},this.trigger=function(C){var A,I,P,O;if(A=v[C])if(2===arguments.length)for(P=A.length,I=0;I<P;++I)A[I].call(this,arguments[1]);else{for(O=[],I=arguments.length,I=1;I<arguments.length;++I)O.push(arguments[I]);for(P=A.length,I=0;I<P;++I)A[I].apply(this,O)}},this.dispose=function(){v={}}}};e.prototype.pipe=function(v){return this.on("data",function(C){v.push(C)}),this.on("done",function(C){v.flush(C)}),this.on("partialdone",function(C){v.partialFlush(C)}),this.on("endedtimeline",function(C){v.endTimeline(C)}),this.on("reset",function(C){v.reset(C)}),v},e.prototype.push=function(v){this.trigger("data",v)},e.prototype.flush=function(v){this.trigger("done",v)},e.prototype.partialFlush=function(v){this.trigger("partialdone",v)},e.prototype.endTimeline=function(v){this.trigger("endedtimeline",v)},e.prototype.reset=function(v){this.trigger("reset",v)};var c,f,y,b,D,N,B,U,K,ie,Ae,be,Le,Me,Ee,pt,Nt,hn,ct,Jt,Ir,Br,on,Ar,Ri,Va,Uc,mh,_h,Bc,Jn,Dn,ja,Wo,hp,yh,v,C,t=e,r=Math.pow(2,32),s={getUint64:function(v){var A,C=new DataView(v.buffer,v.byteOffset,v.byteLength);return C.getBigUint64?(A=C.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(A):A:C.getUint32(0)*r+C.getUint32(4)},MAX_UINT32:r},a=s.MAX_UINT32;(function(){var v;if(on={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(v in on)on.hasOwnProperty(v)&&(on[v]=[v.charCodeAt(0),v.charCodeAt(1),v.charCodeAt(2),v.charCodeAt(3)]);Ar=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Va=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Ri=new Uint8Array([0,0,0,1]),Uc=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),mh=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),_h={video:Uc,audio:mh},Dn=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Jn=new Uint8Array([0,0,0,0,0,0,0,0]),ja=new Uint8Array([0,0,0,0,0,0,0,0]),Wo=ja,hp=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),yh=ja,Bc=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),c=function(v){var I,P,C=[],A=0;for(I=1;I<arguments.length;I++)C.push(arguments[I]);for(I=C.length;I--;)A+=C[I].byteLength;for(P=new Uint8Array(A+8),new DataView(P.buffer,P.byteOffset,P.byteLength).setUint32(0,P.byteLength),P.set(v,4),I=0,A=8;I<C.length;I++)P.set(C[I],A),A+=C[I].byteLength;return P},f=function(){return c(on.dinf,c(on.dref,Dn))},y=function(v){return c(on.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,v.audioobjecttype<<3|v.samplingfrequencyindex>>>1,v.samplingfrequencyindex<<7|v.channelcount<<3,6,1,2]))},b=function(){return c(on.ftyp,Ar,Ri,Ar,Va)},pt=function(v){return c(on.hdlr,_h[v])},D=function(v){return c(on.mdat,v)},Ee=function(v){var C=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,v.duration>>>24&255,v.duration>>>16&255,v.duration>>>8&255,255&v.duration,85,196,0,0]);return v.samplerate&&(C[12]=v.samplerate>>>24&255,C[13]=v.samplerate>>>16&255,C[14]=v.samplerate>>>8&255,C[15]=255&v.samplerate),c(on.mdhd,C)},Me=function(v){return c(on.mdia,Ee(v),pt(v.type),B(v))},N=function(v){return c(on.mfhd,new Uint8Array([0,0,0,0,(4278190080&v)>>24,(16711680&v)>>16,(65280&v)>>8,255&v]))},B=function(v){return c(on.minf,"video"===v.type?c(on.vmhd,Bc):c(on.smhd,Jn),f(),hn(v))},U=function(v,C){for(var A=[],I=C.length;I--;)A[I]=Jt(C[I]);return c.apply(null,[on.moof,N(v)].concat(A))},K=function(v){for(var C=v.length,A=[];C--;)A[C]=be(v[C]);return c.apply(null,[on.moov,Ae(4294967295)].concat(A).concat(ie(v)))},ie=function(v){for(var C=v.length,A=[];C--;)A[C]=Ir(v[C]);return c.apply(null,[on.mvex].concat(A))},Ae=function(v){var C=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&v)>>24,(16711680&v)>>16,(65280&v)>>8,255&v,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return c(on.mvhd,C)},Nt=function(v){var I,P,C=v.samples||[],A=new Uint8Array(4+C.length);for(P=0;P<C.length;P++)A[P+4]=(I=C[P].flags).dependsOn<<4|I.isDependedOn<<2|I.hasRedundancy;return c(on.sdtp,A)},hn=function(v){return c(on.stbl,ct(v),c(on.stts,yh),c(on.stsc,Wo),c(on.stsz,hp),c(on.stco,ja))},ct=function(A){return c(on.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===A.type?v(A):C(A))},v=function(A){var te,ue,I=A.sps||[],P=A.pps||[],O=[],X=[];for(te=0;te<I.length;te++)O.push((65280&I[te].byteLength)>>>8),O.push(255&I[te].byteLength),O=O.concat(Array.prototype.slice.call(I[te]));for(te=0;te<P.length;te++)X.push((65280&P[te].byteLength)>>>8),X.push(255&P[te].byteLength),X=X.concat(Array.prototype.slice.call(P[te]));if(ue=[on.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&A.width)>>8,255&A.width,(65280&A.height)>>8,255&A.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c(on.avcC,new Uint8Array([1,A.profileIdc,A.profileCompatibility,A.levelIdc,255].concat([I.length],O,[P.length],X))),c(on.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],A.sarRatio){var ge=A.sarRatio[0],Be=A.sarRatio[1];ue.push(c(on.pasp,new Uint8Array([(4278190080&ge)>>24,(16711680&ge)>>16,(65280&ge)>>8,255&ge,(4278190080&Be)>>24,(16711680&Be)>>16,(65280&Be)>>8,255&Be])))}return c.apply(null,ue)},C=function(A){return c(on.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&A.channelcount)>>8,255&A.channelcount,(65280&A.samplesize)>>8,255&A.samplesize,0,0,0,0,(65280&A.samplerate)>>8,255&A.samplerate,0,0]),y(A))},Le=function(v){var C=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&v.id)>>24,(16711680&v.id)>>16,(65280&v.id)>>8,255&v.id,0,0,0,0,(4278190080&v.duration)>>24,(16711680&v.duration)>>16,(65280&v.duration)>>8,255&v.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&v.width)>>8,255&v.width,0,0,(65280&v.height)>>8,255&v.height,0,0]);return c(on.tkhd,C)},Jt=function(v){var C,A,I,P,X,te;return C=c(on.tfhd,new Uint8Array([0,0,0,58,(4278190080&v.id)>>24,(16711680&v.id)>>16,(65280&v.id)>>8,255&v.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),X=Math.floor(v.baseMediaDecodeTime/a),te=Math.floor(v.baseMediaDecodeTime%a),A=c(on.tfdt,new Uint8Array([1,0,0,0,X>>>24&255,X>>>16&255,X>>>8&255,255&X,te>>>24&255,te>>>16&255,te>>>8&255,255&te])),"audio"===v.type?(I=Br(v,92),c(on.traf,C,A,I)):(P=Nt(v),I=Br(v,P.length+92),c(on.traf,C,A,I,P))},be=function(v){return v.duration=v.duration||4294967295,c(on.trak,Le(v),Me(v))},Ir=function(v){var C=new Uint8Array([0,0,0,0,(4278190080&v.id)>>24,(16711680&v.id)>>16,(65280&v.id)>>8,255&v.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==v.type&&(C[C.length-1]=0),c(on.trex,C)},function(){var v,C,A;A=function(I,P){var O=0,X=0,te=0,ue=0;return I.length&&(void 0!==I[0].duration&&(O=1),void 0!==I[0].size&&(X=2),void 0!==I[0].flags&&(te=4),void 0!==I[0].compositionTimeOffset&&(ue=8)),[0,0,O|X|te|ue,1,(4278190080&I.length)>>>24,(16711680&I.length)>>>16,(65280&I.length)>>>8,255&I.length,(4278190080&P)>>>24,(16711680&P)>>>16,(65280&P)>>>8,255&P]},C=function(I,P){var O,X,te,ue,ge,Be;for(te=A(ue=I.samples||[],P+=20+16*ue.length),(X=new Uint8Array(te.length+16*ue.length)).set(te),O=te.length,Be=0;Be<ue.length;Be++)X[O++]=(4278190080&(ge=ue[Be]).duration)>>>24,X[O++]=(16711680&ge.duration)>>>16,X[O++]=(65280&ge.duration)>>>8,X[O++]=255&ge.duration,X[O++]=(4278190080&ge.size)>>>24,X[O++]=(16711680&ge.size)>>>16,X[O++]=(65280&ge.size)>>>8,X[O++]=255&ge.size,X[O++]=ge.flags.isLeading<<2|ge.flags.dependsOn,X[O++]=ge.flags.isDependedOn<<6|ge.flags.hasRedundancy<<4|ge.flags.paddingValue<<1|ge.flags.isNonSyncSample,X[O++]=61440&ge.flags.degradationPriority,X[O++]=15&ge.flags.degradationPriority,X[O++]=(4278190080&ge.compositionTimeOffset)>>>24,X[O++]=(16711680&ge.compositionTimeOffset)>>>16,X[O++]=(65280&ge.compositionTimeOffset)>>>8,X[O++]=255&ge.compositionTimeOffset;return c(on.trun,X)},v=function(I,P){var O,X,te,ue,ge,Be;for(te=A(ue=I.samples||[],P+=20+8*ue.length),(O=new Uint8Array(te.length+8*ue.length)).set(te),X=te.length,Be=0;Be<ue.length;Be++)O[X++]=(4278190080&(ge=ue[Be]).duration)>>>24,O[X++]=(16711680&ge.duration)>>>16,O[X++]=(65280&ge.duration)>>>8,O[X++]=255&ge.duration,O[X++]=(4278190080&ge.size)>>>24,O[X++]=(16711680&ge.size)>>>16,O[X++]=(65280&ge.size)>>>8,O[X++]=255&ge.size;return c(on.trun,O)},Br=function(I,P){return"audio"===I.type?v(I,P):C(I,P)}}();var yC,ER,wR,kI,CR,CB,SB,xB,pC={ftyp:b,mdat:D,moof:U,moov:K,initSegment:function(v){var I,C=b(),A=K(v);return(I=new Uint8Array(C.byteLength+A.byteLength)).set(C),I.set(A,C.byteLength),I}},Py=function(v,C){var A={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return A.dataOffset=C,A.compositionTimeOffset=v.pts-v.dts,A.duration=v.duration,A.size=4*v.length,A.size+=v.byteLength,v.keyFrame&&(A.flags.dependsOn=2,A.flags.isNonSyncSample=0),A},vR={groupNalsIntoFrames:function(v){var C,A,I=[],P=[];for(P.byteLength=0,P.nalCount=0,P.duration=0,I.byteLength=0,C=0;C<v.length;C++)"access_unit_delimiter_rbsp"===(A=v[C]).nalUnitType?(I.length&&(I.duration=A.dts-I.dts,P.byteLength+=I.byteLength,P.nalCount+=I.length,P.duration+=I.duration,P.push(I)),(I=[A]).byteLength=A.data.byteLength,I.pts=A.pts,I.dts=A.dts):("slice_layer_without_partitioning_rbsp_idr"===A.nalUnitType&&(I.keyFrame=!0),I.duration=A.dts-I.dts,I.byteLength+=A.data.byteLength,I.push(A));return P.length&&(!I.duration||I.duration<=0)&&(I.duration=P[P.length-1].duration),P.byteLength+=I.byteLength,P.nalCount+=I.length,P.duration+=I.duration,P.push(I),P},groupFramesIntoGops:function(v){var C,A,I=[],P=[];for(I.byteLength=0,I.nalCount=0,I.duration=0,I.pts=v[0].pts,I.dts=v[0].dts,P.byteLength=0,P.nalCount=0,P.duration=0,P.pts=v[0].pts,P.dts=v[0].dts,C=0;C<v.length;C++)(A=v[C]).keyFrame?(I.length&&(P.push(I),P.byteLength+=I.byteLength,P.nalCount+=I.nalCount,P.duration+=I.duration),(I=[A]).nalCount=A.length,I.byteLength=A.byteLength,I.pts=A.pts,I.dts=A.dts,I.duration=A.duration):(I.duration+=A.duration,I.nalCount+=A.length,I.byteLength+=A.byteLength,I.push(A));return P.length&&I.duration<=0&&(I.duration=P[P.length-1].duration),P.byteLength+=I.byteLength,P.nalCount+=I.nalCount,P.duration+=I.duration,P.push(I),P},extendFirstKeyFrame:function(v){var C;return!v[0][0].keyFrame&&v.length>1&&(C=v.shift(),v.byteLength-=C.byteLength,v.nalCount-=C.nalCount,v[0][0].dts=C.dts,v[0][0].pts=C.pts,v[0][0].duration+=C.duration),v},generateSampleTable:function(v,C){var A,I,P,O,te=C||0,ue=[];for(A=0;A<v.length;A++)for(O=v[A],I=0;I<O.length;I++)te+=(P=Py(O[I],te)).size,ue.push(P);return ue},concatenateNalData:function(v){var C,A,I,P,O,X,te=0,dt=new Uint8Array(v.byteLength+4*v.nalCount),Gt=new DataView(dt.buffer);for(C=0;C<v.length;C++)for(P=v[C],A=0;A<P.length;A++)for(O=P[A],I=0;I<O.length;I++)Gt.setUint32(te,(X=O[I]).data.byteLength),dt.set(X.data,te+=4),te+=X.data.byteLength;return dt},generateSampleTableForFrame:function(v,C){var A,P=[];return A=Py(v,C||0),P.push(A),P},concatenateNalDataForFrame:function(v){var C,A,I=0,te=new Uint8Array(v.byteLength+4*v.length),ue=new DataView(te.buffer);for(C=0;C<v.length;C++)ue.setUint32(I,(A=v[C]).data.byteLength),te.set(A.data,I+=4),I+=A.data.byteLength;return te}},bh=[33,16,5,32,164,27],_C=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Sr=function(v){for(var C=[];v--;)C.push(0);return C};ER=function(v){return 9e4*v},wR=function(v,C){return v*C},kI=function(v){return v/9e4},CR=function(v,C){return v/C},CB=function(v,C){return ER(CR(v,C))},SB=function(v,C){return wR(kI(v),C)},xB=function(v,C,A){return kI(A?v:v-C)};var pi={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:ER,secondsToAudioTs:wR,videoTsToSeconds:kI,audioTsToSeconds:CR,audioTsToVideoTs:CB,videoTsToAudioTs:SB,metadataTsToSeconds:xB},MI=pi,sK={prefixWithSilence:function(v,C,A,I){var P,ge,Be,dt,O=0,X=0,te=0,ue=0;if(C.length&&(P=MI.audioTsToVideoTs(v.baseMediaDecodeTime,v.samplerate),O=Math.ceil(MI.ONE_SECOND_IN_TS/(v.samplerate/1024)),A&&I&&(X=P-Math.max(A,I),ue=(te=Math.floor(X/O))*O),!(te<1||ue>MI.ONE_SECOND_IN_TS/2))){for((ge=function(){if(!yC){var v={96e3:[bh,[227,64],Sr(154),[56]],88200:[bh,[231],Sr(170),[56]],64e3:[bh,[248,192],Sr(240),[56]],48e3:[bh,[255,192],Sr(268),[55,148,128],Sr(54),[112]],44100:[bh,[255,192],Sr(268),[55,163,128],Sr(84),[112]],32e3:[bh,[255,192],Sr(268),[55,234],Sr(226),[112]],24e3:[bh,[255,192],Sr(268),[55,255,128],Sr(268),[111,112],Sr(126),[224]],16e3:[bh,[255,192],Sr(268),[55,255,128],Sr(268),[111,255],Sr(269),[223,108],Sr(195),[1,192]],12e3:[_C,Sr(268),[3,127,248],Sr(268),[6,255,240],Sr(268),[13,255,224],Sr(268),[27,253,128],Sr(259),[56]],11025:[_C,Sr(268),[3,127,248],Sr(268),[6,255,240],Sr(268),[13,255,224],Sr(268),[27,255,192],Sr(268),[55,175,128],Sr(108),[112]],8e3:[_C,Sr(268),[3,121,16],Sr(47),[7]]};yC=function(v){return Object.keys(v).reduce(function(C,A){return C[A]=new Uint8Array(v[A].reduce(function(I,P){return I.concat(P)},[])),C},{})}(v)}return yC}()[v.samplerate])||(ge=C[0].data),Be=0;Be<te;Be++)C.splice(0,0,{data:ge,dts:(dt=C[0]).dts-O,pts:dt.pts-O});return v.baseMediaDecodeTime-=Math.floor(MI.videoTsToAudioTs(ue,v.samplerate)),ue}},trimAdtsFramesByEarliestDts:function(v,C,A){return C.minSegmentDts>=A?v:(C.minSegmentDts=1/0,v.filter(function(I){return I.dts>=A&&(C.minSegmentDts=Math.min(C.minSegmentDts,I.dts),C.minSegmentPts=C.minSegmentDts,!0)}))},generateSampleTable:function(v){var C,I=[];for(C=0;C<v.length;C++)I.push({size:v[C].data.byteLength,duration:1024});return I},concatenateFrameData:function(v){var C,A,I=0,P=new Uint8Array(function(v){var C,I=0;for(C=0;C<v.length;C++)I+=v[C].data.byteLength;return I}(v));for(C=0;C<v.length;C++)P.set((A=v[C]).data,I),I+=A.data.byteLength;return P}},oK=pi.ONE_SECOND_IN_TS,cK={clearDtsInfo:function(v){delete v.minSegmentDts,delete v.maxSegmentDts,delete v.minSegmentPts,delete v.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(v,C){var A,P=v.minSegmentDts;return C||(P-=v.timelineStartInfo.dts),A=v.timelineStartInfo.baseMediaDecodeTime,A+=P,A=Math.max(0,A),"audio"===v.type&&(A*=v.samplerate/oK,A=Math.floor(A)),A},collectDtsInfo:function(v,C){"number"==typeof C.pts&&(void 0===v.timelineStartInfo.pts&&(v.timelineStartInfo.pts=C.pts),v.minSegmentPts=void 0===v.minSegmentPts?C.pts:Math.min(v.minSegmentPts,C.pts),v.maxSegmentPts=void 0===v.maxSegmentPts?C.pts:Math.max(v.maxSegmentPts,C.pts)),"number"==typeof C.dts&&(void 0===v.timelineStartInfo.dts&&(v.timelineStartInfo.dts=C.dts),v.minSegmentDts=void 0===v.minSegmentDts?C.dts:Math.min(v.minSegmentDts,C.dts),v.maxSegmentDts=void 0===v.maxSegmentDts?C.dts:Math.max(v.maxSegmentDts,C.dts))}},IB={parseSei:function(v){for(var C=0,A={payloadType:-1,payloadSize:0},I=0,P=0;C<v.byteLength&&128!==v[C];){for(;255===v[C];)I+=255,C++;for(I+=v[C++];255===v[C];)P+=255,C++;if(P+=v[C++],!A.payload&&4===I){if("GA94"===String.fromCharCode(v[C+3],v[C+4],v[C+5],v[C+6])){A.payloadType=I,A.payloadSize=P,A.payload=v.subarray(C,C+P);break}A.payload=void 0}C+=P,I=0,P=0}return A},parseUserData:function(v){return 181!==v.payload[0]||49!=(v.payload[1]<<8|v.payload[2])||"GA94"!==String.fromCharCode(v.payload[3],v.payload[4],v.payload[5],v.payload[6])||3!==v.payload[7]?null:v.payload.subarray(8,v.payload.length-1)},parseCaptionPackets:function(v,C){var I,P,O,X,A=[];if(!(64&C[0]))return A;for(P=31&C[0],I=0;I<P;I++)X={type:3&C[2+(O=3*I)],pts:v},4&C[O+2]&&(X.ccData=C[O+3]<<8|C[O+4],A.push(X));return A},discardEmulationPreventionBytes:function(v){for(var P,O,C=v.byteLength,A=[],I=1;I<C-2;)0===v[I]&&0===v[I+1]&&3===v[I+2]?(A.push(I+2),I+=2):I++;if(0===A.length)return v;P=C-A.length,O=new Uint8Array(P);var X=0;for(I=0;I<P;X++,I++)X===A[0]&&(X++,A.shift()),O[I]=v[X];return O},USER_DATA_REGISTERED_ITU_T_T35:4},SR=t,PI=IB,Ha=function(v){v=v||{},Ha.prototype.init.call(this),this.parse708captions_="boolean"!=typeof v.parse708captions||v.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Ei(0,0),new Ei(0,1),new Ei(1,0),new Ei(1,1)],this.parse708captions_&&(this.cc708Stream_=new Gr({captionServices:v.captionServices})),this.reset(),this.ccStreams_.forEach(function(C){C.on("data",this.trigger.bind(this,"data")),C.on("partialdone",this.trigger.bind(this,"partialdone")),C.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Ha.prototype=new SR,Ha.prototype.push=function(v){var C,A,I;if("sei_rbsp"===v.nalUnitType&&(C=PI.parseSei(v.escapedRBSP)).payload&&C.payloadType===PI.USER_DATA_REGISTERED_ITU_T_T35&&(A=PI.parseUserData(C))){if(v.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(v.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));I=PI.parseCaptionPackets(v.pts,A),this.captionPackets_=this.captionPackets_.concat(I),this.latestDts_!==v.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=v.dts}},Ha.prototype.flushCCStreams=function(v){this.ccStreams_.forEach(function(C){return"flush"===v?C.flush():C.partialFlush()},this)},Ha.prototype.flushStream=function(v){this.captionPackets_.length?(this.captionPackets_.forEach(function(C,A){C.presortIndex=A}),this.captionPackets_.sort(function(C,A){return C.pts===A.pts?C.presortIndex-A.presortIndex:C.pts-A.pts}),this.captionPackets_.forEach(function(C){C.type<2?this.dispatchCea608Packet(C):this.dispatchCea708Packet(C)},this),this.captionPackets_.length=0,this.flushCCStreams(v)):this.flushCCStreams(v)},Ha.prototype.flush=function(){return this.flushStream("flush")},Ha.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ha.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(v){v.reset()})},Ha.prototype.dispatchCea608Packet=function(v){this.setsTextOrXDSActive(v)?this.activeCea608Channel_[v.type]=null:this.setsChannel1Active(v)?this.activeCea608Channel_[v.type]=0:this.setsChannel2Active(v)&&(this.activeCea608Channel_[v.type]=1),null!==this.activeCea608Channel_[v.type]&&this.ccStreams_[(v.type<<1)+this.activeCea608Channel_[v.type]].push(v)},Ha.prototype.setsChannel1Active=function(v){return 4096==(30720&v.ccData)},Ha.prototype.setsChannel2Active=function(v){return 6144==(30720&v.ccData)},Ha.prototype.setsTextOrXDSActive=function(v){return 256==(28928&v.ccData)||4138==(30974&v.ccData)||6186==(30974&v.ccData)},Ha.prototype.dispatchCea708Packet=function(v){this.parse708captions_&&this.cc708Stream_.push(v)};var mK={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},RI=function(v){return 32<=v&&v<=127||160<=v&&v<=255},pp=function(v){this.windowNum=v,this.reset()};pp.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},pp.prototype.getText=function(){return this.rows.join("\n")},pp.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},pp.prototype.newLine=function(v){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(v),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},pp.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},pp.prototype.addText=function(v){this.rows[this.rowIdx]+=v},pp.prototype.backspace=function(){if(!this.isEmpty()){var v=this.rows[this.rowIdx];this.rows[this.rowIdx]=v.substr(0,v.length-1)}};var OI=function(v,C,A){this.serviceNum=v,this.text="",this.currentWindow=new pp(-1),this.windows=[],this.stream=A,"string"==typeof C&&this.createTextDecoder(C)};OI.prototype.init=function(v,C){this.startPts=v;for(var A=0;A<8;A++)this.windows[A]=new pp(A),"function"==typeof C&&(this.windows[A].beforeRowOverflow=C)},OI.prototype.setCurrentWindow=function(v){this.currentWindow=this.windows[v]},OI.prototype.createTextDecoder=function(v){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(v)}catch(C){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+v+" encoding. "+C})}};var Gr=function(v){v=v||{},Gr.prototype.init.call(this);var P,C=this,A=v.captionServices||{},I={};Object.keys(A).forEach(O=>{P=A[O],/^SERVICE/.test(O)&&(I[O]=P.encoding)}),this.serviceEncodings=I,this.current708Packet=null,this.services={},this.push=function(O){3===O.type?(C.new708Packet(),C.add708Bytes(O)):(null===C.current708Packet&&C.new708Packet(),C.add708Bytes(O))}};Gr.prototype=new SR,Gr.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Gr.prototype.add708Bytes=function(v){var C=v.ccData,A=C>>>8,I=255&C;this.current708Packet.ptsVals.push(v.pts),this.current708Packet.data.push(A),this.current708Packet.data.push(I)},Gr.prototype.push708Packet=function(){var v=this.current708Packet,C=v.data,A=null,I=null,P=0,O=C[P++];for(v.seq=O>>6,v.sizeCode=63&O;P<C.length;P++)I=31&(O=C[P++]),7==(A=O>>5)&&I>0&&(A=O=C[P++]),this.pushServiceBlock(A,P,I),I>0&&(P+=I-1)},Gr.prototype.pushServiceBlock=function(v,C,A){var I,P=C,O=this.current708Packet.data,X=this.services[v];for(X||(X=this.initService(v,P));P<C+A&&P<O.length;P++)RI(I=O[P])?P=this.handleText(P,X):24===I?P=this.multiByteCharacter(P,X):16===I?P=this.extendedCommands(P,X):128<=I&&I<=135?P=this.setCurrentWindow(P,X):152<=I&&I<=159?P=this.defineWindow(P,X):136===I?P=this.clearWindows(P,X):140===I?P=this.deleteWindows(P,X):137===I?P=this.displayWindows(P,X):138===I?P=this.hideWindows(P,X):139===I?P=this.toggleWindows(P,X):151===I?P=this.setWindowAttributes(P,X):144===I?P=this.setPenAttributes(P,X):145===I?P=this.setPenColor(P,X):146===I?P=this.setPenLocation(P,X):143===I?X=this.reset(P,X):8===I?X.currentWindow.backspace():12===I?X.currentWindow.clearText():13===I?X.currentWindow.pendingNewLine=!0:14===I?X.currentWindow.clearText():141===I&&P++},Gr.prototype.extendedCommands=function(v,C){var I=this.current708Packet.data[++v];return RI(I)&&(v=this.handleText(v,C,{isExtended:!0})),v},Gr.prototype.getPts=function(v){return this.current708Packet.ptsVals[Math.floor(v/2)]},Gr.prototype.initService=function(v,C){var I,P,A=this;return(I="SERVICE"+v)in this.serviceEncodings&&(P=this.serviceEncodings[I]),this.services[v]=new OI(v,P,A),this.services[v].init(this.getPts(C),function(O){A.flushDisplayed(O,A.services[v])}),this.services[v]},Gr.prototype.handleText=function(v,C,A){var Be,dt,I=A&&A.isExtended,P=A&&A.isMultiByte,O=this.current708Packet.data,X=I?4096:0,te=O[v],ge=C.currentWindow;if(P?(dt=[te,O[v+1]],v++):dt=[te],C.textDecoder_&&!I)Be=C.textDecoder_.decode(new Uint8Array(dt));else if(P){const St=function Gt(St){return St.map(Cn=>("0"+(255&Cn).toString(16)).slice(-2)).join("")}(dt);Be=String.fromCharCode(parseInt(St,16))}else Be=function(v){var C=mK[v]||v;return 4096&v&&v===C?"":String.fromCharCode(C)}(X|te);return ge.pendingNewLine&&!ge.isEmpty()&&ge.newLine(this.getPts(v)),ge.pendingNewLine=!1,ge.addText(Be),v},Gr.prototype.multiByteCharacter=function(v,C){var A=this.current708Packet.data,P=A[v+2];return RI(A[v+1])&&RI(P)&&(v=this.handleText(++v,C,{isMultiByte:!0})),v},Gr.prototype.setCurrentWindow=function(v,C){return C.setCurrentWindow(7&this.current708Packet.data[v]),v},Gr.prototype.defineWindow=function(v,C){var A=this.current708Packet.data,I=A[v];C.setCurrentWindow(7&I);var O=C.currentWindow;return I=A[++v],O.visible=(32&I)>>5,O.rowLock=(16&I)>>4,O.columnLock=(8&I)>>3,O.priority=7&I,I=A[++v],O.relativePositioning=(128&I)>>7,O.anchorVertical=127&I,I=A[++v],O.anchorHorizontal=I,I=A[++v],O.anchorPoint=(240&I)>>4,O.rowCount=15&I,I=A[++v],O.columnCount=63&I,I=A[++v],O.windowStyle=(56&I)>>3,O.penStyle=7&I,O.virtualRowCount=O.rowCount+1,v},Gr.prototype.setWindowAttributes=function(v,C){var A=this.current708Packet.data,I=A[v],P=C.currentWindow.winAttr;return I=A[++v],P.fillOpacity=(192&I)>>6,P.fillRed=(48&I)>>4,P.fillGreen=(12&I)>>2,P.fillBlue=3&I,I=A[++v],P.borderType=(192&I)>>6,P.borderRed=(48&I)>>4,P.borderGreen=(12&I)>>2,P.borderBlue=3&I,I=A[++v],P.borderType+=(128&I)>>5,P.wordWrap=(64&I)>>6,P.printDirection=(48&I)>>4,P.scrollDirection=(12&I)>>2,P.justify=3&I,I=A[++v],P.effectSpeed=(240&I)>>4,P.effectDirection=(12&I)>>2,P.displayEffect=3&I,v},Gr.prototype.flushDisplayed=function(v,C){for(var A=[],I=0;I<8;I++)C.windows[I].visible&&!C.windows[I].isEmpty()&&A.push(C.windows[I].getText());C.endPts=v,C.text=A.join("\n\n"),this.pushCaption(C),C.startPts=v},Gr.prototype.pushCaption=function(v){""!==v.text&&(this.trigger("data",{startPts:v.startPts,endPts:v.endPts,text:v.text,stream:"cc708_"+v.serviceNum}),v.text="",v.startPts=v.endPts)},Gr.prototype.displayWindows=function(v,C){var I=this.current708Packet.data[++v],P=this.getPts(v);this.flushDisplayed(P,C);for(var O=0;O<8;O++)I&1<<O&&(C.windows[O].visible=1);return v},Gr.prototype.hideWindows=function(v,C){var I=this.current708Packet.data[++v],P=this.getPts(v);this.flushDisplayed(P,C);for(var O=0;O<8;O++)I&1<<O&&(C.windows[O].visible=0);return v},Gr.prototype.toggleWindows=function(v,C){var I=this.current708Packet.data[++v],P=this.getPts(v);this.flushDisplayed(P,C);for(var O=0;O<8;O++)I&1<<O&&(C.windows[O].visible^=1);return v},Gr.prototype.clearWindows=function(v,C){var I=this.current708Packet.data[++v],P=this.getPts(v);this.flushDisplayed(P,C);for(var O=0;O<8;O++)I&1<<O&&C.windows[O].clearText();return v},Gr.prototype.deleteWindows=function(v,C){var I=this.current708Packet.data[++v],P=this.getPts(v);this.flushDisplayed(P,C);for(var O=0;O<8;O++)I&1<<O&&C.windows[O].reset();return v},Gr.prototype.setPenAttributes=function(v,C){var A=this.current708Packet.data,I=A[v],P=C.currentWindow.penAttr;return I=A[++v],P.textTag=(240&I)>>4,P.offset=(12&I)>>2,P.penSize=3&I,I=A[++v],P.italics=(128&I)>>7,P.underline=(64&I)>>6,P.edgeType=(56&I)>>3,P.fontStyle=7&I,v},Gr.prototype.setPenColor=function(v,C){var A=this.current708Packet.data,I=A[v],P=C.currentWindow.penColor;return I=A[++v],P.fgOpacity=(192&I)>>6,P.fgRed=(48&I)>>4,P.fgGreen=(12&I)>>2,P.fgBlue=3&I,I=A[++v],P.bgOpacity=(192&I)>>6,P.bgRed=(48&I)>>4,P.bgGreen=(12&I)>>2,P.bgBlue=3&I,I=A[++v],P.edgeRed=(48&I)>>4,P.edgeGreen=(12&I)>>2,P.edgeBlue=3&I,v},Gr.prototype.setPenLocation=function(v,C){var A=this.current708Packet.data,I=A[v],P=C.currentWindow.penLoc;return C.currentWindow.pendingNewLine=!0,I=A[++v],P.row=15&I,I=A[++v],P.column=63&I,v},Gr.prototype.reset=function(v,C){var A=this.getPts(v);return this.flushDisplayed(A,C),this.initService(C.serviceNum,v)};var yK={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},NI=function(v){return null===v?"":(v=yK[v]||v,String.fromCharCode(v))},vK=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Oy=function(){for(var v=[],C=15;C--;)v.push({text:"",indent:0,offset:0});return v},Ei=function(v,C){Ei.prototype.init.call(this),this.field_=v||0,this.dataChannel_=C||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(A){var I,P,O,X,te;if((I=32639&A.ccData)!==this.lastControlCode_){if(4096==(61440&I)?this.lastControlCode_=I:I!==this.PADDING_&&(this.lastControlCode_=null),O=I>>>8,X=255&I,I!==this.PADDING_)if(I===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(I===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(A.pts),this.flushDisplayed(A.pts),P=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=P,this.startPts_=A.pts;else if(I===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(A.pts);else if(I===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(A.pts);else if(I===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(A.pts);else if(I===this.CARRIAGE_RETURN_)this.clearFormatting(A.pts),this.flushDisplayed(A.pts),this.shiftRowsUp_(),this.startPts_=A.pts;else if(I===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(I===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(A.pts),this.displayed_=Oy();else if(I===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Oy();else if(I===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(A.pts),this.displayed_=Oy()),this.mode_="paintOn",this.startPts_=A.pts;else if(this.isSpecialCharacter(O,X))te=NI((O=(3&O)<<8)|X),this[this.mode_](A.pts,te),this.column_++;else if(this.isExtCharacter(O,X))"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),te=NI((O=(3&O)<<8)|X),this[this.mode_](A.pts,te),this.column_++;else if(this.isMidRowCode(O,X))this.clearFormatting(A.pts),this[this.mode_](A.pts," "),this.column_++,14==(14&X)&&this.addFormatting(A.pts,["i"]),1==(1&X)&&this.addFormatting(A.pts,["u"]);else if(this.isOffsetControlCode(O,X)){const ge=3&X;this.nonDisplayed_[this.row_].offset=ge,this.column_+=ge}else if(this.isPAC(O,X)){var ue=vK.indexOf(7968&I);if("rollUp"===this.mode_&&(ue-this.rollUpRows_+1<0&&(ue=this.rollUpRows_-1),this.setRollUp(A.pts,ue)),ue!==this.row_&&(this.clearFormatting(A.pts),this.row_=ue),1&X&&-1===this.formatting_.indexOf("u")&&this.addFormatting(A.pts,["u"]),16==(16&I)){const ge=(14&I)>>1;this.column_=4*ge,this.nonDisplayed_[this.row_].indent+=ge}this.isColorPAC(X)&&14==(14&X)&&this.addFormatting(A.pts,["i"])}else this.isNormalChar(O)&&(0===X&&(X=null),te=NI(O),te+=NI(X),this[this.mode_](A.pts,te),this.column_+=te.length)}else this.lastControlCode_=null}};Ei.prototype=new SR,Ei.prototype.flushDisplayed=function(v){const C=I=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+I+"."})},A=[];this.displayed_.forEach((I,P)=>{if(I&&I.text&&I.text.length){try{I.text=I.text.trim()}catch(O){C(P)}I.text.length&&A.push({text:I.text,line:P+1,position:10+Math.min(70,10*I.indent)+2.5*I.offset})}else null==I&&C(P)}),A.length&&this.trigger("data",{startPts:this.startPts_,endPts:v,content:A,stream:this.name_})},Ei.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Oy(),this.nonDisplayed_=Oy(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ei.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ei.prototype.isSpecialCharacter=function(v,C){return v===this.EXT_&&C>=48&&C<=63},Ei.prototype.isExtCharacter=function(v,C){return(v===this.EXT_+1||v===this.EXT_+2)&&C>=32&&C<=63},Ei.prototype.isMidRowCode=function(v,C){return v===this.EXT_&&C>=32&&C<=47},Ei.prototype.isOffsetControlCode=function(v,C){return v===this.OFFSET_&&C>=33&&C<=35},Ei.prototype.isPAC=function(v,C){return v>=this.BASE_&&v<this.BASE_+8&&C>=64&&C<=127},Ei.prototype.isColorPAC=function(v){return v>=64&&v<=79||v>=96&&v<=127},Ei.prototype.isNormalChar=function(v){return v>=32&&v<=127},Ei.prototype.setRollUp=function(v,C){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(v),this.nonDisplayed_=Oy(),this.displayed_=Oy()),void 0!==C&&C!==this.row_)for(var A=0;A<this.rollUpRows_;A++)this.displayed_[C-A]=this.displayed_[this.row_-A],this.displayed_[this.row_-A]={text:"",indent:0,offset:0};void 0===C&&(C=this.row_),this.topRow_=C-this.rollUpRows_+1},Ei.prototype.addFormatting=function(v,C){this.formatting_=this.formatting_.concat(C);var A=C.reduce(function(I,P){return I+"<"+P+">"},"");this[this.mode_](v,A)},Ei.prototype.clearFormatting=function(v){if(this.formatting_.length){var C=this.formatting_.reverse().reduce(function(A,I){return A+"</"+I+">"},"");this.formatting_=[],this[this.mode_](v,C)}},Ei.prototype.popOn=function(v,C){var A=this.nonDisplayed_[this.row_].text;this.nonDisplayed_[this.row_].text=A+=C},Ei.prototype.rollUp=function(v,C){var A=this.displayed_[this.row_].text;this.displayed_[this.row_].text=A+=C},Ei.prototype.shiftRowsUp_=function(){var v;for(v=0;v<this.topRow_;v++)this.displayed_[v]={text:"",indent:0,offset:0};for(v=this.row_+1;v<15;v++)this.displayed_[v]={text:"",indent:0,offset:0};for(v=this.topRow_;v<this.row_;v++)this.displayed_[v]=this.displayed_[v+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Ei.prototype.paintOn=function(v,C){var A=this.displayed_[this.row_].text;this.displayed_[this.row_].text=A+=C};var AB={CaptionStream:Ha,Cea608Stream:Ei,Cea708Stream:Gr},FI={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},xR=function(v,C){var A=1;for(v>C&&(A=-1);Math.abs(C-v)>4294967296;)v+=8589934592*A;return v},DR=function(v){var C,A;DR.prototype.init.call(this),this.type_=v||"shared",this.push=function(I){"metadata"!==I.type?"shared"!==this.type_&&I.type!==this.type_||(void 0===A&&(A=I.dts),I.dts=xR(I.dts,A),I.pts=xR(I.pts,A),C=I.dts,this.trigger("data",I)):this.trigger("data",I)},this.flush=function(){A=C,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){A=void 0,C=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};DR.prototype=new t;var VI,MB={TimestampRolloverStream:DR,handleRollover:xR},UI=(v,C,A)=>{if(!v)return-1;for(var I=A;I<v.length;I++)if(v[I]===C)return I;return-1},PB=function(v,C,A){var I,P="";for(I=C;I<A;I++)P+="%"+("00"+v[I].toString(16)).slice(-2);return P},vC=function(v,C,A){return decodeURIComponent(PB(v,C,A))},bC=function(v,C,A){return unescape(PB(v,C,A))},TC=function(v){return v[0]<<21|v[1]<<14|v[2]<<7|v[3]},EC={APIC:function(v){var A,I,C=1;3===v.data[0]&&!((A=UI(v.data,0,C))<0)&&(v.mimeType=bC(v.data,C,A),v.pictureType=v.data[C=A+1],C++,!((I=UI(v.data,0,C))<0)&&(v.description=vC(v.data,C,I),C=I+1,"--\x3e"===v.mimeType?v.url=bC(v.data,C,v.data.length):v.pictureData=v.data.subarray(C,v.data.length)))},"T*":function(v){3===v.data[0]&&(v.value=vC(v.data,1,v.data.length).replace(/\0*$/,""),v.values=v.value.split("\0"))},TXXX:function(v){var C;3===v.data[0]&&-1!==(C=UI(v.data,0,1))&&(v.description=vC(v.data,1,C),v.value=vC(v.data,C+1,v.data.length).replace(/\0*$/,""),v.data=v.value)},"W*":function(v){v.url=bC(v.data,0,v.data.length).replace(/\0.*$/,"")},WXXX:function(v){var C;3===v.data[0]&&-1!==(C=UI(v.data,0,1))&&(v.description=vC(v.data,1,C),v.url=bC(v.data,C+1,v.data.length).replace(/\0.*$/,""))},PRIV:function(v){var C;for(C=0;C<v.data.length;C++)if(0===v.data[C]){v.owner=bC(v.data,0,C);break}v.privateData=v.data.subarray(C+1),v.data=v.privateData}},RB={parseId3Frames:function(v){var C,I=10,P=0,O=[];if(!(v.length<10||v[0]!=="I".charCodeAt(0)||v[1]!=="D".charCodeAt(0)||v[2]!=="3".charCodeAt(0))){P=TC(v.subarray(6,10)),P+=10,64&v[5]&&(I+=4,I+=TC(v.subarray(10,14)),P-=TC(v.subarray(16,20)));do{if((C=TC(v.subarray(I+4,I+8)))<1)break;var te={id:String.fromCharCode(v[I],v[I+1],v[I+2],v[I+3]),data:v.subarray(I+10,I+C+10)};te.key=te.id,EC[te.id]?EC[te.id](te):"T"===te.id[0]?EC["T*"](te):"W"===te.id[0]&&EC["W*"](te),O.push(te),I+=10,I+=C}while(I<P);return O}},parseSyncSafeInteger:TC,frameParsers:EC},DK=FI,Cm=RB;VI=function(v){var O,C={descriptor:v&&v.descriptor},A=0,I=[],P=0;if(VI.prototype.init.call(this),this.dispatchType=DK.METADATA_STREAM_TYPE.toString(16),C.descriptor)for(O=0;O<C.descriptor.length;O++)this.dispatchType+=("00"+C.descriptor[O].toString(16)).slice(-2);this.push=function(X){var te,ue,ge,Be,dt;if("timed-metadata"===X.type){if(X.dataAlignmentIndicator&&(P=0,I.length=0),0===I.length&&(X.data.length<10||X.data[0]!=="I".charCodeAt(0)||X.data[1]!=="D".charCodeAt(0)||X.data[2]!=="3".charCodeAt(0)))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(I.push(X),P+=X.data.byteLength,1===I.length&&(A=Cm.parseSyncSafeInteger(X.data.subarray(6,10)),A+=10),!(P<A)){for(te={data:new Uint8Array(A),frames:[],pts:I[0].pts,dts:I[0].dts},dt=0;dt<A;)te.data.set(I[0].data.subarray(0,A-dt),dt),dt+=I[0].data.byteLength,P-=I[0].data.byteLength,I.shift();ue=10,64&te.data[5]&&(ue+=4,ue+=Cm.parseSyncSafeInteger(te.data.subarray(10,14)),A-=Cm.parseSyncSafeInteger(te.data.subarray(16,20)));do{if((ge=Cm.parseSyncSafeInteger(te.data.subarray(ue+4,ue+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if((Be={id:String.fromCharCode(te.data[ue],te.data[ue+1],te.data[ue+2],te.data[ue+3]),data:te.data.subarray(ue+10,ue+ge+10)}).key=Be.id,Cm.frameParsers[Be.id]?Cm.frameParsers[Be.id](Be):"T"===Be.id[0]?Cm.frameParsers["T*"](Be):"W"===Be.id[0]&&Cm.frameParsers["W*"](Be),"com.apple.streaming.transportStreamTimestamp"===Be.owner){var St=Be.data,Cn=(1&St[3])<<30|St[4]<<22|St[5]<<14|St[6]<<6|St[7]>>>2;Cn*=4,Be.timeStamp=Cn+=3&St[7],void 0===te.pts&&void 0===te.dts&&(te.pts=Be.timeStamp,te.dts=Be.timeStamp),this.trigger("timestamp",Be)}te.frames.push(Be),ue+=10,ue+=ge}while(ue<A);this.trigger("data",te)}}}},VI.prototype=new t;var jI,wC,$I,IK=VI,IR=t,AR=AB,Vc=FI,AK=MB.TimestampRolloverStream;jI=function(){var v=new Uint8Array(188),C=0;jI.prototype.init.call(this),this.push=function(A){var O,I=0,P=188;for(C?((O=new Uint8Array(A.byteLength+C)).set(v.subarray(0,C)),O.set(A,C),C=0):O=A;P<O.byteLength;)71!==O[I]||71!==O[P]?(I++,P++):(this.trigger("data",O.subarray(I,P)),I+=188,P+=188);I<O.byteLength&&(v.set(O.subarray(I),0),C=O.byteLength-I)},this.flush=function(){188===C&&71===v[0]&&(this.trigger("data",v),C=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){C=0,this.trigger("reset")}},jI.prototype=new IR,wC=function(){var v,C,A,I;wC.prototype.init.call(this),I=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,v=function(P,O){var X=0;O.payloadUnitStartIndicator&&(X+=P[X]+1),"pat"===O.type?C(P.subarray(X),O):A(P.subarray(X),O)},C=function(P,O){O.section_number=P[7],O.last_section_number=P[8],I.pmtPid=(31&P[10])<<8|P[11],O.pmtPid=I.pmtPid},A=function(P,O){var te,ge;if(1&P[5]){for(I.programMapTable={video:null,audio:null,"timed-metadata":{}},te=3+((15&P[1])<<8|P[2])-4,ge=12+((15&P[10])<<8|P[11]);ge<te;){var Be=P[ge],dt=(31&P[ge+1])<<8|P[ge+2];Be===Vc.H264_STREAM_TYPE&&null===I.programMapTable.video?I.programMapTable.video=dt:Be===Vc.ADTS_STREAM_TYPE&&null===I.programMapTable.audio?I.programMapTable.audio=dt:Be===Vc.METADATA_STREAM_TYPE&&(I.programMapTable["timed-metadata"][dt]=Be),ge+=5+((15&P[ge+3])<<8|P[ge+4])}O.programMapTable=I.programMapTable}},this.push=function(P){var O={},X=4;if(O.payloadUnitStartIndicator=!!(64&P[1]),O.pid=31&P[1],O.pid<<=8,O.pid|=P[2],(48&P[3])>>>4>1&&(X+=P[X]+1),0===O.pid)O.type="pat",v(P.subarray(X),O),this.trigger("data",O);else if(O.pid===this.pmtPid)for(O.type="pmt",v(P.subarray(X),O),this.trigger("data",O);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([P,X,O]):this.processPes_(P,X,O)},this.processPes_=function(P,O,X){X.streamType=X.pid===this.programMapTable.video?Vc.H264_STREAM_TYPE:X.pid===this.programMapTable.audio?Vc.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][X.pid],X.type="pes",X.data=P.subarray(O),this.trigger("data",X)}},wC.prototype=new IR,wC.STREAM_TYPES={h264:27,adts:15},$I=function(){var O,v=this,C=!1,A={data:[],size:0},I={data:[],size:0},P={data:[],size:0},te=function(ue,ge,Be){var Ms,dt=new Uint8Array(ue.size),Gt={type:ge},St=0,Cn=0,On=!1;if(ue.data.length&&!(ue.size<9)){for(Gt.trackId=ue.data[0].pid,St=0;St<ue.data.length;St++)dt.set((Ms=ue.data[St]).data,Cn),Cn+=Ms.data.byteLength;(function(ue,ge){var Be;const dt=ue[0]<<16|ue[1]<<8|ue[2];ge.data=new Uint8Array,1===dt&&(ge.packetLength=6+(ue[4]<<8|ue[5]),ge.dataAlignmentIndicator=0!=(4&ue[6]),192&(Be=ue[7])&&(ge.pts=(14&ue[9])<<27|(255&ue[10])<<20|(254&ue[11])<<12|(255&ue[12])<<5|(254&ue[13])>>>3,ge.pts*=4,ge.pts+=(6&ue[13])>>>1,ge.dts=ge.pts,64&Be&&(ge.dts=(14&ue[14])<<27|(255&ue[15])<<20|(254&ue[16])<<12|(255&ue[17])<<5|(254&ue[18])>>>3,ge.dts*=4,ge.dts+=(6&ue[18])>>>1)),ge.data=ue.subarray(9+ue[8]))})(dt,Gt),On="video"===ge||Gt.packetLength<=ue.size,(Be||On)&&(ue.size=0,ue.data.length=0),On&&v.trigger("data",Gt)}};$I.prototype.init.call(this),this.push=function(ue){({pat:function(){},pes:function(){var ge,Be;switch(ue.streamType){case Vc.H264_STREAM_TYPE:ge=A,Be="video";break;case Vc.ADTS_STREAM_TYPE:ge=I,Be="audio";break;case Vc.METADATA_STREAM_TYPE:ge=P,Be="timed-metadata";break;default:return}ue.payloadUnitStartIndicator&&te(ge,Be,!0),ge.data.push(ue),ge.size+=ue.data.byteLength},pmt:function(){var ge={type:"metadata",tracks:[]};null!==(O=ue.programMapTable).video&&ge.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+O.video,codec:"avc",type:"video"}),null!==O.audio&&ge.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+O.audio,codec:"adts",type:"audio"}),C=!0,v.trigger("data",ge)}})[ue.type]()},this.reset=function(){A.size=0,A.data.length=0,I.size=0,I.data.length=0,this.trigger("reset")},this.flushStreams_=function(){te(A,"video"),te(I,"audio"),te(P,"timed-metadata")},this.flush=function(){if(!C&&O){var ue={type:"metadata",tracks:[]};null!==O.video&&ue.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+O.video,codec:"avc",type:"video"}),null!==O.audio&&ue.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+O.audio,codec:"adts",type:"audio"}),v.trigger("data",ue)}C=!1,this.flushStreams_(),this.trigger("done")}},$I.prototype=new IR;var OB={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:jI,TransportParseStream:wC,ElementaryStream:$I,TimestampRolloverStream:AK,CaptionStream:AR.CaptionStream,Cea608Stream:AR.Cea608Stream,Cea708Stream:AR.Cea708Stream,MetadataStream:IK};for(var MR in Vc)Vc.hasOwnProperty(MR)&&(OB[MR]=Vc[MR]);var HI,kK=OB,PK=pi.ONE_SECOND_IN_TS,NB=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];HI=function(v){var C,A=0;HI.prototype.init.call(this),this.skipWarn_=function(I,P){this.trigger("log",{level:"warn",message:`adts skiping bytes ${I} to ${P} in frame ${A} outside syncword`})},this.push=function(I){var O,X,te,ue,ge,P=0;if(v||(A=0),"audio"===I.type){C&&C.length?(te=C,(C=new Uint8Array(te.byteLength+I.data.byteLength)).set(te),C.set(I.data,te.byteLength)):C=I.data;for(var Be;P+7<C.length;)if(255===C[P]&&240==(246&C[P+1])){if("number"==typeof Be&&(this.skipWarn_(Be,P),Be=null),X=2*(1&~C[P+1]),ge=(ue=1024*(1+(3&C[P+6])))*PK/NB[(60&C[P+2])>>>2],C.byteLength-P<(O=(3&C[P+3])<<11|C[P+4]<<3|(224&C[P+5])>>5))break;this.trigger("data",{pts:I.pts+A*ge,dts:I.dts+A*ge,sampleCount:ue,audioobjecttype:1+(C[P+2]>>>6&3),channelcount:(1&C[P+2])<<2|(192&C[P+3])>>>6,samplerate:NB[(60&C[P+2])>>>2],samplingfrequencyindex:(60&C[P+2])>>>2,samplesize:16,data:C.subarray(P+7+X,P+O)}),A++,P+=O}else"number"!=typeof Be&&(Be=P),P++;"number"==typeof Be&&(this.skipWarn_(Be,P),Be=null),C=C.subarray(P)}},this.flush=function(){A=0,this.trigger("done")},this.reset=function(){C=void 0,this.trigger("reset")},this.endTimeline=function(){C=void 0,this.trigger("endedtimeline")}},HI.prototype=new t;var LB,RK=HI;LB=function(v){var C=v.byteLength,A=0,I=0;this.length=function(){return 8*C},this.bitsAvailable=function(){return 8*C+I},this.loadWord=function(){var P=v.byteLength-C,O=new Uint8Array(4),X=Math.min(4,C);if(0===X)throw new Error("no bytes available");O.set(v.subarray(P,P+X)),A=new DataView(O.buffer).getUint32(0),I=8*X,C-=X},this.skipBits=function(P){var O;I>P?(A<<=P,I-=P):(P-=I,P-=8*(O=Math.floor(P/8)),C-=O,this.loadWord(),A<<=P,I-=P)},this.readBits=function(P){var O=Math.min(I,P),X=A>>>32-O;return(I-=O)>0?A<<=O:C>0&&this.loadWord(),(O=P-O)>0?X<<O|this.readBits(O):X},this.skipLeadingZeros=function(){var P;for(P=0;P<I;++P)if(0!=(A&2147483648>>>P))return A<<=P,I-=P,P;return this.loadWord(),P+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var P=this.skipLeadingZeros();return this.readBits(P+1)-1},this.readExpGolomb=function(){var P=this.readUnsignedExpGolomb();return 1&P?1+P>>>1:-1*(P>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var qI,CC,UB,FB=t,NK=LB;CC=function(){var C,A,v=0;CC.prototype.init.call(this),this.push=function(I){var P;A?((P=new Uint8Array(A.byteLength+I.data.byteLength)).set(A),P.set(I.data,A.byteLength),A=P):A=I.data;for(var O=A.byteLength;v<O-3;v++)if(1===A[v+2]){C=v+5;break}for(;C<O;)switch(A[C]){case 0:if(0!==A[C-1]){C+=2;break}if(0!==A[C-2]){C++;break}v+3!==C-2&&this.trigger("data",A.subarray(v+3,C-2));do{C++}while(1!==A[C]&&C<O);v=C-2,C+=3;break;case 1:if(0!==A[C-1]||0!==A[C-2]){C+=3;break}this.trigger("data",A.subarray(v+3,C-2)),v=C-2,C+=3;break;default:C+=3}A=A.subarray(v),C-=v,v=0},this.reset=function(){A=null,v=0,this.trigger("reset")},this.flush=function(){A&&A.byteLength>3&&this.trigger("data",A.subarray(v+3)),A=null,v=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},CC.prototype=new FB,UB={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},qI=function(){var C,A,I,P,O,X,te,v=new CC;qI.prototype.init.call(this),C=this,this.push=function(ue){"video"===ue.type&&(A=ue.trackId,I=ue.pts,P=ue.dts,v.push(ue))},v.on("data",function(ue){var ge={trackId:A,pts:I,dts:P,data:ue,nalUnitTypeCode:31&ue[0]};switch(ge.nalUnitTypeCode){case 5:ge.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:ge.nalUnitType="sei_rbsp",ge.escapedRBSP=O(ue.subarray(1));break;case 7:ge.nalUnitType="seq_parameter_set_rbsp",ge.escapedRBSP=O(ue.subarray(1)),ge.config=X(ge.escapedRBSP);break;case 8:ge.nalUnitType="pic_parameter_set_rbsp";break;case 9:ge.nalUnitType="access_unit_delimiter_rbsp"}C.trigger("data",ge)}),v.on("done",function(){C.trigger("done")}),v.on("partialdone",function(){C.trigger("partialdone")}),v.on("reset",function(){C.trigger("reset")}),v.on("endedtimeline",function(){C.trigger("endedtimeline")}),this.flush=function(){v.flush()},this.partialFlush=function(){v.partialFlush()},this.reset=function(){v.reset()},this.endTimeline=function(){v.endTimeline()},te=function(ue,ge){var Gt,Be=8,dt=8;for(Gt=0;Gt<ue;Gt++)0!==dt&&(dt=(Be+ge.readExpGolomb()+256)%256),Be=0===dt?Be:dt},O=function(ue){for(var Gt,St,ge=ue.byteLength,Be=[],dt=1;dt<ge-2;)0===ue[dt]&&0===ue[dt+1]&&3===ue[dt+2]?(Be.push(dt+2),dt+=2):dt++;if(0===Be.length)return ue;Gt=ge-Be.length,St=new Uint8Array(Gt);var Cn=0;for(dt=0;dt<Gt;Cn++,dt++)Cn===Be[0]&&(Cn++,Be.shift()),St[dt]=ue[Cn];return St},X=function(ue){var St,Cn,On,Ms,Ol,Fy,h6,f6,p6,$R,g6,Uy,ge=0,Be=0,dt=0,Gt=0,ns=[1,1];if(Cn=(St=new NK(ue)).readUnsignedByte(),Ms=St.readUnsignedByte(),On=St.readUnsignedByte(),St.skipUnsignedExpGolomb(),UB[Cn]&&(3===(Ol=St.readUnsignedExpGolomb())&&St.skipBits(1),St.skipUnsignedExpGolomb(),St.skipUnsignedExpGolomb(),St.skipBits(1),St.readBoolean()))for(g6=3!==Ol?8:12,Uy=0;Uy<g6;Uy++)St.readBoolean()&&te(Uy<6?16:64,St);if(St.skipUnsignedExpGolomb(),0===(Fy=St.readUnsignedExpGolomb()))St.readUnsignedExpGolomb();else if(1===Fy)for(St.skipBits(1),St.skipExpGolomb(),St.skipExpGolomb(),h6=St.readUnsignedExpGolomb(),Uy=0;Uy<h6;Uy++)St.skipExpGolomb();if(St.skipUnsignedExpGolomb(),St.skipBits(1),f6=St.readUnsignedExpGolomb(),p6=St.readUnsignedExpGolomb(),0===($R=St.readBits(1))&&St.skipBits(1),St.skipBits(1),St.readBoolean()&&(ge=St.readUnsignedExpGolomb(),Be=St.readUnsignedExpGolomb(),dt=St.readUnsignedExpGolomb(),Gt=St.readUnsignedExpGolomb()),St.readBoolean()&&St.readBoolean())switch(St.readUnsignedByte()){case 1:ns=[1,1];break;case 2:ns=[12,11];break;case 3:ns=[10,11];break;case 4:ns=[16,11];break;case 5:ns=[40,33];break;case 6:ns=[24,11];break;case 7:ns=[20,11];break;case 8:ns=[32,11];break;case 9:ns=[80,33];break;case 10:ns=[18,11];break;case 11:ns=[15,11];break;case 12:ns=[64,33];break;case 13:ns=[160,99];break;case 14:ns=[4,3];break;case 15:ns=[3,2];break;case 16:ns=[2,1];break;case 255:ns=[St.readUnsignedByte()<<8|St.readUnsignedByte(),St.readUnsignedByte()<<8|St.readUnsignedByte()]}return{profileIdc:Cn,levelIdc:On,profileCompatibility:Ms,width:16*(f6+1)-2*ge-2*Be,height:(2-$R)*(p6+1)*16-2*dt-2*Gt,sarRatio:ns}}},qI.prototype=new FB;var GI,LK={H264Stream:qI,NalByteStream:CC},FK=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],BB=function(v,C){var A=v[C+6]<<21|v[C+7]<<14|v[C+8]<<7|v[C+9];return A=A>=0?A:0,(16&v[C+5])>>4?A+20:A+10},VB=function(v,C){return v.length-C<10||v[C]!=="I".charCodeAt(0)||v[C+1]!=="D".charCodeAt(0)||v[C+2]!=="3".charCodeAt(0)?C:(C+=BB(v,C),VB(v,C))},jB=function(v){return v[0]<<21|v[1]<<14|v[2]<<7|v[3]},VK=function(v,C,A){return unescape(function(v,C,A){var I,P="";for(I=C;I<A;I++)P+="%"+("00"+v[I].toString(16)).slice(-2);return P}(v,C,A))},PR={isLikelyAacData:function(v){var C=VB(v,0);return v.length>=C+2&&255==(255&v[C])&&240==(240&v[C+1])&&16==(22&v[C+1])},parseId3TagSize:BB,parseAdtsSize:function(v,C){return 6144&v[C+3]|v[C+4]<<3|(224&v[C+5])>>5},parseType:function(v,C){return v[C]==="I".charCodeAt(0)&&v[C+1]==="D".charCodeAt(0)&&v[C+2]==="3".charCodeAt(0)?"timed-metadata":!0&v[C]&&240==(240&v[C+1])?"audio":null},parseSampleRate:function(v){for(var C=0;C+5<v.length;){if(255===v[C]&&240==(246&v[C+1]))return FK[(60&v[C+2])>>>2];C++}return null},parseAacTimestamp:function(v){var C,A,I;C=10,64&v[5]&&(C+=4,C+=jB(v.subarray(10,14)));do{if((A=jB(v.subarray(C+4,C+8)))<1)return null;if("PRIV"===String.fromCharCode(v[C],v[C+1],v[C+2],v[C+3])){I=v.subarray(C+10,C+A+10);for(var O=0;O<I.byteLength;O++)if(0===I[O]){if("com.apple.streaming.transportStreamTimestamp"===VK(I,0,O)){var te=I.subarray(O+1),ue=(1&te[3])<<30|te[4]<<22|te[5]<<14|te[6]<<6|te[7]>>>2;return(ue*=4)+(3&te[7])}break}}C+=10,C+=A}while(C<v.byteLength);return null}},$B=PR;GI=function(){var v=new Uint8Array,C=0;GI.prototype.init.call(this),this.setTimestamp=function(A){C=A},this.push=function(A){var X,te,ue,I=0,P=0;for(v.length?(ue=v.length,(v=new Uint8Array(A.byteLength+ue)).set(v.subarray(0,ue)),v.set(A,ue)):v=A;v.length-P>=3;)if(v[P]!=="I".charCodeAt(0)||v[P+1]!=="D".charCodeAt(0)||v[P+2]!=="3".charCodeAt(0))if(255!=(255&v[P])||240!=(240&v[P+1]))P++;else{if(v.length-P<7||P+(I=$B.parseAdtsSize(v,P))>v.length)break;te={type:"audio",data:v.subarray(P,P+I),pts:C,dts:C},this.trigger("data",te),P+=I}else{if(v.length-P<10||P+(I=$B.parseId3TagSize(v,P))>v.length)break;X={type:"timed-metadata",data:v.subarray(P,P+I)},this.trigger("data",X),P+=I}v=v.length-P>0?v.subarray(P):new Uint8Array},this.reset=function(){v=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){v=new Uint8Array,this.trigger("endedtimeline")}},GI.prototype=new t;var DC,Ob,ZI,Ny,zI=t,SC=pC,xC=vR,WI=sK,jc=cK,gp=kK,KI=pi,HB=RK,QK=LK.H264Stream,XK=GI,JK=PR.isLikelyAacData,eZ=pi.ONE_SECOND_IN_TS,RR=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],OR=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],tZ=function(v,C){C.stream=v,this.trigger("log",C)},qB=function(v,C){for(var A=Object.keys(C),I=0;I<A.length;I++){var P=A[I];"headOfPipeline"===P||!C[P].on||C[P].on("log",tZ.bind(v,P))}},GB=function(v,C){var A;if(v.length!==C.length)return!1;for(A=0;A<v.length;A++)if(v[A]!==C[A])return!1;return!0},NR=function(v,C,A,I,P,O){return{start:{dts:v,pts:v+(A-C)},end:{dts:v+(I-C),pts:v+(P-A)},prependedContentDuration:O,baseMediaDecodeTime:v}};Ob=function(v,C){var I,A=[],P=0,O=0,X=1/0;I=(C=C||{}).firstSequenceNumber||0,Ob.prototype.init.call(this),this.push=function(te){jc.collectDtsInfo(v,te),v&&RR.forEach(function(ue){v[ue]=te[ue]}),A.push(te)},this.setEarliestDts=function(te){P=te},this.setVideoBaseMediaDecodeTime=function(te){X=te},this.setAudioAppendStart=function(te){O=te},this.flush=function(){var te,ue,ge,Be,dt,Gt,St;0!==A.length?(te=WI.trimAdtsFramesByEarliestDts(A,v,P),v.baseMediaDecodeTime=jc.calculateTrackBaseMediaDecodeTime(v,C.keepOriginalTimestamps),St=WI.prefixWithSilence(v,te,O,X),v.samples=WI.generateSampleTable(te),ge=SC.mdat(WI.concatenateFrameData(te)),A=[],ue=SC.moof(I,[v]),Be=new Uint8Array(ue.byteLength+ge.byteLength),I++,Be.set(ue),Be.set(ge,ue.byteLength),jc.clearDtsInfo(v),dt=Math.ceil(1024*eZ/v.samplerate),te.length&&(Gt=te.length*dt,this.trigger("segmentTimingInfo",NR(KI.audioTsToVideoTs(v.baseMediaDecodeTime,v.samplerate),te[0].dts,te[0].pts,te[0].dts+Gt,te[0].pts+Gt,St||0)),this.trigger("timingInfo",{start:te[0].pts,end:te[0].pts+Gt})),this.trigger("data",{track:v,boxes:Be}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){jc.clearDtsInfo(v),A=[],this.trigger("reset")}},Ob.prototype=new zI,DC=function(v,C){var A,O,X,I=[],P=[];A=(C=C||{}).firstSequenceNumber||0,DC.prototype.init.call(this),delete v.minPTS,this.gopCache_=[],this.push=function(te){jc.collectDtsInfo(v,te),"seq_parameter_set_rbsp"===te.nalUnitType&&!O&&(O=te.config,v.sps=[te.data],OR.forEach(function(ue){v[ue]=O[ue]},this)),"pic_parameter_set_rbsp"===te.nalUnitType&&!X&&(X=te.data,v.pps=[te.data]),I.push(te)},this.flush=function(){for(var te,ue,ge,Be,dt,Gt,Cn,On,St=0;I.length&&"access_unit_delimiter_rbsp"!==I[0].nalUnitType;)I.shift();if(0===I.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(te=xC.groupNalsIntoFrames(I),(ge=xC.groupFramesIntoGops(te))[0][0].keyFrame||((ue=this.getGopForFusion_(I[0],v))?(St=ue.duration,ge.unshift(ue),ge.byteLength+=ue.byteLength,ge.nalCount+=ue.nalCount,ge.pts=ue.pts,ge.dts=ue.dts,ge.duration+=ue.duration):ge=xC.extendFirstKeyFrame(ge)),P.length){var Ms;if(!(Ms=C.alignGopsAtEnd?this.alignGopsAtEnd_(ge):this.alignGopsAtStart_(ge)))return this.gopCache_.unshift({gop:ge.pop(),pps:v.pps,sps:v.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),I=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");jc.clearDtsInfo(v),ge=Ms}jc.collectDtsInfo(v,ge),v.samples=xC.generateSampleTable(ge),dt=SC.mdat(xC.concatenateNalData(ge)),v.baseMediaDecodeTime=jc.calculateTrackBaseMediaDecodeTime(v,C.keepOriginalTimestamps),this.trigger("processedGopsInfo",ge.map(function(Ol){return{pts:Ol.pts,dts:Ol.dts,byteLength:Ol.byteLength}})),this.trigger("segmentTimingInfo",NR(v.baseMediaDecodeTime,(Cn=ge[0]).dts,Cn.pts,(On=ge[ge.length-1]).dts+On.duration,On.pts+On.duration,St)),this.trigger("timingInfo",{start:ge[0].pts,end:ge[ge.length-1].pts+ge[ge.length-1].duration}),this.gopCache_.unshift({gop:ge.pop(),pps:v.pps,sps:v.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),I=[],this.trigger("baseMediaDecodeTime",v.baseMediaDecodeTime),this.trigger("timelineStartInfo",v.timelineStartInfo),Be=SC.moof(A,[v]),Gt=new Uint8Array(Be.byteLength+dt.byteLength),A++,Gt.set(Be),Gt.set(dt,Be.byteLength),this.trigger("data",{track:v,boxes:Gt}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),I=[],this.gopCache_.length=0,P.length=0,this.trigger("reset")},this.resetStream_=function(){jc.clearDtsInfo(v),O=void 0,X=void 0},this.getGopForFusion_=function(te){var dt,Gt,St,Cn,On,Be=1/0;for(On=0;On<this.gopCache_.length;On++)St=(Cn=this.gopCache_[On]).gop,v.pps&&GB(v.pps[0],Cn.pps[0])&&v.sps&&GB(v.sps[0],Cn.sps[0])&&(St.dts<v.timelineStartInfo.dts||(dt=te.dts-St.dts-St.duration)>=-1e4&&dt<=45e3&&(!Gt||Be>dt)&&(Gt=Cn,Be=dt));return Gt?Gt.gop:null},this.alignGopsAtStart_=function(te){var ue,ge,Be,dt,Gt,St,Cn,On;for(Gt=te.byteLength,St=te.nalCount,Cn=te.duration,ue=ge=0;ue<P.length&&ge<te.length&&(Be=P[ue]).pts!==(dt=te[ge]).pts;)dt.pts>Be.pts?ue++:(ge++,Gt-=dt.byteLength,St-=dt.nalCount,Cn-=dt.duration);return 0===ge?te:ge===te.length?null:((On=te.slice(ge)).byteLength=Gt,On.duration=Cn,On.nalCount=St,On.pts=On[0].pts,On.dts=On[0].dts,On)},this.alignGopsAtEnd_=function(te){var ue,ge,Be,dt,Gt,St,Cn;for(ue=P.length-1,ge=te.length-1,Gt=null,St=!1;ue>=0&&ge>=0;){if((Be=P[ue]).pts===(dt=te[ge]).pts){St=!0;break}Be.pts>dt.pts?ue--:(ue===P.length-1&&(Gt=ge),ge--)}if(!St&&null===Gt)return null;if(0===(Cn=St?ge:Gt))return te;var On=te.slice(Cn),Ms=On.reduce(function(Ol,Fy){return Ol.byteLength+=Fy.byteLength,Ol.duration+=Fy.duration,Ol.nalCount+=Fy.nalCount,Ol},{byteLength:0,duration:0,nalCount:0});return On.byteLength=Ms.byteLength,On.duration=Ms.duration,On.nalCount=Ms.nalCount,On.pts=On[0].pts,On.dts=On[0].dts,On},this.alignGopsWith=function(te){P=te}},DC.prototype=new zI,Ny=function(v,C){this.numberOfTracks=0,this.metadataStream=C,this.remuxTracks=void 0===(v=v||{}).remux||!!v.remux,this.keepOriginalTimestamps="boolean"==typeof v.keepOriginalTimestamps&&v.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Ny.prototype.init.call(this),this.push=function(A){return A.content||A.text?this.pendingCaptions.push(A):A.frames?this.pendingMetadata.push(A):(this.pendingTracks.push(A.track),this.pendingBytes+=A.boxes.byteLength,"video"===A.track.type&&(this.videoTrack=A.track,this.pendingBoxes.push(A.boxes)),void("audio"===A.track.type&&(this.audioTrack=A.track,this.pendingBoxes.unshift(A.boxes))))}},Ny.prototype=new zI,Ny.prototype.flush=function(v){var I,P,O,te,C=0,A={captions:[],captionStreams:{},metadata:[],info:{}},X=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==v&&"AudioSegmentStream"!==v)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(X=this.videoTrack.timelineStartInfo.pts,OR.forEach(function(ue){A.info[ue]=this.videoTrack[ue]},this)):this.audioTrack&&(X=this.audioTrack.timelineStartInfo.pts,RR.forEach(function(ue){A.info[ue]=this.audioTrack[ue]},this)),this.videoTrack||this.audioTrack){for(A.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,O=SC.initSegment(this.pendingTracks),A.initSegment=new Uint8Array(O.byteLength),A.initSegment.set(O),A.data=new Uint8Array(this.pendingBytes),te=0;te<this.pendingBoxes.length;te++)A.data.set(this.pendingBoxes[te],C),C+=this.pendingBoxes[te].byteLength;for(te=0;te<this.pendingCaptions.length;te++)(I=this.pendingCaptions[te]).startTime=KI.metadataTsToSeconds(I.startPts,X,this.keepOriginalTimestamps),I.endTime=KI.metadataTsToSeconds(I.endPts,X,this.keepOriginalTimestamps),A.captionStreams[I.stream]=!0,A.captions.push(I);for(te=0;te<this.pendingMetadata.length;te++)(P=this.pendingMetadata[te]).cueTime=KI.metadataTsToSeconds(P.pts,X,this.keepOriginalTimestamps),A.metadata.push(P);for(A.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",A),te=0;te<A.captions.length;te++)this.trigger("caption",I=A.captions[te]);for(te=0;te<A.metadata.length;te++)this.trigger("id3Frame",P=A.metadata[te])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Ny.prototype.setRemux=function(v){this.remuxTracks=v},ZI=function(v){var I,P,C=this,A=!0;ZI.prototype.init.call(this),this.baseMediaDecodeTime=(v=v||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var O={};this.transmuxPipeline_=O,O.type="aac",O.metadataStream=new gp.MetadataStream,O.aacStream=new XK,O.audioTimestampRolloverStream=new gp.TimestampRolloverStream("audio"),O.timedMetadataTimestampRolloverStream=new gp.TimestampRolloverStream("timed-metadata"),O.adtsStream=new HB,O.coalesceStream=new Ny(v,O.metadataStream),O.headOfPipeline=O.aacStream,O.aacStream.pipe(O.audioTimestampRolloverStream).pipe(O.adtsStream),O.aacStream.pipe(O.timedMetadataTimestampRolloverStream).pipe(O.metadataStream).pipe(O.coalesceStream),O.metadataStream.on("timestamp",function(X){O.aacStream.setTimestamp(X.timeStamp)}),O.aacStream.on("data",function(X){"timed-metadata"!==X.type&&"audio"!==X.type||O.audioSegmentStream||(P=P||{timelineStartInfo:{baseMediaDecodeTime:C.baseMediaDecodeTime},codec:"adts",type:"audio"},O.coalesceStream.numberOfTracks++,O.audioSegmentStream=new Ob(P,v),O.audioSegmentStream.on("log",C.getLogTrigger_("audioSegmentStream")),O.audioSegmentStream.on("timingInfo",C.trigger.bind(C,"audioTimingInfo")),O.adtsStream.pipe(O.audioSegmentStream).pipe(O.coalesceStream),C.trigger("trackinfo",{hasAudio:!!P,hasVideo:!!I}))}),O.coalesceStream.on("data",this.trigger.bind(this,"data")),O.coalesceStream.on("done",this.trigger.bind(this,"done")),qB(this,O)},this.setupTsPipeline=function(){var O={};this.transmuxPipeline_=O,O.type="ts",O.metadataStream=new gp.MetadataStream,O.packetStream=new gp.TransportPacketStream,O.parseStream=new gp.TransportParseStream,O.elementaryStream=new gp.ElementaryStream,O.timestampRolloverStream=new gp.TimestampRolloverStream,O.adtsStream=new HB,O.h264Stream=new QK,O.captionStream=new gp.CaptionStream(v),O.coalesceStream=new Ny(v,O.metadataStream),O.headOfPipeline=O.packetStream,O.packetStream.pipe(O.parseStream).pipe(O.elementaryStream).pipe(O.timestampRolloverStream),O.timestampRolloverStream.pipe(O.h264Stream),O.timestampRolloverStream.pipe(O.adtsStream),O.timestampRolloverStream.pipe(O.metadataStream).pipe(O.coalesceStream),O.h264Stream.pipe(O.captionStream).pipe(O.coalesceStream),O.elementaryStream.on("data",function(X){var te;if("metadata"===X.type){for(te=X.tracks.length;te--;)I||"video"!==X.tracks[te].type?!P&&"audio"===X.tracks[te].type&&((P=X.tracks[te]).timelineStartInfo.baseMediaDecodeTime=C.baseMediaDecodeTime):(I=X.tracks[te]).timelineStartInfo.baseMediaDecodeTime=C.baseMediaDecodeTime;I&&!O.videoSegmentStream&&(O.coalesceStream.numberOfTracks++,O.videoSegmentStream=new DC(I,v),O.videoSegmentStream.on("log",C.getLogTrigger_("videoSegmentStream")),O.videoSegmentStream.on("timelineStartInfo",function(ue){P&&!v.keepOriginalTimestamps&&(P.timelineStartInfo=ue,O.audioSegmentStream.setEarliestDts(ue.dts-C.baseMediaDecodeTime))}),O.videoSegmentStream.on("processedGopsInfo",C.trigger.bind(C,"gopInfo")),O.videoSegmentStream.on("segmentTimingInfo",C.trigger.bind(C,"videoSegmentTimingInfo")),O.videoSegmentStream.on("baseMediaDecodeTime",function(ue){P&&O.audioSegmentStream.setVideoBaseMediaDecodeTime(ue)}),O.videoSegmentStream.on("timingInfo",C.trigger.bind(C,"videoTimingInfo")),O.h264Stream.pipe(O.videoSegmentStream).pipe(O.coalesceStream)),P&&!O.audioSegmentStream&&(O.coalesceStream.numberOfTracks++,O.audioSegmentStream=new Ob(P,v),O.audioSegmentStream.on("log",C.getLogTrigger_("audioSegmentStream")),O.audioSegmentStream.on("timingInfo",C.trigger.bind(C,"audioTimingInfo")),O.audioSegmentStream.on("segmentTimingInfo",C.trigger.bind(C,"audioSegmentTimingInfo")),O.adtsStream.pipe(O.audioSegmentStream).pipe(O.coalesceStream)),C.trigger("trackinfo",{hasAudio:!!P,hasVideo:!!I})}}),O.coalesceStream.on("data",this.trigger.bind(this,"data")),O.coalesceStream.on("id3Frame",function(X){X.dispatchType=O.metadataStream.dispatchType,C.trigger("id3Frame",X)}),O.coalesceStream.on("caption",this.trigger.bind(this,"caption")),O.coalesceStream.on("done",this.trigger.bind(this,"done")),qB(this,O)},this.setBaseMediaDecodeTime=function(O){var X=this.transmuxPipeline_;v.keepOriginalTimestamps||(this.baseMediaDecodeTime=O),P&&(P.timelineStartInfo.dts=void 0,P.timelineStartInfo.pts=void 0,jc.clearDtsInfo(P),X.audioTimestampRolloverStream&&X.audioTimestampRolloverStream.discontinuity()),I&&(X.videoSegmentStream&&(X.videoSegmentStream.gopCache_=[]),I.timelineStartInfo.dts=void 0,I.timelineStartInfo.pts=void 0,jc.clearDtsInfo(I),X.captionStream.reset()),X.timestampRolloverStream&&X.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(O){P&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(O)},this.setRemux=function(O){var X=this.transmuxPipeline_;v.remux=O,X&&X.coalesceStream&&X.coalesceStream.setRemux(O)},this.alignGopsWith=function(O){I&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(O)},this.getLogTrigger_=function(O){var X=this;return function(te){te.stream=O,X.trigger("log",te)}},this.push=function(O){if(A){var X=JK(O);X&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():!X&&"ts"!==this.transmuxPipeline_.type&&this.setupTsPipeline(),A=!1}this.transmuxPipeline_.headOfPipeline.push(O)},this.flush=function(){A=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},ZI.prototype=new zI;var IC,r6,o6,FR,a6,nZ={Transmuxer:ZI,VideoSegmentStream:DC,AudioSegmentStream:Ob,AUDIO_PROPERTIES:RR,VIDEO_PROPERTIES:OR,generateSegmentTimingInfo:NR},YI_toUnsigned=function(v){return v>>>0},zB=function(v){var C="";return C+=String.fromCharCode(v[0]),C+=String.fromCharCode(v[1]),(C+=String.fromCharCode(v[2]))+String.fromCharCode(v[3])},oZ=YI_toUnsigned,aZ=zB,WB=function(v,C){var I,P,O,X,te,A=[];if(!C.length)return null;for(I=0;I<v.byteLength;)P=oZ(v[I]<<24|v[I+1]<<16|v[I+2]<<8|v[I+3]),O=aZ(v.subarray(I+4,I+8)),X=P>1?I+P:v.byteLength,O===C[0]&&(1===C.length?A.push(v.subarray(I+8,X)):(te=WB(v.subarray(I+8,X),C.slice(1))).length&&(A=A.concat(te))),I=X;return A},uZ=YI_toUnsigned,lZ=s.getUint64,ZB=function(v){var C={version:v[0],flags:new Uint8Array(v.subarray(1,4))};return C.baseMediaDecodeTime=1===C.version?lZ(v.subarray(4)):uZ(v[4]<<24|v[5]<<16|v[6]<<8|v[7]),C},YB=function(v){return{isLeading:(12&v[0])>>>2,dependsOn:3&v[0],isDependedOn:(192&v[1])>>>6,hasRedundancy:(48&v[1])>>>4,paddingValue:(14&v[1])>>>1,isNonSyncSample:1&v[1],degradationPriority:v[2]<<8|v[3]}},QB=function(v){var dt,C={version:v[0],flags:new Uint8Array(v.subarray(1,4)),samples:[]},A=new DataView(v.buffer,v.byteOffset,v.byteLength),I=1&C.flags[2],P=4&C.flags[2],O=1&C.flags[1],X=2&C.flags[1],te=4&C.flags[1],ue=8&C.flags[1],ge=A.getUint32(4),Be=8;for(I&&(C.dataOffset=A.getInt32(Be),Be+=4),P&&ge&&(dt={flags:YB(v.subarray(Be,Be+4))},Be+=4,O&&(dt.duration=A.getUint32(Be),Be+=4),X&&(dt.size=A.getUint32(Be),Be+=4),ue&&(dt.compositionTimeOffset=1===C.version?A.getInt32(Be):A.getUint32(Be),Be+=4),C.samples.push(dt),ge--);ge--;)dt={},O&&(dt.duration=A.getUint32(Be),Be+=4),X&&(dt.size=A.getUint32(Be),Be+=4),te&&(dt.flags=YB(v.subarray(Be,Be+4)),Be+=4),ue&&(dt.compositionTimeOffset=1===C.version?A.getInt32(Be):A.getUint32(Be),Be+=4),C.samples.push(dt);return C},XB=function(v){var Be,C=new DataView(v.buffer,v.byteOffset,v.byteLength),A={version:v[0],flags:new Uint8Array(v.subarray(1,4)),trackId:C.getUint32(4)},I=1&A.flags[2],P=2&A.flags[2],O=8&A.flags[2],X=16&A.flags[2],te=32&A.flags[2],ue=65536&A.flags[0],ge=131072&A.flags[0];return Be=8,I&&(Be+=4,A.baseDataOffset=C.getUint32(12),Be+=4),P&&(A.sampleDescriptionIndex=C.getUint32(Be),Be+=4),O&&(A.defaultSampleDuration=C.getUint32(Be),Be+=4),X&&(A.defaultSampleSize=C.getUint32(Be),Be+=4),te&&(A.defaultSampleFlags=C.getUint32(Be)),ue&&(A.durationIsEmpty=!0),!I&&ge&&(A.baseDataOffsetIsMoof=!0),A},gZ=(IC="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},IB.discardEmulationPreventionBytes),mZ=AB.CaptionStream,AC=WB,_Z=ZB,yZ=QB,vZ=XB,e6=IC,bZ=function(v,C){for(var A=v,I=0;I<C.length;I++){var P=C[I];if(A<P.size)return P;A-=P.size}return null},xZ=function(){var C,A,I,P,O,X,v=!1;this.isInitialized=function(){return v},this.init=function(te){C=new mZ,v=!0,X=!!te&&te.isPartial,C.on("data",function(ue){ue.startTime=ue.startPts/P,ue.endTime=ue.endPts/P,O.captions.push(ue),O.captionStreams[ue.stream]=!0}),C.on("log",function(ue){O.logs.push(ue)})},this.isNewInit=function(te,ue){return!(te&&0===te.length||ue&&"object"==typeof ue&&0===Object.keys(ue).length||I===te[0]&&P===ue[I])},this.parse=function(te,ue,ge){var Be;if(!this.isInitialized())return null;if(!ue||!ge)return null;if(this.isNewInit(ue,ge))P=ge[I=ue[0]];else if(null===I||!P)return A.push(te),null;for(;A.length>0;){var dt=A.shift();this.parse(dt,ue,ge)}return Be=function(v,C,A){if(null===C)return null;var P=function(v,C){var A=AC(v,["moof","traf"]),I=AC(v,["mdat"]),P={},O=[];return I.forEach(function(X,te){O.push({mdat:X,traf:A[te]})}),O.forEach(function(X){var On,Ms,te=X.mdat,ue=X.traf,ge=AC(ue,["tfhd"]),Be=vZ(ge[0]),dt=Be.trackId,Gt=AC(ue,["tfdt"]),St=Gt.length>0?_Z(Gt[0]).baseMediaDecodeTime:0,Cn=AC(ue,["trun"]);C===dt&&Cn.length>0&&(On=function(v,C,A){var I=C,P=A.defaultSampleDuration||0,O=A.defaultSampleSize||0,X=A.trackId,te=[];return v.forEach(function(ue){var Be=yZ(ue).samples;Be.forEach(function(dt){void 0===dt.duration&&(dt.duration=P),void 0===dt.size&&(dt.size=O),dt.trackId=X,dt.dts=I,void 0===dt.compositionTimeOffset&&(dt.compositionTimeOffset=0),"bigint"==typeof I?(dt.pts=I+e6.BigInt(dt.compositionTimeOffset),I+=e6.BigInt(dt.duration)):(dt.pts=I+dt.compositionTimeOffset,I+=dt.duration)}),te=te.concat(Be)}),te}(Cn,St,Be),Ms=function(v,C,A){var O,X,te,ue,I=new DataView(v.buffer,v.byteOffset,v.byteLength),P={logs:[],seiNals:[]};for(X=0;X+4<v.length;X+=te)if(te=I.getUint32(X),X+=4,!(te<=0))switch(31&v[X]){case 6:var ge=v.subarray(X+1,X+1+te),Be=bZ(X,C);if(O={nalUnitType:"sei_rbsp",size:te,data:ge,escapedRBSP:gZ(ge),trackId:A},Be)O.pts=Be.pts,O.dts=Be.dts,ue=Be;else{if(!ue){P.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+X+" for trackId "+A+". See mux.js#223."});break}O.pts=ue.pts,O.dts=ue.dts}P.seiNals.push(O)}return P}(te,On,dt),P[dt]||(P[dt]={seiNals:[],logs:[]}),P[dt].seiNals=P[dt].seiNals.concat(Ms.seiNals),P[dt].logs=P[dt].logs.concat(Ms.logs))}),P}(v,C)[C]||{};return{seiNals:P.seiNals,logs:P.logs,timescale:A}}(te,I,P),Be&&Be.logs&&(O.logs=O.logs.concat(Be.logs)),null!==Be&&Be.seiNals?(this.pushNals(Be.seiNals),this.flushStream(),O):O.logs.length?{logs:O.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(te){if(!this.isInitialized()||!te||0===te.length)return null;te.forEach(function(ue){C.push(ue)})},this.flushStream=function(){if(!this.isInitialized())return null;X?C.partialFlush():C.flush()},this.clearParsedCaptions=function(){O.captions=[],O.captionStreams={},O.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;C.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){A=[],I=null,P=null,O?this.clearParsedCaptions():O={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},QI=function(v){for(var C=0,A=String.fromCharCode(v[C]),I="";"\0"!==A;)I+=A,C++,A=String.fromCharCode(v[C]);return I+A},AZ=s.getUint64,t6=function(v){return void 0!==v||null!==v},RZ={parseEmsgBox:function(v){var I,P,O,X,te,ue,ge,C=4,A=v[0];if(0===A)C+=(I=QI(v.subarray(C))).length,C+=(P=QI(v.subarray(C))).length,O=(dt=new DataView(v.buffer)).getUint32(C),te=dt.getUint32(C+=4),ue=dt.getUint32(C+=4),ge=dt.getUint32(C+=4),C+=4;else if(1===A){var dt;O=(dt=new DataView(v.buffer)).getUint32(C),X=AZ(v.subarray(C+=4)),ue=dt.getUint32(C+=8),ge=dt.getUint32(C+=4),C+=4,C+=(I=QI(v.subarray(C))).length,C+=(P=QI(v.subarray(C))).length}var Gt={scheme_id_uri:I,value:P,timescale:O||1,presentation_time:X,presentation_time_delta:te,event_duration:ue,id:ge,message_data:new Uint8Array(v.subarray(C,v.byteLength))};return function(v,C){var A="\0"!==C.scheme_id_uri,I=0===v&&t6(C.presentation_time_delta)&&A,P=1===v&&t6(C.presentation_time)&&A;return!(v>1)&&I||P}(A,Gt)?Gt:void 0},scaleTime:function(v,C,A,I){return v||0===v?v/C:I+A/C}},XI=YI_toUnsigned,kC=function(v){return("00"+v.toString(16)).slice(-2)},ts=WB,Nb=zB,LR=RZ,FZ=s.getUint64,UR=IC,UZ=RB.parseId3Frames;r6=function(v,C){var I=ts(C,["moof","traf"]).reduce(function(P,O){var dt,X=ts(O,["tfhd"])[0],te=XI(X[4]<<24|X[5]<<16|X[6]<<8|X[7]),ue=v[te]||9e4,ge=ts(O,["tfdt"])[0],Be=new DataView(ge.buffer,ge.byteOffset,ge.byteLength);let Gt;return"bigint"==typeof(dt=1===ge[0]?FZ(ge.subarray(4,12)):Be.getUint32(4))?Gt=dt/UR.BigInt(ue):"number"==typeof dt&&!isNaN(dt)&&(Gt=dt/ue),Gt<Number.MAX_SAFE_INTEGER&&(Gt=Number(Gt)),Gt<P&&(P=Gt),P},1/0);return"bigint"==typeof I||isFinite(I)?I:0},FR=function(v){var A=0===v[0]?12:20;return XI(v[A]<<24|v[A+1]<<16|v[A+2]<<8|v[A+3])},o6=function(v){var C=ts(v,["moov","trak"]),A=[];return C.forEach(function(I){var X,te,P={},O=ts(I,["tkhd"])[0];O&&(te=(X=new DataView(O.buffer,O.byteOffset,O.byteLength)).getUint8(0),P.id=X.getUint32(0===te?12:20));var ue=ts(I,["mdia","hdlr"])[0];if(ue){var ge=Nb(ue.subarray(8,12));P.type="vide"===ge?"video":"soun"===ge?"audio":ge}var Be=ts(I,["mdia","minf","stbl","stsd"])[0];if(Be){var dt=Be.subarray(8);P.codec=Nb(dt.subarray(4,8));var St,Gt=ts(dt,[P.codec])[0];Gt&&(/^[asm]vc[1-9]$/i.test(P.codec)?(St=Gt.subarray(78),"avcC"===Nb(St.subarray(4,8))&&St.length>11?(P.codec+=".",P.codec+=kC(St[9]),P.codec+=kC(St[10]),P.codec+=kC(St[11])):P.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(P.codec)?(St=Gt.subarray(28),"esds"===Nb(St.subarray(4,8))&&St.length>20&&0!==St[19]?(P.codec+="."+kC(St[19]),P.codec+="."+kC(St[20]>>>2&63).replace(/^0/,"")):P.codec="mp4a.40.2"):P.codec=P.codec.toLowerCase())}var On=ts(I,["mdia","mdhd"])[0];On&&(P.timescale=FR(On)),A.push(P)}),A},a6=function(v,C=0){return ts(v,["emsg"]).map(I=>{var P=LR.parseEmsgBox(new Uint8Array(I)),O=UZ(P.message_data);return{cueTime:LR.scaleTime(P.presentation_time,P.timescale,P.presentation_time_delta,C),duration:LR.scaleTime(P.event_duration,P.timescale),frames:O}})};var BR_startTime=r6,BR_tracks=o6,BR_getEmsgID3=a6,VR=FI,u6=function(v){var C=31&v[1];return(C<<=8)|v[2]},JI=function(v){return!!(64&v[1])},eA=function(v){var C=0;return(48&v[3])>>>4>1&&(C+=v[4]+1),C},jR=function(v){switch(v){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},GZ={parseType:function(v,C){var A=u6(v);return 0===A?"pat":A===C?"pmt":C?"pes":null},parsePat:function(v){var C=JI(v),A=4+eA(v);return C&&(A+=v[A]+1),(31&v[A+10])<<8|v[A+11]},parsePmt:function(v){var C={},A=JI(v),I=4+eA(v);if(A&&(I+=v[I]+1),1&v[I+5]){var O;O=3+((15&v[I+1])<<8|v[I+2])-4;for(var te=12+((15&v[I+10])<<8|v[I+11]);te<O;){var ue=I+te;C[(31&v[ue+1])<<8|v[ue+2]]=v[ue],te+=5+((15&v[ue+3])<<8|v[ue+4])}return C}},parsePayloadUnitStartIndicator:JI,parsePesType:function(v,C){switch(C[u6(v)]){case VR.H264_STREAM_TYPE:return"video";case VR.ADTS_STREAM_TYPE:return"audio";case VR.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(v){if(!JI(v))return null;var A=4+eA(v);if(A>=v.byteLength)return null;var P,I=null;return 192&(P=v[A+7])&&((I={}).pts=(14&v[A+9])<<27|(255&v[A+10])<<20|(254&v[A+11])<<12|(255&v[A+12])<<5|(254&v[A+13])>>>3,I.pts*=4,I.pts+=(6&v[A+13])>>>1,I.dts=I.pts,64&P&&(I.dts=(14&v[A+14])<<27|(255&v[A+15])<<20|(254&v[A+16])<<12|(255&v[A+17])<<5|(254&v[A+18])>>>3,I.dts*=4,I.dts+=(6&v[A+18])>>>1)),I},videoPacketContainsKeyFrame:function(v){for(var C=4+eA(v),A=v.subarray(C),I=0,P=0,O=!1;P<A.byteLength-3;P++)if(1===A[P+2]){I=P+5;break}for(;I<A.byteLength;)switch(A[I]){case 0:if(0!==A[I-1]){I+=2;break}if(0!==A[I-2]){I++;break}P+3!==I-2&&"slice_layer_without_partitioning_rbsp_idr"===jR(31&A[P+3])&&(O=!0);do{I++}while(1!==A[I]&&I<A.length);P=I-2,I+=3;break;case 1:if(0!==A[I-1]||0!==A[I-2]){I+=3;break}"slice_layer_without_partitioning_rbsp_idr"===jR(31&A[P+3])&&(O=!0),P=I-2,I+=3;break;default:I+=3}return A=A.subarray(P),I-=P,P=0,A&&A.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===jR(31&A[P+3])&&(O=!0),O}},l6=FI,Lb=MB.handleRollover,Pr={};Pr.ts=GZ,Pr.aac=PR;var Ly=pi.ONE_SECOND_IN_TS,_a=188,c6=function(v,C,A){for(var O,te,ue,ge,I=0,P=_a,Be=!1;P<=v.byteLength;)if(71!==v[I]||71!==v[P]&&P!==v.byteLength)I++,P++;else{if("pes"===(O=v.subarray(I,P),Pr.ts.parseType(O,C.pid))&&(te=Pr.ts.parsePesType(O,C.table),ue=Pr.ts.parsePayloadUnitStartIndicator(O),"audio"===te&&ue&&(ge=Pr.ts.parsePesTime(O))&&(ge.type="audio",A.audio.push(ge),Be=!0)),Be)break;I+=_a,P+=_a}for(I=(P=v.byteLength)-_a,Be=!1;I>=0;)if(71!==v[I]||71!==v[P]&&P!==v.byteLength)I--,P--;else{if("pes"===(O=v.subarray(I,P),Pr.ts.parseType(O,C.pid))&&(te=Pr.ts.parsePesType(O,C.table),ue=Pr.ts.parsePayloadUnitStartIndicator(O),"audio"===te&&ue&&(ge=Pr.ts.parsePesTime(O))&&(ge.type="audio",A.audio.push(ge),Be=!0)),Be)break;I-=_a,P-=_a}},WZ=function(v,C,A){for(var O,te,ue,ge,Be,dt,Gt,I=0,P=_a,St=!1,Cn={data:[],size:0};P<v.byteLength;)if(71!==v[I]||71!==v[P])I++,P++;else{if("pes"===(O=v.subarray(I,P),Pr.ts.parseType(O,C.pid))&&(te=Pr.ts.parsePesType(O,C.table),ue=Pr.ts.parsePayloadUnitStartIndicator(O),"video"===te&&(ue&&!St&&(ge=Pr.ts.parsePesTime(O))&&(ge.type="video",A.video.push(ge),St=!0),!A.firstKeyFrame))){if(ue&&0!==Cn.size){for(Be=new Uint8Array(Cn.size),dt=0;Cn.data.length;)Gt=Cn.data.shift(),Be.set(Gt,dt),dt+=Gt.byteLength;if(Pr.ts.videoPacketContainsKeyFrame(Be)){var On=Pr.ts.parsePesTime(Be);On?(A.firstKeyFrame=On,A.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Cn.size=0}Cn.data.push(O),Cn.size+=O.byteLength}if(St&&A.firstKeyFrame)break;I+=_a,P+=_a}for(I=(P=v.byteLength)-_a,St=!1;I>=0;)if(71!==v[I]||71!==v[P])I--,P--;else{if("pes"===(O=v.subarray(I,P),Pr.ts.parseType(O,C.pid))&&(te=Pr.ts.parsePesType(O,C.table),ue=Pr.ts.parsePayloadUnitStartIndicator(O),"video"===te&&ue&&(ge=Pr.ts.parsePesTime(O))&&(ge.type="video",A.video.push(ge),St=!0)),St)break;I-=_a,P-=_a}},XZ_inspect=function(v,C){var I;return I=Pr.aac.isLikelyAacData(v)?function(v){for(var te,C=!1,A=0,I=null,P=null,O=0,X=0;v.length-X>=3;){switch(Pr.aac.parseType(v,X)){case"timed-metadata":if(v.length-X<10){C=!0;break}if((O=Pr.aac.parseId3TagSize(v,X))>v.length){C=!0;break}null===P&&(te=v.subarray(X,X+O),P=Pr.aac.parseAacTimestamp(te)),X+=O;break;case"audio":if(v.length-X<7){C=!0;break}if((O=Pr.aac.parseAdtsSize(v,X))>v.length){C=!0;break}null===I&&(te=v.subarray(X,X+O),I=Pr.aac.parseSampleRate(te)),A++,X+=O;break;default:X++}if(C)return null}if(null===I||null===P)return null;var ge=Ly/I;return{audio:[{type:"audio",dts:P,pts:P},{type:"audio",dts:P+1024*A*ge,pts:P+1024*A*ge}]}}(v):function(v){var C={pid:null,table:null},A={};for(var I in function(v,C){for(var P,A=0,I=_a;I<v.byteLength;)if(71!==v[A]||71!==v[I])A++,I++;else{switch(P=v.subarray(A,I),Pr.ts.parseType(P,C.pid)){case"pat":C.pid=Pr.ts.parsePat(P);break;case"pmt":var X=Pr.ts.parsePmt(P);C.table=C.table||{},Object.keys(X).forEach(function(te){C.table[te]=X[te]})}A+=_a,I+=_a}}(v,C),C.table)if(C.table.hasOwnProperty(I))switch(C.table[I]){case l6.H264_STREAM_TYPE:A.video=[],WZ(v,C,A),0===A.video.length&&delete A.video;break;case l6.ADTS_STREAM_TYPE:A.audio=[],c6(v,C,A),0===A.audio.length&&delete A.audio}return A}(v),I&&(I.audio||I.video)?(function(v,C){if(v.audio&&v.audio.length){var A=C;(void 0===A||isNaN(A))&&(A=v.audio[0].dts),v.audio.forEach(function(O){O.dts=Lb(O.dts,A),O.pts=Lb(O.pts,A),O.dtsTime=O.dts/Ly,O.ptsTime=O.pts/Ly})}if(v.video&&v.video.length){var I=C;if((void 0===I||isNaN(I))&&(I=v.video[0].dts),v.video.forEach(function(O){O.dts=Lb(O.dts,I),O.pts=Lb(O.pts,I),O.dtsTime=O.dts/Ly,O.ptsTime=O.pts/Ly}),v.firstKeyFrame){var P=v.firstKeyFrame;P.dts=Lb(P.dts,I),P.pts=Lb(P.pts,I),P.dtsTime=P.dts/Ly,P.ptsTime=P.pts/Ly}}}(I,C),I):null};class d6{constructor(C,A){this.options=A||{},this.self=C,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new nZ.Transmuxer(this.options),function(v,C){C.on("data",function(A){const I=A.initSegment;A.initSegment={data:I.buffer,byteOffset:I.byteOffset,byteLength:I.byteLength};const P=A.data;A.data=P.buffer,v.postMessage({action:"data",segment:A,byteOffset:P.byteOffset,byteLength:P.byteLength},[A.data])}),C.on("done",function(A){v.postMessage({action:"done"})}),C.on("gopInfo",function(A){v.postMessage({action:"gopInfo",gopInfo:A})}),C.on("videoSegmentTimingInfo",function(A){const I={start:{decode:pi.videoTsToSeconds(A.start.dts),presentation:pi.videoTsToSeconds(A.start.pts)},end:{decode:pi.videoTsToSeconds(A.end.dts),presentation:pi.videoTsToSeconds(A.end.pts)},baseMediaDecodeTime:pi.videoTsToSeconds(A.baseMediaDecodeTime)};A.prependedContentDuration&&(I.prependedContentDuration=pi.videoTsToSeconds(A.prependedContentDuration)),v.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:I})}),C.on("audioSegmentTimingInfo",function(A){const I={start:{decode:pi.videoTsToSeconds(A.start.dts),presentation:pi.videoTsToSeconds(A.start.pts)},end:{decode:pi.videoTsToSeconds(A.end.dts),presentation:pi.videoTsToSeconds(A.end.pts)},baseMediaDecodeTime:pi.videoTsToSeconds(A.baseMediaDecodeTime)};A.prependedContentDuration&&(I.prependedContentDuration=pi.videoTsToSeconds(A.prependedContentDuration)),v.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:I})}),C.on("id3Frame",function(A){v.postMessage({action:"id3Frame",id3Frame:A})}),C.on("caption",function(A){v.postMessage({action:"caption",caption:A})}),C.on("trackinfo",function(A){v.postMessage({action:"trackinfo",trackInfo:A})}),C.on("audioTimingInfo",function(A){v.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:pi.videoTsToSeconds(A.start),end:pi.videoTsToSeconds(A.end)}})}),C.on("videoTimingInfo",function(A){v.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:pi.videoTsToSeconds(A.start),end:pi.videoTsToSeconds(A.end)}})}),C.on("log",function(A){v.postMessage({action:"log",log:A})})}(this.self,this.transmuxer)}pushMp4Captions(C){this.captionParser||(this.captionParser=new xZ,this.captionParser.init());const A=new Uint8Array(C.data,C.byteOffset,C.byteLength),I=this.captionParser.parse(A,C.trackIds,C.timescales);this.self.postMessage({action:"mp4Captions",captions:I&&I.captions||[],logs:I&&I.logs||[],data:A.buffer},[A.buffer])}probeMp4StartTime({timescales:C,data:A}){const I=BR_startTime(C,A);this.self.postMessage({action:"probeMp4StartTime",startTime:I,data:A},[A.buffer])}probeMp4Tracks({data:C}){const A=BR_tracks(C);this.self.postMessage({action:"probeMp4Tracks",tracks:A,data:C},[C.buffer])}probeEmsgID3({data:C,offset:A}){const I=BR_getEmsgID3(C,A);this.self.postMessage({action:"probeEmsgID3",id3Frames:I,emsgData:C},[C.buffer])}probeTs({data:C,baseStartTime:A}){const I="number"!=typeof A||isNaN(A)?void 0:A*pi.ONE_SECOND_IN_TS,P=XZ_inspect(C,I);let O=null;P&&(O={hasVideo:P.video&&2===P.video.length||!1,hasAudio:P.audio&&2===P.audio.length||!1},O.hasVideo&&(O.videoStart=P.video[0].ptsTime),O.hasAudio&&(O.audioStart=P.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:O,data:C},[C.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(C){const A=new Uint8Array(C.data,C.byteOffset,C.byteLength);this.transmuxer.push(A)}reset(){this.transmuxer.reset()}setTimestampOffset(C){this.transmuxer.setBaseMediaDecodeTime(Math.round(pi.secondsToVideoTs(C.timestampOffset||0)))}setAudioAppendStart(C){this.transmuxer.setAudioAppendStart(Math.ceil(pi.secondsToVideoTs(C.appendStart)))}setRemux(C){this.transmuxer.setRemux(C.remux)}flush(C){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(C){this.transmuxer.alignGopsWith(C.gopsToAlignWith.slice())}}self.onmessage=function(v){"init"===v.data.action&&v.data.options?this.messageHandlers=new d6(self,v.data.options):(this.messageHandlers||(this.messageHandlers=new d6(self)),v.data&&v.data.action&&"init"!==v.data.action&&this.messageHandlers[v.data.action]&&this.messageHandlers[v.data.action](v.data))}}));var KH=vU(WH);const EU=n=>{const{transmuxer:e,bytes:t,audioAppendStart:r,gopsToAlignWith:i,remux:s,onData:a,onTrackInfo:c,onAudioTimingInfo:f,onVideoTimingInfo:y,onVideoSegmentTimingInfo:b,onAudioSegmentTimingInfo:D,onId3:N,onCaptions:B,onDone:U,onEndedTimeline:K,onTransmuxerLog:ie,isEndOfTimeline:Ae}=n,be={buffer:[]};let Le=Ae;if(e.onmessage=Ee=>{e.currentTransmux===n&&("data"===Ee.data.action&&((n,e,t)=>{const{type:r,initSegment:i,captions:s,captionStreams:a,metadata:c,videoFrameDtsTime:f,videoFramePtsTime:y}=n.data.segment;e.buffer.push({captions:s,captionStreams:a,metadata:c});const b=n.data.segment.boxes||{data:n.data.segment.data},D={type:r,data:new Uint8Array(b.data,b.data.byteOffset,b.data.byteLength),initSegment:new Uint8Array(i.data,i.byteOffset,i.byteLength)};void 0!==f&&(D.videoFrameDtsTime=f),void 0!==y&&(D.videoFramePtsTime=y),t(D)})(Ee,be,a),"trackinfo"===Ee.data.action&&c(Ee.data.trackInfo),"gopInfo"===Ee.data.action&&((n,e)=>{e.gopInfo=n.data.gopInfo})(Ee,be),"audioTimingInfo"===Ee.data.action&&f(Ee.data.audioTimingInfo),"videoTimingInfo"===Ee.data.action&&y(Ee.data.videoTimingInfo),"videoSegmentTimingInfo"===Ee.data.action&&b(Ee.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===Ee.data.action&&D(Ee.data.audioSegmentTimingInfo),"id3Frame"===Ee.data.action&&N([Ee.data.id3Frame],Ee.data.id3Frame.dispatchType),"caption"===Ee.data.action&&B(Ee.data.caption),"endedtimeline"===Ee.data.action&&(Le=!1,K()),"log"===Ee.data.action&&ie(Ee.data.log),"transmuxed"===Ee.data.type&&(Le||(e.onmessage=null,(({transmuxedData:n,callback:e})=>{n.buffer=[],e(n)})({transmuxedData:be,callback:U}),wU(e))))},r&&e.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(i)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),void 0!==s&&e.postMessage({action:"setRemux",remux:s}),t.byteLength){const Ee=t instanceof ArrayBuffer?t:t.buffer,pt=t instanceof ArrayBuffer?0:t.byteOffset;e.postMessage({action:"push",data:Ee,byteOffset:pt,byteLength:t.byteLength},[Ee])}Ae&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},wU=n=>{n.currentTransmux=null,n.transmuxQueue.length&&(n.currentTransmux=n.transmuxQueue.shift(),"function"==typeof n.currentTransmux?n.currentTransmux():EU(n.currentTransmux))},CU=(n,e)=>{n.postMessage({action:e}),wU(n)};var PP_reset=n=>{((n,e)=>{if(!e.currentTransmux)return e.currentTransmux=n,void CU(e,n);e.transmuxQueue.push(CU.bind(null,e,n))})("reset",n)};const nC=function(n){const e=n.transmuxer,t=n.endAction||n.action,r=n.callback,i=Oc({},n,{endAction:null,transmuxer:null,callback:null}),s=a=>{a.data.action===t&&(e.removeEventListener("message",s),a.data.data&&(a.data.data=new Uint8Array(a.data.data,n.byteOffset||0,n.byteLength||a.data.data.byteLength),n.data&&(n.data=a.data.data)),r(a.data))};if(e.addEventListener("message",s),n.data){const a=n.data instanceof ArrayBuffer;i.byteOffset=a?0:n.data.byteOffset,i.byteLength=n.data.byteLength,e.postMessage(i,[a?n.data:n.data.buffer])}else e.postMessage(i)},RP=n=>{n.forEach(e=>{e.abort()})},OP=(n,e)=>e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:-101,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:-102,xhr:e}:n?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:2,xhr:e}:"arraybuffer"===e.responseType&&0===e.response.byteLength?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:2,xhr:e}:null,DU=(n,e,t)=>(r,i)=>{const s=i.response,a=OP(r,i);if(a)return t(a,n);if(16!==s.byteLength)return t({status:i.status,message:"Invalid HLS key at URL: "+i.uri,code:2,xhr:i},n);const c=new DataView(s),f=new Uint32Array([c.getUint32(0),c.getUint32(4),c.getUint32(8),c.getUint32(12)]);for(let y=0;y<e.length;y++)e[y].bytes=f;return t(null,n)},IU=(n,e)=>{const t=SM(n.map.bytes);if("mp4"!==t)return e({internal:!0,message:`Found unsupported ${t||"unknown"} container for initialization segment at URL: ${n.map.resolvedUri||n.map.uri}`,code:2});nC({action:"probeMp4Tracks",data:n.map.bytes,transmuxer:n.transmuxer,callback:({tracks:r,data:i})=>(n.map.bytes=i,r.forEach(function(s){n.map.tracks=n.map.tracks||{},!n.map.tracks[s.type]&&(n.map.tracks[s.type]=s,"number"==typeof s.id&&s.timescale&&(n.map.timescales=n.map.timescales||{},n.map.timescales[s.id]=s.timescale))}),e(null))})},iq=({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:c,isEndOfTimeline:f,endedTimelineFn:y,dataFn:b,doneFn:D,onTransmuxerLog:N})=>{const B=n.map&&n.map.tracks||{},U=Boolean(B.audio&&B.video);let K=r.bind(null,n,"audio","start");const ie=r.bind(null,n,"audio","end");let Ae=r.bind(null,n,"video","start");const be=r.bind(null,n,"video","end");nC({action:"probeTs",transmuxer:n.transmuxer,data:e,baseStartTime:n.baseStartTime,callback:Me=>{n.bytes=e=Me.data;const Ee=Me.result;Ee&&(t(n,{hasAudio:Ee.hasAudio,hasVideo:Ee.hasVideo,isMuxed:U}),t=null),(n=>{if(!n.transmuxer.currentTransmux)return n.transmuxer.currentTransmux=n,void EU(n);n.transmuxer.transmuxQueue.push(n)})({bytes:e,transmuxer:n.transmuxer,audioAppendStart:n.audioAppendStart,gopsToAlignWith:n.gopsToAlignWith,remux:U,onData:Me=>{Me.type="combined"===Me.type?"video":Me.type,b(n,Me)},onTrackInfo:Me=>{t&&(U&&(Me.isMuxed=!0),t(n,Me))},onAudioTimingInfo:Me=>{K&&void 0!==Me.start&&(K(Me.start),K=null),ie&&void 0!==Me.end&&ie(Me.end)},onVideoTimingInfo:Me=>{Ae&&void 0!==Me.start&&(Ae(Me.start),Ae=null),be&&void 0!==Me.end&&be(Me.end)},onVideoSegmentTimingInfo:Me=>{i(Me)},onAudioSegmentTimingInfo:Me=>{s(Me)},onId3:(Me,Ee)=>{a(n,Me,Ee)},onCaptions:Me=>{c(n,[Me])},isEndOfTimeline:f,onEndedTimeline:()=>{y()},onTransmuxerLog:N,onDone:Me=>{!D||(Me.type="combined"===Me.type?"video":Me.type,D(null,n,Me))}})}})},AU=({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:c,isEndOfTimeline:f,endedTimelineFn:y,dataFn:b,doneFn:D,onTransmuxerLog:N})=>{let B=new Uint8Array(e);if(function(e){return La(e,["moof"]).length>0}(B)){n.isFmp4=!0;const{tracks:U}=n.map,K={isFmp4:!0,hasVideo:!!U.video,hasAudio:!!U.audio};U.audio&&U.audio.codec&&"enca"!==U.audio.codec&&(K.audioCodec=U.audio.codec),U.video&&U.video.codec&&"encv"!==U.video.codec&&(K.videoCodec=U.video.codec),U.video&&U.audio&&(K.isMuxed=!0),t(n,K);const ie=(Ae,be)=>{b(n,{data:B,type:K.hasAudio&&!K.isMuxed?"audio":"video"}),be&&be.length&&a(n,be),Ae&&Ae.length&&c(n,Ae),D(null,n,{})};nC({action:"probeMp4StartTime",timescales:n.map.timescales,data:B,transmuxer:n.transmuxer,callback:({data:Ae,startTime:be})=>{e=Ae.buffer,n.bytes=B=Ae,K.hasAudio&&!K.isMuxed&&r(n,"audio","start",be),K.hasVideo&&r(n,"video","start",be),nC({action:"probeEmsgID3",data:B,transmuxer:n.transmuxer,offset:be,callback:({emsgData:Le,id3Frames:Me})=>{e=Le.buffer,n.bytes=B=Le,U.video&&Le.byteLength&&n.transmuxer?nC({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:n.transmuxer,data:B,timescales:n.map.timescales,trackIds:[U.video.id],callback:Ee=>{e=Ee.data.buffer,n.bytes=B=Ee.data,Ee.logs.forEach(function(pt){N(Dr(pt,{stream:"mp4CaptionParser"}))}),ie(Ee.captions,Me)}}):ie(void 0,Me)}})}})}else{if(n.transmuxer)return void 0===n.container&&(n.container=SM(B)),"ts"!==n.container&&"aac"!==n.container?(t(n,{hasAudio:!1,hasVideo:!1}),void D(null,n,{})):void iq({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:c,isEndOfTimeline:f,endedTimelineFn:y,dataFn:b,doneFn:D,onTransmuxerLog:N});D(null,n,{})}},kU=function({id:n,key:e,encryptedBytes:t,decryptionWorker:r},i){const s=c=>{if(c.data.source===n){r.removeEventListener("message",s);const f=c.data.decrypted;i(new Uint8Array(f.bytes,f.byteOffset,f.byteLength))}};let a;r.addEventListener("message",s),a=e.bytes.slice?e.bytes.slice():new Uint32Array(Array.prototype.slice.call(e.bytes)),r.postMessage(dU({source:n,encrypted:t,key:a,iv:e.iv}),[t.buffer,a.buffer])},lq=({xhr:n,xhrOptions:e,decryptionWorker:t,segment:r,abortFn:i,progressFn:s,trackInfoFn:a,timingInfoFn:c,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:y,id3Fn:b,captionsFn:D,isEndOfTimeline:N,endedTimelineFn:B,dataFn:U,doneFn:K,onTransmuxerLog:ie})=>{const Ae=[],be=(({activeXhrs:n,decryptionWorker:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:c,isEndOfTimeline:f,endedTimelineFn:y,dataFn:b,doneFn:D,onTransmuxerLog:N})=>{let B=0,U=!1;return(K,ie)=>{if(!U){if(K)return U=!0,RP(n),D(K,ie);if(B+=1,B===n.length){const Ae=function(){if(ie.encryptedBytes)return(({decryptionWorker:n,segment:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:c,isEndOfTimeline:f,endedTimelineFn:y,dataFn:b,doneFn:D,onTransmuxerLog:N})=>{kU({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:n},B=>{e.bytes=B,AU({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:c,isEndOfTimeline:f,endedTimelineFn:y,dataFn:b,doneFn:D,onTransmuxerLog:N})})})({decryptionWorker:e,segment:ie,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:c,isEndOfTimeline:f,endedTimelineFn:y,dataFn:b,doneFn:D,onTransmuxerLog:N});AU({segment:ie,bytes:ie.bytes,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:c,isEndOfTimeline:f,endedTimelineFn:y,dataFn:b,doneFn:D,onTransmuxerLog:N})};if(ie.endOfAllRequests=Date.now(),ie.map&&ie.map.encryptedBytes&&!ie.map.bytes)return kU({decryptionWorker:e,id:ie.requestId+"-init",encryptedBytes:ie.map.encryptedBytes,key:ie.map.key},be=>{ie.map.bytes=be,IU(ie,Le=>{if(Le)return RP(n),D(Le,ie);Ae()})});Ae()}}}})({activeXhrs:Ae,decryptionWorker:t,trackInfoFn:a,timingInfoFn:c,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:y,id3Fn:b,captionsFn:D,isEndOfTimeline:N,endedTimelineFn:B,dataFn:U,doneFn:K,onTransmuxerLog:ie});if(r.key&&!r.key.bytes){const Nt=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&Nt.push(r.map.key);const Jt=n(Dr(e,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),DU(r,Nt,be));Ae.push(Jt)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){const on=n(Dr(e,{uri:r.map.key.resolvedUri,responseType:"arraybuffer"}),DU(r,[r.map.key],be));Ae.push(on)}const hn=Dr(e,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:AP(r.map)}),ct=(({segment:n,finishProcessingFn:e})=>(t,r)=>{const i=OP(t,r);if(i)return e(i,n);const s=new Uint8Array(r.response);if(n.map.key)return n.map.encryptedBytes=s,e(null,n);n.map.bytes=s,IU(n,function(a){if(a)return a.xhr=r,a.status=r.status,e(a,n);e(null,n)})})({segment:r,finishProcessingFn:be}),Jt=n(hn,ct);Ae.push(Jt)}const Le=Dr(e,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:AP(r)}),Ee=n(Le,(({segment:n,finishProcessingFn:e,responseType:t})=>(r,i)=>{const s=OP(r,i);if(s)return e(s,n);const a="arraybuffer"!==t&&i.responseText?(n=>{const e=new Uint8Array(new ArrayBuffer(n.length));for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e.buffer})(i.responseText.substring(n.lastReachedChar||0)):i.response;return n.stats=(n=>({bandwidth:n.bandwidth,bytesReceived:n.bytesReceived||0,roundTripTime:n.roundTripTime||0}))(i),n.key?n.encryptedBytes=new Uint8Array(a):n.bytes=new Uint8Array(a),e(null,n)})({segment:r,finishProcessingFn:be,responseType:Le.responseType}));Ee.addEventListener("progress",(({segment:n,progressFn:e})=>D=>{if(!D.target.aborted)return n.stats=Dr(n.stats,(n=>{const e=n.target,r={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return r.bytesReceived=n.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r})(D)),!n.stats.firstBytesReceivedAt&&n.stats.bytesReceived&&(n.stats.firstBytesReceivedAt=Date.now()),e(D,n)})({segment:r,progressFn:s,trackInfoFn:a,timingInfoFn:c,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:y,id3Fn:b,captionsFn:D,isEndOfTimeline:N,endedTimelineFn:B,dataFn:U})),Ae.push(Ee);const pt={};return Ae.forEach(Nt=>{Nt.addEventListener("loadend",(({loadendState:n,abortFn:e})=>t=>{t.target.aborted&&e&&!n.calledAbortFn&&(e(),n.calledAbortFn=!0)})({loadendState:pt,abortFn:i}))}),()=>RP(Ae)},cq=Pl("CodecUtils"),MU=(n,e)=>{const t=e.attributes||{};return n&&n.mediaGroups&&n.mediaGroups.AUDIO&&t.AUDIO&&n.mediaGroups.AUDIO[t.AUDIO]},lI=function(n){const e={};return n.forEach(({mediaType:t,type:r,details:i})=>{e[t]=e[t]||[],e[t].push(hM(`${r}${i}`))}),Object.keys(e).forEach(function(t){if(e[t].length>1)return cq(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),void(e[t]=null);e[t]=e[t][0]}),e},PU=function(n){let e=0;return n.audio&&e++,n.video&&e++,e},rC=function(n,e){const t=e.attributes||{},r=lI(function(n){const e=n.attributes||{};if(e.CODECS)return sh(e.CODECS)}(e)||[]);if(MU(n,e)&&!r.audio&&!((n,e)=>{if(!MU(n,e))return!0;const r=n.mediaGroups.AUDIO[(e.attributes||{}).AUDIO];for(const i in r)if(!r[i].uri&&!r[i].playlists)return!0;return!1})(n,e)){const i=lI(function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var r=e.mediaGroups.AUDIO[t];if(!r)return null;for(var i in r){var s=r[i];if(s.default&&s.playlists)return sh(s.playlists[0].attributes.CODECS)}return null}(n,t.AUDIO)||[]);i.audio&&(r.audio=i.audio)}return r},cI=Pl("PlaylistSelector"),RU=function(n){if(!n||!n.playlist)return;const e=n.playlist;return JSON.stringify({id:e.id,bandwidth:n.bandwidth,width:n.width,height:n.height,codecs:e.attributes&&e.attributes.CODECS||""})},dI=function(n,e){if(!n)return"";const t=fe().getComputedStyle(n);return t?t[e]:""},Db=function(n,e){const t=n.slice();n.sort(function(r,i){const s=e(r,i);return 0===s?t.indexOf(r)-t.indexOf(i):s})},NP=function(n,e){let t,r;return n.attributes.BANDWIDTH&&(t=n.attributes.BANDWIDTH),t=t||fe().Number.MAX_VALUE,e.attributes.BANDWIDTH&&(r=e.attributes.BANDWIDTH),r=r||fe().Number.MAX_VALUE,t-r};let OU=function(n,e,t,r,i,s){if(!n)return;const a={bandwidth:e,width:t,height:r,limitRenditionByPlayerDimensions:i};let c=n.playlists;Ba.isAudioOnly(n)&&(c=s.getAudioTrackPlaylists_(),a.audioOnly=!0);let f=c.map(Ee=>{let pt;const Nt=Ee.attributes&&Ee.attributes.RESOLUTION&&Ee.attributes.RESOLUTION.width,hn=Ee.attributes&&Ee.attributes.RESOLUTION&&Ee.attributes.RESOLUTION.height;return pt=Ee.attributes&&Ee.attributes.BANDWIDTH,pt=pt||fe().Number.MAX_VALUE,{bandwidth:pt,width:Nt,height:hn,playlist:Ee}});Db(f,(Ee,pt)=>Ee.bandwidth-pt.bandwidth),f=f.filter(Ee=>!Ba.isIncompatible(Ee.playlist));let y=f.filter(Ee=>Ba.isEnabled(Ee.playlist));y.length||(y=f.filter(Ee=>!Ba.isDisabled(Ee.playlist)));const b=y.filter(Ee=>Ee.bandwidth*Zs.BANDWIDTH_VARIANCE<e);let D=b[b.length-1];const N=b.filter(Ee=>Ee.bandwidth===D.bandwidth)[0];if(!1===i){const Ee=N||y[0]||f[0];if(Ee&&Ee.playlist){let pt="sortedPlaylistReps";return N&&(pt="bandwidthBestRep"),y[0]&&(pt="enabledPlaylistReps"),cI(`choosing ${RU(Ee)} using ${pt} with options`,a),Ee.playlist}return cI("could not choose a playlist with options",a),null}const B=b.filter(Ee=>Ee.width&&Ee.height);Db(B,(Ee,pt)=>Ee.width-pt.width);const U=B.filter(Ee=>Ee.width===t&&Ee.height===r);D=U[U.length-1];const K=U.filter(Ee=>Ee.bandwidth===D.bandwidth)[0];let ie,Ae,be,Le;if(K||(ie=B.filter(Ee=>Ee.width>t||Ee.height>r),Ae=ie.filter(Ee=>Ee.width===ie[0].width&&Ee.height===ie[0].height),D=Ae[Ae.length-1],be=Ae.filter(Ee=>Ee.bandwidth===D.bandwidth)[0]),s.leastPixelDiffSelector){const Ee=B.map(pt=>(pt.pixelDiff=Math.abs(pt.width-t)+Math.abs(pt.height-r),pt));Db(Ee,(pt,Nt)=>pt.pixelDiff===Nt.pixelDiff?Nt.bandwidth-pt.bandwidth:pt.pixelDiff-Nt.pixelDiff),Le=Ee[0]}const Me=Le||be||K||N||y[0]||f[0];if(Me&&Me.playlist){let Ee="sortedPlaylistReps";return Le?Ee="leastPixelDiffRep":be?Ee="resolutionPlusOneRep":K?Ee="resolutionBestRep":N?Ee="bandwidthBestRep":y[0]&&(Ee="enabledPlaylistReps"),cI(`choosing ${RU(Me)} using ${Ee} with options`,a),Me.playlist}return cI("could not choose a playlist with options",a),null};const NU=function(){const n=this.useDevicePixelRatio&&fe().devicePixelRatio||1;return OU(this.playlists.main,this.systemBandwidth,parseInt(dI(this.tech_.el(),"width"),10)*n,parseInt(dI(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.playlistController_)},Eq={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},wq=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),LU=(n,e,t)=>{n.metadataTrack_||(n.metadataTrack_=t.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,ht.browser.IS_ANY_SAFARI||(n.metadataTrack_.inBandMetadataTrackDispatchType=e))},iC=function(n,e,t){let r,i;if(t&&t.cues)for(r=t.cues.length;r--;)i=t.cues[r],i.startTime>=n&&i.endTime<=e&&t.removeCue(i)},UU=n=>"number"==typeof n&&isFinite(n),hI=1/60,Ib=n=>{const{startOfSegment:e,duration:t,segment:r,part:i,playlist:{mediaSequence:s,id:a,segments:c=[]},mediaIndex:f,partIndex:y,timeline:b}=n,D=c.length-1;let N="mediaIndex/partIndex increment";n.getMediaInfoForTime?N=`getMediaInfoForTime (${n.getMediaInfoForTime})`:n.isSyncRequest&&(N="getSyncSegmentCandidate (isSyncRequest)"),n.independent&&(N+=` with independent ${n.independent}`);const B="number"==typeof y,U=n.segment.uri?"segment":"pre-segment",K=B?K3({preloadSegment:r})-1:0;return`${U} [${s+f}/${s+D}]`+(B?` part [${y}/${K}]`:"")+` segment start/end [${r.start} => ${r.end}]`+(B?` part start/end [${i.start} => ${i.end}]`:"")+` startOfSegment [${e}] duration [${t}] timeline [${b}] selected by [${N}] playlist [${a}]`},BU=n=>`${n}TimingInfo`,VU=({timelineChangeController:n,currentTimeline:e,segmentTimeline:t,loaderType:r,audioDisabled:i})=>{if(e===t)return!1;if("audio"===r){const s=n.lastTimelineChange({type:"main"});return!s||s.to!==t}if("main"===r&&i){const s=n.pendingTimelineChange({type:"audio"});return!(s&&s.to===t)}return!1},jU=({segmentDuration:n,maxDuration:e})=>!!n&&Math.round(n)>e+hh;class LP extends ht.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=Pl(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(r){r!==this.state_&&(this.logger_(`${this.state_} -> ${r}`),this.state_=r,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),"main"===this.loaderType_&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),"audio"===this.loaderType_&&this.timelineChangeController_.on("timelinechange",()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})}createTransmuxer_(){return(n=>{const e=new KH;e.currentTransmux=null,e.transmuxQueue=[];const t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:n}),e})({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&fe().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,fe().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)}error(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&PP_reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return zo();if("main"===this.loaderType_){const{hasAudio:t,hasVideo:r,isMuxed:i}=e;if(r&&t&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(r)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const r=uI(e);let i=this.initSegments_[r];return t&&!i&&e.bytes&&(this.initSegments_[r]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e}segmentKey(e,t=!1){if(!e)return null;const r=hU(e);let i=this.keyCache_[r];this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[r]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});const s={resolvedUri:(i||e).resolvedUri};return i&&(s.bytes=i.bytes),s}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;const r=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));let s=null;if(r&&(r.id?s=r.id:r.uri&&(s=r.uri)),this.logger_(`playlist update [${s} => ${e.id||e.uri}]`),this.syncController_.updateMediaSequenceMap(e,this.currentTime_(),this.loaderType_),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!r||r.uri!==e.uri)return null!==this.mediaIndex&&(e.endList||"number"!=typeof e.partTargetDuration?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");const a=e.mediaSequence-r.mediaSequence;if(this.logger_(`live window shift [${a}]`),null!==this.mediaIndex)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const c=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!c.parts||!c.parts.length||!c.parts[this.partIndex])){const f=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=f}}i&&(i.mediaIndex-=a,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(r,e)}pause(){this.checkBufferTimeout_&&(fe().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()}resyncLoader(){this.transmuxer_&&PP_reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.shouldForceTimestampOffsetAfterResync_=!0,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,r=(()=>{}),i=!1){if(t===1/0&&(t=this.duration_()),t<=e)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");let s=1;const a=()=>{s--,0===s&&r()};(i||!this.audioDisabled_)&&(s++,this.sourceUpdater_.removeAudio(e,t,a)),(i||"main"===this.loaderType_)&&(this.gopBuffer_=((n,e,t,r)=>{const i=Math.ceil((e-r)*DD.ONE_SECOND_IN_TS),s=Math.ceil((t-r)*DD.ONE_SECOND_IN_TS),a=n.slice();let c=n.length;for(;c--&&!(n[c].pts<=s););if(-1===c)return a;let f=c+1;for(;f--&&!(n[f].pts<=i););return f=Math.max(f,0),a.splice(f,c-f+1),a})(this.gopBuffer_,e,t,this.timeMapping_),s++,this.sourceUpdater_.removeVideo(e,t,a));for(const c in this.inbandTextTracks_)iC(e,t,this.inbandTextTracks_[c]);iC(e,t,this.segmentMetadataTrack_),a()}monitorBuffer_(){this.checkBufferTimeout_&&fe().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=fe().setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&fe().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=fe().setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();!e||("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,r=this.partIndex){if(!t||!this.mediaSource_)return!1;const i="number"==typeof e&&t.segments[e];return t.endList&&"open"===this.mediaSource_.readyState&&e+1===t.segments.length&&(!i||!i.parts||r+1===i.parts.length)}chooseNextRequest_(){const e=this.buffered_(),t=z3(e)||0,r=bP(e,this.currentTime_()),i=!this.hasPlayed_()&&r>=1,s=r>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||i||s)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const c={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(c.isSyncRequest)c.mediaIndex=function(n,e,t){e=e||[];const r=[];let i=0;for(let s=0;s<e.length;s++){const a=e[s];if(n===a.timeline&&(r.push(s),i+=a.duration,i>t))return s}return 0===r.length?0:r[r.length-1]}(this.currentTimeline_,a,t),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${c.mediaIndex}`);else if(null!==this.mediaIndex){const N=a[this.mediaIndex],B="number"==typeof this.partIndex?this.partIndex:-1;c.startOfSegment=N.end?N.end:t,N.parts&&N.parts[B+1]?(c.mediaIndex=this.mediaIndex,c.partIndex=B+1):c.mediaIndex=this.mediaIndex+1}else{const{segmentIndex:N,startTime:B,partIndex:U}=Ba.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});c.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${t}`:`currentTime ${this.currentTime_()}`,c.mediaIndex=N,c.startOfSegment=B,c.partIndex=U,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${c.mediaIndex} `)}const f=a[c.mediaIndex];let y=f&&"number"==typeof c.partIndex&&f.parts&&f.parts[c.partIndex];if(!f||"number"==typeof c.partIndex&&!y)return null;if("number"!=typeof c.partIndex&&f.parts&&(c.partIndex=0,y=f.parts[0]),!r&&y&&!(this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments)&&!y.independent)if(0===c.partIndex){const N=a[c.mediaIndex-1],B=N.parts&&N.parts.length&&N.parts[N.parts.length-1];B&&B.independent&&(c.mediaIndex-=1,c.partIndex=N.parts.length-1,c.independent="previous segment")}else f.parts[c.partIndex-1].independent&&(c.partIndex-=1,c.independent="previous part");return c.mediaIndex>=a.length-1&&this.mediaSource_&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,c.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(c))}generateSegmentInfo_(e){const{independent:t,playlist:r,mediaIndex:i,startOfSegment:s,isSyncRequest:a,partIndex:c,forceTimestampOffset:f,getMediaInfoForTime:y}=e,b=r.segments[i],D="number"==typeof c&&b.parts[c],N={requestId:"segment-loader-"+Math.random(),uri:D&&D.resolvedUri||b.resolvedUri,mediaIndex:i,partIndex:D?c:null,isSyncRequest:a,startOfSegment:s,playlist:r,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:b.timeline,duration:D&&D.duration||b.duration,segment:b,part:D,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:y,independent:t},B=void 0!==f?f:this.isPendingTimestampOffset_;N.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:b.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s,buffered:this.buffered_(),overrideCheck:B});const U=z3(this.sourceUpdater_.audioBuffered());return"number"==typeof U&&(N.audioAppendStart=U-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(N.gopsToAlignWith=((n,e,t)=>{if(null==e||!n.length)return[];const r=Math.ceil((e-this.timeMapping_+3)*DD.ONE_SECOND_IN_TS);let i;for(i=0;i<n.length&&!(n[i].pts>r);i++);return n.slice(i)})(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset())),N}timestampOffsetForSegment_(e){return(({segmentTimeline:n,currentTimeline:e,startOfSegment:t,buffered:r,overrideCheck:i})=>i||n!==e?n<e?t:r.length?r.end(r.length-1):t:null)(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),r=e.bandwidth,i=this.pendingSegment_.duration,s=Ba.estimateSegmentRequestTime(i,r,this.playlist_,e.bytesReceived),a=function(n,e,t=1){return((n.length?n.end(n.length-1):0)-e)/t}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(s<=a)return;const c=function(n){const{main:e,currentTime:t,bandwidth:r,duration:i,segmentDuration:s,timeUntilRebuffer:a,currentTimeline:c,syncController:f}=n,y=e.playlists.filter(U=>!Ba.isIncompatible(U));let b=y.filter(Ba.isEnabled);b.length||(b=y.filter(U=>!Ba.isDisabled(U)));const N=b.filter(Ba.hasAttribute.bind(null,"BANDWIDTH")).map(U=>{const ie=f.getSyncPoint(U,i,c,t)?1:2;return{playlist:U,rebufferingImpact:Ba.estimateSegmentRequestTime(s,r,U)*ie-a}}),B=N.filter(U=>U.rebufferingImpact<=0);return Db(B,(U,K)=>NP(K.playlist,U.playlist)),B.length?B[0]:(Db(N,(U,K)=>U.rebufferingImpact-K.rebufferingImpact),N[0]||null)}({main:this.vhs_.playlists.main,currentTime:t,bandwidth:r,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!c)return;let b=.5;a<=hh&&(b=1),c.playlist&&c.playlist.uri!==this.playlist_.uri&&!(s-a-c.rebufferingImpact<b)&&(this.bandwidth=c.playlist.attributes.BANDWIDTH*Zs.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${Ib(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(function(n,e){if(!n&&!e||!n&&e||n&&!e)return!1;if(n===e)return!0;const t=Object.keys(n).sort(),r=Object.keys(e).sort();if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(s!==r[i]||n[s]!==e[s])return!1}return!0}(this.currentMediaInfo_,t=t||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))}handleTimingInfo_(e,t,r,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const s=this.pendingSegment_,a=BU(t);s[a]=s[a]||{},s[a][r]=i,this.logger_(`timinginfo: ${t} - ${r} - ${i}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(0===t.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));const i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};t.forEach(a=>{s[a.stream]=s[a.stream]||{startTime:1/0,captions:[],endTime:0};const c=s[a.stream];c.startTime=Math.min(c.startTime,a.startTime+i),c.endTime=Math.max(c.endTime,a.endTime+i),c.captions.push(a)}),Object.keys(s).forEach(a=>{const{startTime:c,endTime:f,captions:y}=s[a],b=this.inbandTextTracks_;this.logger_(`adding cues from ${c} -> ${f} for ${a}`),function(n,e,t){if(!n[t]){e.trigger({type:"usage",name:"vhs-608"});let r=t;/^cc708_/.test(t)&&(r="SERVICE"+t.split("_")[1]);const i=e.textTracks().getTrackById(r);if(i)n[t]=i;else{let a=t,c=t,f=!1;const y=(e.options_.vhs&&e.options_.vhs.captionServices||{})[r];y&&(a=y.label,c=y.language,f=y.default),n[t]=e.addRemoteTextTrack({kind:"captions",id:r,default:f,label:a,language:c},!1).track}}}(b,this.vhs_.tech_,a),iC(c,f,b[a]),function({inbandTextTracks:n,captionArray:e,timestampOffset:t}){if(!e)return;const r=fe().WebKitDataCue||fe().VTTCue;e.forEach(i=>{const s=i.stream;i.content?i.content.forEach(a=>{const c=new r(i.startTime+t,i.endTime+t,a.text);c.line=a.line,c.align="left",c.position=a.position,c.positionAlign="line-left",n[s].addCue(c)}):n[s].addCue(new r(i.startTime+t,i.endTime+t,i.text))})}({captionArray:y,inbandTextTracks:b,timestampOffset:i})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,r){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||(this.pendingSegment_.hasAppendedData_?this.addMetadataToTextTrack(r,t,this.duration_()):this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,r)))}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;const e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&VU({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:r,hasVideo:i,isMuxed:s}=t;return!(i&&!e.videoTimingInfo||r&&!this.audioDisabled_&&!s&&!e.audioTimingInfo||VU({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,e,t));const r=this.pendingSegment_;if(this.setTimeMapping_(r.timeline),this.updateMediaSecondsLoaded_(r.part||r.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),r.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),r.isFmp4=e.isFmp4,r.timingInfo=r.timingInfo||{},r.isFmp4)this.trigger("fmp4"),r.timingInfo.start=r[BU(t.type)].start;else{const i=this.getCurrentMediaInfo_(),s="main"===this.loaderType_&&i&&i.hasVideo;let a;s&&(a=r.videoTimingInfo.start),r.timingInfo.start=this.trueSegmentStart_({currentStart:r.timingInfo.start,playlist:r.playlist,mediaIndex:r.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:a,videoTimingInfo:r.videoTimingInfo,audioTimingInfo:r.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(r,t.type),this.updateSourceBufferTimestampOffset_(r),r.isSyncRequest){this.updateTimingInfoEnd_(r),this.syncController_.saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:"main"===this.loaderType_});const i=this.chooseNextRequest_();if(i.mediaIndex!==r.mediaIndex||i.partIndex!==r.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}r.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(r,t)}}updateAppendInitSegmentStatus(e,t){"main"===this.loaderType_&&"number"==typeof e.timestampOffset&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:r,playlist:i}){if(r){const s=uI(r);if(this.activeInitSegmentId_===s)return null;t=this.initSegmentForMap(r,!0).bytes,this.activeInitSegmentId_=s}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=i,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:r},i){const s=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Ay(s).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Ay(a).join(", "));const c=s.length?s.start(0):0,f=s.length?s.end(s.length-1):0,y=a.length?a.start(0):0,b=a.length?a.end(a.length-1):0;if(f-c<=1&&b-y<=1)return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${r.byteLength}, audio buffer: ${Ay(s).join(", ")}, video buffer: ${Ay(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:r}));const N=this.currentTime_()-1;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${N}`),this.remove(0,N,()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=fe().setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:r},i){if(i){if(22===i.code)return void this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:r});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",i),this.error(`${t} append of ${r.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:r,data:i,bytes:s}){if(!s){const a=[i];let c=i.byteLength;r&&(a.unshift(r),c+=r.byteLength),s=(n=>{let t,e=0;return n.bytes&&(t=new Uint8Array(n.bytes),n.segments.forEach(r=>{t.set(r,e),e+=r.byteLength})),t})({bytes:c,segments:a})}this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:s},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:s}))}handleSegmentTimingInfo_(e,t,r){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const i=this.pendingSegment_.segment,s=`${e}TimingInfo`;i[s]||(i[s]={}),i[s].transmuxerPrependedSeconds=r.prependedContentDuration||0,i[s].transmuxedPresentationStart=r.start.presentation,i[s].transmuxedDecodeStart=r.start.decode,i[s].transmuxedPresentationEnd=r.end.presentation,i[s].transmuxedDecodeEnd=r.end.decode,i[s].baseMediaDecodeTime=r.baseMediaDecodeTime}appendData_(e,t){const{type:r,data:i}=t;if(!i||!i.byteLength||"audio"===r&&this.audioDisabled_)return;const s=this.getInitSegmentAndUpdateState_({type:r,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:r,initSegment:s,data:i})}loadSegment_(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push(()=>{const t=Oc({},e,{forceTimestampOffset:!0});Oc(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)})}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),a=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)||null!==this.mediaIndex&&e.timeline!==this.currentTimeline_&&e.timeline>0;this.logger_(`Requesting ${Ib(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=lq({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:c,level:f,stream:y})=>{this.logger_(`${Ib(e)} logged from transmuxer stream ${y} as a ${f}: ${c}`)}})}trimBackBuffer_(e){const t=((n,e,t)=>{let r=e-Zs.BACK_BUFFER_LENGTH;return n.length&&(r=Math.max(r,n.start(0))),Math.min(e-t,r)})(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,r=e.part,i={resolvedUri:r?r.resolvedUri:t.resolvedUri,byterange:r?r.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},s=e.playlist.segments[e.mediaIndex-1];if(s&&s.timeline===t.timeline&&(s.videoTimingInfo?i.baseStartTime=s.videoTimingInfo.transmuxedDecodeEnd:s.audioTimingInfo&&(i.baseStartTime=s.audioTimingInfo.transmuxedDecodeEnd)),t.key){const a=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key=this.segmentKey(t.key),i.key.iv=a}return t.map&&(i.map=this.initSegmentForMap(t.map)),i}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<hI?this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${hI}`):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,r){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,r));if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",-102===e.code)return;return this.pause(),-101===e.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),i.endOfAllRequests=t.endOfAllRequests,r.gopInfo&&(this.gopBuffer_=((n,e,t)=>{if(!e.length)return n;if(this.safeAppend_)return e.slice();const r=e[0].pts;let i=0;for(;i<n.length&&!(n[i].pts>=r);i++);return n.slice(0,i).concat(e)})(this.gopBuffer_,r.gopInfo)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){this.mediaSecondsLoaded+="number"==typeof e.start&&"number"==typeof e.end?e.end-e.start:e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:r,firstVideoFrameTimeForData:i,currentVideoTimestampOffset:s,useVideoTimingInfo:a,videoTimingInfo:c,audioTimingInfo:f}){if(void 0!==e)return e;if(!a)return f.start;const y=t.segments[r-1];return 0!==r&&y&&void 0!==y.start&&y.end===i+s?c.start:i}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");const{hasAudio:r,hasVideo:i,isMuxed:s}=t,a="main"===this.loaderType_&&i,c=!this.audioDisabled_&&r&&!s;if(e.waitingOnAppends=0,!e.hasAppendedData_)return!e.timingInfo&&"number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);a&&e.waitingOnAppends++,c&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),c&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=((n,e,t)=>"main"===n&&e&&t?t.hasAudio||t.hasVideo?e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null)(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(e){if(null===e.timestampOffset||"number"!=typeof e.timingInfo.start||e.changedTimestampOffset||"main"!==this.loaderType_)return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:r}){return this.useDtsForTimestampOffset_?e&&"number"==typeof e.transmuxedDecodeStart?e.transmuxedDecodeStart:t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:r.start:r.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),i="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;!i||(e.timingInfo.end="number"==typeof i.end?i.end:i.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());const e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});const t=((n,e)=>{if("hls"!==e)return null;const t=(n=>{let e=0;return["video","audio"].forEach(function(t){const r=n[`${t}TimingInfo`];if(!r)return;const{start:i,end:s}=r;let a;"bigint"==typeof i||"bigint"==typeof s?a=fe().BigInt(s)-fe().BigInt(i):"number"==typeof i&&"number"==typeof s&&(a=s-i),void 0!==a&&a>e&&(e=a)}),"bigint"==typeof e&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e})({audioTimingInfo:n.audioTimingInfo,videoTimingInfo:n.videoTimingInfo});if(!t)return null;const r=n.playlist.targetDuration,i=jU({segmentDuration:t,maxDuration:2*r}),s=jU({segmentDuration:t,maxDuration:r});return i||s?{severity:i?"warn":"info",message:`Segment with index ${n.mediaIndex} from playlist ${n.playlist.id} has a duration of ${t} when the reported duration is ${n.duration} and the target duration is ${r}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`}:null})(e,this.sourceType_);if(t&&("warn"===t.severity?ht.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_))return void this.logger_(`Throwing away un-appended sync request ${Ib(e)}`);this.logger_(`Appended ${Ib(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"===this.loaderType_&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const r=e.segment,i=e.part,s=r.end&&this.currentTime_()-r.end>3*e.playlist.targetDuration,a=i&&i.end&&this.currentTime_()-i.end>3*e.playlist.partTargetDuration;if(s||a)return this.logger_(`bad ${s?"segment":"part"} ${Ib(e)}`),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<hI)return void this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${hI}`);const t=this.throughput.rate,r=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/r*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,r=t.start,i=t.end;if(!UU(r)||!UU(i))return;iC(r,i,this.segmentMetadataTrack_);const s=fe().WebKitDataCue||fe().VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:r,end:i},f=new s(r,i,JSON.stringify(a));f.value=a,this.segmentMetadataTrack_.addCue(f)}}function cp(){}const $U=function(n){return"string"!=typeof n?n:n.replace(/./,e=>e.toUpperCase())},Fq=["video","audio"],FP=(n,e)=>{const t=e[`${n}Buffer`];return t&&t.updating||e.queuePending[n]},Ab=(n,e)=>{if(0===e.queue.length)return;let t=0,r=e.queue[t];if("mediaSource"!==r.type){if("mediaSource"!==n&&e.ready()&&"closed"!==e.mediaSource.readyState&&!FP(n,e)){if(r.type!==n){if(t=((n,e)=>{for(let t=0;t<e.length;t++){const r=e[t];if("mediaSource"===r.type)return null;if(r.type===n)return t}return null})(n,e.queue),null===t)return;r=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[n]=r,r.action(n,e),!r.doneFn)return e.queuePending[n]=null,void Ab(n,e)}}else!e.updating()&&"closed"!==e.mediaSource.readyState&&(e.queue.shift(),r.action(e),r.doneFn&&r.doneFn(),Ab("audio",e),Ab("video",e))},HU=(n,e)=>{const t=e[`${n}Buffer`],r=$U(n);!t||(t.removeEventListener("updateend",e[`on${r}UpdateEnd_`]),t.removeEventListener("error",e[`on${r}Error_`]),e.codecs[n]=null,e[`${n}Buffer`]=null)},gh=(n,e)=>n&&e&&-1!==Array.prototype.indexOf.call(n.sourceBuffers,e),Du_appendBuffer=(n,e,t)=>(r,i)=>{const s=i[`${r}Buffer`];if(gh(i.mediaSource,s)){i.logger_(`Appending segment ${e.mediaIndex}'s ${n.length} bytes to ${r}Buffer`);try{s.appendBuffer(n)}catch(a){i.logger_(`Error with code ${a.code} `+(22===a.code?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${r}Buffer`),i.queuePending[r]=null,t(a)}}},Du_remove=(n,e)=>(t,r)=>{const i=r[`${t}Buffer`];if(gh(r.mediaSource,i)){r.logger_(`Removing ${n} to ${e} from ${t}Buffer`);try{i.remove(n,e)}catch(s){r.logger_(`Remove ${n} to ${e} from ${t}Buffer failed`)}}},Du_timestampOffset=n=>(e,t)=>{const r=t[`${e}Buffer`];!gh(t.mediaSource,r)||(t.logger_(`Setting ${e}timestampOffset to ${n}`),r.timestampOffset=n)},Du_callback=n=>(e,t)=>{n()},Du_endOfStream=n=>e=>{if("open"===e.mediaSource.readyState){e.logger_(`Calling mediaSource endOfStream(${n||""})`);try{e.mediaSource.endOfStream(n)}catch(t){ht.log.warn("Failed to call media source endOfStream",t)}}},Du_duration=n=>e=>{e.logger_(`Setting mediaSource duration to ${n}`);try{e.mediaSource.duration=n}catch(t){ht.log.warn("Failed to set media source duration",t)}},Du_addSourceBuffer=(n,e)=>t=>{const r=$U(n),i=Nw(e);t.logger_(`Adding ${n}Buffer with codec ${e} to mediaSource`);const s=t.mediaSource.addSourceBuffer(i);s.addEventListener("updateend",t[`on${r}UpdateEnd_`]),s.addEventListener("error",t[`on${r}Error_`]),t.codecs[n]=e,t[`${n}Buffer`]=s},Du_removeSourceBuffer=n=>e=>{const t=e[`${n}Buffer`];if(HU(n,e),gh(e.mediaSource,t)){e.logger_(`Removing ${n}Buffer with codec ${e.codecs[n]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(t)}catch(r){ht.log.warn(`Failed to removeSourceBuffer ${n}Buffer`,r)}}},Du_changeType=n=>(e,t)=>{const r=t[`${e}Buffer`],i=Nw(n);!gh(t.mediaSource,r)||t.codecs[e]!==n&&(t.logger_(`changing ${e}Buffer codec from ${t.codecs[e]} to ${n}`),r.changeType(i),t.codecs[e]=n)},Iu=({type:n,sourceUpdater:e,action:t,doneFn:r,name:i})=>{e.queue.push({type:n,action:t,doneFn:r,name:i}),Ab(n,e)},qU=(n,e)=>t=>{if(e.queuePending[n]){const r=e.queuePending[n].doneFn;e.queuePending[n]=null,r&&r(e[`${n}Error_`])}Ab(n,e)};class GU extends ht.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>Ab("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=Pl("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=qU("video",this),this.onAudioUpdateEnd_=qU("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){Iu({type:"mediaSource",sourceUpdater:this,action:Du_addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){Iu({type:e,sourceUpdater:this,action:(n,e)=>{if("open"!==e.mediaSource.readyState)return;const t=e[`${n}Buffer`];if(gh(e.mediaSource,t)){e.logger_(`calling abort on ${n}Buffer`);try{t.abort()}catch(r){ht.log.warn(`Failed to abort on ${n}Buffer`,r)}}},name:"abort"})}removeSourceBuffer(e){this.canRemoveSourceBuffer()?Iu({type:"mediaSource",sourceUpdater:this,action:Du_removeSourceBuffer(e),name:"removeSourceBuffer"}):ht.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!ht.browser.IS_FIREFOX&&fe().MediaSource&&fe().MediaSource.prototype&&"function"==typeof fe().MediaSource.prototype.removeSourceBuffer}static canChangeType(){return fe().SourceBuffer&&fe().SourceBuffer.prototype&&"function"==typeof fe().SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){this.canChangeType()?Iu({type:e,sourceUpdater:this,action:Du_changeType(t),name:"changeType"}):ht.log.error("changeType is not supported!")}addOrChangeSourceBuffers(e){if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const r=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,r);this.canChangeType()&&this.changeType(t,r)})}appendBuffer(e,t){const{segmentInfo:r,type:i,bytes:s}=e;if(this.processedAppend_=!0,"audio"===i&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_(`delayed audio append of ${s.length} until video append`);if(Iu({type:i,sourceUpdater:this,action:Du_appendBuffer(s,r||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===i){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const c=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${c.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,c.forEach(f=>{this.appendBuffer.apply(this,f)})}}audioBuffered(){return gh(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:zo()}videoBuffered(){return gh(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:zo()}buffered(){const e=gh(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=gh(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(n,e){let t=null,r=null,i=0;const s=[],a=[];if(!(n&&n.length&&e&&e.length))return zo();let c=n.length;for(;c--;)s.push({time:n.start(c),type:"start"}),s.push({time:n.end(c),type:"end"});for(c=e.length;c--;)s.push({time:e.start(c),type:"start"}),s.push({time:e.end(c),type:"end"});for(s.sort(function(f,y){return f.time-y.time}),c=0;c<s.length;c++)"start"===s[c].type?(i++,2===i&&(t=s[c].time)):"end"===s[c].type&&(i--,1===i&&(r=s[c].time)),null!==t&&null!==r&&(a.push([t,r]),t=null,r=null);return zo(a)}(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=cp){Iu({type:"mediaSource",sourceUpdater:this,action:Du_duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=cp){"string"!=typeof e&&(e=void 0),Iu({type:"mediaSource",sourceUpdater:this,action:Du_endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,r=cp){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Iu({type:"audio",sourceUpdater:this,action:Du_remove(e,t),doneFn:r,name:"remove"}):r()}removeVideo(e,t,r=cp){this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Iu({type:"video",sourceUpdater:this,action:Du_remove(e,t),doneFn:r,name:"remove"}):r()}updating(){return!(!FP("audio",this)&&!FP("video",this))}audioTimestampOffset(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Iu({type:"audio",sourceUpdater:this,action:Du_timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(Iu({type:"video",sourceUpdater:this,action:Du_timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){!this.audioBuffer||Iu({type:"audio",sourceUpdater:this,action:Du_callback(e),name:"callback"})}videoQueueCallback(e){!this.videoBuffer||Iu({type:"video",sourceUpdater:this,action:Du_callback(e),name:"callback"})}dispose(){this.trigger("dispose"),Fq.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>HU(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const zU=n=>decodeURIComponent(escape(String.fromCharCode.apply(null,n))),WU=new Uint8Array("\n\n".split("").map(n=>n.charCodeAt(0)));class Vq extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class jq extends LP{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.loaderType_="subtitle",this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return zo();const e=this.subtitlesTrack_.cues;return zo([[e[0].startTime,e[e.length-1].startTime]])}initSegmentForMap(e,t=!1){if(!e)return null;const r=uI(e);let i=this.initSegments_[r];if(t&&!i&&e.bytes){const a=new Uint8Array(WU.byteLength+e.bytes.byteLength);a.set(e.bytes),a.set(WU,e.bytes.byteLength),this.initSegments_[r]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return i||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}remove(e,t){iC(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline))return this.syncController_.one("timestampoffset",()=>{this.state="READY",this.paused()||this.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,r){if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return-101===e.code&&this.handleTimeout_(),-102===e.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const s=i.segment;if(s.map&&(s.map.bytes=t.map.bytes),i.bytes=t.bytes,"function"!=typeof fe().WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then(()=>this.segmentRequestFinished_(e,t,r),()=>this.stopForError({message:"Error loading vtt.js"}));s.requested=!0;try{this.parseVTTCues_(i)}catch(a){return void this.stopForError({message:a.message})}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.timingInfo=i.cues.length?{start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:{start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,i.cues.forEach(a=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new(fe().VTTCue)(a.startTime,a.endTime,a.text):a)}),function(n){const e=n.cues;if(!e)return;const t={};for(let r=e.length-1;r>=0;r--){const i=e[r],s=`${i.startTime}-${i.endTime}-${i.text}`;t[s]?n.removeCue(i):t[s]=i}}(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let t,r=!1;if("function"!=typeof fe().WebVTT)throw new Vq;"function"==typeof fe().TextDecoder?t=new(fe().TextDecoder)("utf8"):(t=fe().WebVTT.StringDecoder(),r=!0);const i=new(fe().WebVTT.Parser)(fe(),fe().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=a=>{e.timestampmap=a},i.onparsingerror=a=>{ht.log.warn("Error encountered when parsing cues: "+a.message)},e.segment.map){let a=e.segment.map.bytes;r&&(a=zU(a)),i.parse(a)}let s=e.bytes;r&&(s=zU(s)),i.parse(s),i.flush()}updateTimeMapping_(e,t,r){const i=e.segment;if(!t)return;if(!e.cues.length)return void(i.empty=!0);const s=e.timestampmap,a=s.MPEGTS/DD.ONE_SECOND_IN_TS-s.LOCAL+t.mapping;e.cues.forEach(c=>{c.startTime+=a,c.endTime+=a}),r.syncInfo||(r.syncInfo={mediaSequence:r.mediaSequence+e.mediaIndex,time:Math.min(e.cues[0].startTime,e.cues[e.cues.length-1].startTime-i.duration)})}}const $q=function(n,e){const t=n.cues;for(let r=0;r<t.length;r++){const i=t[r];if(e>=i.adStartTime&&e<=i.adEndTime)return i}return null},UP=[{name:"VOD",run:(n,e,t,r,i)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(n,e,t,r,i,s)=>{if(!s)return null;const a=n.getMediaSequenceMap(s);if(!a||0===a.size||void 0===e.mediaSequence||!Array.isArray(e.segments)||!e.segments.length)return null;let c=e.mediaSequence,f=0;for(const y of e.segments){const b=a.get(c);if(!b)break;if(i>=b.start&&i<b.end){if(Array.isArray(y.parts)&&y.parts.length){let D=b.start,N=0;for(const B of y.parts){const K=D+B.duration;if(i>=D&&i<K)return{time:b.start,segmentIndex:f,partIndex:N};N++,D=K}}return{time:b.start,segmentIndex:f,partIndex:null}}f++,c++}return null}},{name:"ProgramDateTime",run:(n,e,t,r,i)=>{if(!Object.keys(n.timelineToDatetimeMappings).length)return null;let s=null,a=null;const c=EP(e);i=i||0;for(let f=0;f<c.length;f++){const b=c[e.endList||0===i?f:c.length-(f+1)],D=b.segment,N=n.timelineToDatetimeMappings[D.timeline];if(!N||!D.dateTimeObject)continue;let U=D.dateTimeObject.getTime()/1e3+N;if(D.parts&&"number"==typeof b.partIndex)for(let ie=0;ie<b.partIndex;ie++)U+=D.parts[ie].duration;const K=Math.abs(i-U);if(null!==a&&(0===K||a<K))break;a=K,s={time:U,segmentIndex:b.segmentIndex,partIndex:b.partIndex}}return s}},{name:"Segment",run:(n,e,t,r,i)=>{let s=null,a=null;i=i||0;const c=EP(e);for(let f=0;f<c.length;f++){const b=c[e.endList||0===i?f:c.length-(f+1)],D=b.segment,N=b.part&&b.part.start||D&&D.start;if(D.timeline===r&&void 0!==N){const B=Math.abs(i-N);if(null!==a&&a<B)break;(!s||null===a||a>=B)&&(a=B,s={time:N,segmentIndex:b.segmentIndex,partIndex:b.partIndex})}}return s}},{name:"Discontinuity",run:(n,e,t,r,i)=>{let s=null;if(i=i||0,e.discontinuityStarts&&e.discontinuityStarts.length){let a=null;for(let c=0;c<e.discontinuityStarts.length;c++){const f=e.discontinuityStarts[c],b=n.discontinuities[e.discontinuitySequence+c+1];if(b){const D=Math.abs(i-b.time);if(null!==a&&a<D)break;(!s||null===a||a>=D)&&(a=D,s={time:b.time,segmentIndex:f,partIndex:null})}}}return s}},{name:"Playlist",run:(n,e,t,r,i)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class Gq extends ht.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.mediaSequenceStorage_=new Map,this.logger_=Pl("SyncController")}getMediaSequenceMap(e){return this.mediaSequenceStorage_.get(e)}updateMediaSequenceMap(e,t,r){if(void 0===e.mediaSequence||!Array.isArray(e.segments)||!e.segments.length)return;const i=this.getMediaSequenceMap(r),s=new Map;let c,a=e.mediaSequence;i?i.has(e.mediaSequence)?c=i.get(e.mediaSequence).start:(this.logger_(`MediaSequence sync for ${r} segment loader - received a gap between playlists.\nFallback base time to: ${t}.\nReceived media sequence: ${a}.\nCurrent map: `,i),c=t):c=0,this.logger_(`MediaSequence sync for ${r} segment loader.\nReceived media sequence: ${a}.\nbase time is ${c}\nCurrent map: `,i),e.segments.forEach(f=>{const b=c+f.duration;s.set(a,{start:c,end:b}),a++,c=b}),this.mediaSequenceStorage_.set(r,s)}getSyncPoint(e,t,r,i,s){if(t!==1/0)return UP.find(({name:f})=>"VOD"===f).run(this,e,t);const a=this.runStrategies_(e,t,r,i,s);if(!a.length)return null;for(const c of a){const{syncPoint:f,strategy:y}=c,{segmentIndex:b,time:D}=f;if(b<0)continue;const B=D,U=B+e.segments[b].duration;if(this.logger_(`Strategy: ${y}. Current time: ${i}. selected segment: ${b}. Time: [${B} -> ${U}]}`),i>=B&&i<U)return this.logger_("Found sync point with exact match: ",f),f}return this.selectSyncPoint_(a,{key:"time",value:i})}getExpiredTime(e,t){if(!e||!e.segments)return null;const r=this.runStrategies_(e,t,e.discontinuitySequence,0,"main");if(!r.length)return null;const i=this.selectSyncPoint_(r,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+eC({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:i.segmentIndex,endIndex:0}))}runStrategies_(e,t,r,i,s){const a=[];for(let c=0;c<UP.length;c++){const f=UP[c],y=f.run(this,e,t,r,i,s);y&&(y.strategy=f.name,a.push({strategy:f.name,syncPoint:y}))}return a}selectSyncPoint_(e,t){let r=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),s=e[0].strategy;for(let a=1;a<e.length;a++){const c=Math.abs(e[a].syncPoint[t.key]-t.value);c<i&&(i=c,r=e[a].syncPoint,s=e[a].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${s}]: [time:${r.time}, segmentIndex:${r.segmentIndex}`+("number"==typeof r.partIndex?`,partIndex:${r.partIndex}`:"")+"]"),r}saveExpiredSegmentInfo(e,t){const r=t.mediaSequence-e.mediaSequence;if(r>86400)ht.log.warn(`Not saving expired segment info. Media sequence gap ${r} is too large.`);else for(let i=r-1;i>=0;i--){const s=e.segments[i];if(s&&void 0!==s.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:s.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],r=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-r}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const r=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),i=e.segment;r&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:i.start}));const s=i.dateTimeObject;i.discontinuity&&t&&s&&(this.timelineToDatetimeMappings[i.timeline]=-s.getTime()/1e3)}timestampOffsetForTimeline(e){return void 0===this.timelines[e]?null:this.timelines[e].time}mappingForTimeline(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,r){const i=e.segment,s=e.part;let c,f,a=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},r&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),c=e.startOfSegment,f=t.end+a.mapping;else{if(!a)return!1;c=t.start+a.mapping,f=t.end+a.mapping}return s&&(s.start=c,s.end=f),(!i.start||c<i.start)&&(i.start=c),i.end=f,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,r=e.segment;if(r.discontinuity)this.discontinuities[r.timeline]={time:r.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let i=0;i<t.discontinuityStarts.length;i++){const s=t.discontinuityStarts[i],a=t.discontinuitySequence+i+1,c=s-e.mediaIndex,f=Math.abs(c);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>f){let y;y=c<0?r.start-eC({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:s}):r.end+eC({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:s}),this.discontinuities[a]={time:y,accuracy:f}}}}dispose(){this.trigger("dispose"),this.off()}}class zq extends ht.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:r}){return"number"==typeof t&&"number"==typeof r&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:r},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:r}){return"number"==typeof t&&"number"==typeof r&&(this.lastTimelineChanges_[e]={type:e,from:t,to:r},delete this.pendingTimelineChanges_[e],this.trigger("timelinechange")),this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const Wq=bU(TU(function(){var n=function(){function K(){this.listeners={}}var ie=K.prototype;return ie.on=function(be,Le){this.listeners[be]||(this.listeners[be]=[]),this.listeners[be].push(Le)},ie.off=function(be,Le){if(!this.listeners[be])return!1;var Me=this.listeners[be].indexOf(Le);return this.listeners[be]=this.listeners[be].slice(0),this.listeners[be].splice(Me,1),Me>-1},ie.trigger=function(be){var Le=this.listeners[be];if(Le)if(2===arguments.length)for(var Me=Le.length,Ee=0;Ee<Me;++Ee)Le[Ee].call(this,arguments[1]);else for(var pt=Array.prototype.slice.call(arguments,1),Nt=Le.length,hn=0;hn<Nt;++hn)Le[hn].apply(this,pt)},ie.dispose=function(){this.listeners={}},ie.pipe=function(be){this.on("data",function(Le){be.push(Le)})},K}();let r=null;class i{constructor(ie){let Ae,be,Le;r||(r=function(){const K=[[[],[],[],[],[]],[[],[],[],[],[]]],ie=K[0],Ae=K[1],be=ie[4],Le=Ae[4];let Me,Ee,pt;const Nt=[],hn=[];let ct,Jt,Ir,Br,on,Ar;for(Me=0;Me<256;Me++)hn[(Nt[Me]=Me<<1^283*(Me>>7))^Me]=Me;for(Ee=pt=0;!be[Ee];Ee^=ct||1,pt=hn[pt]||1)for(Br=pt^pt<<1^pt<<2^pt<<3^pt<<4,Br=Br>>8^255&Br^99,be[Ee]=Br,Le[Br]=Ee,Ir=Nt[Jt=Nt[ct=Nt[Ee]]],Ar=16843009*Ir^65537*Jt^257*ct^16843008*Ee,on=257*Nt[Br]^16843008*Br,Me=0;Me<4;Me++)ie[Me][Ee]=on=on<<24^on>>>8,Ae[Me][Br]=Ar=Ar<<24^Ar>>>8;for(Me=0;Me<5;Me++)ie[Me]=ie[Me].slice(0),Ae[Me]=Ae[Me].slice(0);return K}()),this._tables=[[r[0][0].slice(),r[0][1].slice(),r[0][2].slice(),r[0][3].slice(),r[0][4].slice()],[r[1][0].slice(),r[1][1].slice(),r[1][2].slice(),r[1][3].slice(),r[1][4].slice()]];const Me=this._tables[0][4],Ee=this._tables[1],pt=ie.length;let Nt=1;if(4!==pt&&6!==pt&&8!==pt)throw new Error("Invalid aes key size");const hn=ie.slice(0),ct=[];for(this._key=[hn,ct],Ae=pt;Ae<4*pt+28;Ae++)Le=hn[Ae-1],(Ae%pt==0||8===pt&&Ae%pt==4)&&(Le=Me[Le>>>24]<<24^Me[Le>>16&255]<<16^Me[Le>>8&255]<<8^Me[255&Le],Ae%pt==0&&(Le=Le<<8^Le>>>24^Nt<<24,Nt=Nt<<1^283*(Nt>>7))),hn[Ae]=hn[Ae-pt]^Le;for(be=0;Ae;be++,Ae--)Le=hn[3&be?Ae:Ae-4],ct[be]=Ae<=4||be<4?Le:Ee[0][Me[Le>>>24]]^Ee[1][Me[Le>>16&255]]^Ee[2][Me[Le>>8&255]]^Ee[3][Me[255&Le]]}decrypt(ie,Ae,be,Le,Me,Ee){const pt=this._key[1];let Ir,Br,on,Nt=ie^pt[0],hn=Le^pt[1],ct=be^pt[2],Jt=Ae^pt[3];const Ar=pt.length/4-2;let Ri,Va=4;const Uc=this._tables[1],mh=Uc[0],_h=Uc[1],Bc=Uc[2],Jn=Uc[3],Dn=Uc[4];for(Ri=0;Ri<Ar;Ri++)Ir=mh[Nt>>>24]^_h[hn>>16&255]^Bc[ct>>8&255]^Jn[255&Jt]^pt[Va],Br=mh[hn>>>24]^_h[ct>>16&255]^Bc[Jt>>8&255]^Jn[255&Nt]^pt[Va+1],on=mh[ct>>>24]^_h[Jt>>16&255]^Bc[Nt>>8&255]^Jn[255&hn]^pt[Va+2],Jt=mh[Jt>>>24]^_h[Nt>>16&255]^Bc[hn>>8&255]^Jn[255&ct]^pt[Va+3],Va+=4,Nt=Ir,hn=Br,ct=on;for(Ri=0;Ri<4;Ri++)Me[(3&-Ri)+Ee]=Dn[Nt>>>24]<<24^Dn[hn>>16&255]<<16^Dn[ct>>8&255]<<8^Dn[255&Jt]^pt[Va++],Ir=Nt,Nt=hn,hn=ct,ct=Jt,Jt=Ir}}class s extends n{constructor(){super(n),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null}push(ie){this.jobs.push(ie),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const a=function(K){return K<<24|(65280&K)<<8|(16711680&K)>>8|K>>>24};class f{constructor(ie,Ae,be,Le){const Me=f.STEP,Ee=new Int32Array(ie.buffer),pt=new Uint8Array(ie.byteLength);let Nt=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(Ee.subarray(Nt,Nt+Me),Ae,be,pt)),Nt=Me;Nt<Ee.length;Nt+=Me)be=new Uint32Array([a(Ee[Nt-4]),a(Ee[Nt-3]),a(Ee[Nt-2]),a(Ee[Nt-1])]),this.asyncStream_.push(this.decryptChunk_(Ee.subarray(Nt,Nt+Me),Ae,be,pt));this.asyncStream_.push(function(){Le(null,function e(K){return K.subarray(0,K.byteLength-K[K.byteLength-1])}(pt))})}static get STEP(){return 32e3}decryptChunk_(ie,Ae,be,Le){return function(){const Me=function(K,ie,Ae){const be=new Int32Array(K.buffer,K.byteOffset,K.byteLength>>2),Le=new i(Array.prototype.slice.call(ie)),Me=new Uint8Array(K.byteLength),Ee=new Int32Array(Me.buffer);let pt,Nt,hn,ct,Jt,Ir,Br,on,Ar;for(pt=Ae[0],Nt=Ae[1],hn=Ae[2],ct=Ae[3],Ar=0;Ar<be.length;Ar+=4)Jt=a(be[Ar]),Ir=a(be[Ar+1]),Br=a(be[Ar+2]),on=a(be[Ar+3]),Le.decrypt(Jt,Ir,Br,on,Ee,Ar),Ee[Ar]=a(Ee[Ar]^pt),Ee[Ar+1]=a(Ee[Ar+1]^Nt),Ee[Ar+2]=a(Ee[Ar+2]^hn),Ee[Ar+3]=a(Ee[Ar+3]^ct),pt=Jt,Nt=Ir,hn=Br,ct=on;return Me}(ie,Ae,be);Le.set(Me,ie.byteOffset)}}}var K,y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},B=("undefined"!=typeof window?window:void 0!==y?y:"undefined"!=typeof self?self:{}).BigInt||Number;B("0x1"),B("0x100"),B("0x10000"),B("0x1000000"),B("0x100000000"),B("0x10000000000"),B("0x1000000000000"),B("0x100000000000000"),B("0x10000000000000000"),K=new Uint16Array([65484]),new Uint8Array(K.buffer,K.byteOffset,K.byteLength);self.onmessage=function(K){const ie=K.data,Ae=new Uint8Array(ie.encrypted.bytes,ie.encrypted.byteOffset,ie.encrypted.byteLength),be=new Uint32Array(ie.key.bytes,ie.key.byteOffset,ie.key.byteLength/4),Le=new Uint32Array(ie.iv.bytes,ie.iv.byteOffset,ie.iv.byteLength/4);new f(Ae,be,Le,function(Me,Ee){self.postMessage(function(K){const ie={};return Object.keys(K).forEach(Ae=>{const be=K[Ae];ie[Ae]=function(ie){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(ie):ie&&ie.buffer instanceof ArrayBuffer}(be)?{bytes:be.buffer,byteOffset:be.byteOffset,byteLength:be.byteLength}:be}),ie}({source:ie.source,decrypted:Ee}),[Ee.buffer])})}}));var Kq=vU(Wq);const Zq=n=>{let e=n.default?"main":"alternative";return n.characteristics&&n.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},KU=(n,e)=>{n.abort(),n.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},BP=(n,e)=>{e.activePlaylistLoader=n,n.load()},fI={AUDIO:(n,e)=>()=>{const{mediaTypes:{[n]:t},excludePlaylist:r}=e,i=t.activeTrack(),s=t.activeGroup(),a=(s.filter(f=>f.default)[0]||s[0]).id,c=t.tracks[a];if(i!==c){ht.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const f in t.tracks)t.tracks[f].enabled=t.tracks[f]===c;t.onTrackChanged()}else r({error:{message:"Problem encountered loading the default audio track."}})},SUBTITLES:(n,e)=>()=>{const{mediaTypes:{[n]:t}}=e;ht.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const r=t.activeTrack();r&&(r.mode="disabled"),t.onTrackChanged()}},ZU={AUDIO:(n,e,t)=>{if(!e)return;const{tech:r,requestOptions:i,segmentLoaders:{[n]:s}}=t;e.on("loadedmetadata",()=>{const a=e.media();s.playlist(a,i),(!r.paused()||a.endList&&"none"!==r.preload())&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),i),r.paused()||s.load()}),e.on("error",fI[n](n,t))},SUBTITLES:(n,e,t)=>{const{tech:r,requestOptions:i,segmentLoaders:{[n]:s},mediaTypes:{[n]:a}}=t;e.on("loadedmetadata",()=>{const c=e.media();s.playlist(c,i),s.track(a.activeTrack()),(!r.paused()||c.endList&&"none"!==r.preload())&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),i),r.paused()||s.load()}),e.on("error",fI[n](n,t))}},Jq={AUDIO:(n,e)=>{const{vhs:t,sourceType:r,segmentLoaders:{[n]:i},requestOptions:s,main:{mediaGroups:a},mediaTypes:{[n]:{groups:c,tracks:f,logger_:y}},mainPlaylistLoader:b}=e,D=tC(b.main);(!a[n]||0===Object.keys(a[n]).length)&&(a[n]={main:{default:{default:!0}}},D&&(a[n].main.default.playlists=b.main.playlists));for(const N in a[n]){c[N]||(c[N]=[]);for(const B in a[n][N]){let K,U=a[n][N][B];if(D?(y(`AUDIO group '${N}' label '${B}' is a main playlist`),U.isMainPlaylist=!0,K=null):K="vhs-json"===r&&U.playlists?new xb(U.playlists[0],t,s):U.resolvedUri?new xb(U.resolvedUri,t,s):U.playlists&&"dash"===r?new MP(U.playlists[0],t,s,b):null,U=Dr({id:B,playlistLoader:K},U),ZU[n](n,U.playlistLoader,e),c[N].push(U),void 0===f[B]){const ie=new ht.AudioTrack({id:B,kind:Zq(U),enabled:!1,language:U.language,default:U.default,label:B});f[B]=ie}}}i.on("error",fI[n](n,e))},SUBTITLES:(n,e)=>{const{tech:t,vhs:r,sourceType:i,segmentLoaders:{[n]:s},requestOptions:a,main:{mediaGroups:c},mediaTypes:{[n]:{groups:f,tracks:y}},mainPlaylistLoader:b}=e;for(const D in c[n]){f[D]||(f[D]=[]);for(const N in c[n][D]){if(!r.options_.useForcedSubtitles&&c[n][D][N].forced)continue;let U,B=c[n][D][N];if("hls"===i)U=new xb(B.resolvedUri,r,a);else if("dash"===i){if(!B.playlists.filter(ie=>ie.excludeUntil!==1/0).length)return;U=new MP(B.playlists[0],r,a,b)}else"vhs-json"===i&&(U=new xb(B.playlists?B.playlists[0]:B.resolvedUri,r,a));if(B=Dr({id:N,playlistLoader:U},B),ZU[n](n,B.playlistLoader,e),f[D].push(B),void 0===y[N]){const K=t.addRemoteTextTrack({id:N,kind:"subtitles",default:B.default&&B.autoselect,language:B.language,label:N},!1).track;y[N]=K}}}s.on("error",fI[n](n,e))},"CLOSED-CAPTIONS":(n,e)=>{const{tech:t,main:{mediaGroups:r},mediaTypes:{[n]:{groups:i,tracks:s}}}=e;for(const a in r[n]){i[a]||(i[a]=[]);for(const c in r[n][a]){const f=r[n][a][c];if(!/^(?:CC|SERVICE)/.test(f.instreamId))continue;const y=t.options_.vhs&&t.options_.vhs.captionServices||{};let b={label:c,language:f.language,instreamId:f.instreamId,default:f.default&&f.autoselect};if(y[b.instreamId]&&(b=Dr(b,y[b.instreamId])),void 0===b.default&&delete b.default,i[a].push(Dr({id:c},f)),void 0===s[c]){const D=t.addRemoteTextTrack({id:b.instreamId,kind:"captions",default:b.default,language:b.language,label:b.label},!1).track;s[c]=D}}}}},YU=(n,e)=>{for(let t=0;t<n.length;t++)if(SP(e,n[t])||n[t].playlists&&YU(n[t].playlists,e))return!0;return!1},tG={AUDIO:(n,e)=>()=>{const{mediaTypes:{[n]:{tracks:t}}}=e;for(const r in t)if(t[r].enabled)return t[r];return null},SUBTITLES:(n,e)=>()=>{const{mediaTypes:{[n]:{tracks:t}}}=e;for(const r in t)if("showing"===t[r].mode||"hidden"===t[r].mode)return t[r];return null}};class QU{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){1===e&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=Ua(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(t=>[t.ID,t])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class sG extends ht.EventTarget{constructor(e,t){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new QU,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=Pl("Content Steering"),this.xhr_=e,this.getBandwidth_=t}assignTagProperties(e,t){this.manifestType_=t.serverUri?"HLS":"DASH";const r=t.serverUri||t.serverURL;if(!r)return this.logger_(`steering manifest URL is ${r}, cannot request steering manifest.`),void this.trigger("error");r.startsWith("data:")?this.decodeDataUriManifest_(r.substring(r.indexOf(",")+1)):(this.steeringManifest.reloadUri=Ua(e,r),this.defaultPathway=t.pathwayId||t.defaultServiceLocation,this.queryBeforeStart=t.queryBeforeStart,this.proxyServerUrl_=t.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering"))}requestSteeringManifest(e){const t=this.steeringManifest.reloadUri;if(!t)return;const r=e?t:this.getRequestURI(t);if(!r)return this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),void this.dispose();this.request_=this.xhr_({uri:r},(i,s)=>{if(i){if(410===s.status)return this.logger_(`manifest request 410 ${i}.`),this.logger_(`There will be no more content steering requests to ${r} this session.`),void this.excludedSteeringManifestURLs.add(r);if(429===s.status){const c=s.responseHeaders["retry-after"];return this.logger_(`manifest request 429 ${i}.`),this.logger_(`content steering will retry in ${c} seconds.`),void this.startTTLTimeout_(parseInt(c,10))}return this.logger_(`manifest failed to load ${i}.`),void this.startTTLTimeout_()}const a=JSON.parse(this.request_.responseText);this.assignSteeringProperties_(a),this.startTTLTimeout_()})}setProxyServerUrl_(e){const t=new(fe().URL)(e),r=new(fe().URL)(this.proxyServerUrl_);return r.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(r.toString())}decodeDataUriManifest_(e){const t=JSON.parse(fe().atob(e));this.assignSteeringProperties_(t)}setSteeringParams_(e){const t=new(fe().URL)(e),r=this.getPathway(),i=this.getBandwidth_();return r&&t.searchParams.set(`_${this.manifestType_}_pathway`,r),i&&t.searchParams.set(`_${this.manifestType_}_throughput`,i),t.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version)return this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),void this.trigger("error");this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const r=(i=>{for(const s of i)if(this.availablePathways_.has(s))return s;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==r&&(this.currentPathway=r,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const t=i=>this.excludedSteeringManifestURLs.has(i);if(this.proxyServerUrl_){const i=this.setProxyServerUrl_(e);if(!t(i))return i}const r=this.setSteeringParams_(e);return t(r)?null:r}startTTLTimeout_(e=this.steeringManifest.ttl){const t=1e3*e;this.ttlTimeout_=fe().setTimeout(()=>{this.requestSteeringManifest()},t)}clearTTLTimeout_(){fe().clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new QU}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,t){return!t&&this.steeringManifest.reloadUri||t&&(Ua(e,t.serverURL)!==this.steeringManifest.reloadUri||t.defaultServiceLocation!==this.defaultPathway||t.queryBeforeStart!==this.queryBeforeStart||t.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}let dp;const aG=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],uG=function(n){return this.audioSegmentLoader_[n]+this.mainSegmentLoader_[n]};class cG extends ht.EventTarget{constructor(e){super();const{src:t,withCredentials:r,tech:i,bandwidth:s,externVhs:a,useCueTags:c,playlistExclusionDuration:f,enableLowInitialPlaylist:y,sourceType:b,cacheEncryptionKeys:D,bufferBasedABR:N,leastPixelDiffSelector:B,captionServices:U}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:K}=e;null==K&&(K=1/0),dp=a,this.bufferBasedABR=Boolean(N),this.leastPixelDiffSelector=Boolean(B),this.withCredentials=r,this.tech_=i,this.vhs_=i.vhs,this.sourceType_=b,this.useCueTags_=c,this.playlistExclusionDuration=f,this.maxPlaylistRetries=K,this.enableLowInitialPlaylist=y,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:r,maxPlaylistRetries:K,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=(()=>{const n={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{n[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:cp,activeTrack:cp,getActiveGroup:cp,onGroupChanged:cp,onTrackChanged:cp,lastTrack_:null,logger_:Pl(`MediaGroups[${e}]`)}}),n})(),this.mediaSource=new(fe().MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=zo(),this.hasPlayed_=!1,this.syncController_=new Gq(e),this.segmentMetadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new Kq,this.sourceUpdater_=new GU(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new zq,this.keyStatusMap_=new Map;const ie={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:U,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:D,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_="dash"===this.sourceType_?new MP(t,this.vhs_,Dr(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new xb(t,this.vhs_,Dr(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new LP(Dr(ie,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new LP(Dr(ie,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new jq(Dr(ie,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((Le,Me)=>{function Ee(){i.off("vttjserror",pt),Le()}function pt(){i.off("vttjsloaded",Ee),Me()}i.one("vttjsloaded",Ee),i.one("vttjserror",pt),i.addWebVttScript_()})}),e),this.contentSteeringController_=new sG(this.vhs_.xhr,()=>this.mainSegmentLoader_.bandwidth),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),aG.forEach(Le=>{this[Le+"_"]=uG.bind(this,Le)}),this.logger_=Pl("pc"),this.triggeredFmp4Usage=!1,"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const be="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(be,()=>{const Le=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-Le,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,r){const i=this.media(),s=i&&(i.id||i.uri),a=e&&(e.id||e.uri);s&&s!==a&&(this.logger_(`switch media ${s} -> ${a} from ${t}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})),this.mainPlaylistLoader_.media(e,r)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const t=this.mediaTypes_[e],r=t?t.activeGroup():null,i=this.contentSteeringController_.getPathway();if(r&&i){const a=(r.length?r[0].playlists:r.playlists).filter(c=>c.attributes.serviceLocation===i);a.length&&this.mediaTypes_[e].activePlaylistLoader.media(a[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=fe().setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(fe().clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const r=e.mediaGroups.AUDIO,i=Object.keys(r);let s;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{const c=r.main||i.length&&r[i[0]];for(const f in c)if(c[f].default){s={label:f};break}}if(!s)return t;const a=[];for(const c in r)if(r[c][s.label]){const f=r[c][s.label];if(f.playlists&&f.playlists.length)a.push.apply(a,f.playlists);else if(f.uri)a.push(f);else if(e.playlists.length)for(let y=0;y<e.playlists.length;y++){const b=e.playlists[y];b.attributes&&b.attributes.AUDIO&&b.attributes.AUDIO===c&&a.push(b)}}return a.length?a:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;this.requestOptions_.timeout=CP(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?0:t,e.endList&&"none"!==this.tech_.preload()&&(this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load()),(n=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(y=>{Jq[y](y,n)});const{mediaTypes:e,mainPlaylistLoader:t,tech:r,vhs:i,segmentLoaders:{AUDIO:s,main:a}}=n;["AUDIO","SUBTITLES"].forEach(y=>{e[y].activeGroup=((n,e)=>t=>{const{mainPlaylistLoader:r,mediaTypes:{[n]:{groups:i}}}=e,s=r.media();if(!s)return null;let a=null;s.attributes[n]&&(a=i[s.attributes[n]]);const c=Object.keys(i);if(!a)if("AUDIO"===n&&c.length>1&&tC(e.main))for(let f=0;f<c.length;f++){const y=i[c[f]];if(YU(y,s)){a=y;break}}else i.main?a=i.main:1===c.length&&(a=i[c[0]]);return void 0===t?a:null!==t&&a&&a.filter(f=>f.id===t.id)[0]||null})(y,n),e[y].activeTrack=tG[y](y,n),e[y].onGroupChanged=((n,e)=>()=>{const{segmentLoaders:{[n]:t,main:r},mediaTypes:{[n]:i}}=e,s=i.activeTrack(),a=i.getActiveGroup(),c=i.activePlaylistLoader,f=i.lastGroup_;if((!a||!f||a.id!==f.id)&&(i.lastGroup_=a,i.lastTrack_=s,KU(t,i),a&&!a.isMainPlaylist)){if(!a.playlistLoader)return void(c&&r.resetEverything());t.resyncLoader(),BP(a.playlistLoader,i)}})(y,n),e[y].onGroupChanging=((n,e)=>()=>{const{segmentLoaders:{[n]:t},mediaTypes:{[n]:r}}=e;r.lastGroup_=null,t.abort(),t.pause()})(y,n),e[y].onTrackChanged=((n,e)=>()=>{const{mainPlaylistLoader:t,segmentLoaders:{[n]:r,main:i},mediaTypes:{[n]:s}}=e,a=s.activeTrack(),c=s.getActiveGroup(),f=s.activePlaylistLoader,y=s.lastTrack_;if((!y||!a||y.id!==a.id)&&(s.lastGroup_=c,s.lastTrack_=a,KU(r,s),c)){if(c.isMainPlaylist){if(!a||!y||a.id===y.id)return;const b=e.vhs.playlistController_,D=b.selectPlaylist();if(b.media()===D)return;return s.logger_(`track change. Switching main audio from ${y.id} to ${a.id}`),t.pause(),i.resetEverything(),void b.fastQualityChange_(D)}if("AUDIO"===n){if(!c.playlistLoader)return i.setAudio(!0),void i.resetEverything();r.setAudio(!0),i.setAudio(!1)}if(f===c.playlistLoader)return void BP(c.playlistLoader,s);r.track&&r.track(a),r.resetEverything(),BP(c.playlistLoader,s)}})(y,n),e[y].getActiveGroup=((n,{mediaTypes:e})=>()=>{const t=e[n].activeTrack();return t?e[n].activeGroup(t):null})(y,n)});const c=e.AUDIO.activeGroup();if(c){const y=(c.filter(D=>D.default)[0]||c[0]).id;e.AUDIO.tracks[y].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),s.setAudio(!0)):a.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(y=>e[y].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(y=>e[y].onGroupChanging())});const f=()=>{e.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"})};r.audioTracks().addEventListener("change",f),r.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),i.on("dispose",()=>{r.audioTracks().removeEventListener("change",f),r.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),r.clearTracks("audio");for(const y in e.AUDIO.tracks)r.audioTracks().addTrack(e.AUDIO.tracks[y])})({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),e),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let e=this.mainPlaylistLoader_.media();if(!e){let t;if(this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_(),this.enableLowInitialPlaylist&&(t=this.selectInitialPlaylist()),t||(t=this.selectPlaylist()),!t||!this.shouldSwitchToMedia_(t)||(this.initialMedia_=t,this.switchMedia_(this.initialMedia_,"initial"),"vhs-json"!==this.sourceType_||!this.initialMedia_.segments))return;e=this.initialMedia_}this.handleUpdatedMediaPlaylist(e)}),this.mainPlaylistLoader_.on("error",()=>{const e=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:e.playlist,error:e})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;this.requestOptions_.timeout=CP(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?0:t,"dash"===this.sourceType_&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const e=this.mainPlaylistLoader_.media();"playlist-unchanged"!==e.lastExcludeReason_&&this.stuckAtPlaylistEnd_(e)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const r=e.mediaGroups||{};let i=!0;const s=Object.keys(r.AUDIO);for(const a in r.AUDIO)for(const c in r.AUDIO[a])r.AUDIO[a][c].uri||(i=!1);i&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(r.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),dp.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),s.length&&Object.keys(r.AUDIO[s[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,r=this.tech_.currentTime(),i=this.bufferLowWaterLine(),s=this.bufferHighWaterLine();return function({currentPlaylist:n,buffered:e,currentTime:t,nextPlaylist:r,bufferLowWaterLine:i,bufferHighWaterLine:s,duration:a,bufferBasedABR:c,log:f}){if(!r)return ht.log.warn("We received no playlist to switch to. Please check your stream."),!1;const y=`allowing switch ${n&&n.id||"null"} -> ${r.id}`;if(!n)return f(`${y} as current playlist is not set`),!0;if(r.id===n.id)return!1;const b=Boolean(wb(e,t).length);if(!n.endList)return b||"number"!=typeof n.partTargetDuration?(f(`${y} as current playlist is live`),!0):(f(`not ${y} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);const D=bP(e,t),N=c?Zs.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Zs.MAX_BUFFER_LOW_WATER_LINE;if(a<N)return f(`${y} as duration < max low water line (${a} < ${N})`),!0;const B=r.attributes.BANDWIDTH,U=n.attributes.BANDWIDTH;if(B<U&&(!c||D<s)){let K=`${y} as next bandwidth < current bandwidth (${B} < ${U})`;return c&&(K+=` and forwardBuffer < bufferHighWaterLine (${D} < ${s})`),f(K),!0}if((!c||B>U)&&D>=i){let K=`${y} as forwardBuffer >= bufferLowWaterLine (${D} >= ${i})`;return c&&(K+=` and next bandwidth > current bandwidth (${B} > ${U})`),f(K),!0}return f(`not ${y} as no switching criteria met`),!1}({buffered:this.tech_.buffered(),currentTime:r,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:s,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const t=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",t=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:10}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const t=this.getCodecsOrExclude_();!t||this.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(e=this.selectPlaylist()){e&&e===this.mainPlaylistLoader_.media()?this.logger_("skipping fastQualityChange because new media is same as old"):(this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0)}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(()=>{this.tech_.setCurrentTime(this.tech_.currentTime())})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const r=t.end(0);let i=r;if(e.start){const s=e.start.timeOffset;i=s<0?Math.max(r+s,t.start(0)):Math.min(r,s)}this.trigger("firstplay"),this.tech_.setCurrentTime(i)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}!e||(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const r=this.syncController_.getExpiredTime(e,this.duration());if(null===r)return!1;const i=dp.Playlist.playlistEnd(e,r),s=this.tech_.currentTime(),a=this.tech_.buffered();if(!a.length)return i-s<=fh;const c=a.end(a.length-1);return c-s<=fh&&i-c<=fh}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:r}){if(e=e||this.mainPlaylistLoader_.media(),r=r||t.playlistExclusionDuration||this.playlistExclusionDuration,!e)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));e.playlistErrors_++;const i=this.mainPlaylistLoader_.main.playlists,s=i.filter(aI),a=1===s.length&&s[0]===e;if(1===i.length&&r!==1/0)return ht.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(a);if(a){if(this.main().contentSteering){const U=this.pathwayAttribute_(e),K=1e3*this.contentSteeringController_.steeringManifest.ttl;return this.contentSteeringController_.excludePathway(U),this.excludeThenChangePathway_(),void setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(U)},K)}let B=!1;i.forEach(U=>{if(U===e)return;const K=U.excludeUntil;void 0!==K&&K!==1/0&&(B=!0,delete U.excludeUntil)}),B&&(ht.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let c;c=e.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*r,e.excludeUntil=c,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const f=this.selectPlaylist();if(!f)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");(t.internal?this.logger_:ht.log.warn)(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${t.message?" "+t.message:""} Switching to playlist ${f.id}.`),f.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),f.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const D=f.targetDuration/2*1e3||5e3,N="number"==typeof f.lastRequest&&Date.now()-f.lastRequest<=D;return this.switchMedia_(f,"exclude",a||N)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const r=[],i="all"===e;(i||"main"===e)&&r.push(this.mainPlaylistLoader_);const s=[];(i||"audio"===e)&&s.push("AUDIO"),(i||"subtitle"===e)&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach(a=>{const c=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;c&&r.push(c)}),["main","audio","subtitle"].forEach(a=>{const c=this[`${a}SegmentLoader_`];c&&(e===a||"all"===e)&&r.push(c)}),r.forEach(a=>t.forEach(c=>{"function"==typeof a[c]&&a[c]()}))}setCurrentTime(e){const t=wb(this.tech_.buffered(),e);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),void this.load()):0}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:dp.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let t=this.mainPlaylistLoader_.media();if(!t)return;let r=this.syncController_.getExpiredTime(t,this.duration());if(null===r)return;const i=this.mainPlaylistLoader_.main,s=dp.Playlist.seekable(t,r,dp.Playlist.liveEdgeDelay(i,t));if(0===s.length||this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),r=this.syncController_.getExpiredTime(t,this.duration()),null===r||(e=dp.Playlist.seekable(t,r,dp.Playlist.liveEdgeDelay(i,t)),0===e.length)))return;let a,c;this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),c=this.seekable_.start(0)),this.seekable_=e?e.start(0)>s.end(0)||s.start(0)>e.end(0)?s:zo([[e.start(0)>s.start(0)?e.start(0):s.start(0),e.end(0)<s.end(0)?e.end(0):s.end(0)]]):s,(!this.seekable_||!this.seekable_.length||this.seekable_.end(0)!==a||this.seekable_.start(0)!==c)&&(this.logger_(`seekable updated [${G3(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){const i=this.seekable();if(!i.length)return;return void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<i.end(i.length-1))&&this.sourceUpdater_.setDuration(i.end(i.length-1)))}const t=this.tech_.buffered();let r=dp.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(r=Math.max(r,t.end(t.length-1))),this.mediaSource.duration!==r&&this.sourceUpdater_.setDuration(r)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const r in t)t[r].forEach(i=>{i.playlistLoader&&i.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),r=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!r)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const r=rC(this.main(),t),i={},s=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(i.video=r.video||e.main.videoCodec||"avc1.4d400d"),e.main.isMuxed&&(i.video+=`,${r.audio||e.main.audioCodec||LL}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||s)&&(i.audio=r.audio||e.main.audioCodec||e.audio.audioCodec||LL,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!i.audio&&!i.video)return void this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});const c={};let f;if(["video","audio"].forEach(function(y){if(i.hasOwnProperty(y)&&!((y,b)=>y?CD(b):fM(b))(e[y].isFmp4,i[y])){const b=e[y].isFmp4?"browser":"muxer";c[b]=c[b]||[],c[b].push(i[y]),"audio"===y&&(f=b)}}),s&&f&&t.attributes.AUDIO){const y=t.attributes.AUDIO;this.main().playlists.forEach(b=>{(b.attributes&&b.attributes.AUDIO)===y&&b!==t&&(b.excludeUntil=1/0)}),this.logger_(`excluding audio group ${y} as ${f} does not support codec(s): "${i.audio}"`)}if(!Object.keys(c).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const y=[];if(["video","audio"].forEach(b=>{const D=(sh(this.sourceUpdater_.codecs[b]||"")[0]||{}).type,N=(sh(i[b]||"")[0]||{}).type;D&&N&&D.toLowerCase()!==N.toLowerCase()&&y.push(`"${this.sourceUpdater_.codecs[b]}" -> "${i[b]}"`)}),y.length)return void this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${y.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return i}{const y=Object.keys(c).reduce((b,D)=>(b&&(b+=", "),b+`${D} does not support codec(s): "${c[D].join(",")}"`),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:y},playlistExclusionDuration:1/0})}}tryToCreateSourceBuffers_(){if("open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(r=>{const i=e[r];if(-1!==t.indexOf(i.id))return;t.push(i.id);const s=rC(this.main,i),a=[];s.audio&&!fM(s.audio)&&!CD(s.audio)&&a.push(`audio codec ${s.audio}`),s.video&&!fM(s.video)&&!CD(s.video)&&a.push(`video codec ${s.video}`),s.text&&"stpp.ttml.im1t"===s.text&&a.push(`text codec ${s.text}`),a.length&&(i.excludeUntil=1/0,this.logger_(`excluding ${i.id} for unsupported: ${a.join(", ")}`))})}excludeIncompatibleVariants_(e){const t=[],r=this.main().playlists,i=lI(sh(e)),s=PU(i),a=i.video&&sh(i.video)[0]||null,c=i.audio&&sh(i.audio)[0]||null;Object.keys(r).forEach(f=>{const y=r[f];if(-1!==t.indexOf(y.id)||y.excludeUntil===1/0)return;t.push(y.id);const b=[],D=rC(this.mainPlaylistLoader_.main,y),N=PU(D);if(D.audio||D.video){if(N!==s&&b.push(`codec count "${N}" !== "${s}"`),!this.sourceUpdater_.canChangeType()){const B=D.video&&sh(D.video)[0]||null,U=D.audio&&sh(D.audio)[0]||null;B&&a&&B.type.toLowerCase()!==a.type.toLowerCase()&&b.push(`video codec "${B.type}" !== "${a.type}"`),U&&c&&U.type.toLowerCase()!==c.type.toLowerCase()&&b.push(`audio codec "${U.type}" !== "${c.type}"`)}b.length&&(y.excludeUntil=1/0,this.logger_(`excluding ${y.id}: ${b.join(" && ")}`))}})}updateAdCues_(e){let t=0;const r=this.seekable();r.length&&(t=r.start(0)),function(n,e,t=0){if(!n.segments)return;let i,r=t;for(let s=0;s<n.segments.length;s++){const a=n.segments[s];if(i||(i=$q(e,r+a.duration/2)),i){if("cueIn"in a){i.endTime=r,i.adEndTime=r,r+=a.duration,i=null;continue}if(r<i.endTime){r+=a.duration;continue}i.endTime+=a.duration}else if("cueOut"in a&&(i=new(fe().VTTCue)(r,r+a.duration,a.cueOut),i.adStartTime=r,i.adEndTime=r+parseFloat(a.cueOut),e.addCue(i)),"cueOutCont"in a){const[c,f]=a.cueOutCont.split("/").map(parseFloat);i=new(fe().VTTCue)(r,r+a.duration,""),i.adStartTime=r-c,i.adEndTime=i.adStartTime+f,e.addCue(i)}r+=a.duration}}(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=Zs.GOAL_BUFFER_LENGTH,r=Zs.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,Zs.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*r,i)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=Zs.BUFFER_LOW_WATER_LINE,r=Zs.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,Zs.MAX_BUFFER_LOW_WATER_LINE),s=Math.max(t,Zs.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*r,this.bufferBasedABR?s:i)}bufferHighWaterLine(){return Zs.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){LU(this.inbandTextTracks_,"com.apple.streaming",this.tech_),(({inbandTextTracks:n,dateRanges:e})=>{const t=n.metadataTrack_;if(!t)return;const r=fe().WebKitDataCue||fe().VTTCue;e.forEach(i=>{for(const s of Object.keys(i)){if(wq.has(s))continue;const a=new r(i.startTime,i.endTime,"");a.id=i.id,a.type="com.apple.quicktime.HLS",a.value={key:Eq[s],data:i[s]},("scte35Out"===s||"scte35In"===s)&&(a.value.data=new Uint8Array(a.value.data.match(/[\da-f]{2}/gi)).buffer),t.addCue(a)}i.processDateRange()})})({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,r){const i=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();LU(this.inbandTextTracks_,e,this.tech_),(({inbandTextTracks:n,metadataArray:e,timestampOffset:t,videoDuration:r})=>{if(!e)return;const i=fe().WebKitDataCue||fe().VTTCue,s=n.metadataTrack_;if(!s||(e.forEach(b=>{const D=b.cueTime+t;"number"!=typeof D||fe().isNaN(D)||D<0||!(D<1/0)||!b.frames||!b.frames.length||b.frames.forEach(N=>{const B=new i(D,D,N.value||N.url||N.data||"");B.frame=N,B.value=N,function(n){Object.defineProperties(n.frame,{id:{get:()=>(ht.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),n.value.key)},value:{get:()=>(ht.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),n.value.data)},privateData:{get:()=>(ht.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),n.value.data)}})}(B),s.addCue(B)})}),!s.cues||!s.cues.length))return;const a=s.cues,c=[];for(let b=0;b<a.length;b++)a[b]&&c.push(a[b]);const f=c.reduce((b,D)=>{const N=b[D.startTime]||[];return N.push(D),b[D.startTime]=N,b},{}),y=Object.keys(f).sort((b,D)=>Number(b)-Number(D));y.forEach((b,D)=>{const N=f[b],B=isFinite(r)?r:b,U=Number(y[D+1])||B;N.forEach(K=>{K.endTime=U})})})({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:i,videoDuration:r})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const t of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart)return void this.contentSteeringController_.requestSteeringManifest(!0);this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),"dash"===this.sourceType_&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const e=this.main();(this.contentSteeringController_.didDASHTagChange(e.uri,e.contentSteering)||(()=>{const i=this.contentSteeringController_.getAvailablePathways(),s=[];for(const a of e.playlists){const c=a.attributes.serviceLocation;if(c&&(s.push(c),!i.has(c)))return!0}return!(s.length||!i.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const r=this.main().playlists,i=new Set;let s=!1;Object.keys(r).forEach(a=>{const c=r[a],f=this.pathwayAttribute_(c),y=f&&e!==f;c.excludeUntil===1/0&&"content-steering"===c.lastExcludeReason_&&!y&&(delete c.excludeUntil,delete c.lastExcludeReason_,s=!0);const D=!c.excludeUntil&&c.excludeUntil!==1/0;i.has(c.id)||!y||!D||(i.add(c.id),c.excludeUntil=1/0,c.lastExcludeReason_="content-steering",this.logger_(`excluding ${c.id} for ${c.lastExcludeReason_}`))}),"DASH"===this.contentSteeringController_.manifestType_&&Object.keys(this.mediaTypes_).forEach(a=>{const c=this.mediaTypes_[a];if(c.activePlaylistLoader){const f=c.activePlaylistLoader.media_;f&&f.attributes.serviceLocation!==e&&(s=!0)}}),s&&this.changeSegmentPathway_()}handlePathwayClones_(){const t=this.main().playlists,r=this.contentSteeringController_.currentPathwayClones,i=this.contentSteeringController_.nextPathwayClones;if(r&&r.size||i&&i.size){for(const[a,c]of r.entries())i.get(a)||(this.mainPlaylistLoader_.updateOrDeleteClone(c),this.contentSteeringController_.excludePathway(a));for(const[a,c]of i.entries()){const f=r.get(a);f?this.equalPathwayClones_(f,c)||(this.mainPlaylistLoader_.updateOrDeleteClone(c,!0),this.contentSteeringController_.addAvailablePathway(a)):(t.filter(b=>b.attributes["PATHWAY-ID"]===c["BASE-ID"]).forEach(b=>{this.mainPlaylistLoader_.addClonePathway(c,b)}),this.contentSteeringController_.addAvailablePathway(a))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...i])))}}equalPathwayClones_(e,t){if(e["BASE-ID"]!==t["BASE-ID"]||e.ID!==t.ID||e["URI-REPLACEMENT"].HOST!==t["URI-REPLACEMENT"].HOST)return!1;const r=e["URI-REPLACEMENT"].PARAMS,i=t["URI-REPLACEMENT"].PARAMS;for(const s in r)if(r[s]!==i[s])return!1;for(const s in i)if(r[s]!==i[s])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),"DASH"===this.contentSteeringController_.manifestType_&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const t="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(r=>{const i=this.mainPlaylistLoader_.getKeyIdSet(r);!i||!i.size||i.forEach(s=>{const a="usable",c=this.keyStatusMap_.has(s)&&this.keyStatusMap_.get(s)===a;c?c&&r.lastExcludeReason_===t&&r.excludeUntil===1/0&&(delete r.excludeUntil,delete r.lastExcludeReason_,this.logger_(`enabling playlist ${r.id} because key ID ${s} is ${a}`)):(r.excludeUntil!==1/0&&r.lastExcludeReason_!==t&&(r.excludeUntil=1/0,r.lastExcludeReason_=t,this.logger_(`excluding playlist ${r.id} because the key ID ${s} doesn't exist in the keyStatusMap or is not ${a}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(r=>{r&&r.attributes&&r.attributes.RESOLUTION&&r.attributes.RESOLUTION.height<720&&r.excludeUntil===1/0&&r.lastExcludeReason_===t&&(delete r.excludeUntil,ht.log.warn(`enabling non-HD playlist ${r.id} because all playlists were excluded due to ${t} key IDs`))})}addKeyStatus_(e,t){const s=("string"==typeof e?e:(n=>{const e=new Uint8Array(n);return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")})(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${t}' with key ID ${s} added to the keyStatusMap`),this.keyStatusMap_.set(s,t)}updatePlaylistByKeyStatus(e,t){this.addKeyStatus_(e,t),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}class hG{constructor(e,t,r){const{playlistController_:i}=e,s=i.fastQualityChange_.bind(i);if(t.attributes){const a=t.attributes.RESOLUTION;this.width=a&&a.width,this.height=a&&a.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=rC(i.main(),t),this.playlist=t,this.id=r,this.enabled=((n,e,t)=>r=>{const i=n.main.playlists[e],s=wP(i),a=aI(i);return void 0===r?a:(r?delete i.disabled:i.disabled=!0,r!==a&&!s&&(t(),n.trigger(r?"renditionenabled":"renditiondisabled")),r)})(e.playlists,t.id,s)}}const XU=["seeking","seeked","pause","playing","error"];class pG{constructor(e){this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Pl("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),r=()=>this.monitorCurrentTime_(),i=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),a=this.playlistController_,c=["main","subtitle","audio"],f={};c.forEach(b=>{f[b]={reset:()=>this.resetSegmentDownloads_(b),updateend:()=>this.checkSegmentDownloads_(b)},a[`${b}SegmentLoader_`].on("appendsdone",f[b].updateend),a[`${b}SegmentLoader_`].on("playlistupdate",f[b].reset),this.tech_.on(["seeked","seeking"],f[b].reset)});const y=b=>{["main","audio"].forEach(D=>{a[`${D}SegmentLoader_`][b]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),y("off"))},this.clearSeekingAppendCheck_=()=>y("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),y("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",i),this.tech_.on(XU,s),this.tech_.on("canplay",r),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",i),this.tech_.off(XU,s),this.tech_.off("canplay",r),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),c.forEach(b=>{a[`${b}SegmentLoader_`].off("appendsdone",f[b].updateend),a[`${b}SegmentLoader_`].off("playlistupdate",f[b].reset),this.tech_.off(["seeked","seeking"],f[b].reset)}),this.checkCurrentTimeTimeout_&&fe().clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&fe().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=fe().setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,r=t[`${e}SegmentLoader_`],i=r.buffered_(),s=function(n,e){if(n===e)return!1;if(!n&&e||!e&&n||n.length!==e.length)return!0;for(let t=0;t<n.length;t++)if(n.start(t)!==e.start(t)||n.end(t)!==e.end(t))return!0;return!1}(this[`${e}Buffered_`],i);this[`${e}Buffered_`]=i,s?this.resetSegmentDownloads_(e):(this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:r.playlist_&&r.playlist_.id,buffered:Ay(i)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),"subtitle"!==e&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0})))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+fh>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),r=this.tech_.currentTime();let s;if(this.afterSeekableWindow_(t,r,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(s=t.end(t.length-1)),this.beforeSeekableWindow_(t,r)){const U=t.start(0);s=U+(U===t.end(0)?0:fh)}if(void 0!==s)return this.logger_(`Trying to seek outside of seekable at time ${r} with seekable range ${G3(t)}. Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0;const a=this.playlistController_.sourceUpdater_,c=this.tech_.buffered(),f=a.audioBuffer?a.audioBuffered():null,y=a.videoBuffer?a.videoBuffered():null,b=this.media(),D=b.partTargetDuration?b.partTargetDuration:2*(b.targetDuration-hh),N=[f,y];for(let U=0;U<N.length;U++)if(N[U]&&bP(N[U],r)<D)return!1;const B=oI(c,r);return 0!==B.length&&(s=B.start(0)+fh,this.logger_(`Buffered region starts (${B.start(0)})  just beyond seek point (${r}). Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),r=wb(t,e);return r.length&&e+3<=r.end(0)?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${r.start(0)} -> ${r.end(0)}]. Attempting to resume playback by seeking to the current time.`),void this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})):void 0}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const c=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${c}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(c),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const r=this.tech_.vhs.playlistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:r.audioBuffered(),videoBuffered:r.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const a=oI(i,t);return a.length>0&&(this.logger_(`Stopped at ${t} and seeking to ${a.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0)}afterSeekableWindow_(e,t,r,i=!1){if(!e.length)return!1;let s=e.end(e.length-1)+fh;return!r.endList&&("number"==typeof r.partTargetDuration||i)&&(s=e.end(e.length-1)+3*r.targetDuration),t>s}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:r}){if(!e)return;let i;if(e.length&&t.length){const s=wb(e,r-3),a=wb(e,r),c=wb(t,r);c.length&&!a.length&&s.length&&(i={start:s.end(0),end:c.end(0)})}else oI(e,r).length||(i=this.gapFromVideoUnderflow_(e,r));return!!i&&(this.logger_(`Encountered a gap in video from ${i.start} to ${i.end}. Seeking to current time ${r}`),!0)}skipTheGap_(e){const t=this.tech_.buffered(),r=this.tech_.currentTime(),i=oI(t,r);this.resetTimeUpdate_(),0!==i.length&&r===e&&(this.logger_("skipTheGap_:","currentTime:",r,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+hh),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(e,t){const r=function(n){if(n.length<2)return zo();const e=[];for(let t=1;t<n.length;t++){const r=n.end(t-1),i=n.start(t);e.push([r,i])}return zo(e)}(e);for(let i=0;i<r.length;i++){const s=r.start(i),a=r.end(i);if(t-s<4&&t-s>2)return{start:s,end:a}}return null}}const gG={errorInterval:30,getSource(n){return n(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},JU=function(n,e){let t=0,r=0;const i=Dr(gG,e);n.ready(()=>{n.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const s=function(){r&&n.currentTime(r)},a=function(b){null!=b&&(r=n.duration()!==1/0&&n.currentTime()||0,n.one("loadedmetadata",s),n.src(b),n.trigger({type:"usage",name:"vhs-error-reload"}),n.play())},c=function(){if(Date.now()-t<1e3*i.errorInterval)n.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(i.getSource&&"function"==typeof i.getSource)return t=Date.now(),i.getSource.call(n,a);ht.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},f=function(){n.off("loadedmetadata",s),n.off("error",c),n.off("dispose",f)};n.on("error",c),n.on("dispose",f),n.reloadSourceOnError=function(b){f(),JU(n,b)}},Pi={PlaylistLoader:xb,Playlist:Ba,utils:AH,STANDARD_PLAYLIST_SELECTOR:NU,INITIAL_PLAYLIST_SELECTOR:function(){const n=this.playlists.main.playlists.filter(Ba.isEnabled);return Db(n,(t,r)=>NP(t,r)),n.filter(t=>!!rC(this.playlists.main,t).video)[0]||null},lastBandwidthSelector:NU,movingAverageBandwidthSelector:function(n){let e=-1,t=-1;if(n<0||n>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){const r=this.useDevicePixelRatio&&fe().devicePixelRatio||1;return e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=n*this.systemBandwidth+(1-n)*e,t=this.systemBandwidth),OU(this.playlists.main,e,parseInt(dI(this.tech_.el(),"width"),10)*r,parseInt(dI(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.playlistController_)}},comparePlaylistBandwidth:NP,comparePlaylistResolution:function(n,e){let t,r;return n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(t=n.attributes.RESOLUTION.width),t=t||fe().Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(r=e.attributes.RESOLUTION.width),r=r||fe().Number.MAX_VALUE,t===r&&n.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?n.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-r},xhr:cU()};Object.keys(Zs).forEach(n=>{Object.defineProperty(Pi,n,{get:()=>(ht.log.warn(`using Vhs.${n} is UNSAFE be sure you know what you are doing`),Zs[n]),set(e){ht.log.warn(`using Vhs.${n} is UNSAFE be sure you know what you are doing`),"number"!=typeof e||e<0?ht.log.warn(`value of Vhs.${n} must be greater than or equal to 0`):Zs[n]=e}})});const t4="videojs-vhs",n4=function(n,e){const t=e.media();let r=-1;for(let i=0;i<n.length;i++)if(n[i].id===t.id){r=i;break}n.selectedIndex_=r,n.trigger({selectedIndex:r,type:"change"})};Pi.canPlaySource=function(){return ht.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const r4=()=>{if(!fe().localStorage)return null;const n=fe().localStorage.getItem(t4);if(!n)return null;try{return JSON.parse(n)}catch(e){return null}},i4=(n,e)=>{n._requestCallbackSet||(n._requestCallbackSet=new Set),n._requestCallbackSet.add(e)},s4=(n,e)=>{n._responseCallbackSet||(n._responseCallbackSet=new Set),n._responseCallbackSet.add(e)},o4=(n,e)=>{!n._requestCallbackSet||(n._requestCallbackSet.delete(e),n._requestCallbackSet.size||delete n._requestCallbackSet)},a4=(n,e)=>{!n._responseCallbackSet||(n._responseCallbackSet.delete(e),n._responseCallbackSet.size||delete n._responseCallbackSet)};Pi.supportsNativeHls=function(){if(!Lt()||!Lt().createElement)return!1;const n=Lt().createElement("video");return!!ht.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(n.canPlayType(t))})}(),Pi.supportsNativeDash=!!(Lt()&&Lt().createElement&&ht.getTech("Html5").isSupported())&&/maybe|probably/i.test(Lt().createElement("video").canPlayType("application/dash+xml")),Pi.supportsTypeNatively=n=>"hls"===n?Pi.supportsNativeHls:"dash"===n&&Pi.supportsNativeDash,Pi.isSupported=function(){return ht.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")},Pi.xhr.onRequest=function(n){i4(Pi.xhr,n)},Pi.xhr.onResponse=function(n){s4(Pi.xhr,n)},Pi.xhr.offRequest=function(n){o4(Pi.xhr,n)},Pi.xhr.offResponse=function(n){a4(Pi.xhr,n)};const IG=ht.getComponent("Component");class u4 extends IG{constructor(e,t,r){if(super(t,r.vhs),"number"==typeof r.initialBandwidth&&(this.options_.bandwidth=r.initialBandwidth),this.logger_=Pl("VhsHandler"),t.options_&&t.options_.playerId){const i=ht.getPlayer(t.options_.playerId);this.player_=i}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(Lt(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],i=>{const s=Lt().fullscreenElement||Lt().webkitFullscreenElement||Lt().mozFullScreenElement||Lt().msFullscreenElement;s&&s.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=Dr(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!=typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=60),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){const t=r4();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Zs.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Zs.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(t=>{void 0!==this.source_[t]&&(this.options_[t]=this.source_[t])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}setOptions(e={}){this.setOptions_(e)}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=(n=>0===n.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(n.substring(n.indexOf(",")+1)):n)(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Pi,this.options_.sourceType=FL(t),this.options_.seekTo=s=>{this.tech_.setCurrentTime(s)},this.playlistController_=new cG(this.options_);const r=Dr({liveRangeSafeTimeDelta:fh},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new pG(r),this.playlistController_.on("error",()=>{const s=ht.players[this.tech_.options_.playerId];let a=this.playlistController_.error;"object"!=typeof a||a.code?"string"==typeof a&&(a={message:a,code:3}):a.code=3,s.error(a)});const i=this.options_.bufferBasedABR?Pi.movingAverageBandwidthSelector(.55):Pi.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):i.bind(this),this.playlistController_.selectInitialPlaylist=Pi.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(s){this.playlistController_.selectPlaylist=s.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(s){this.playlistController_.mainSegmentLoader_.throughput.rate=s,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let s=this.playlistController_.mainSegmentLoader_.bandwidth;const a=fe().navigator.connection||fe().navigator.mozConnection||fe().navigator.webkitConnection,c=1e7;if(this.options_.useNetworkInformationApi&&a){const f=1e3*a.downlink*1e3;s=f>=c&&s>=c?Math.max(s,f):f}return s},set(s){this.playlistController_.mainSegmentLoader_.bandwidth=s,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){let a;return a=this.throughput>0?1/this.throughput:0,Math.floor(1/(1/(this.bandwidth||1)+a))},set(){ht.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>Ay(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>Ay(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&(n=>{if(!fe().localStorage)return!1;let e=r4();e=e?Dr(e,n):n;try{fe().localStorage.setItem(t4,JSON.stringify(e))}catch(t){return!1}})({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{!function(n){n.representations=()=>{const e=n.playlistController_.main(),t=tC(e)?n.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(r=>!wP(r)).map((r,i)=>new hG(n,r,r.id)):[]}}(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=fe().URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),(({player:n,sourceKeySystems:e,audioMedia:t,mainPlaylists:r})=>{if(!n.eme.initializeMediaKeys)return Promise.resolve();const s=((n,e)=>n.reduce((t,r)=>{if(!r.contentProtection)return t;const i=e.reduce((s,a)=>{const c=r.contentProtection[a];return c&&c.pssh&&(s[a]={pssh:c.pssh}),s},{});return Object.keys(i).length&&t.push(i),t},[]))(t?r.concat([t]):r,Object.keys(e)),a=[],c=[];return s.forEach(f=>{c.push(new Promise((y,b)=>{n.tech_.one("keysessioncreated",y)})),a.push(new Promise((y,b)=>{n.eme.initializeMediaKeys({keySystems:f},D=>{D?b(D):y()})}))}),Promise.race([Promise.all(a),Promise.race(c)])})({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=(({player:n,sourceKeySystems:e,media:t,audioMedia:r})=>{const i=((n,e,t)=>{if(!n)return n;let r={};e&&e.attributes&&e.attributes.CODECS&&(r=lI(sh(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(r.audio=t.attributes.CODECS);const i=Nw(r.video),s=Nw(r.audio),a={};for(const c in n)a[c]={},s&&(a[c].audioContentType=s),i&&(a[c].videoContentType=i),e.contentProtection&&e.contentProtection[c]&&e.contentProtection[c].pssh&&(a[c].pssh=e.contentProtection[c].pssh),"string"==typeof n[c]&&(a[c].url=n[c]);return Dr(n,a)})(e,t,r);return!(!i||(n.currentSource().keySystems=i,i&&!n.eme&&(ht.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))})({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});this.player_.tech_.on("keystatuschange",r=>{this.playlistController_.updatePlaylistByKeyStatus(r.keyId,r.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),t?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const e=ht.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{!function(n,e){e.representations().forEach(t=>{n.addQualityLevel(t)}),n4(n,e.playlists)}(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{n4(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":"3.9.1","mux.js":"7.0.2","mpd-parser":"1.3.0","m3u8-parser":"7.1.0","aes-decrypter":"4.0.1"}}version(){return this.constructor.version()}canChangeType(){return GU.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&fe().URL.revokeObjectURL&&(fe().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return(({playlist:n,time:e,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!n||void 0===e)return t({message:"getProgramTime: playlist and time must be provided"});const r=((n,e)=>{if(!e||!e.segments||0===e.segments.length)return null;let r,t=0;for(let s=0;s<e.segments.length&&(r=e.segments[s],t=r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationEnd:t+r.duration,!(n<=t));s++);const i=e.segments[e.segments.length-1];if(i.videoTimingInfo&&i.videoTimingInfo.transmuxedPresentationEnd<n)return null;if(n>t){if(n>t+.25*i.duration)return null;r=i}return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:t-r.duration,type:r.videoTimingInfo?"accurate":"estimate"}})(e,n);if(!r)return t({message:"valid programTime was not found"});if("estimate"===r.type)return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:r.estimatedStart});const i={mediaSeconds:e},s=((n,e)=>{if(!e.dateTimeObject)return null;const s=n-(e.videoTimingInfo.transmuxedPresentationStart+e.videoTimingInfo.transmuxerPrependedSeconds);return new Date(e.dateTimeObject.getTime()+1e3*s)})(e,r.segment);return s&&(i.programDateTime=s.toISOString()),t(null,i)})({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,r=!0,i=2){return gU({programTime:e,playlist:this.playlistController_.media(),retryCount:i,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{i4(this.xhr,e)},this.xhr.onResponse=e=>{s4(this.xhr,e)},this.xhr.offRequest=e=>{o4(this.xhr,e)},this.xhr.offResponse=e=>{a4(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}}const pI={name:"videojs-http-streaming",VERSION:"3.9.1",canHandleSource(n,e={}){const t=Dr(ht.options,e);return pI.canPlayType(n.type,t)},handleSource(n,e,t={}){const r=Dr(ht.options,t);return e.vhs=new u4(n,e,r),e.vhs.xhr=cU(),e.vhs.setupXhrHooks_(),e.vhs.src(n.src,n.type),e.vhs},canPlayType(n,e){const t=FL(n);if(!t)return"";const r=pI.getOverrideNative(e);return!Pi.supportsTypeNatively(t)||r?"maybe":""},getOverrideNative(n={}){const{vhs:e={}}=n,t=!(ht.browser.IS_ANY_SAFARI||ht.browser.IS_IOS),{overrideNative:r=t}=e;return r}};CD("avc1.4d400d,mp4a.40.2")&&ht.getTech("Html5").registerSourceHandler(pI,0),ht.VhsHandler=u4,ht.VhsSourceHandler=pI,ht.Vhs=Pi,ht.use||ht.registerComponent("Vhs",Pi),ht.options.vhs=ht.options.vhs||{},(!ht.getPlugin||!ht.getPlugin("reloadSourceOnError"))&&ht.registerPlugin("reloadSourceOnError",function(n){JU(this,n)});const AG=["videoPlayer"],kG=[{path:"",component:Vj},{path:"about",component:jj},{path:"clip/:id",component:(()=>{class n{constructor(t,r){this.route=t,this.elementRef=r}ngOnInit(){var t;ht(null===(t=this.target)||void 0===t?void 0:t.nativeElement),this.route.params.subscribe(r=>{})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(lo),h.Y36(h.SBq))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-clip"]],viewQuery:function(t,r){if(1&t&&h.Gf(AG,7),2&t){let i;h.iGM(i=h.CRH())&&(r.target=i.first)}},decls:15,vars:1,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-2","text-3xl"],[1,"text-gray-400","mb-6"],[1,"relative"],["controls","",1,"video-js","vjs-theme-forest","mx-auto"],["videoPlayer",""],["src","assets/video/hero.webm","type","video/webm"],[1,"container","mx-auto","my-8"],[1,"mt-6","text-2xl"],[3,"scrollable"]],template:function(t,r){1&t&&(h.TgZ(0,"section",0)(1,"div",1),h._UZ(2,"h1",2),h.TgZ(3,"div",3),h._uU(4," Uploaded By Luis on "),h.TgZ(5,"span"),h._uU(6,"March 25, 2022"),h.qZA()(),h.TgZ(7,"div",4)(8,"video",5,6),h._UZ(10,"source",7),h.qZA()()()(),h.TgZ(11,"div",8)(12,"h2",9),h._uU(13,"More Clips"),h.qZA(),h._UZ(14,"app-clips-list",10),h.qZA()),2&t&&(h.xp6(14),h.Q6J("scrollable",!1))},directives:[AL],styles:[""],encapsulation:2}),n})()},{path:"**",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-not-found"]],decls:20,vars:0,consts:[[1,"relative","m-auto","left-0","right-0","z-10","w-36","h-52","border-indigo-400","border-4","top-32","ghost"],[1,"absolute","left-0","right-0","bottom-10","m-auto","text-center","text-4xl","font-bold"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","translate-x-6"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","-translate-x-6"],[1,"w-10","h-2","rounded-lg","absolute","left-0","right-0","mx-auto","mt-20","bg-indigo-400"],[1,"corner","border-indigo-400","border-4"],[1,"corner","two","border-indigo-400","border-4"],[1,"corner","three","border-indigo-400","border-4"],[1,"corner","four","border-indigo-400","border-4"],[1,"over"],[1,"over","two"],[1,"over","three"],[1,"over","four"],[1,"ghost-shadow","w-32","h-10","mx-auto","mt-56","rounded","bg-indigo-400","left-0","right-0","absolute"],[1,"container","mx-auto","text-center","mt-60"],[1,"text-4xl","font-bold","mb-4"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"span",1),h._uU(2,"404"),h.qZA(),h._UZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),h.qZA(),h.TgZ(15,"div",14)(16,"h2",15),h._uU(17,"Page not found"),h.qZA(),h.TgZ(18,"p"),h._uU(19," Looks like the page you're looking for is gone or doesn't exist. "),h.qZA()())},styles:[""]}),n})()}];let MG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[hr.forRoot(kG)],hr]}),n})();var PG=$(5032);function l4(n,e){return e?t=>Ja(e.pipe(Jo(1),function RG(){return(0,xi.e)((n,e)=>{n.subscribe((0,Kr.x)(e,PG.Z))})}()),t.pipe(l4(n))):(0,oi.z)((t,r)=>n(t,r).pipe(Jo(1),function OG(n){return(0,vn.U)(()=>n)}(t)))}var NG=$(3532);let VP=(()=>{class n{constructor(t,r,i,s){this.auth=t,this.db=r,this.router=i,this.route=s,this.redirect=!1,this.usersCollection=r.collection("users"),this.isAuthenticated$=t.user.pipe((0,vn.U)(a=>!!a)),this.isAuthenticatedWithDelay$=this.isAuthenticated$.pipe(function UG(n,e=f0.z){const t=function FG(n=0,e,t=f0.P){let r=-1;return null!=e&&((0,NG.K)(e)?t=e:r=e),new Ls.y(i=>{let s=function LG(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let a=0;return t.schedule(function(){i.closed||(i.next(a++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(n,e);return l4(()=>t)}(2e3)),this.router.events.pipe(si(a=>a instanceof ko),(0,vn.U)(a=>this.route.firstChild),Ln(a=>{var c;return null!==(c=null==a?void 0:a.data)&&void 0!==c?c:yn({authOnly:!1})})).subscribe(a=>{var c;this.redirect=null!==(c=a.authOnly)&&void 0!==c&&c})}createUser(t){var r=this;return(0,at.Z)(function*(){if(!t.password)throw new Error("Password is not provided!");const i=yield r.auth.createUserWithEmailAndPassword(t.email,t.password);if(!i.user)throw new Error("User Cant't be found");yield r.usersCollection.doc(i.user.uid).set({name:t.name,email:t.email,age:t.age,phoneNumber:t.phoneNumber}),yield i.user.updateProfile({displayName:t.name})})()}logout(t){var r=this;return(0,at.Z)(function*(){t&&t.preventDefault(),yield r.auth.signOut(),r.redirect&&(yield r.router.navigateByUrl("/"))})()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ip),h.LFG(Zk),h.LFG(Qi),h.LFG(lo))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oC=(()=>{class n{constructor(){this.modals=[]}register(t){this.modals.push({id:t,visible:!1})}unregister(t){this.modals=this.modals.filter(r=>r.id!==t)}isModalOpen(t){var r;return!!(null===(r=this.modals.find(i=>i.id===t))||void 0===r?void 0:r.visible)}toggleModal(t){const r=this.modals.find(i=>i.id===t);r&&(r.visible=!r.visible)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function BG(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li")(1,"a",15),h.NdJ("click",function(i){return h.CHM(t),h.oxw().openModal(i)}),h._uU(2,"Login / Register"),h.qZA()()}}const jP=function(){return{exact:!0}},VG=function(){return{sort:"1"}};function jG(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li")(1,"a",16),h._uU(2," Manage "),h.qZA()(),h.TgZ(3,"li")(4,"a",17),h._uU(5," Upload "),h.qZA()(),h.TgZ(6,"li")(7,"a",18),h.NdJ("click",function(i){return h.CHM(t),h.oxw().auth.logout(i)}),h._uU(8,"logout"),h.qZA()()}2&n&&(h.xp6(1),h.Q6J("routerLinkActiveOptions",h.DdM(3,jP))("queryParams",h.DdM(4,VG)),h.xp6(3),h.Q6J("routerLinkActiveOptions",h.DdM(5,jP)))}let $G=(()=>{class n{constructor(t,r){this.auth=t,this.modal=r}ngOnInit(){}openModal(t){t.preventDefault(),this.modal.toggleModal("auth")}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(VP),h.Y36(oC))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-nav"]],decls:24,vars:6,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","/",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authLinks",""],["routerLinkActive","text-indigo-400"],["routerLink","/about","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions"],[1,"flex","flex-row","ml-auto"],["href","#"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],["href","#",1,"px-2",3,"click"],["routerLink","/manage","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions","queryParams"],["routerLink","/upload","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions"],[1,"px-2",3,"click"]],template:function(t,r){if(1&t&&(h.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),h._uU(3,"Clips"),h.qZA(),h.TgZ(4,"div",3)(5,"ul",4),h.YNc(6,BG,3,0,"li",5),h.ALo(7,"async"),h.YNc(8,jG,9,6,"ng-template",null,6,h.W1O),h.TgZ(10,"li",7)(11,"a",8),h._uU(12,"About"),h.qZA()()(),h.TgZ(13,"ul",9)(14,"li")(15,"a",10),h._UZ(16,"img",11),h.TgZ(17,"span",12),h._uU(18,"English"),h.qZA()()(),h.TgZ(19,"li",13)(20,"a",10),h._UZ(21,"img",14),h.TgZ(22,"span",12),h._uU(23,"French"),h.qZA()()()()()()()),2&t){const i=h.MAs(9);h.xp6(6),h.Q6J("ngIf",!h.lcZ(7,3,r.auth.isAuthenticated$))("ngIfElse",i),h.xp6(5),h.Q6J("routerLinkActiveOptions",h.DdM(5,jP))}},directives:[cl,Si,T],pipes:[xh],styles:[""]}),n})();const HG=[[["","heading",""]],"*"],qG=function(n){return{hidden:n}},GG=["[heading]","*"];let c4=(()=>{class n{constructor(t,r){this.modal=t,this.el=r,this.modalID=""}ngOnInit(){document.body.appendChild(this.el.nativeElement)}ngOnDestroy(){document.body.removeChild(this.el.nativeElement)}closeModal(){this.modal.toggleModal(this.modalID)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(oC),h.Y36(h.SBq))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-modal"]],inputs:{modalID:"modalID"},ngContentSelectors:GG,decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(t,r){1&t&&(h.F$t(HG),h.TgZ(0,"div",0)(1,"div",1)(2,"div",2),h.NdJ("click",function(){return r.closeModal()}),h._UZ(3,"div",3),h.qZA(),h.TgZ(4,"span",4),h._uU(5,"\u200b"),h.qZA(),h.TgZ(6,"div",5)(7,"div",6)(8,"div",7),h.Hsn(9),h.TgZ(10,"div",8),h.NdJ("click",function(){return r.closeModal()}),h._uU(11," \u2715 "),h.qZA()(),h.Hsn(12,1),h.qZA()()()()),2&t&&h.Q6J("ngClass",h.VKq(1,qG,!r.modal.isModalOpen(r.modalID)))},directives:[Wr],styles:[""]}),n})();const zG=["*"];let d4=(()=>{class n{constructor(){this.tabTitle="",this.active=!1}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-tab"]],inputs:{tabTitle:"tabTitle",active:"active"},ngContentSelectors:zG,decls:2,vars:2,template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"div"),h.Hsn(1),h.qZA()),2&t&&h.ekj("hidden",!r.active)},styles:[""]}),n})();const WG=function(n,e){return{"hover:text-indigo-400":n,"hover:text-white text-white bg-indigo-400":e}};function KG(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li",2)(1,"a",3),h.NdJ("click",function(){const s=h.CHM(t).$implicit;return h.oxw().selectTab(s)}),h._uU(2),h.qZA()()}if(2&n){const t=e.$implicit;h.xp6(1),h.Q6J("ngClass",h.WLB(2,WG,!t.active,t.active)),h.xp6(1),h.Oqu(t.tabTitle)}}const ZG=["*"];let YG=(()=>{class n{constructor(){this.tabs=new h.n_E}ngAfterContentInit(){var t;const r=null===(t=this.tabs)||void 0===t?void 0:t.filter(i=>i.active);(!r||0===r.length)&&this.selectTab(this.tabs.first)}selectTab(t){var r;return null===(r=this.tabs)||void 0===r||r.forEach(i=>{i.active=!1}),t.active=!0,!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-tabs-container"]],contentQueries:function(t,r,i){if(1&t&&h.Suo(i,d4,4),2&t){let s;h.iGM(s=h.CRH())&&(r.tabs=s)}},ngContentSelectors:ZG,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"ul",0),h.YNc(1,KG,3,5,"li",1),h.qZA(),h.Hsn(2)),2&t&&(h.xp6(1),h.Q6J("ngForOf",r.tabs))},directives:[ri,Wr],styles:[""]}),n})();const QG=["*"];let gI=(()=>{class n{constructor(){this.color="blue"}get bgColor(){return`bg-${this.color}-400`}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:QG,decls:2,vars:1,consts:[[1,"text-white","text-center","font-bold","p-4","mb-4","rounded-md",3,"ngClass"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"div",0),h.Hsn(1),h.qZA()),2&t&&h.Q6J("ngClass",r.bgColor)},directives:[Wr],styles:[""]}),n})();function $P(...n){const e=(0,$u.jO)(n),{args:t,keys:r}=rd(n),i=new Ls.y(s=>{const{length:a}=t;if(!a)return void s.complete();const c=new Array(a);let f=a,y=a;for(let b=0;b<a;b++){let D=!1;(0,Uh.Xf)(t[b]).subscribe((0,Kr.x)(s,N=>{D||(D=!0,y--),c[b]=N},()=>f--,void 0,()=>{(!f||!D)&&(y||s.next(r?Fh(r,c):c),s.complete())}))}});return e?i.pipe(zu(e)):i}let h4=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),ky=(()=>{class n extends h4{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const Fc=new h.OlP("NgValueAccessor"),JG={provide:Fc,useExisting:(0,h.Gpc)(()=>aC),multi:!0},tz=new h.OlP("CompositionEventMode");let aC=(()=>{class n extends h4{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ez(){const n=j()?j().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(tz,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[h._Bn([JG]),h.qOj]}),n})();function Tm(n){return null==n||0===n.length}function p4(n){return null!=n&&"number"==typeof n.length}const To=new h.OlP("NgValidators"),Em=new h.OlP("NgAsyncValidators"),nz=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Eo{static min(e){return function g4(n){return e=>{if(Tm(e.value)||Tm(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function m4(n){return e=>{if(Tm(e.value)||Tm(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return _4(e)}static requiredTrue(e){return function y4(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function v4(n){return Tm(n.value)||nz.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function b4(n){return e=>Tm(e.value)||!p4(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function T4(n){return e=>p4(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return E4(e)}static nullValidator(e){return null}static compose(e){return I4(e)}static composeAsync(e){return A4(e)}}function _4(n){return Tm(n.value)?{required:!0}:null}function E4(n){if(!n)return mI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Tm(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function mI(n){return null}function w4(n){return null!=n}function C4(n){const e=(0,h.QGY)(n)?(0,Tr.D)(n):n;return(0,h.CqO)(e),e}function S4(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function x4(n,e){return e.map(t=>t(n))}function D4(n){return n.map(e=>function rz(n){return!n.validate}(e)?e:t=>e.validate(t))}function I4(n){if(!n)return null;const e=n.filter(w4);return 0==e.length?null:function(t){return S4(x4(t,e))}}function HP(n){return null!=n?I4(D4(n)):null}function A4(n){if(!n)return null;const e=n.filter(w4);return 0==e.length?null:function(t){return $P(x4(t,e).map(C4)).pipe((0,vn.U)(S4))}}function qP(n){return null!=n?A4(D4(n)):null}function k4(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function M4(n){return n._rawValidators}function P4(n){return n._rawAsyncValidators}function GP(n){return n?Array.isArray(n)?n:[n]:[]}function _I(n,e){return Array.isArray(n)?n.includes(e):n===e}function R4(n,e){const t=GP(e);return GP(n).forEach(i=>{_I(t,i)||t.push(i)}),t}function O4(n,e){return GP(e).filter(t=>!_I(n,t))}class N4{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=HP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=qP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class wm extends N4{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ma extends N4{get formDirective(){return null}get path(){return null}}class L4{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let zP=(()=>{class n extends L4{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(wm,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})(),uC=(()=>{class n extends L4{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ma,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[h.qOj]}),n})();function lC(n,e){ZP(n,e),e.valueAccessor.writeValue(n.value),function dz(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&U4(n,e)})}(n,e),function fz(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function hz(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&U4(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function cz(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function bI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),EI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function TI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ZP(n,e){const t=M4(n);null!==e.validator?n.setValidators(k4(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=P4(n);null!==e.asyncValidator?n.setAsyncValidators(k4(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();TI(e._rawValidators,i),TI(e._rawAsyncValidators,i)}function EI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=M4(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(a=>a!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=P4(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(a=>a!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return TI(e._rawValidators,r),TI(e._rawAsyncValidators,r),t}function U4(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function B4(n,e){ZP(n,e)}function YP(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function j4(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function QP(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===aC?t=s:function mz(n){return Object.getPrototypeOf(n.constructor)===ky}(s)?r=s:i=s}),i||r||t||null}function XP(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const cC="VALID",wI="INVALID",kb="PENDING",dC="DISABLED";function eR(n){return(CI(n)?n.validators:n)||null}function $4(n){return Array.isArray(n)?HP(n):n||null}function tR(n,e){return(CI(e)?e.asyncValidators:n)||null}function H4(n){return Array.isArray(n)?qP(n):n||null}function CI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const q4=n=>n instanceof Rl,nR=n=>n instanceof Mb;function G4(n){return q4(n)?n.value:n.getRawValue()}function z4(n,e){const t=nR(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[e])throw new h.vHH(1001,"")}function W4(n,e){nR(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new h.vHH(1002,"")})}class rR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=$4(this._rawValidators),this._composedAsyncValidatorFn=H4(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===cC}get invalid(){return this.status===wI}get pending(){return this.status==kb}get disabled(){return this.status===dC}get enabled(){return this.status!==dC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=$4(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=H4(e)}addValidators(e){this.setValidators(R4(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(R4(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(O4(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(O4(e,this._rawAsyncValidators))}hasValidator(e){return _I(this._rawValidators,e)}hasAsyncValidator(e){return _I(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=kb,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dC,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=cC,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cC||this.status===kb)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dC:cC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=kb,this._hasOwnPendingAsyncValidator=!0;const t=C4(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function _z(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=nR(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof vz)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?dC:this.errors?wI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(kb)?kb:this._anyControlsHaveStatus(wI)?wI:cC}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){CI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Rl extends rR{constructor(e=null,t,r){super(eR(t),tR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),CI(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){XP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){XP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Mb extends rR{constructor(e,t,r){super(eR(t),tR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){W4(this,e),Object.keys(e).forEach(r=>{z4(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=G4(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class vz extends rR{constructor(e,t,r){super(eR(t),tR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){W4(this,e),e.forEach((r,i)=>{z4(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>G4(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const bz={provide:ma,useExisting:(0,h.Gpc)(()=>SI)},hC=(()=>Promise.resolve(null))();let SI=(()=>{class n extends ma{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new Mb({},HP(t),qP(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){hC.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),lC(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){hC.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){hC.then(()=>{const r=this._findContainer(t.path),i=new Mb({});B4(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){hC.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){hC.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,j4(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(To,10),h.Y36(Em,10))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([bz]),h.qOj]}),n})();const Ez={provide:wm,useExisting:(0,h.Gpc)(()=>iR)},Y4=(()=>Promise.resolve(null))();let iR=(()=>{class n extends wm{constructor(t,r,i,s,a){super(),this._changeDetectorRef=a,this.control=new Rl,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=QP(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),YP(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){lC(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Y4.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;Y4.then(()=>{var s;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(t){return this._parent?function vI(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ma,9),h.Y36(To,10),h.Y36(Em,10),h.Y36(Fc,10),h.Y36(h.sBO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([Ez]),h.qOj,h.TTD]}),n})(),fC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),X4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const sR=new h.OlP("NgModelWithFormControlWarning"),Dz={provide:wm,useExisting:(0,h.Gpc)(()=>oR)};let oR=(()=>{class n extends wm{constructor(t,r,i,s){super(),this._ngModelWarningConfig=s,this.update=new h.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=QP(0,i)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&bI(r,this,!1),lC(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}YP(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&bI(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(To,10),h.Y36(Em,10),h.Y36(Fc,10),h.Y36(sR,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[h._Bn([Dz]),h.qOj,h.TTD]}),n})();const Iz={provide:ma,useExisting:(0,h.Gpc)(()=>Pb)};let Pb=(()=>{class n extends ma{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(EI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return lC(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){bI(t.control||null,t,!1),XP(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,j4(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(bI(r||null,t),q4(i)&&(lC(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);B4(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function pz(n,e){return EI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ZP(this.form,this),this._oldForm&&EI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(To,10),h.Y36(Em,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([Iz]),h.qOj,h.TTD]}),n})();const Pz={provide:Fc,useExisting:(0,h.Gpc)(()=>lR),multi:!0};function rB(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let lR=(()=>{class n extends ky{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=rB(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Rz(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&h.NdJ("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([Pz]),h.qOj]}),n})(),iB=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(rB(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(lR,9))},n.\u0275dir=h.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Oz={provide:Fc,useExisting:(0,h.Gpc)(()=>cR),multi:!0};function sB(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let cR=(()=>{class n extends ky{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,a)=>{s._setSelected(i.indexOf(a.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const a=s;for(let c=0;c<a.length;c++){const y=this._getOptionValue(a[c].value);i.push(y)}}else{const a=r.options;for(let c=0;c<a.length;c++){const f=a[c];if(f.selected){const y=this._getOptionValue(f.value);i.push(y)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Nz(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([Oz]),h.qOj]}),n})(),oB=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(sB(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(sB(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(cR,9))},n.\u0275dir=h.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),My=(()=>{class n{constructor(){this._validator=mI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):mI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const Bz={provide:To,useExisting:(0,h.Gpc)(()=>xI),multi:!0};let xI=(()=>{class n extends My{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function Lz(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>_4}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([Bz]),h.qOj]}),n})();const qz={provide:To,useExisting:(0,h.Gpc)(()=>dR),multi:!0};let dR=(()=>{class n extends My{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>E4(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[h._Bn([qz]),h.qOj]}),n})(),gB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[X4]]}),n})(),Gz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[gB]}),n})(),hR=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:sR,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[gB]}),n})();function zz(n,e){if(1&n&&(h.TgZ(0,"app-alert",11),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.Q6J("color",t.alertColor),h.xp6(1),h.hij(" ",t.alertMsg,"\n")}}function Wz(n,e){1&n&&(h.TgZ(0,"p",12),h._uU(1," Email is invalid "),h.qZA())}function Kz(n,e){1&n&&(h.TgZ(0,"p",12),h._uU(1," Password is invalid "),h.qZA())}let Zz=(()=>{class n{constructor(t){this.auth=t,this.credentials={email:"",password:""},this.showAlert=!1,this.alertMsg="Please wait! we are logloggingin you in",this.alertColor="blue",this.inSubmission=!1}ngOnInit(){}login(){var t=this;return(0,at.Z)(function*(){t.showAlert=!0,t.alertMsg="Please wait! we are logloggingin you in",t.alertColor="blue",t.inSubmission=!0;try{yield t.auth.signInWithEmailAndPassword(t.credentials.email,t.credentials.password)}catch(r){return t.inSubmission=!1,t.alertMsg="An unexpected error has occured, please try again later",t.alertColor="red",void console.log(r)}t.alertMsg="Success! You are logged in.",t.alertColor="green"})()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ip))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:17,vars:6,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","email","name","email","placeholder","Enter Email","required","","pattern","[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["type","password","name","password","required","","placeholder","Password",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400","hover:bg-indigo-500",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(t,r){if(1&t&&(h.YNc(0,zz,2,2,"app-alert",0),h.TgZ(1,"form",1,2),h.NdJ("ngSubmit",function(){return r.login()}),h.TgZ(3,"div",3)(4,"label",4),h._uU(5,"Email"),h.qZA(),h.TgZ(6,"input",5,6),h.NdJ("ngModelChange",function(s){return r.credentials.email=s}),h.qZA(),h.YNc(8,Wz,2,0,"p",7),h.qZA(),h.TgZ(9,"div",3)(10,"label",4),h._uU(11,"Password"),h.qZA(),h.TgZ(12,"input",8,9),h.NdJ("ngModelChange",function(s){return r.credentials.password=s}),h.qZA(),h.YNc(14,Kz,2,0,"p",7),h.qZA(),h.TgZ(15,"button",10),h._uU(16," Submit "),h.qZA()()),2&t){const i=h.MAs(2),s=h.MAs(7),a=h.MAs(13);h.Q6J("ngIf",r.showAlert),h.xp6(6),h.Q6J("ngModel",r.credentials.email),h.xp6(2),h.Q6J("ngIf",s.errors&&s.touched&&s.dirty),h.xp6(4),h.Q6J("ngModel",r.credentials.password),h.xp6(2),h.Q6J("ngIf",a.errors&&a.touched&&a.dirty),h.xp6(1),h.Q6J("disabled",i.invalid||r.inSubmission)}},directives:[Si,gI,fC,uC,SI,aC,xI,dR,zP,iR],styles:[""]}),n})();class Yz{static match(e,t){return r=>{const i=r.get(e),s=r.get(t);if(!i||!s)return console.error("Form control can not be found in the form group."),{controlNotFound:!1};const a=i.value===s.value?null:{noMatch:!0};return s.setErrors(a),a}}}let Qz=(()=>{class n{constructor(t){this.auth=t,this.validate=r=>this.auth.fetchSignInMethodsForEmail(r.value).then(i=>i.length?{EmailTaken:!0}:null)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ip))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Xz=$(7582);const DI=new h.OlP("ngx-mask config"),mB=new h.OlP("new ngx-mask config"),_B=new h.OlP("initial ngx-mask config"),Jz={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,apm:!1,leadZero:!1,keepCharacterPositions:!1,triggerOnMaskChange:!1,inputTransformFn:n=>n,outputTransformFn:n=>n,maskFilled:new h.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},eW=["Hh:m0:s0","Hh:m0","m0:s0"],tW=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let nW=(()=>{class n{constructor(t){this._config=t,this._shift=new Set,this.plusOnePosition=!1,this.maskExpression="",this.actualValue="",this.showKeepCharacterExp="",this.shownMaskExpression="",this.deletedSpecialCharacter=!1,this._formatWithSeparators=(r,i,s,a)=>{var c,f,y;let b=[],D="";if(Array.isArray(s)){const ie=new RegExp(s.map(Ae=>"[\\^$.|?*+()".indexOf(Ae)>=0?`\\${Ae}`:Ae).join("|"));b=r.split(ie),D=null!==(f=null===(c=r.match(ie))||void 0===c?void 0:c[0])&&void 0!==f?f:""}else b=r.split(s),D=s;const N=b.length>1?`${D}${b[1]}`:"";let B=null!==(y=b[0])&&void 0!==y?y:"";const U=this.separatorLimit.replace(/\s/g,"");U&&+U&&(B="-"===B[0]?`-${B.slice(1,B.length).slice(0,U.length)}`:B.slice(0,U.length));const K=/(\d+)(\d{3})/;for(;i&&K.test(B);)B=B.replace(K,"$1"+i+"$2");return void 0===a?B+N:0===a?B:B+N.substring(0,a+1)},this.percentage=r=>{const i=r.replace(",","."),s=Number(i);return!isNaN(s)&&s>=0&&s<=100},this.getPrecision=r=>{const i=r.split(".");return i.length>1?Number(i[i.length-1]):1/0},this.checkAndRemoveSuffix=r=>{var i,s,a,c;for(let f=(null===(i=this.suffix)||void 0===i?void 0:i.length)-1;f>=0;f--){const y=this.suffix.substring(f,null===(s=this.suffix)||void 0===s?void 0:s.length);if(r.includes(y)&&f!==(null===(a=this.suffix)||void 0===a?void 0:a.length)-1&&(f-1<0||!r.includes(this.suffix.substring(f-1,null===(c=this.suffix)||void 0===c?void 0:c.length))))return r.replace(y,"")}return r},this.checkInputPrecision=(r,i,s)=>{var a,c;if(i<1/0){if(Array.isArray(s)){const D=s.find(N=>N!==this.thousandSeparator);s=D||s[0]}const f=new RegExp(this._charToRegExpExpression(s)+`\\d{${i}}.*$`),y=r.match(f),b=null!==(c=y&&(null===(a=y[0])||void 0===a?void 0:a.length))&&void 0!==c?c:0;b-1>i&&(r=r.substring(0,r.length-(b-1-i))),0===i&&this._compareOrIncludes(r[r.length-1],s,this.thousandSeparator)&&(r=r.substring(0,r.length-1))}return r},this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.hiddenInput=this._config.hiddenInput,this.clearIfNotMatch=this._config.clearIfNotMatch,this.specialCharacters=this._config.specialCharacters,this.patterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime,this.leadZero=this._config.leadZero,this.apm=this._config.apm,this.inputTransformFn=this._config.inputTransformFn,this.outputTransformFn=this._config.outputTransformFn,this.keepCharacterPositions=this._config.keepCharacterPositions}applyMaskWithPattern(t,r){const[i,s]=r;return this.customPattern=s,this.applyMask(t,i)}applyMask(t,r,i=0,s=!1,a=!1,c=(()=>{})){var f,y,b,D,N,B,U,K,ie,Ae,be,Le,Me,Ee,pt,Nt,hn;if(!r||"string"!=typeof t)return"";let ct=0,Jt="",Ir=!1,Br=!1,on=1,Ar=!1;t.slice(0,this.prefix.length)===this.prefix&&(t=t.slice(this.prefix.length,t.length)),!!this.suffix&&(null==t?void 0:t.length)>0&&(t=this.checkAndRemoveSuffix(t)),"("===t&&this.prefix&&(t="");const Ri=t.toString().split("");if(this.allowNegativeNumbers&&"-"===t.slice(ct,ct+1)&&(Jt+=t.slice(ct,ct+1)),"IP"===r){const Jn=t.split(".");this.ipError=this._validIP(Jn),r="099.099.099.099"}const Va=[];for(let Jn=0;Jn<t.length;Jn++)(null===(f=t[Jn])||void 0===f?void 0:f.match("\\d"))&&Va.push(null!==(y=t[Jn])&&void 0!==y?y:"");if("CPF_CNPJ"===r&&(this.cpfCnpjError=11!==Va.length&&14!==Va.length,r=Va.length>11?"00.000.000/0000-00":"000.000.000-00"),r.startsWith("percent")){if(t.match("[a-z]|[A-Z]")||t.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)&&!a){t=this._stripToDecimal(t);const ja=this.getPrecision(r);t=this.checkInputPrecision(t,ja,this.decimalMarker)}const Jn="string"==typeof this.decimalMarker?this.decimalMarker:".";if(t.indexOf(Jn)>0&&!this.percentage(t.substring(0,t.indexOf(Jn)))){let ja=t.substring(0,t.indexOf(Jn)-1);this.allowNegativeNumbers&&"-"===t.slice(ct,ct+1)&&!a&&(ja=t.substring(0,t.indexOf(Jn))),t=`${ja}${t.substring(t.indexOf(Jn),t.length)}`}let Dn="";Dn=this.allowNegativeNumbers&&"-"===t.slice(ct,ct+1)?t.slice(ct+1,ct+t.length):t,Jt=this.percentage(Dn)?this._splitPercentZero(t):this._splitPercentZero(t.substring(0,t.length-1))}else if(r.startsWith("separator")){(t.match("[w\u0430-\u044f\u0410-\u042f]")||t.match("[\u0401\u0451\u0410-\u044f]")||t.match("[a-z]|[A-Z]")||t.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\]:";<>.?/]/)||t.match("[^A-Za-z0-9,]"))&&(t=this._stripToDecimal(t));const Jn=this.getPrecision(r),Dn=Array.isArray(this.decimalMarker)?".":this.decimalMarker;0===Jn?t=this.allowNegativeNumbers?t.length>2&&"-"===t[0]&&"0"===t[1]&&t[2]!==this.thousandSeparator&&","!==t[2]&&"."!==t[2]?"-"+t.slice(2,t.length):"0"===t[0]&&t.length>1&&t[1]!==this.thousandSeparator&&","!==t[1]&&"."!==t[1]?t.slice(1,t.length):t:t.length>1&&"0"===t[0]&&t[1]!==this.thousandSeparator&&","!==t[1]&&"."!==t[1]?t.slice(1,t.length):t:(t[0]===Dn&&t.length>1&&(t="0"+t.slice(0,t.length+1),this.plusOnePosition=!0),"0"===t[0]&&t[1]!==Dn&&t[1]!==this.thousandSeparator&&(t=t.length>1?t.slice(0,1)+Dn+t.slice(1,t.length+1):t,this.plusOnePosition=!0),this.allowNegativeNumbers&&"-"===t[0]&&(t[1]===Dn||"0"===t[1])&&(t=t[1]===Dn&&t.length>2?t.slice(0,1)+"0"+t.slice(1,t.length):"0"===t[1]&&t.length>2&&t[2]!==Dn?t.slice(0,2)+Dn+t.slice(2,t.length):t,this.plusOnePosition=!0)),a&&("0"===t[0]&&t[1]===this.decimalMarker&&("0"===t[i]||t[i]===this.decimalMarker)&&(t=t.slice(2,t.length)),"-"===t[0]&&"0"===t[1]&&t[2]===this.decimalMarker&&("0"===t[i]||t[i]===this.decimalMarker)&&(t="-"+t.slice(3,t.length)),t=this._compareOrIncludes(t[t.length-1],this.decimalMarker,this.thousandSeparator)?t.slice(0,t.length-1):t);const ja=this._charToRegExpExpression(this.thousandSeparator);let Wo='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(ja,"");if(Array.isArray(this.decimalMarker))for(const vh of this.decimalMarker)Wo=Wo.replace(this._charToRegExpExpression(vh),"");else Wo=Wo.replace(this._charToRegExpExpression(this.decimalMarker),"");const hp=new RegExp("["+Wo+"]");t.match(hp)&&(t=t.substring(0,t.length-1));const yh=(t=this.checkInputPrecision(t,Jn,this.decimalMarker)).replace(new RegExp(ja,"g"),"");Jt=this._formatWithSeparators(yh,this.thousandSeparator,this.decimalMarker,Jn);const pC=Jt.indexOf(",")-t.indexOf(","),$a=Jt.length-t.length;if($a>0&&Jt[i]!==this.thousandSeparator){Br=!0;let vh=0;do{this._shift.add(i+vh),vh++}while(vh<$a)}else Jt[i-1]===this.decimalMarker||-4===$a||-3===$a||","===Jt[i]?(this._shift.clear(),this._shift.add(i-1)):0!==pC&&i>0&&!(Jt.indexOf(",")>=i&&i>3)||!(Jt.indexOf(".")>=i&&i>3)&&$a<=0?(this._shift.clear(),Br=!0,on=$a,this._shift.add(i+=$a)):this._shift.clear()}else for(let Jn=0,Dn=Ri[0];Jn<Ri.length&&ct!==r.length;Jn++,Dn=null!==(b=Ri[Jn])&&void 0!==b?b:""){const ja="*"in this.patterns;if(this._checkSymbolMask(Dn,null!==(D=r[ct])&&void 0!==D?D:"")&&"?"===r[ct+1])Jt+=Dn,ct+=2;else if("*"===r[ct+1]&&Ir&&this._checkSymbolMask(Dn,null!==(N=r[ct+2])&&void 0!==N?N:""))Jt+=Dn,ct+=3,Ir=!1;else if(this._checkSymbolMask(Dn,null!==(B=r[ct])&&void 0!==B?B:"")&&"*"===r[ct+1]&&!ja)Jt+=Dn,Ir=!0;else if("?"===r[ct+1]&&this._checkSymbolMask(Dn,null!==(U=r[ct+2])&&void 0!==U?U:""))Jt+=Dn,ct+=3;else if(this._checkSymbolMask(Dn,null!==(K=r[ct])&&void 0!==K?K:"")){if("H"===r[ct]&&(this.apm?Number(Dn)>9:Number(Dn)>2)){i=this.leadZeroDateTime?i:i+1,ct+=1,this._shiftStep(r,ct,Ri.length),Jn--,this.leadZeroDateTime&&(Jt+="0");continue}if("h"===r[ct]&&(this.apm?1===Jt.length&&Number(Jt)>1||"1"===Jt&&Number(Dn)>2||1===t.slice(ct-1,ct).length&&Number(t.slice(ct-1,ct))>2||"1"===t.slice(ct-1,ct)&&Number(Dn)>2:"2"===Jt&&Number(Dn)>3||("2"===Jt.slice(ct-2,ct)||"2"===Jt.slice(ct-3,ct)||"2"===Jt.slice(ct-4,ct)||"2"===Jt.slice(ct-1,ct))&&Number(Dn)>3&&ct>10)){i+=1,ct+=1,Jn--;continue}if(("m"===r[ct]||"s"===r[ct])&&Number(Dn)>5){i=this.leadZeroDateTime?i:i+1,ct+=1,this._shiftStep(r,ct,Ri.length),Jn--,this.leadZeroDateTime&&(Jt+="0");continue}const Wo=31,hp=t[ct],yh=t[ct+1],pC=t[ct+2],$a=t[ct-1],vh=t[ct-2],yR=t[ct-3],fp=t.slice(ct-3,ct-1),Py=t.slice(ct-1,ct+1),Ry=t.slice(ct,ct+2),gC=t.slice(ct-2,ct);if("d"===r[ct]){const AI="M0"===r.slice(0,2),mC="M0"===r.slice(0,2)&&this.specialCharacters.includes(vh);if(Number(Dn)>3&&this.leadZeroDateTime||!AI&&(Number(Ry)>Wo||Number(Py)>Wo||this.specialCharacters.includes(yh))||(mC?Number(Py)>Wo||!this.specialCharacters.includes(hp)&&this.specialCharacters.includes(pC)||this.specialCharacters.includes(hp):Number(Ry)>Wo||this.specialCharacters.includes(yh))){i=this.leadZeroDateTime?i:i+1,ct+=1,this._shiftStep(r,ct,Ri.length),Jn--,this.leadZeroDateTime&&(Jt+="0");continue}}if("M"===r[ct]){const mC=0===ct&&(Number(Dn)>2||Number(Ry)>12||this.specialCharacters.includes(yh)),vR=r.slice(ct+2,ct+3),bh=fp.includes(vR)&&(this.specialCharacters.includes(vh)&&Number(Py)>12&&!this.specialCharacters.includes(hp)||this.specialCharacters.includes(hp)||this.specialCharacters.includes(yR)&&Number(gC)>12&&!this.specialCharacters.includes($a)||this.specialCharacters.includes($a)),_C=Number(fp)<=Wo&&!this.specialCharacters.includes(fp)&&this.specialCharacters.includes($a)&&(Number(Ry)>12||this.specialCharacters.includes(yh)),Sr=Number(Ry)>12&&5===ct||this.specialCharacters.includes(yh)&&5===ct,bR=Number(fp)>Wo&&!this.specialCharacters.includes(fp)&&!this.specialCharacters.includes(gC)&&Number(gC)>12,yC=Number(fp)<=Wo&&!this.specialCharacters.includes(fp)&&!this.specialCharacters.includes($a)&&Number(Py)>12;if(Number(Dn)>1&&this.leadZeroDateTime||mC||bh||yC||bR||_C||Sr&&!this.leadZeroDateTime){i=this.leadZeroDateTime?i:i+1,ct+=1,this._shiftStep(r,ct,Ri.length),Jn--,this.leadZeroDateTime&&(Jt+="0");continue}}Jt+=Dn,ct++}else" "===Dn&&" "===r[ct]||"/"===Dn&&"/"===r[ct]?(Jt+=Dn,ct++):-1!==this.specialCharacters.indexOf(null!==(ie=r[ct])&&void 0!==ie?ie:"")?(Jt+=r[ct],ct++,this._shiftStep(r,ct,Ri.length),Jn--):"9"===r[ct]&&this.showMaskTyped?this._shiftStep(r,ct,Ri.length):this.patterns[null!==(Ae=r[ct])&&void 0!==Ae?Ae:""]&&(null===(Le=this.patterns[null!==(be=r[ct])&&void 0!==be?be:""])||void 0===Le?void 0:Le.optional)?(!!Ri[ct]&&"099.099.099.099"!==r&&"000.000.000-00"!==r&&"00.000.000/0000-00"!==r&&!r.match(/^9+\.0+$/)&&!(null===(Ee=this.patterns[null!==(Me=r[ct])&&void 0!==Me?Me:""])||void 0===Ee?void 0:Ee.optional)&&(Jt+=Ri[ct]),r.includes("9*")&&r.includes("0*")&&ct++,ct++,Jn--):"*"===this.maskExpression[ct+1]&&this._findSpecialChar(null!==(pt=this.maskExpression[ct+2])&&void 0!==pt?pt:"")&&this._findSpecialChar(Dn)===this.maskExpression[ct+2]&&Ir||"?"===this.maskExpression[ct+1]&&this._findSpecialChar(null!==(Nt=this.maskExpression[ct+2])&&void 0!==Nt?Nt:"")&&this._findSpecialChar(Dn)===this.maskExpression[ct+2]&&Ir?(ct+=3,Jt+=Dn):this.showMaskTyped&&this.specialCharacters.indexOf(Dn)<0&&Dn!==this.placeHolderCharacter&&1===this.placeHolderCharacter.length&&(Ar=!0)}Jt.length+1===r.length&&-1!==this.specialCharacters.indexOf(null!==(hn=r[r.length-1])&&void 0!==hn?hn:"")&&(Jt+=r[r.length-1]);let Uc=i+1;for(;this._shift.has(Uc);)on++,Uc++;let mh=s&&!r.startsWith("separator")?ct:this._shift.has(i)?on:0;Ar&&mh--,c(mh,Br),on<0&&this._shift.clear();let _h=!1;a&&(_h=Ri.every(Jn=>this.specialCharacters.includes(Jn)));let Bc=`${this.prefix}${_h?"":Jt}${this.showMaskTyped?"":this.suffix}`;if(0===Jt.length&&(Bc=this.dropSpecialCharacters?`${Jt}`:`${this.prefix}${Jt}`),Jt.includes("-")&&this.prefix&&this.allowNegativeNumbers){if(a&&"-"===Jt)return"";Bc=`-${this.prefix}${Jt.split("-").join("")}${this.suffix}`}return Bc}_findDropSpecialChar(t){return Array.isArray(this.dropSpecialCharacters)?this.dropSpecialCharacters.find(r=>r===t):this._findSpecialChar(t)}_findSpecialChar(t){return this.specialCharacters.find(r=>r===t)}_checkSymbolMask(t,r){var i,s,a;return this.patterns=this.customPattern?this.customPattern:this.patterns,null!==(a=(null===(i=this.patterns[r])||void 0===i?void 0:i.pattern)&&(null===(s=this.patterns[r])||void 0===s?void 0:s.pattern.test(t)))&&void 0!==a&&a}_stripToDecimal(t){return t.split("").filter((r,i)=>{const s="string"==typeof this.decimalMarker?r===this.decimalMarker:this.decimalMarker.includes(r);return r.match("^-?\\d")||r===this.thousandSeparator||s||"-"===r&&0===i&&this.allowNegativeNumbers}).join("")}_charToRegExpExpression(t){return t&&(" "===t?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?`\\${t}`:t)}_shiftStep(t,r,i){const s=/[*?]/g.test(t.slice(0,r))?i:r;this._shift.add(s+this.prefix.length||0)}_compareOrIncludes(t,r,i){return Array.isArray(r)?r.filter(s=>s!==i).includes(t):t===r}_validIP(t){return!(4===t.length&&!t.some((r,i)=>t.length!==i+1?""===r||Number(r)>255:""===r||Number(r.substring(0,3))>255))}_splitPercentZero(t){const r=t.indexOf("string"==typeof this.decimalMarker?this.decimalMarker:".");if(-1===r){const i=parseInt(t,10);return isNaN(i)?"":i.toString()}{const i=parseInt(t.substring(0,r),10),s=t.substring(r+1),a=isNaN(i)?"":i.toString(),c="string"==typeof this.decimalMarker?this.decimalMarker:".";return""===a?"":a+c+s}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(DI))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),fR=(()=>{class n extends nW{constructor(t,r,i,s){super(r),this.document=t,this._config=r,this._elementRef=i,this._renderer=s,this.isNumberValue=!1,this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this._maskExpressionArray=[],this.triggerOnMaskChange=!1,this._emitValue=!1,this._previousValue="",this._currentValue="",this.onChange=a=>{}}applyMask(t,r,i=0,s=!1,a=!1,c=(()=>{})){var f,y;if(!r)return t!==this.actualValue?this.actualValue:t;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),!t&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown+this.suffix;const b=t&&"number"==typeof this.selStart&&null!==(f=t[this.selStart])&&void 0!==f?f:"";let D="";if(void 0!==this.hiddenInput&&!this.writingValue){let K=t&&1===t.length?t.split(""):this.actualValue.split("");"object"==typeof this.selStart&&"object"==typeof this.selEnd?(this.selStart=Number(this.selStart),this.selEnd=Number(this.selEnd)):""!==t&&K.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(t.length>K.length?K.splice(this.selStart,0,b):t.length<K.length&&(K.length-t.length==1?K.splice(a?this.selStart-1:t.length-1,1):K.splice(this.selStart,this.selEnd-this.selStart))):K=[],this.showMaskTyped&&(this.hiddenInput||(t=this.removeMask(t))),D=this.actualValue.length&&K.length<=t.length?this.shiftTypedSymbols(K.join("")):t}if(s&&(this.hiddenInput||!this.hiddenInput)&&(D=t),a&&-1!==this.specialCharacters.indexOf(null!==(y=this.maskExpression[i])&&void 0!==y?y:"")&&this.showMaskTyped&&(D=this._currentValue),this.deletedSpecialCharacter&&i&&(this.specialCharacters.includes(this.actualValue.slice(i,i+1))?i+=1:"M0"!==r.slice(i-1,i+1)&&(i-=2),this.deletedSpecialCharacter=!1),this.showMaskTyped&&1===this.placeHolderCharacter.length&&!this.leadZeroDateTime&&(t=this.removeMask(t)),D=this.maskChanged?t:Boolean(D)&&D.length?D:t,this.showMaskTyped&&this.keepCharacterPositions&&this.actualValue&&!s){const K=this.dropSpecialCharacters?this.removeMask(this.actualValue):this.actualValue;return this.formControlResult(K),this.actualValue?this.actualValue:this.prefix+this.maskIsShown+this.suffix}const N=super.applyMask(D,r,i,s,a,c);if(this.actualValue=this.getActualValue(N),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.specialCharacters=this.specialCharacters.filter(K=>!this._compareOrIncludes(K,this.decimalMarker,this.thousandSeparator))),(N||""===N)&&(this._previousValue=this._currentValue,this._currentValue=N,this._emitValue=this._previousValue!==this._currentValue||this.maskChanged||this._previousValue===this._currentValue&&s),this._emitValue&&this.formControlResult(N),!this.showMaskTyped||this.showMaskTyped&&this.hiddenInput)return this.hiddenInput?a?this.hideInput(N,this.maskExpression):this.hideInput(N,this.maskExpression)+this.maskIsShown.slice(N.length):N;const B=N.length,U=this.prefix+this.maskIsShown+this.suffix;if(this.maskExpression.includes("H")){const K=this._numberSkipedSymbols(N);return N+U.slice(B+K)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?N+U:N+U.slice(B)}_numberSkipedSymbols(t){const r=/(^|\D)(\d\D)/g;let i=r.exec(t),s=0;for(;null!=i;)s+=1,i=r.exec(t);return s}applyValueChanges(t,r,i,s=(()=>{})){var a;const c=null===(a=this._elementRef)||void 0===a?void 0:a.nativeElement;!c||(c.value=this.applyMask(c.value,this.maskExpression,t,r,i,s),c!==this._getActiveElement()&&this.clearIfNotMatchFn())}hideInput(t,r){return t.split("").map((i,s)=>{var a,c,f,y,b;return this.patterns&&this.patterns[null!==(a=r[s])&&void 0!==a?a:""]&&(null===(f=this.patterns[null!==(c=r[s])&&void 0!==c?c:""])||void 0===f?void 0:f.symbol)?null===(b=this.patterns[null!==(y=r[s])&&void 0!==y?y:""])||void 0===b?void 0:b.symbol:i}).join("")}getActualValue(t){const r=t.split("").filter((i,s)=>{var a;const c=null!==(a=this.maskExpression[s])&&void 0!==a?a:"";return this._checkSymbolMask(i,c)||this.specialCharacters.includes(c)&&i===c});return r.join("")===t?r.join(""):t}shiftTypedSymbols(t){let r="";return(t&&t.split("").map((s,a)=>{var c;if(this.specialCharacters.includes(null!==(c=t[a+1])&&void 0!==c?c:"")&&t[a+1]!==this.maskExpression[a+1])return r=s,t[a+1];if(r.length){const f=r;return r="",f}return s})||[]).join("")}numberToString(t){return!t&&0!==t||this.maskExpression.startsWith("separator")&&(this.leadZero||!this.dropSpecialCharacters)||this.maskExpression.startsWith("separator")&&this.separatorLimit.length>14&&String(t).length>14?String(t):Number(t).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}).replace("/-/","-")}showMaskInInput(t){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(t){if("IP"===this.maskExpression)return this._checkForIp(t);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(t)}return this.placeHolderCharacter.length===this.maskExpression.length?this.placeHolderCharacter:this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){var t;const r=null===(t=this._elementRef)||void 0===t?void 0:t.nativeElement;!r||this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==r.value.replace(this.placeHolderCharacter,"").length&&(this.formElementProperty=["value",""],this.applyMask("",this.maskExpression))}set formElementProperty([t,r]){!this._renderer||!this._elementRef||Promise.resolve().then(()=>{var i,s;return null===(i=this._renderer)||void 0===i?void 0:i.setProperty(null===(s=this._elementRef)||void 0===s?void 0:s.nativeElement,t,r)})}checkDropSpecialCharAmount(t){return t.split("").filter(i=>this._findDropSpecialChar(i)).length}removeMask(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.specialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(t){var r;if("#"===t)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const i=[];for(let s=0;s<t.length;s++){const a=null!==(r=t[s])&&void 0!==r?r:"";!a||a.match("\\d")&&i.push(a)}return i.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:i.length>3&&i.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:i.length>6&&i.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(t){var r;const i=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,s=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===t)return i;const a=[];for(let c=0;c<t.length;c++){const f=null!==(r=t[c])&&void 0!==r?r:"";!f||f.match("\\d")&&a.push(f)}return a.length<=3?i.slice(a.length,i.length):a.length>3&&a.length<=6?i.slice(a.length+1,i.length):a.length>6&&a.length<=9?i.slice(a.length+2,i.length):a.length>9&&a.length<11?i.slice(a.length+3,i.length):11===a.length?"":12===a.length?s.slice(17===t.length?16:15,s.length):a.length>12&&a.length<=14?s.slice(a.length+4,s.length):""}_getActiveElement(t=this.document){var r;const i=null===(r=null==t?void 0:t.activeElement)||void 0===r?void 0:r.shadowRoot;return(null==i?void 0:i.activeElement)?this._getActiveElement(i):t.activeElement}formControlResult(t){if(this.writingValue||!this.triggerOnMaskChange&&this.maskChanged)return this.maskChanged&&this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(t)))))),void(this.maskChanged=!1);Array.isArray(this.dropSpecialCharacters)?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeMask(this._removeSuffix(this._removePrefix(t)),this.dropSpecialCharacters))))):this.onChange(this.outputTransformFn(this._toNumber(this.dropSpecialCharacters||!this.dropSpecialCharacters&&this.prefix===t?this._checkSymbols(this._removeSuffix(this._removePrefix(t))):t)))}_toNumber(t){if(!this.isNumberValue||""===t||this.maskExpression.startsWith("separator")&&(this.leadZero||!this.dropSpecialCharacters))return t;if(String(t).length>16&&this.separatorLimit.length>14)return String(t);const r=Number(t);if(this.maskExpression.startsWith("separator")&&Number.isNaN(r)){const i=String(t).replace(",",".");return Number(i)}return Number.isNaN(r)?t:r}_removeMask(t,r){return this.maskExpression.startsWith("percent")&&t.includes(".")?t:t&&t.replace(this._regExpForRemove(r),"")}_removePrefix(t){return this.prefix?t&&t.replace(this.prefix,""):t}_removeSuffix(t){return this.suffix?t&&t.replace(this.suffix,""):t}_retrieveSeparatorValue(t){let r=Array.isArray(this.dropSpecialCharacters)?this.specialCharacters.filter(i=>this.dropSpecialCharacters.includes(i)):this.specialCharacters;return!this.deletedSpecialCharacter&&this._checkPatternForSpace()&&t.includes(" ")&&this.maskExpression.includes("*")&&(r=r.filter(i=>" "!==i)),this._removeMask(t,r)}_regExpForRemove(t){return new RegExp(t.map(r=>`\\${r}`).join("|"),"gi")}_replaceDecimalMarkerToDot(t){const r=Array.isArray(this.decimalMarker)?this.decimalMarker:[this.decimalMarker];return t.replace(this._regExpForRemove(r),".")}_checkSymbols(t){if(""===t)return t;this.maskExpression.startsWith("percent")&&","===this.decimalMarker&&(t=t.replace(",","."));const r=this._retrieveSeparatorPrecision(this.maskExpression),i=this._replaceDecimalMarkerToDot(this._retrieveSeparatorValue(t));return this.isNumberValue&&r?t===this.decimalMarker?null:this.separatorLimit.length>14?String(i):this._checkPrecision(this.maskExpression,i):i}_checkPatternForSpace(){var t,r,i;for(const s in this.patterns)if(this.patterns[s]&&(null===(t=this.patterns[s])||void 0===t?void 0:t.hasOwnProperty("pattern"))){const a=null===(r=this.patterns[s])||void 0===r?void 0:r.pattern.toString(),c=null===(i=this.patterns[s])||void 0===i?void 0:i.pattern;if((null==a?void 0:a.includes(" "))&&(null==c?void 0:c.test(this.maskExpression)))return!0}return!1}_retrieveSeparatorPrecision(t){const r=t.match(new RegExp("^separator\\.([^d]*)"));return r?Number(r[1]):null}_checkPrecision(t,r){const i=t.slice(10,11);return t.indexOf("2")>0||this.leadZero&&Number(i)>1?(","===this.decimalMarker&&this.leadZero&&(r=r.replace(",",".")),this.leadZero?Number(r).toFixed(Number(i)):Number(r).toFixed(2)):this.numberToString(r)}_repeatPatternSymbols(t){return t.match(/{[0-9]+}/)&&t.split("").reduce((r,i,s)=>{if(this._start="{"===i?s:this._start,"}"!==i)return this._findSpecialChar(i)?r+i:r;this._end=s;const a=Number(t.slice(this._start+1,this._end)),c=new Array(a+1).join(t[this._start-1]);if(t.slice(0,this._start).length>1&&t.includes("S")){const f=t.slice(0,this._start-1);return f.includes("{")?r+c:f+r+c}return r+c},"")||t}currentLocaleDecimalMarker(){return 1.1.toLocaleString().substring(1,2)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me),h.LFG(DI),h.LFG(h.SBq,8),h.LFG(h.Qsj,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),rW=(()=>{class n{constructor(t,r,i){this.document=t,this._config=r,this._maskService=i,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.leadZero=null,this.triggerOnMaskChange=null,this.apm=null,this.inputTransformFn=null,this.outputTransformFn=null,this.keepCharacterPositions=null,this.maskFilled=new h.vpe,this._maskValue="",this._isFocused=!1,this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this._isComposing=!1,this.onChange=s=>{},this.onTouch=()=>{}}ngOnChanges(t){const{maskExpression:r,specialCharacters:i,patterns:s,prefix:a,suffix:c,thousandSeparator:f,decimalMarker:y,dropSpecialCharacters:b,hiddenInput:D,showMaskTyped:N,placeHolderCharacter:B,shownMaskExpression:U,showTemplate:K,clearIfNotMatch:ie,validation:Ae,separatorLimit:be,allowNegativeNumbers:Le,leadZeroDateTime:Me,leadZero:Ee,triggerOnMaskChange:pt,apm:Nt,inputTransformFn:hn,outputTransformFn:ct,keepCharacterPositions:Jt}=t;if(r&&(r.currentValue!==r.previousValue&&!r.firstChange&&(this._maskService.maskChanged=!0),r.currentValue&&r.currentValue.split("||").length>1?(this._maskExpressionArray=r.currentValue.split("||").sort((Ir,Br)=>Ir.length-Br.length),this._setMask()):(this._maskExpressionArray=[],this._maskValue=r.currentValue||"",this._maskService.maskExpression=this._maskValue)),i){if(!i.currentValue||!Array.isArray(i.currentValue))return;this._maskService.specialCharacters=i.currentValue||[]}Le&&(this._maskService.allowNegativeNumbers=Le.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.specialCharacters=this._maskService.specialCharacters.filter(Ir=>"-"!==Ir))),s&&s.currentValue&&(this._maskService.patterns=s.currentValue),Nt&&Nt.currentValue&&(this._maskService.apm=Nt.currentValue),a&&(this._maskService.prefix=a.currentValue),c&&(this._maskService.suffix=c.currentValue),f&&(this._maskService.thousandSeparator=f.currentValue),y&&(this._maskService.decimalMarker=y.currentValue),b&&(this._maskService.dropSpecialCharacters=b.currentValue),D&&(this._maskService.hiddenInput=D.currentValue),N&&(this._maskService.showMaskTyped=N.currentValue,!1===N.previousValue&&!0===N.currentValue&&this._isFocused&&requestAnimationFrame(()=>{var Ir;null===(Ir=this._maskService._elementRef)||void 0===Ir||Ir.nativeElement.click()})),B&&(this._maskService.placeHolderCharacter=B.currentValue),U&&(this._maskService.shownMaskExpression=U.currentValue),K&&(this._maskService.showTemplate=K.currentValue),ie&&(this._maskService.clearIfNotMatch=ie.currentValue),Ae&&(this._maskService.validation=Ae.currentValue),be&&(this._maskService.separatorLimit=be.currentValue),Me&&(this._maskService.leadZeroDateTime=Me.currentValue),Ee&&(this._maskService.leadZero=Ee.currentValue),pt&&(this._maskService.triggerOnMaskChange=pt.currentValue),hn&&(this._maskService.inputTransformFn=hn.currentValue),ct&&(this._maskService.outputTransformFn=ct.currentValue),Jt&&(this._maskService.keepCharacterPositions=Jt.currentValue),this._applyMask()}validate({value:t}){var r,i,s;if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(t);if(this._maskService.cpfCnpjError)return this._createValidationError(t);if(this._maskValue.startsWith("separator")||tW.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(eW.includes(this._maskValue))return this._validateTime(t);if(t&&t.toString().length>=1){let a=0;if(this._maskValue.startsWith("percent"))return null;for(const c in this._maskService.patterns)if((null===(r=this._maskService.patterns[c])||void 0===r?void 0:r.optional)&&(this._maskValue.indexOf(c)!==this._maskValue.lastIndexOf(c)?a+=this._maskValue.split("").filter(y=>y===c).join("").length:-1!==this._maskValue.indexOf(c)&&a++,-1!==this._maskValue.indexOf(c)&&t.toString().length>=this._maskValue.indexOf(c)||a===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&t.toString().length===this._maskValue.length+Number((null!==(i=this._maskValue.split("{")[1])&&void 0!==i?i:"").split("}")[0])-4)return null;if(this._maskValue.indexOf("*")>1&&t.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&t.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(t);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){t="number"==typeof t?String(t):t;const c=this._maskValue.split("*"),f=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkDropSpecialCharAmount(this._maskValue)-a:this.prefix?this._maskValue.length+this.prefix.length-a:this._maskValue.length-a;if(1===c.length&&t.toString().length<f)return this._createValidationError(t);if(c.length>1){const y=c[c.length-1];if(y&&this._maskService.specialCharacters.includes(y[0])&&String(t).includes(null!==(s=y[0])&&void 0!==s?s:"")&&!this.dropSpecialCharacters){const b=t.split(y[0]);return b[b.length-1].length===y.length-1?null:this._createValidationError(t)}return(y&&!this._maskService.specialCharacters.includes(y[0])||!y||this._maskService.dropSpecialCharacters)&&t.length>=f-1?null:this._createValidationError(t)}}if(1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null}return t&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onFocus(){this._isFocused=!0}onModelChange(t){(""===t||null==t)&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(t){var r,i,s,a,c;if(this._isComposing)return;const f=t.target,y=this._maskService.inputTransformFn(f.value);if("number"!==f.type)if("string"==typeof y||"number"==typeof y){if(f.value=y.toString(),this._inputValue=f.value,this._setMask(),!this._maskValue)return void this.onChange(f.value);let b=1===f.selectionStart?f.selectionStart+this._maskService.prefix.length:f.selectionStart;if(this.showMaskTyped&&this.keepCharacterPositions&&1===this._maskService.placeHolderCharacter.length){const U=f.value.slice(b-1,b),K=this.prefix.length,ie=this._maskService._checkSymbolMask(U,null!==(r=this._maskService.maskExpression[b-1-K])&&void 0!==r?r:""),Ae=this._maskService._checkSymbolMask(U,null!==(i=this._maskService.maskExpression[b+1-K])&&void 0!==i?i:""),be=this._maskService.selStart===this._maskService.selEnd,Le=null!==(s=Number(this._maskService.selStart)-K)&&void 0!==s?s:"",Me=null!==(a=Number(this._maskService.selEnd)-K)&&void 0!==a?a:"";if("Backspace"===this._code)if(be){if(!this._maskService.specialCharacters.includes(this._maskService.maskExpression.slice(b-this.prefix.length,b+1-this.prefix.length))&&be)if(1===Le&&this.prefix)this._maskService.actualValue=this.prefix+this._maskService.placeHolderCharacter+f.value.split(this.prefix).join("").split(this.suffix).join("")+this.suffix,b-=1;else{const Ee=f.value.substring(0,b),pt=f.value.substring(b);this._maskService.actualValue=Ee+this._maskService.placeHolderCharacter+pt}}else this._maskService.actualValue=this._maskService.selStart===K?this.prefix+this._maskService.maskIsShown.slice(0,Me)+this._inputValue.split(this.prefix).join(""):this._maskService.selStart===this._maskService.maskIsShown.length+K?this._inputValue+this._maskService.maskIsShown.slice(Le,Me):this.prefix+this._inputValue.split(this.prefix).join("").slice(0,Le)+this._maskService.maskIsShown.slice(Le,Me)+this._maskService.actualValue.slice(Me+K,this._maskService.maskIsShown.length+K)+this.suffix;"Backspace"!==this._code&&(ie||Ae||!be?this._maskService.specialCharacters.includes(f.value.slice(b,b+1))&&Ae&&!this._maskService.specialCharacters.includes(f.value.slice(b+1,b+2))?(this._maskService.actualValue=f.value.slice(0,b-1)+f.value.slice(b,b+1)+U+f.value.slice(b+2),b+=1):ie?this._maskService.actualValue=1===f.value.length&&1===b?this.prefix+U+this._maskService.maskIsShown.slice(1,this._maskService.maskIsShown.length)+this.suffix:f.value.slice(0,b-1)+U+f.value.slice(b+1).split(this.suffix).join("")+this.suffix:this.prefix&&1===f.value.length&&b-K==1&&this._maskService._checkSymbolMask(f.value,null!==(c=this._maskService.maskExpression[b-1-K])&&void 0!==c?c:"")&&(this._maskService.actualValue=this.prefix+f.value+this._maskService.maskIsShown.slice(1,this._maskService.maskIsShown.length)+this.suffix):b=Number(f.selectionStart)-1)}let D=0,N=!1;if("Delete"===this._code&&(this._maskService.deletedSpecialCharacter=!0),this._inputValue.length>=this._maskService.maskExpression.length-1&&"Backspace"!==this._code&&"d0/M0/0000"===this._maskService.maskExpression&&b<10){const U=this._inputValue.slice(b-1,b);f.value=this._inputValue.slice(0,b-1)+U+this._inputValue.slice(b+1)}if("d0/M0/0000"===this._maskService.maskExpression&&this.leadZeroDateTime&&(b<3&&Number(f.value)>31&&Number(f.value)<40||5===b&&Number(f.value.slice(3,5))>12)&&(b+=2),"Hh:m0:s0"===this._maskService.maskExpression&&this.apm&&(this._justPasted&&"00"===f.value.slice(0,2)&&(f.value=f.value.slice(1,2)+f.value.slice(2,f.value.length)),f.value="00"===f.value?"0":f.value),this._maskService.applyValueChanges(b,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(U,K)=>{this._justPasted=!1,D=U,N=K}),this._getActiveElement()!==f)return;this._maskService.plusOnePosition&&(b+=1,this._maskService.plusOnePosition=!1),this._maskExpressionArray.length&&(b="Backspace"===this._code?this.specialCharacters.includes(this._inputValue.slice(b-1,b))?b-1:b:1===f.selectionStart?f.selectionStart+this._maskService.prefix.length:f.selectionStart),this._position=1===this._position&&1===this._inputValue.length?null:this._position;let B=this._position?this._inputValue.length+b+D:b+("Backspace"!==this._code||N?D:0);B>this._getActualInputLength()&&(B=f.value===this._maskService.decimalMarker&&1===f.value.length?this._getActualInputLength()+1:this._getActualInputLength()),B<0&&(B=0),f.setSelectionRange(B,B),this._position=null}else console.warn("Ngx-mask writeValue work with string | number, your current value:",typeof y);else{if(!this._maskValue)return void this.onChange(f.value);this._maskService.applyValueChanges(f.value.length,this._justPasted,"Backspace"===this._code||"Delete"===this._code)}}onCompositionStart(){this._isComposing=!0}onCompositionEnd(t){this._isComposing=!1,this._justPasted=!0,this.onInput(t)}onBlur(t){if(this._maskValue){const r=t.target;if(this.leadZero&&r.value.length>0&&"string"==typeof this.decimalMarker){const i=this._maskService.maskExpression,s=Number(this._maskService.maskExpression.slice(i.length-1,i.length));if(s>1){r.value=this.suffix?r.value.split(this.suffix).join(""):r.value;const a=r.value.split(this.decimalMarker)[1];r.value=r.value.includes(this.decimalMarker)?r.value+"0".repeat(s-a.length)+this.suffix:r.value+this.decimalMarker+"0".repeat(s)+this.suffix,this._maskService.actualValue=r.value}}this._maskService.clearIfNotMatchFn()}this._isFocused=!1,this.onTouch()}onClick(t){if(!this._maskValue)return;const r=t.target;null!==r&&null!==r.selectionStart&&r.selectionStart===r.selectionEnd&&r.selectionStart>this._maskService.prefix.length&&38!==t.keyCode&&this._maskService.showMaskTyped&&!this.keepCharacterPositions&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),r.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===r.value?(r.focus(),r.setSelectionRange(0,0)):r.selectionStart>this._maskService.actualValue.length&&r.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const a=r&&(r.value===this._maskService.prefix?this._maskService.prefix+this._maskService.maskIsShown:r.value);r&&r.value!==a&&(r.value=a),r&&"number"!==r.type&&(r.selectionStart||r.selectionEnd)<=this._maskService.prefix.length?r.selectionStart=this._maskService.prefix.length:r&&r.selectionEnd>this._getActualInputLength()&&(r.selectionEnd=this._getActualInputLength())}onKeyDown(t){var r,i;if(!this._maskValue)return;if(this._isComposing)return void("Enter"===t.key&&this.onCompositionEnd(t));this._code=t.code?t.code:t.key;const s=t.target;if(this._inputValue=s.value,this._setMask(),"number"!==s.type){if("ArrowUp"===t.key&&t.preventDefault(),"ArrowLeft"===t.key||"Backspace"===t.key||"Delete"===t.key){if("Backspace"===t.key&&0===s.value.length&&(s.selectionStart=s.selectionEnd),"Backspace"===t.key&&0!==s.selectionStart)if(this.specialCharacters=(null===(r=this.specialCharacters)||void 0===r?void 0:r.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&s.selectionStart<=this.prefix.length)s.setSelectionRange(this.prefix.length,s.selectionEnd);else if(this._inputValue.length!==s.selectionStart&&1!==s.selectionStart)for(;this.specialCharacters.includes((null!==(i=this._inputValue[s.selectionStart-1])&&void 0!==i?i:"").toString())&&(this.prefix.length>=1&&s.selectionStart>this.prefix.length||0===this.prefix.length);)s.setSelectionRange(s.selectionStart-1,s.selectionEnd);this.checkSelectionOnDeletion(s),this._maskService.prefix.length&&s.selectionStart<=this._maskService.prefix.length&&s.selectionEnd<=this._maskService.prefix.length&&t.preventDefault();const a=s.selectionStart;"Backspace"===t.key&&!s.readOnly&&0===a&&s.selectionEnd===s.value.length&&0!==s.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<s.selectionStart?s.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):("KeyA"===t.code&&t.ctrlKey||"KeyA"===t.code&&t.metaKey)&&(s.setSelectionRange(0,this._getActualInputLength()),t.preventDefault()),this._maskService.selStart=s.selectionStart,this._maskService.selEnd=s.selectionEnd}}writeValue(t){var r;return(0,Xz.mG)(this,void 0,void 0,function*(){if("object"==typeof t&&null!==t&&"value"in t&&("disable"in t&&this.setDisabledState(Boolean(t.disable)),t=t.value),null!==t&&(t=this.inputTransformFn?this.inputTransformFn(t):t),"string"==typeof t||"number"==typeof t||null==t){(null==t||""===t)&&(this._maskService._currentValue="",this._maskService._previousValue="");let i=t;if("number"==typeof i||this._maskValue.startsWith("separator")){i=String(i);const s=this._maskService.currentLocaleDecimalMarker();Array.isArray(this._maskService.decimalMarker)||(i=this._maskService.decimalMarker!==s?i.replace(s,this._maskService.decimalMarker):i),this._maskService.leadZero&&i&&this.maskExpression&&!1!==this.dropSpecialCharacters&&(i=this._maskService._checkPrecision(this._maskService.maskExpression,i)),","===this._maskService.decimalMarker&&(i=i.toString().replace(".",",")),(null===(r=this.maskExpression)||void 0===r?void 0:r.startsWith("separator"))&&this.leadZero&&requestAnimationFrame(()=>{var a;this._maskService.applyMask(null!==(a=null==i?void 0:i.toString())&&void 0!==a?a:"",this._maskService.maskExpression)}),this._maskService.isNumberValue=!0}"string"!=typeof i&&(i=""),this._inputValue=i,this._setMask(),i&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?("function"!=typeof this.inputTransformFn&&(this._maskService.writingValue=!0),this._maskService.formElementProperty=["value",this._maskService.applyMask(i,this._maskService.maskExpression)],"function"!=typeof this.inputTransformFn&&(this._maskService.writingValue=!1)):this._maskService.formElementProperty=["value",i],this._inputValue=i}else console.warn("Ngx-mask writeValue work with string | number, your current value:",typeof t)})}registerOnChange(t){this._maskService.onChange=this.onChange=t}registerOnTouched(t){this.onTouch=t}_getActiveElement(t=this.document){var r;const i=null===(r=null==t?void 0:t.activeElement)||void 0===r?void 0:r.shadowRoot;return(null==i?void 0:i.activeElement)?this._getActiveElement(i):t.activeElement}checkSelectionOnDeletion(t){t.selectionStart=Math.min(Math.max(this.prefix.length,t.selectionStart),this._inputValue.length-this.suffix.length),t.selectionEnd=Math.min(Math.max(this.prefix.length,t.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(t){this._maskService.formElementProperty=["disabled",t]}_applyMask(){this._maskService.maskExpression=this._maskService._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(t){var r;const i=this._maskValue.split("").filter(s=>":"!==s).length;return t&&(0==+(null!==(r=t[t.length-1])&&void 0!==r?r:-1)&&t.length<i||t.length<=i-2)?this._createValidationError(t):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(t){return{mask:{requiredMask:this._maskValue,actualValue:t}}}_setMask(){this._maskExpressionArray.some(t=>{var r,i,s,a;if(t.split("").some(f=>this._maskService.specialCharacters.includes(f))&&this._inputValue&&!t.includes("S")||t.includes("{")){const f=(null===(r=this._maskService.removeMask(this._inputValue))||void 0===r?void 0:r.length)<=(null===(i=this._maskService.removeMask(t))||void 0===i?void 0:i.length);if(f)return this._maskValue=this.maskExpression=this._maskService.maskExpression=t.includes("{")?this._maskService._repeatPatternSymbols(t):t,f;{const y=null!==(s=this._maskExpressionArray[this._maskExpressionArray.length-1])&&void 0!==s?s:"";this._maskValue=this.maskExpression=this._maskService.maskExpression=y.includes("{")?this._maskService._repeatPatternSymbols(y):y}}else{const f=null===(a=this._maskService.removeMask(this._inputValue))||void 0===a?void 0:a.split("").every((y,b)=>{const D=t.charAt(b);return this._maskService._checkSymbolMask(y,D)});if(f)return this._maskValue=this.maskExpression=this._maskService.maskExpression=t,f}})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(me),h.Y36(DI),h.Y36(fR))},n.\u0275dir=h.lG2({type:n,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(t,r){1&t&&h.NdJ("paste",function(){return r.onPaste()})("focus",function(s){return r.onFocus(s)})("ngModelChange",function(s){return r.onModelChange(s)})("input",function(s){return r.onInput(s)})("compositionstart",function(s){return r.onCompositionStart(s)})("compositionend",function(s){return r.onCompositionEnd(s)})("blur",function(s){return r.onBlur(s)})("click",function(s){return r.onClick(s)})("keydown",function(s){return r.onKeyDown(s)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",leadZero:"leadZero",triggerOnMaskChange:"triggerOnMaskChange",apm:"apm",inputTransformFn:"inputTransformFn",outputTransformFn:"outputTransformFn",keepCharacterPositions:"keepCharacterPositions"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[h._Bn([{provide:Fc,useExisting:(0,h.Gpc)(()=>n),multi:!0},{provide:To,useExisting:(0,h.Gpc)(()=>n),multi:!0},fR]),h.TTD]}),n})();function iW(n,e){return Object.assign(Object.assign({},n),e instanceof Function?e():e)}let sW=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:mB,useValue:t},{provide:_B,useValue:Jz},{provide:DI,useFactory:iW,deps:[_B,mB]},fR]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function oW(n,e){1&n&&(h.TgZ(0,"p",3),h._uU(1," password must be 8 characters long, 1 upper case, 1 special character "),h.qZA())}function aW(n,e){1&n&&(h.TgZ(0,"p",3),h._uU(1," Field is reuired. "),h.qZA())}function uW(n,e){if(1&n&&(h.TgZ(0,"p",3),h._uU(1),h.qZA()),2&n){const t=h.oxw(2);h.xp6(1),h.AsE(" The value you inputted is ",null==t.control.errors?null:t.control.errors.minlength.actualLength," characters long. It must be at least ",null==t.control.errors?null:t.control.errors.minlength.requiredLength," characters long. ")}}function lW(n,e){1&n&&(h.TgZ(0,"p",3),h._uU(1," You must enter a valid email "),h.qZA())}function cW(n,e){1&n&&(h.TgZ(0,"p",3),h._uU(1," Value too low "),h.qZA())}function dW(n,e){1&n&&(h.TgZ(0,"p",3),h._uU(1," Value too high "),h.qZA())}function hW(n,e){1&n&&(h.TgZ(0,"p",3),h._uU(1," Password do not match "),h.qZA())}function fW(n,e){1&n&&(h.TgZ(0,"p",3),h._uU(1," Email already taken, please try another email "),h.qZA())}function pW(n,e){if(1&n&&(h.ynx(0),h.YNc(1,oW,2,0,"p",2),h.YNc(2,aW,2,0,"p",2),h.YNc(3,uW,2,2,"p",2),h.YNc(4,lW,2,0,"p",2),h.YNc(5,cW,2,0,"p",2),h.YNc(6,dW,2,0,"p",2),h.YNc(7,hW,2,0,"p",2),h.YNc(8,fW,2,0,"p",2),h.BQk()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.pattern),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.required),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.minlength),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.email),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.min),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.max),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.noMatch),h.xp6(1),h.Q6J("ngIf",null==t.control.errors?null:t.control.errors.EmailTaken)}}let pR=(()=>{class n{constructor(){this.control=new Rl,this.type="text",this.placeholder="",this.format=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-input"]],inputs:{control:"control",type:"type",placeholder:"placeholder",format:"format"},decls:2,vars:6,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"formControl","type","placeholder","mask","dropSpecialCharacters"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(t,r){1&t&&(h._UZ(0,"input",0),h.YNc(1,pW,9,8,"ng-container",1)),2&t&&(h.Q6J("formControl",r.control)("type",r.type)("placeholder",r.placeholder)("mask",r.format)("dropSpecialCharacters",!1),h.xp6(1),h.Q6J("ngIf",r.control.touched&&r.control.dirty))},directives:[aC,rW,zP,oR,Si],styles:[""]}),n})();function gW(n,e){if(1&n&&(h.TgZ(0,"app-alert",11),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.Q6J("color",t.alertColor),h.xp6(1),h.hij(" ",t.alertMsg," ")}}let mW=(()=>{class n{constructor(t,r){this.auth=t,this.emailTaken=r,this.inSubmission=!1,this.name=new Rl("",[Eo.required,Eo.minLength(3)]),this.email=new Rl("",[Eo.required,Eo.email],[this.emailTaken.validate]),this.age=new Rl(null,[Eo.required,Eo.min(18),Eo.max(120)]),this.password=new Rl("",[Eo.required,Eo.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm)]),this.confirm_password=new Rl("",[Eo.required]),this.phoneNumber=new Rl("",[Eo.required,Eo.min(13),Eo.max(13)]),this.showAlert=!1,this.alertMsg="Please wait! Your accout is being created",this.alertColor="blue",this.registerForm=new Mb({name:this.name,email:this.email,age:this.age,password:this.password,confirm_password:this.confirm_password,phoneNumber:this.phoneNumber},[Yz.match("password","confirm_password")])}register(){var t=this;return(0,at.Z)(function*(){t.showAlert=!0,t.alertMsg="Please wait! Your accout is being created",t.alertColor="blue",t.inSubmission=!0;try{yield t.auth.createUser(t.registerForm.value)}catch(r){return console.error(r),t.alertMsg="An unexpected error occured, please try again later",t.alertColor="red",void(t.inSubmission=!1)}t.alertMsg="Success! your account has been created.",t.alertColor="green"})()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(VP),h.Y36(Qz))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-register"]],decls:28,vars:9,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["placeholder","Enter Name",3,"control"],["type","email","placeholder","Enter Email",3,"control"],["type","number","placeholder","Enter Age",3,"control"],["type","password","placeholder","Enter password",3,"control"],["type","password","placeholder","Confirm password",3,"control"],["format","(000)000-0000","placeholder","Enter Phone Number",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"]],template:function(t,r){1&t&&(h.YNc(0,gW,2,2,"app-alert",0),h.TgZ(1,"form",1),h.NdJ("ngSubmit",function(){return r.register()}),h.TgZ(2,"div",2)(3,"label",3),h._uU(4,"Name"),h.qZA(),h._UZ(5,"app-input",4),h.qZA(),h.TgZ(6,"div",2)(7,"label",3),h._uU(8,"Email"),h.qZA(),h._UZ(9,"app-input",5),h.qZA(),h.TgZ(10,"div",2)(11,"label",3),h._uU(12,"Age"),h.qZA(),h._UZ(13,"app-input",6),h.qZA(),h.TgZ(14,"div",2)(15,"label",3),h._uU(16,"Password"),h.qZA(),h._UZ(17,"app-input",7),h.qZA(),h.TgZ(18,"div",2)(19,"label",3),h._uU(20,"Confirm Password"),h.qZA(),h._UZ(21,"app-input",8),h.qZA(),h.TgZ(22,"div",2)(23,"label",3),h._uU(24,"Phone Number"),h.qZA(),h._UZ(25,"app-input",9),h.qZA(),h.TgZ(26,"button",10),h._uU(27," Submit "),h.qZA()()),2&t&&(h.Q6J("ngIf",r.showAlert),h.xp6(1),h.Q6J("formGroup",r.registerForm),h.xp6(4),h.Q6J("control",r.name),h.xp6(4),h.Q6J("control",r.email),h.xp6(4),h.Q6J("control",r.age),h.xp6(4),h.Q6J("control",r.password),h.xp6(4),h.Q6J("control",r.confirm_password),h.xp6(4),h.Q6J("control",r.phoneNumber),h.xp6(1),h.Q6J("disabled",r.registerForm.invalid||r.inSubmission))},directives:[Si,gI,fC,uC,Pb,pR],styles:[""]}),n})(),_W=(()=>{class n{constructor(t){this.modal=t}ngOnInit(){this.modal.register("auth")}ngOnDestroy(){this.modal.unregister("auth")}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(oC))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalID","auth"],["heading","",1,"text-2xl","font-bold"],["tabTitle","Login"],["tabTitle","Register"]],template:function(t,r){1&t&&(h.TgZ(0,"app-modal",0)(1,"p",1),h._uU(2,"Your Account"),h.qZA(),h.TgZ(3,"app-tabs-container")(4,"app-tab",2),h._UZ(5,"app-login"),h.qZA(),h.TgZ(6,"app-tab",3),h._UZ(7,"app-register"),h.qZA()()())},directives:[c4,YG,d4,Zz,mW],styles:[""]}),n})();function yW(n,e){1&n&&h._UZ(0,"app-auth-modal")}let vW=(()=>{class n{constructor(t){this.auth=t,this.title="clips"}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(VP))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(h._UZ(0,"app-nav")(1,"router-outlet"),h.YNc(2,yW,1,0,"app-auth-modal",0),h.ALo(3,"async")),2&t&&(h.xp6(2),h.Q6J("ngIf",!h.lcZ(3,1,r.auth.isAuthenticatedWithDelay$)))},directives:[$G,zp,Si,_W],pipes:[xh],styles:[""]}),n})(),yB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[Ul,hR,sW.forRoot()]]}),n})(),bW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Ul,yB,hR,Gz]]}),n})();const gR_firebase={apiKey:"AIzaSyDRCla4lRvg7pHWDFYtdS-hxaqa96Se_F8",authDomain:"clipsfire-fe613.firebaseapp.com",projectId:"clipsfire-fe613",storageBucket:"clipsfire-fe613.appspot.com",appId:"1:629324012997:web:e0d1c77e316ee0423abfac"};function TW(n,e){if(1&n&&(h.TgZ(0,"app-alert",9)(1,"p"),h._uU(2),h.qZA()()),2&n){const t=h.oxw();h.Q6J("color",t.alertColor),h.xp6(2),h.Oqu(t.alertMsg)}}const EW=function(n,e){return{"opacity-50":n,"hover:bg-indigo-700":e}};let wW=(()=>{class n{constructor(t,r){this.modal=t,this.clipService=r,this.inSubmission=!1,this.showAlert=!1,this.alertColor="blue",this.alertMsg="Please wait! Updating clip",this.update=new h.vpe,this.activeClip=null,this.clipID=new Rl(""),this.title=new Rl("",[Eo.required,Eo.minLength(3)]),this.editForm=new Mb({title:this.title,id:this.clipID})}ngOnInit(){this.modal.register("editClip")}ngOnDestroy(){this.modal.unregister("editClip")}ngOnChanges(){!this.activeClip||(this.inSubmission=!1,this.showAlert=!1,this.clipID.setValue(this.activeClip.docID),this.title.setValue(this.activeClip.title))}submit(){var t=this;return(0,at.Z)(function*(){if(t.activeClip){t.inSubmission=!0,t.showAlert=!0,t.alertColor="blue",t.alertMsg="Please wait! Updating the clip.";try{yield t.clipService.updateClip(t.clipID.value,t.title.value)}catch(r){return t.inSubmission=!1,t.alertColor="red",void(t.alertMsg="Some thing went wrong. Try again later")}t.activeClip.title=t.title.value,t.update.emit(t.activeClip),t.inSubmission=!1,t.alertColor="green",t.alertMsg="Success!"}})()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(oC),h.Y36(ED))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-edit"]],inputs:{activeClip:"activeClip"},outputs:{update:"update"},features:[h.TTD],decls:12,vars:8,consts:[["modalID","editClip"],[1,"text-2xl","font-bold"],[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeholder","Enter Title",3,"control"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none",3,"disabled","ngClass"],[3,"color"]],template:function(t,r){1&t&&(h.TgZ(0,"app-modal",0)(1,"p",1),h._uU(2,"Edit Video"),h.qZA(),h.YNc(3,TW,3,2,"app-alert",2),h.TgZ(4,"form",3),h.NdJ("ngSubmit",function(){return r.submit()}),h.TgZ(5,"div",4)(6,"label",5),h._uU(7,"Title"),h.qZA(),h._UZ(8,"app-input",6),h.qZA(),h.TgZ(9,"div",7)(10,"button",8),h._uU(11," Update "),h.qZA()()()()),2&t&&(h.xp6(3),h.Q6J("ngIf",r.showAlert),h.xp6(1),h.Q6J("formGroup",r.editForm),h.xp6(4),h.Q6J("control",r.title),h.xp6(2),h.Q6J("disabled",r.inSubmission)("ngClass",h.WLB(5,EW,r.inSubmission,!r.inSubmission)))},directives:[c4,Si,gI,fC,uC,Pb,pR,Wr],styles:[""]}),n})();function CW(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",10)(1,"a",11),h._UZ(2,"img",12),h.qZA(),h.TgZ(3,"div",13)(4,"a",14),h._uU(5),h.qZA(),h.TgZ(6,"a",15),h._uU(7," Copy Link "),h.qZA()(),h.TgZ(8,"div",16),h.NdJ("click",function(i){const a=h.CHM(t).$implicit;return h.oxw().openModal(i,a)}),h.TgZ(9,"a",17)(10,"span",18),h._uU(11,"build"),h.qZA()(),h.TgZ(12,"a",19),h.NdJ("click",function(i){const a=h.CHM(t).$implicit;return h.oxw().deleteClip(i,a)}),h.TgZ(13,"span",18),h._uU(14,"delete"),h.qZA()()()()}if(2&n){const t=e.$implicit;h.xp6(5),h.hij(" ",t.title," ")}}let SW=(()=>{class n{constructor(t,r,i,s){this.router=t,this.route=r,this.clipService=i,this.modal=s,this.videoOrder="1",this.clips=[],this.activeClip=null,this.sort$=new ss(this.videoOrder)}ngOnInit(){this.route.queryParams.subscribe(t=>{this.videoOrder="2"===t.sort?t.sort:1,this.sort$.next(this.videoOrder)}),this.clipService.getUserClips(this.sort$).subscribe(t=>{this.clips=[],t.forEach(r=>{this.clips.push(Object.assign({docID:r.id},r.data()))})})}sort(t){const{value:r}=t.target;this.router.navigate([],{relativeTo:this.route,queryParams:{sort:r}})}openModal(t,r){t.preventDefault(),this.activeClip=r,this.modal.toggleModal("editClip")}update(t){this.clips.forEach((r,i)=>{r.docID==t.docID&&(this.clips[i].title=t.title)})}deleteClip(t,r){t.preventDefault(),this.clipService.deleteClip(r),this.clips.forEach((i,s)=>{i.docID==r.docID&&this.clips.splice(s,1)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Qi),h.Y36(lo),h.Y36(ED),h.Y36(oC))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-manage"]],decls:13,vars:4,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","justify-between"],["routerLink","/upload",1,"bg-indigo-400","text-white","py-4","px-10","text-xl"],[1,"text-black","px-8","text-xl","outline-none","appearance-none",3,"change"],["value","1",3,"selected"],["value","2",3,"selected"],[1,"container","mx-auto","my-8"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary flex flex-col justify-start",4,"ngFor","ngForOf"],[3,"activeClip","update"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","flex","flex-col","justify-start"],["href","#"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"p-6","text-2xl"],["href","#",1,"font-bold","mb-2"],["href","#",1,"bg-gray-400","text-white","px-2","py-1","ml-2","text-sm","rounded"],[1,"flex","text-center","text-2xl","bg-gray-800","p-2","mt-auto",3,"click"],["href","#",1,"flex-1","p-2","border-right","border-r-2","border-gray-700","transition","hover:text-indigo-400"],[1,"material-icons","text-base"],["href","#",1,"flex-1","p-2","rounded-br-2xl","transition","hover:text-indigo-400",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"section",0)(1,"div",1)(2,"a",2),h._uU(3,"Upload Videos"),h.qZA(),h.TgZ(4,"select",3),h.NdJ("change",function(s){return r.sort(s)}),h.TgZ(5,"option",4),h._uU(6,"Recent Uploads"),h.qZA(),h.TgZ(7,"option",5),h._uU(8,"Oldest Uploads"),h.qZA()()()(),h.TgZ(9,"div",6)(10,"div",7),h.YNc(11,CW,15,1,"div",8),h.qZA()(),h.TgZ(12,"app-edit",9),h.NdJ("update",function(s){return r.update(s)}),h.qZA()),2&t&&(h.xp6(5),h.Q6J("selected","1"===r.videoOrder),h.xp6(2),h.Q6J("selected","2"===r.videoOrder),h.xp6(4),h.Q6J("ngForOf",r.clips),h.xp6(1),h.Q6J("activeClip",r.activeClip))},directives:[cl,iB,oB,ri,wW],styles:[""]}),n})();const vB={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let II;const xW=new Uint8Array(16);function DW(){if(!II&&(II="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!II))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return II(xW)}const wo=[];for(let n=0;n<256;++n)wo.push((n+256).toString(16).slice(1));const AW=function IW(n,e,t){if(vB.randomUUID&&!e&&!n)return vB.randomUUID();const r=(n=n||{}).random||(n.rng||DW)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=r[i];return e}return function bB(n,e=0){return wo[n[e+0]]+wo[n[e+1]]+wo[n[e+2]]+wo[n[e+3]]+"-"+wo[n[e+4]]+wo[n[e+5]]+"-"+wo[n[e+6]]+wo[n[e+7]]+"-"+wo[n[e+8]]+wo[n[e+9]]+"-"+wo[n[e+10]]+wo[n[e+11]]+wo[n[e+12]]+wo[n[e+13]]+wo[n[e+14]]+wo[n[e+15]]}(r)};var TB=$(260);let kW=(()=>{class n{constructor(){this.isRunning=!1,this.isReady=!1,this.ffmpeg=(0,TB.createFFmpeg)({log:!0})}init(){var t=this;return(0,at.Z)(function*(){t.isReady||(yield t.ffmpeg.load(),t.isReady=!0)})()}getScreenshots(t){var r=this;return(0,at.Z)(function*(){r.isRunning=!0;const i=yield(0,TB.fetchFile)(t);r.ffmpeg.FS("writeFile",t.name,i);const s=[1,2,3],a=[];s.forEach(f=>{a.push("-i",t.name,"-ss",`00:00:0${f}`,"-frames:v","1","-filter:v","scale=510:-1",`output_0${f}.png`)}),yield r.ffmpeg.run(...a);const c=[];return s.forEach(f=>{const y=r.ffmpeg.FS("readFile",`output_0${f}.png`),b=new Blob([y.buffer],{type:"image/png"}),D=URL.createObjectURL(b);c.push(D)}),r.isRunning=!1,c})()}blobFromURL(t){return(0,at.Z)(function*(){return yield(yield fetch(t)).blob()})()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),MW=(()=>{class n{handleEvent(t){t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["","app-event-blocker",""]],hostBindings:function(t,r){1&t&&h.NdJ("drop",function(s){return r.handleEvent(s)})("dragover",function(s){return r.handleEvent(s)})}}),n})(),PW=(()=>{class n{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustResourceUrl(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Up,16))},n.\u0275pipe=h.Yjl({name:"safeURL",type:n,pure:!0}),n})();function RW(n,e){1&n&&(h.ynx(0),h.TgZ(1,"span",5),h._uU(2," settings "),h.qZA(),h.BQk())}function OW(n,e){1&n&&(h.TgZ(0,"span",5),h._uU(1," autorenew "),h.qZA())}const NW=function(n){return{"bg-indigo-400 border-indigo-400 border-solid":n}};function LW(n,e){if(1&n){const t=h.EpF();h.ynx(0),h.TgZ(1,"div",7),h.NdJ("dragend",function(){return h.CHM(t),h.oxw(2).isDragover=!1})("dragover",function(){return h.CHM(t),h.oxw(2).isDragover=!0})("dragenter",function(){return h.CHM(t),h.oxw(2).isDragover=!0})("dragleave",function(){return h.CHM(t),h.oxw(2).isDragover=!1})("mouseleave",function(){return h.CHM(t),h.oxw(2).isDragover=!1})("drop",function(i){return h.CHM(t),h.oxw(2).storeFile(i)}),h.TgZ(2,"h5"),h._uU(3,"Drop your file here (mp4 only!)"),h.qZA(),h.YNc(4,OW,2,0,"span",8),h.qZA(),h.TgZ(5,"input",9),h.NdJ("change",function(i){return h.CHM(t),h.oxw(2).storeFile(i)}),h.qZA(),h.BQk()}if(2&n){const t=h.oxw(2);h.xp6(1),h.Q6J("ngClass",h.VKq(2,NW,t.isDragover)),h.xp6(3),h.Q6J("ngIf",t.ffmpegService.isRunning)}}function FW(n,e){if(1&n&&(h.TgZ(0,"p"),h._uU(1),h.ALo(2,"percent"),h.qZA()),2&n){const t=h.oxw(4);h.xp6(1),h.Oqu(h.lcZ(2,1,t.percentage))}}function UW(n,e){if(1&n&&(h.TgZ(0,"app-alert",20)(1,"p"),h._uU(2),h.qZA(),h.YNc(3,FW,3,3,"p",21),h.qZA()),2&n){const t=h.oxw(3);h.Q6J("color",t.alertColor),h.xp6(2),h.Oqu(t.alertMsg),h.xp6(1),h.Q6J("ngIf",t.showPercentage)}}const BW=function(n,e){return{"border-green-400":n,"border-transparent":e}};function VW(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",22),h.NdJ("click",function(){const s=h.CHM(t).$implicit;return h.oxw(3).selectedScreenshot=s}),h._UZ(1,"img",23),h.ALo(2,"safeURL"),h.qZA()}if(2&n){const t=e.$implicit,r=h.oxw(3);h.Q6J("ngClass",h.WLB(4,BW,t===r.selectedScreenshot,t!==r.selectedScreenshot)),h.xp6(1),h.Q6J("src",h.lcZ(2,2,t),h.LSH)}}const jW=function(n,e){return{"opacity-50":n,"hover:bg-indigo-700":e}};function $W(n,e){if(1&n){const t=h.EpF();h.YNc(0,UW,4,3,"app-alert",10),h.TgZ(1,"form",11),h.NdJ("ngSubmit",function(){return h.CHM(t),h.oxw(2).uploadFile()}),h.TgZ(2,"h2",12),h._uU(3,"Select a Thumbnail"),h.qZA(),h.TgZ(4,"div",13),h.YNc(5,VW,3,7,"div",14),h.qZA(),h.TgZ(6,"div",15)(7,"label",16),h._uU(8,"Title"),h.qZA(),h._UZ(9,"app-input",17),h.qZA(),h.TgZ(10,"div",18)(11,"button",19),h._uU(12," Publish "),h.qZA()()()}if(2&n){const t=h.oxw(2);h.Q6J("ngIf",t.showAlert),h.xp6(1),h.Q6J("formGroup",t.uploadForm),h.xp6(4),h.Q6J("ngForOf",t.screenshots),h.xp6(4),h.Q6J("control",t.title),h.xp6(2),h.Q6J("disabled",t.inSubmission)("ngClass",h.WLB(6,jW,t.inSubmission,!t.inSubmission))}}function HW(n,e){if(1&n&&(h.YNc(0,LW,6,4,"ng-container",3),h.YNc(1,$W,13,9,"ng-template",null,6,h.W1O)),2&n){const t=h.MAs(2),r=h.oxw();h.Q6J("ngIf",!r.nextStep)("ngIfElse",t)}}let qW=(()=>{class n{constructor(t,r,i,s,a){this.storage=t,this.auth=r,this.clipsService=i,this.router=s,this.ffmpegService=a,this.isDragover=!1,this.file=null,this.nextStep=!1,this.showAlert=!1,this.alertColor="blue",this.alertMsg="Please wait your clip is being uploaded.",this.inSubmission=!1,this.percentage=0,this.showPercentage=!1,this.user=null,this.screenshots=[],this.selectedScreenshot="",this.title=new Rl("",[Eo.required,Eo.minLength(3)]),this.uploadForm=new Mb({title:this.title}),r.user.subscribe(c=>this.user=c),this.ffmpegService.init()}ngOnDestroy(){var t;null===(t=this.task)||void 0===t||t.cancel()}storeFile(t){var r=this;return(0,at.Z)(function*(){var i,s,a,c;r.ffmpegService.isRunning||(r.isDragover=!1,r.file=t.dataTransfer?null!==(s=null===(i=t.dataTransfer)||void 0===i?void 0:i.files.item(0))&&void 0!==s?s:null:null!==(c=null===(a=t.target.files)||void 0===a?void 0:a.item(0))&&void 0!==c?c:null,r.file&&"video/mp4"===r.file.type&&(r.screenshots=yield r.ffmpegService.getScreenshots(r.file),r.selectedScreenshot=r.screenshots[0],r.title.setValue(r.file.name.replace(/\.[^/.]+$/,"")),r.nextStep=!0))})()}uploadFile(){var t=this;return(0,at.Z)(function*(){t.uploadForm.disable(),t.showAlert=!0,t.alertColor="blue",t.alertMsg="Please wait! Your clip is being uploaded.",t.inSubmission=!0,t.showPercentage=!0;const r=AW(),i=`clips/${r}.mp4`,s=yield t.ffmpegService.blobFromURL(t.selectedScreenshot),a=`screenshots/${r}.png`;t.task=t.storage.upload(i,t.file);const c=t.storage.ref(i);t.screenshotTask=t.storage.upload(a,s);const f=t.storage.ref(a);var y;Kl([t.task.percentageChanges(),t.screenshotTask.percentageChanges()]).subscribe(y=>{const[b,D]=y;b&&D&&(t.percentage=(b+D)/200)}),$P([t.task.snapshotChanges(),t.screenshotTask.snapshotChanges()]).pipe(Ln(()=>$P([c.getDownloadURL(),f.getDownloadURL()]))).subscribe({next:(y=(0,at.Z)(function*(b){var D,N;const[B,U]=b,K={uid:null===(D=t.user)||void 0===D?void 0:D.uid,displayName:null===(N=t.user)||void 0===N?void 0:N.displayName,title:t.title.value,fileName:`${r}.mp4`,url:B,screenshotURL:U,screenshotFileName:`${r}.png`,timestamp:Qv.Z.firestore.FieldValue.serverTimestamp()},ie=yield t.clipsService.createClip(K);t.alertColor="green",t.alertMsg="Success! Your clip is now ready to share with world.",t.showPercentage=!1,setTimeout(()=>{t.router.navigate(["clip",ie.id])},2e3)}),function(D){return y.apply(this,arguments)}),error:y=>{t.uploadForm.enable(),t.alertColor="red",t.alertMsg="Upload failed! Please try again later.",t.inSubmission=!0,t.showPercentage=!1,console.error(y)}})})()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(uM),h.Y36(ip),h.Y36(ED),h.Y36(Qi),h.Y36(kW))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-upload"]],decls:7,vars:2,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-6"],[4,"ngIf","ngIfElse"],["uploadEditorCtr",""],[1,"material-icons","text-center","text-6xl","p-8","animate-spin"],["uploadFormCtr",""],["app-event-blocker","",1,"w-full","px-10","py-40","rounded","text-center","cursor-pointer","border","border-dashed","border-gray-400","transition","duration-500","hover:text-white","hover:bg-indigo-400","hover:border-indigo-400","hover:border-solid","text-xl",3,"ngClass","dragend","dragover","dragenter","dragleave","mouseleave","drop"],["class","material-icons text-center text-6xl p-8 animate-spin",4,"ngIf"],["type","file",1,"mt-4",3,"change"],[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-4","text-xl"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","border-8 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeholder","EnterTitle",3,"control"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none",3,"disabled","ngClass"],[3,"color"],[4,"ngIf"],[1,"border-8","cursor-pointer",3,"ngClass","click"],[3,"src"]],template:function(t,r){if(1&t&&(h.TgZ(0,"section",0)(1,"div",1)(2,"div",2),h._uU(3,"Upload Video"),h.qZA(),h.YNc(4,RW,3,0,"ng-container",3),h.YNc(5,HW,3,2,"ng-template",null,4,h.W1O),h.qZA()()),2&t){const i=h.MAs(6);h.xp6(4),h.Q6J("ngIf",!r.ffmpegService.isReady)("ngIfElse",i)}},directives:[Si,MW,Wr,gI,fC,uC,Pb,ri,pR],pipes:[Ta,PW],styles:[""]}),n})();var GW=$(9635);const mR=(0,vn.U)(n=>!!n);let _R=(()=>{class n{constructor(t,r){this.router=t,this.auth=r,this.canActivate=(i,s)=>{const a=i.data.authGuardPipe||(()=>mR);return this.auth.user.pipe(Jo(1),a(i,s),(0,vn.U)(c=>"boolean"==typeof c?c:Array.isArray(c)?this.router.createUrlTree(c):this.router.parseUrl(c)))}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Qi),h.LFG(ip))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const EB=()=>(0,GW.z)(mR,(0,vn.U)(e=>e||"/")),KW=[{path:"manage",component:SW,data:{authOnly:!0,authGuardPipe:EB},canActivate:[_R]},{path:"upload",component:qW,data:{authOnly:!0,authGuardPipe:EB},canActivate:[_R]},{path:"manage-clips",redirectTo:"manage"}];let ZW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[hr.forChild(KW)],hr]}),n})(),YW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Ul,yB,ZW,hR]]}),n})(),QW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[vW]}),n.\u0275inj=h.cJS({providers:[],imports:[[Ka,bW,Fo.hO.initializeApp(gR_firebase),BV,WV,YW,MG,Lj]]}),n})();(0,h.G48)(),Qv.Z.initializeApp(gR_firebase);let wB=!1;Qv.Z.auth().onAuthStateChanged(()=>{wB||ql().bootstrapModule(QW).catch(n=>console.error(n)),wB=!0})},3992:(it,Se,$)=>{"use strict";var h=$(9226);it.exports=function(re,ce){return void 0===ce&&(ce=!1),function(me,ye,De){if(me)re(me);else if(ye.statusCode>=400&&ye.statusCode<=599){var Y=De;if(ce)if(h.TextDecoder){var se=function j(de){return void 0===de&&(de=""),de.toLowerCase().split(";").reduce(function(re,ce){var me=ce.split("="),De=me[1];return"charset"===me[0].trim()?De.trim():re},"utf-8")}(ye.headers&&ye.headers["content-type"]);try{Y=new TextDecoder(se).decode(De)}catch(Q){}}else Y=String.fromCharCode.apply(null,new Uint8Array(De));re({cause:Y})}else re(null,De)}}},745:(it,Se,$)=>{"use strict";var h=$(9226),oe=$(7154),j=$(2703);function me(Q,Xe,Re){var Je=Q;return j(Xe)?(Re=Xe,"string"==typeof Q&&(Je={uri:Q})):Je=oe({},Xe,{uri:Q}),Je.callback=Re,Je}function ye(Q,Xe,Re){return De(Xe=me(Q,Xe,Re))}function De(Q){if(void 0===Q.callback)throw new Error("callback argument missing");var Xe=!1,Re=function(mt,he,Fe){Xe||(Xe=!0,Q.callback(mt,he,Fe))};function Dt(){var We=void 0;if(We=tt.response?tt.response:tt.responseText||function Y(Q){try{if("document"===Q.responseType)return Q.responseXML;if(""===Q.responseType&&(!Q.responseXML||"parsererror"!==Q.responseXML.documentElement.nodeName))return Q.responseXML}catch(Re){}return null}(tt),V)try{We=JSON.parse(We)}catch(mt){}return We}function ze(We){return clearTimeout(Ie),We instanceof Error||(We=new Error(""+(We||"Unknown XMLHttpRequest Error"))),We.statusCode=0,Re(We,nt)}function we(){if(!Ye){var We;clearTimeout(Ie);var mt=nt,he=null;return 0!==(We=Q.useXDR&&void 0===tt.status?200:1223===tt.status?204:tt.status)?(mt={body:Dt(),statusCode:We,method:je,headers:{},url:Ce,rawRequest:tt},tt.getAllResponseHeaders&&(mt.headers=function(Xe){var Re={};return Xe&&Xe.trim().split("\n").forEach(function(Je){var Dt=Je.indexOf(":"),ze=Je.slice(0,Dt).trim().toLowerCase(),we=Je.slice(Dt+1).trim();void 0===Re[ze]?Re[ze]=we:Array.isArray(Re[ze])?Re[ze].push(we):Re[ze]=[Re[ze],we]}),Re}(tt.getAllResponseHeaders()))):he=new Error("Internal XMLHttpRequest Error"),Re(he,mt,mt.body)}}var tt=Q.xhr||null;tt||(tt=Q.cors||Q.useXDR?new ye.XDomainRequest:new ye.XMLHttpRequest);var ft,Ye,Ie,Ce=tt.url=Q.uri||Q.url,je=tt.method=Q.method||"GET",gt=Q.body||Q.data,st=tt.headers=Q.headers||{},W=!!Q.sync,V=!1,nt={body:void 0,headers:{},statusCode:0,method:je,url:Ce,rawRequest:tt};if("json"in Q&&!1!==Q.json&&(V=!0,st.accept||st.Accept||(st.Accept="application/json"),"GET"!==je&&"HEAD"!==je&&(st["content-type"]||st["Content-Type"]||(st["Content-Type"]="application/json"),gt=JSON.stringify(!0===Q.json?gt:Q.json))),tt.onreadystatechange=function Je(){4===tt.readyState&&setTimeout(we,0)},tt.onload=we,tt.onerror=ze,tt.onprogress=function(){},tt.onabort=function(){Ye=!0},tt.ontimeout=ze,tt.open(je,Ce,!W,Q.username,Q.password),W||(tt.withCredentials=!!Q.withCredentials),!W&&Q.timeout>0&&(Ie=setTimeout(function(){if(!Ye){Ye=!0,tt.abort("timeout");var We=new Error("XMLHttpRequest timeout");We.code="ETIMEDOUT",ze(We)}},Q.timeout)),tt.setRequestHeader)for(ft in st)st.hasOwnProperty(ft)&&tt.setRequestHeader(ft,st[ft]);else if(Q.headers&&!function ce(Q){for(var Xe in Q)if(Q.hasOwnProperty(Xe))return!1;return!0}(Q.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in Q&&(tt.responseType=Q.responseType),"beforeSend"in Q&&"function"==typeof Q.beforeSend&&Q.beforeSend(tt),tt.send(gt||null),tt}ye.httpHandler=$(3992),it.exports=ye,it.exports.default=ye,ye.XMLHttpRequest=h.XMLHttpRequest||function se(){},ye.XDomainRequest="withCredentials"in new ye.XMLHttpRequest?ye.XMLHttpRequest:h.XDomainRequest,function re(Q,Xe){for(var Re=0;Re<Q.length;Re++)Xe(Q[Re])}(["get","put","post","patch","head","delete"],function(Q){ye["delete"===Q?"del":Q]=function(Xe,Re,Je){return(Re=me(Xe,Re,Je)).method=Q.toUpperCase(),De(Re)}})},9401:(it,Se)=>{"use strict";function h(re,ce){return void 0===ce&&(ce=Object),ce&&"function"==typeof ce.freeze?ce.freeze(re):re}var j=h({HTML:"text/html",isHTML:function(re){return re===j.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),de=h({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(re){return re===de.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Se.assign=function oe(re,ce){if(null===re||"object"!=typeof re)throw new TypeError("target is not an object");for(var me in ce)Object.prototype.hasOwnProperty.call(ce,me)&&(re[me]=ce[me]);return re},Se.find=function $(re,ce,me){if(void 0===me&&(me=Array.prototype),re&&"function"==typeof me.find)return me.find.call(re,ce);for(var ye=0;ye<re.length;ye++)if(Object.prototype.hasOwnProperty.call(re,ye)){var De=re[ye];if(ce.call(void 0,De,ye,re))return De}},Se.freeze=h,Se.MIME_TYPE=j,Se.NAMESPACE=de},1991:(it,Se,$)=>{var oe=$(9401),j=$(6853),de=$(4436),re=$(8702),ce=j.DOMImplementation,me=oe.NAMESPACE,ye=re.ParseError,De=re.XMLReader;function Y(we){return we.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function se(we){this.options=we||{locator:{}}}function Xe(){this.cdata=!1}function Re(we,tt){tt.lineNumber=we.lineNumber,tt.columnNumber=we.columnNumber}function Je(we){if(we)return"\n@"+(we.systemId||"")+"#[line:"+we.lineNumber+",col:"+we.columnNumber+"]"}function Dt(we,tt,ft){return"string"==typeof we?we.substr(tt,ft):we.length>=tt+ft||tt?new java.lang.String(we,tt,ft)+"":we}function ze(we,tt){we.currentElement?we.currentElement.appendChild(tt):we.doc.appendChild(tt)}se.prototype.parseFromString=function(we,tt){var ft=this.options,Ye=new De,Ce=ft.domBuilder||new Xe,je=ft.errorHandler,gt=ft.locator,st=ft.xmlns||{},W=/\/x?html?$/.test(tt),V=W?de.HTML_ENTITIES:de.XML_ENTITIES;return gt&&Ce.setDocumentLocator(gt),Ye.errorHandler=function Q(we,tt,ft){if(!we){if(tt instanceof Xe)return tt;we=tt}var Ye={},Ce=we instanceof Function;function je(gt){var st=we[gt];!st&&Ce&&(st=2==we.length?function(W){we(gt,W)}:we),Ye[gt]=st&&function(W){st("[xmldom "+gt+"]\t"+W+Je(ft))}||function(){}}return ft=ft||{},je("warning"),je("error"),je("fatalError"),Ye}(je,Ce,gt),Ye.domBuilder=ft.domBuilder||Ce,W&&(st[""]=me.HTML),st.xml=st.xml||me.XML,we&&"string"==typeof we?Ye.parse((ft.normalizeLineEndings||Y)(we),st,V):Ye.errorHandler.error("invalid doc source"),Ce.doc},Xe.prototype={startDocument:function(){this.doc=(new ce).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(we,tt,ft,Ye){var Ce=this.doc,je=Ce.createElementNS(we,ft||tt),gt=Ye.length;ze(this,je),this.currentElement=je,this.locator&&Re(this.locator,je);for(var st=0;st<gt;st++){we=Ye.getURI(st);var W=Ye.getValue(st),V=(ft=Ye.getQName(st),Ce.createAttributeNS(we,ft));this.locator&&Re(Ye.getLocator(st),V),V.value=V.nodeValue=W,je.setAttributeNode(V)}},endElement:function(we,tt,ft){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(we,tt){},endPrefixMapping:function(we){},processingInstruction:function(we,tt){var ft=this.doc.createProcessingInstruction(we,tt);this.locator&&Re(this.locator,ft),ze(this,ft)},ignorableWhitespace:function(we,tt,ft){},characters:function(we,tt,ft){if(we=Dt.apply(this,arguments)){if(this.cdata)var Ye=this.doc.createCDATASection(we);else Ye=this.doc.createTextNode(we);this.currentElement?this.currentElement.appendChild(Ye):/^\s*$/.test(we)&&this.doc.appendChild(Ye),this.locator&&Re(this.locator,Ye)}},skippedEntity:function(we){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(we){(this.locator=we)&&(we.lineNumber=0)},comment:function(we,tt,ft){we=Dt.apply(this,arguments);var Ye=this.doc.createComment(we);this.locator&&Re(this.locator,Ye),ze(this,Ye)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(we,tt,ft){var Ye=this.doc.implementation;if(Ye&&Ye.createDocumentType){var Ce=Ye.createDocumentType(we,tt,ft);this.locator&&Re(this.locator,Ce),ze(this,Ce),this.doc.doctype=Ce}},warning:function(we){console.warn("[xmldom warning]\t"+we,Je(this.locator))},error:function(we){console.error("[xmldom error]\t"+we,Je(this.locator))},fatalError:function(we){throw new ye(we,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(we){Xe.prototype[we]=function(){return null}}),Se.DOMParser=se},6853:(it,Se,$)=>{var h=$(9401),oe=h.find,j=h.NAMESPACE;function de(H){return""!==H}function ce(H,z){return H.hasOwnProperty(z)||(H[z]=!0),H}function me(H){if(!H)return[];var z=function re(H){return H?H.split(/[\t\n\f\r ]+/).filter(de):[]}(H);return Object.keys(z.reduce(ce,{}))}function De(H,z){for(var ae in H)Object.prototype.hasOwnProperty.call(H,ae)&&(z[ae]=H[ae])}function Y(H,z){var ae=H.prototype;if(!(ae instanceof z)){let xt=function(){};xt.prototype=z.prototype,xt=new xt,De(ae,xt),H.prototype=ae=xt}ae.constructor!=H&&("function"!=typeof H&&console.error("unknown Class:"+H),ae.constructor=H)}var se={},Q=se.ELEMENT_NODE=1,Xe=se.ATTRIBUTE_NODE=2,Re=se.TEXT_NODE=3,Je=se.CDATA_SECTION_NODE=4,Dt=se.ENTITY_REFERENCE_NODE=5,ze=se.ENTITY_NODE=6,we=se.PROCESSING_INSTRUCTION_NODE=7,tt=se.COMMENT_NODE=8,ft=se.DOCUMENT_NODE=9,Ye=se.DOCUMENT_TYPE_NODE=10,Ce=se.DOCUMENT_FRAGMENT_NODE=11,je=se.NOTATION_NODE=12,gt={},st={},Ie=(gt.INDEX_SIZE_ERR=(st[1]="Index size error",1),gt.DOMSTRING_SIZE_ERR=(st[2]="DOMString size error",2),gt.HIERARCHY_REQUEST_ERR=(st[3]="Hierarchy request error",3)),Fe=(gt.WRONG_DOCUMENT_ERR=(st[4]="Wrong document",4),gt.INVALID_CHARACTER_ERR=(st[5]="Invalid character",5),gt.NO_DATA_ALLOWED_ERR=(st[6]="No data allowed",6),gt.NO_MODIFICATION_ALLOWED_ERR=(st[7]="No modification allowed",7),gt.NOT_FOUND_ERR=(st[8]="Not found",8)),rt=(gt.NOT_SUPPORTED_ERR=(st[9]="Not supported",9),gt.INUSE_ATTRIBUTE_ERR=(st[10]="Attribute in use",10));function ve(H,z){if(z instanceof Error)var ae=z;else ae=this,Error.call(this,st[H]),this.message=st[H],Error.captureStackTrace&&Error.captureStackTrace(this,ve);return ae.code=H,z&&(this.message=this.message+": "+z),ae}function ut(){}function Ot(H,z){this._node=H,this._refresh=z,zt(this)}function zt(H){var z=H._node._inc||H._node.ownerDocument._inc;if(H._inc!==z){var ae=H._refresh(H._node);if(mn(H,"length",ae.length),!H.$$length||ae.length<H.$$length)for(var Ue=ae.length;Ue in H;Ue++)Object.prototype.hasOwnProperty.call(H,Ue)&&delete H[Ue];De(ae,H),H._inc=z}}function kt(){}function ln(H,z){for(var ae=H.length;ae--;)if(H[ae]===z)return ae}function $n(H,z,ae,Ue){if(Ue?z[ln(z,Ue)]=ae:z[z.length++]=ae,H){ae.ownerElement=H;var xt=H.ownerDocument;xt&&(Ue&&gr(xt,H,Ue),function Co(H,z,ae){H&&H._inc++,ae.namespaceURI===j.XMLNS&&(z._nsMap[ae.prefix?ae.localName:""]=ae.value)}(xt,H,ae))}}function zn(H,z,ae){var Ue=ln(z,ae);if(!(Ue>=0))throw new ve(Fe,new Error(H.tagName+"@"+ae));for(var xt=z.length-1;Ue<xt;)z[Ue]=z[++Ue];if(z.length=xt,H){var en=H.ownerDocument;en&&(gr(en,H,ae),ae.ownerElement=null)}}function ar(){}function fn(){}function Bn(H){return("<"==H?"&lt;":">"==H&&"&gt;")||"&"==H&&"&amp;"||'"'==H&&"&quot;"||"&#"+H.charCodeAt()+";"}function Rr(H,z){if(z(H))return!0;if(H=H.firstChild)do{if(Rr(H,z))return!0}while(H=H.nextSibling)}function Ut(){this.ownerDocument=this}function gr(H,z,ae,Ue){H&&H._inc++,ae.namespaceURI===j.XMLNS&&delete z._nsMap[ae.prefix?ae.localName:""]}function ur(H,z,ae){if(H&&H._inc){H._inc++;var Ue=z.childNodes;if(ae)Ue[Ue.length++]=ae;else{for(var xt=z.firstChild,en=0;xt;)Ue[en++]=xt,xt=xt.nextSibling;Ue.length=en,delete Ue[Ue.length]}}}function So(H,z){var ae=z.previousSibling,Ue=z.nextSibling;return ae?ae.nextSibling=Ue:H.firstChild=Ue,Ue?Ue.previousSibling=ae:H.lastChild=ae,z.parentNode=null,z.previousSibling=null,z.nextSibling=null,ur(H.ownerDocument,H),z}function or(H){return H&&H.nodeType===fn.DOCUMENT_TYPE_NODE}function cr(H){return H&&H.nodeType===fn.ELEMENT_NODE}function wi(H){return H&&H.nodeType===fn.TEXT_NODE}function bn(H,z){var ae=H.childNodes||[];if(oe(ae,cr)||or(z))return!1;var Ue=oe(ae,or);return!(z&&Ue&&ae.indexOf(Ue)>ae.indexOf(z))}function tn(H,z){var ae=H.childNodes||[];if(oe(ae,function Ue(en){return cr(en)&&en!==z}))return!1;var xt=oe(ae,or);return!(z&&xt&&ae.indexOf(xt)>ae.indexOf(z))}function xo(H,z,ae){var Ue=H.childNodes||[],xt=z.childNodes||[];if(z.nodeType===fn.DOCUMENT_FRAGMENT_NODE){var en=xt.filter(cr);if(en.length>1||oe(xt,wi))throw new ve(Ie,"More than one element or text in fragment");if(1===en.length&&!bn(H,ae))throw new ve(Ie,"Element in fragment can not be inserted before doctype")}if(cr(z)&&!bn(H,ae))throw new ve(Ie,"Only one element can be added and only after doctype");if(or(z)){if(oe(Ue,or))throw new ve(Ie,"Only one doctype is allowed");var Pn=oe(Ue,cr);if(ae&&Ue.indexOf(Pn)<Ue.indexOf(ae))throw new ve(Ie,"Doctype can only be inserted before an element");if(!ae&&Pn)throw new ve(Ie,"Doctype can not be appended since element is present")}}function Ys(H,z,ae){var Ue=H.childNodes||[],xt=z.childNodes||[];if(z.nodeType===fn.DOCUMENT_FRAGMENT_NODE){var en=xt.filter(cr);if(en.length>1||oe(xt,wi))throw new ve(Ie,"More than one element or text in fragment");if(1===en.length&&!tn(H,ae))throw new ve(Ie,"Element in fragment can not be inserted before doctype")}if(cr(z)&&!tn(H,ae))throw new ve(Ie,"Only one element can be added and only after doctype");if(or(z)){if(oe(Ue,function(He){return or(He)&&He!==ae}))throw new ve(Ie,"Only one doctype is allowed");var Pn=oe(Ue,cr);if(ae&&Ue.indexOf(Pn)<Ue.indexOf(ae))throw new ve(Ie,"Doctype can only be inserted before an element")}}function Sn(H,z,ae,Ue){(function pn(H,z,ae){if(!function lr(H){return H&&(H.nodeType===fn.DOCUMENT_NODE||H.nodeType===fn.DOCUMENT_FRAGMENT_NODE||H.nodeType===fn.ELEMENT_NODE)}(H))throw new ve(Ie,"Unexpected parent node type "+H.nodeType);if(ae&&ae.parentNode!==H)throw new ve(Fe,"child not in parent");if(!function Hn(H){return H&&(cr(H)||wi(H)||or(H)||H.nodeType===fn.DOCUMENT_FRAGMENT_NODE||H.nodeType===fn.COMMENT_NODE||H.nodeType===fn.PROCESSING_INSTRUCTION_NODE)}(z)||or(z)&&H.nodeType!==fn.DOCUMENT_NODE)throw new ve(Ie,"Unexpected node type "+z.nodeType+" for parent node type "+H.nodeType)})(H,z,ae),H.nodeType===fn.DOCUMENT_NODE&&(Ue||xo)(H,z,ae);var xt=z.parentNode;if(xt&&xt.removeChild(z),z.nodeType===Ce){var en=z.firstChild;if(null==en)return z;var Pn=z.lastChild}else en=Pn=z;var yr=ae?ae.previousSibling:H.lastChild;en.previousSibling=yr,Pn.nextSibling=ae,yr?yr.nextSibling=en:H.firstChild=en,null==ae?H.lastChild=Pn:ae.previousSibling=Pn;do{en.parentNode=H}while(en!==Pn&&(en=en.nextSibling));return ur(H.ownerDocument||H,H),z.nodeType==Ce&&(z.firstChild=z.lastChild=null),z}function er(){this._nsMap={}}function Ci(){}function rn(){}function Ps(){}function Mn(){}function qi(){}function zr(){}function dr(){}function mr(){}function Rs(){}function _r(){}function rs(){}function ni(){}function pe(H,z){var ae=[],Ue=9==this.nodeType&&this.documentElement||this,xt=Ue.prefix,en=Ue.namespaceURI;if(en&&null==xt&&null==(xt=Ue.lookupPrefix(en)))var Pn=[{namespace:en,prefix:null}];return yt(this,ae,H,z,Pn),ae.join("")}function le(H,z,ae){var Ue=H.prefix||"",xt=H.namespaceURI;if(!xt||"xml"===Ue&&xt===j.XML||xt===j.XMLNS)return!1;for(var en=ae.length;en--;){var Pn=ae[en];if(Pn.prefix===Ue)return Pn.namespace!==xt}return!0}function ke(H,z,ae){H.push(" ",z,'="',ae.replace(/[<>&"\t\n\r]/g,Bn),'"')}function yt(H,z,ae,Ue,xt){if(xt||(xt=[]),Ue){if(!(H=Ue(H)))return;if("string"==typeof H)return void z.push(H)}switch(H.nodeType){case Q:var en=H.attributes,Pn=en.length,qn=H.firstChild,yr=H.tagName,Ze=yr;if(!(ae=j.isHTML(H.namespaceURI)||ae)&&!H.prefix&&H.namespaceURI){for(var He,vt=0;vt<en.length;vt++)if("xmlns"===en.item(vt).name){He=en.item(vt).value;break}if(!He)for(var lt=xt.length-1;lt>=0;lt--)if(""===(At=xt[lt]).prefix&&At.namespace===H.namespaceURI){He=At.namespace;break}if(He!==H.namespaceURI)for(lt=xt.length-1;lt>=0;lt--){var At;if((At=xt[lt]).namespace===H.namespaceURI){At.prefix&&(Ze=At.prefix+":"+yr);break}}}z.push("<",Ze);for(var $t=0;$t<Pn;$t++)"xmlns"==(un=en.item($t)).prefix?xt.push({prefix:un.localName,namespace:un.value}):"xmlns"==un.nodeName&&xt.push({prefix:"",namespace:un.value});for($t=0;$t<Pn;$t++){var un,Qn,An;le(un=en.item($t),0,xt)&&(ke(z,(Qn=un.prefix||"")?"xmlns:"+Qn:"xmlns",An=un.namespaceURI),xt.push({prefix:Qn,namespace:An})),yt(un,z,ae,Ue,xt)}if(yr===Ze&&le(H,0,xt)&&(ke(z,(Qn=H.prefix||"")?"xmlns:"+Qn:"xmlns",An=H.namespaceURI),xt.push({prefix:Qn,namespace:An})),qn||ae&&!/^(?:meta|link|img|br|hr|input)$/i.test(yr)){if(z.push(">"),ae&&/^script$/i.test(yr))for(;qn;)qn.data?z.push(qn.data):yt(qn,z,ae,Ue,xt.slice()),qn=qn.nextSibling;else for(;qn;)yt(qn,z,ae,Ue,xt.slice()),qn=qn.nextSibling;z.push("</",Ze,">")}else z.push("/>");return;case ft:case Ce:for(qn=H.firstChild;qn;)yt(qn,z,ae,Ue,xt.slice()),qn=qn.nextSibling;return;case Xe:return ke(z,H.name,H.value);case Re:return z.push(H.data.replace(/[<&>]/g,Bn));case Je:return z.push("<![CDATA[",H.data,"]]>");case tt:return z.push("\x3c!--",H.data,"--\x3e");case Ye:var Yn=H.publicId,Gi=H.systemId;if(z.push("<!DOCTYPE ",H.name),Yn)z.push(" PUBLIC ",Yn),Gi&&"."!=Gi&&z.push(" ",Gi),z.push(">");else if(Gi&&"."!=Gi)z.push(" SYSTEM ",Gi,">");else{var Ko=H.internalSubset;Ko&&z.push(" [",Ko,"]"),z.push(">")}return;case we:return z.push("<?",H.target," ",H.data,"?>");case Dt:return z.push("&",H.nodeName,";");default:z.push("??",H.nodeName)}}function Ke(H,z,ae){var Ue;switch(z.nodeType){case Q:(Ue=z.cloneNode(!1)).ownerDocument=H;case Ce:break;case Xe:ae=!0}if(Ue||(Ue=z.cloneNode(!1)),Ue.ownerDocument=H,Ue.parentNode=null,ae)for(var xt=z.firstChild;xt;)Ue.appendChild(Ke(H,xt,ae)),xt=xt.nextSibling;return Ue}function Ht(H,z,ae){var Ue=new z.constructor;for(var xt in z)if(Object.prototype.hasOwnProperty.call(z,xt)){var en=z[xt];"object"!=typeof en&&en!=Ue[xt]&&(Ue[xt]=en)}switch(z.childNodes&&(Ue.childNodes=new ut),Ue.ownerDocument=H,Ue.nodeType){case Q:var Pn=z.attributes,yr=Ue.attributes=new kt,Ze=Pn.length;yr._ownerElement=Ue;for(var He=0;He<Ze;He++)Ue.setAttributeNode(Ht(H,Pn.item(He),!0));break;case Xe:ae=!0}if(ae)for(var vt=z.firstChild;vt;)Ue.appendChild(Ht(H,vt,ae)),vt=vt.nextSibling;return Ue}function mn(H,z,ae){H[z]=ae}gt.INVALID_STATE_ERR=(st[11]="Invalid state",11),gt.SYNTAX_ERR=(st[12]="Syntax error",12),gt.INVALID_MODIFICATION_ERR=(st[13]="Invalid modification",13),gt.NAMESPACE_ERR=(st[14]="Invalid namespace",14),gt.INVALID_ACCESS_ERR=(st[15]="Invalid access",15),ve.prototype=Error.prototype,De(gt,ve),ut.prototype={length:0,item:function(H){return H>=0&&H<this.length?this[H]:null},toString:function(H,z){for(var ae=[],Ue=0;Ue<this.length;Ue++)yt(this[Ue],ae,H,z);return ae.join("")},filter:function(H){return Array.prototype.filter.call(this,H)},indexOf:function(H){return Array.prototype.indexOf.call(this,H)}},Ot.prototype.item=function(H){return zt(this),this[H]||null},Y(Ot,ut),kt.prototype={length:0,item:ut.prototype.item,getNamedItem:function(H){for(var z=this.length;z--;){var ae=this[z];if(ae.nodeName==H)return ae}},setNamedItem:function(H){var z=H.ownerElement;if(z&&z!=this._ownerElement)throw new ve(rt);var ae=this.getNamedItem(H.nodeName);return $n(this._ownerElement,this,H,ae),ae},setNamedItemNS:function(H){var ae,z=H.ownerElement;if(z&&z!=this._ownerElement)throw new ve(rt);return ae=this.getNamedItemNS(H.namespaceURI,H.localName),$n(this._ownerElement,this,H,ae),ae},removeNamedItem:function(H){var z=this.getNamedItem(H);return zn(this._ownerElement,this,z),z},removeNamedItemNS:function(H,z){var ae=this.getNamedItemNS(H,z);return zn(this._ownerElement,this,ae),ae},getNamedItemNS:function(H,z){for(var ae=this.length;ae--;){var Ue=this[ae];if(Ue.localName==z&&Ue.namespaceURI==H)return Ue}return null}},ar.prototype={hasFeature:function(H,z){return!0},createDocument:function(H,z,ae){var Ue=new Ut;if(Ue.implementation=this,Ue.childNodes=new ut,Ue.doctype=ae||null,ae&&Ue.appendChild(ae),z){var xt=Ue.createElementNS(H,z);Ue.appendChild(xt)}return Ue},createDocumentType:function(H,z,ae){var Ue=new zr;return Ue.name=H,Ue.nodeName=H,Ue.publicId=z||"",Ue.systemId=ae||"",Ue}},fn.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(H,z){return Sn(this,H,z)},replaceChild:function(H,z){Sn(this,H,z,Ys),z&&this.removeChild(z)},removeChild:function(H){return So(this,H)},appendChild:function(H){return this.insertBefore(H,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(H){return Ht(this.ownerDocument||this,this,H)},normalize:function(){for(var H=this.firstChild;H;){var z=H.nextSibling;z&&z.nodeType==Re&&H.nodeType==Re?(this.removeChild(z),H.appendData(z.data)):(H.normalize(),H=z)}},isSupported:function(H,z){return this.ownerDocument.implementation.hasFeature(H,z)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(H){for(var z=this;z;){var ae=z._nsMap;if(ae)for(var Ue in ae)if(Object.prototype.hasOwnProperty.call(ae,Ue)&&ae[Ue]===H)return Ue;z=z.nodeType==Xe?z.ownerDocument:z.parentNode}return null},lookupNamespaceURI:function(H){for(var z=this;z;){var ae=z._nsMap;if(ae&&Object.prototype.hasOwnProperty.call(ae,H))return ae[H];z=z.nodeType==Xe?z.ownerDocument:z.parentNode}return null},isDefaultNamespace:function(H){return null==this.lookupPrefix(H)}},De(se,fn),De(se,fn.prototype),Ut.prototype={nodeName:"#document",nodeType:ft,doctype:null,documentElement:null,_inc:1,insertBefore:function(H,z){if(H.nodeType==Ce){for(var ae=H.firstChild;ae;){var Ue=ae.nextSibling;this.insertBefore(ae,z),ae=Ue}return H}return Sn(this,H,z),H.ownerDocument=this,null===this.documentElement&&H.nodeType===Q&&(this.documentElement=H),H},removeChild:function(H){return this.documentElement==H&&(this.documentElement=null),So(this,H)},replaceChild:function(H,z){Sn(this,H,z,Ys),H.ownerDocument=this,z&&this.removeChild(z),cr(H)&&(this.documentElement=H)},importNode:function(H,z){return Ke(this,H,z)},getElementById:function(H){var z=null;return Rr(this.documentElement,function(ae){if(ae.nodeType==Q&&ae.getAttribute("id")==H)return z=ae,!0}),z},getElementsByClassName:function(H){var z=me(H);return new Ot(this,function(ae){var Ue=[];return z.length>0&&Rr(ae.documentElement,function(xt){if(xt!==ae&&xt.nodeType===Q){var en=xt.getAttribute("class");if(en){var Pn=H===en;if(!Pn){var yr=me(en);Pn=z.every(function ye(H){return function(z){return H&&-1!==H.indexOf(z)}}(yr))}Pn&&Ue.push(xt)}}}),Ue})},createElement:function(H){var z=new er;return z.ownerDocument=this,z.nodeName=H,z.tagName=H,z.localName=H,z.childNodes=new ut,(z.attributes=new kt)._ownerElement=z,z},createDocumentFragment:function(){var H=new _r;return H.ownerDocument=this,H.childNodes=new ut,H},createTextNode:function(H){var z=new Ps;return z.ownerDocument=this,z.appendData(H),z},createComment:function(H){var z=new Mn;return z.ownerDocument=this,z.appendData(H),z},createCDATASection:function(H){var z=new qi;return z.ownerDocument=this,z.appendData(H),z},createProcessingInstruction:function(H,z){var ae=new rs;return ae.ownerDocument=this,ae.tagName=ae.nodeName=ae.target=H,ae.nodeValue=ae.data=z,ae},createAttribute:function(H){var z=new Ci;return z.ownerDocument=this,z.name=H,z.nodeName=H,z.localName=H,z.specified=!0,z},createEntityReference:function(H){var z=new Rs;return z.ownerDocument=this,z.nodeName=H,z},createElementNS:function(H,z){var ae=new er,Ue=z.split(":"),xt=ae.attributes=new kt;return ae.childNodes=new ut,ae.ownerDocument=this,ae.nodeName=z,ae.tagName=z,ae.namespaceURI=H,2==Ue.length?(ae.prefix=Ue[0],ae.localName=Ue[1]):ae.localName=z,xt._ownerElement=ae,ae},createAttributeNS:function(H,z){var ae=new Ci,Ue=z.split(":");return ae.ownerDocument=this,ae.nodeName=z,ae.name=z,ae.namespaceURI=H,ae.specified=!0,2==Ue.length?(ae.prefix=Ue[0],ae.localName=Ue[1]):ae.localName=z,ae}},Y(Ut,fn),Ut.prototype.getElementsByTagName=(er.prototype={nodeType:Q,hasAttribute:function(H){return null!=this.getAttributeNode(H)},getAttribute:function(H){var z=this.getAttributeNode(H);return z&&z.value||""},getAttributeNode:function(H){return this.attributes.getNamedItem(H)},setAttribute:function(H,z){var ae=this.ownerDocument.createAttribute(H);ae.value=ae.nodeValue=""+z,this.setAttributeNode(ae)},removeAttribute:function(H){var z=this.getAttributeNode(H);z&&this.removeAttributeNode(z)},appendChild:function(H){return H.nodeType===Ce?this.insertBefore(H,null):function Oi(H,z){return z.parentNode&&z.parentNode.removeChild(z),z.parentNode=H,z.previousSibling=H.lastChild,z.nextSibling=null,z.previousSibling?z.previousSibling.nextSibling=z:H.firstChild=z,H.lastChild=z,ur(H.ownerDocument,H,z),z}(this,H)},setAttributeNode:function(H){return this.attributes.setNamedItem(H)},setAttributeNodeNS:function(H){return this.attributes.setNamedItemNS(H)},removeAttributeNode:function(H){return this.attributes.removeNamedItem(H.nodeName)},removeAttributeNS:function(H,z){var ae=this.getAttributeNodeNS(H,z);ae&&this.removeAttributeNode(ae)},hasAttributeNS:function(H,z){return null!=this.getAttributeNodeNS(H,z)},getAttributeNS:function(H,z){var ae=this.getAttributeNodeNS(H,z);return ae&&ae.value||""},setAttributeNS:function(H,z,ae){var Ue=this.ownerDocument.createAttributeNS(H,z);Ue.value=Ue.nodeValue=""+ae,this.setAttributeNode(Ue)},getAttributeNodeNS:function(H,z){return this.attributes.getNamedItemNS(H,z)},getElementsByTagName:function(H){return new Ot(this,function(z){var ae=[];return Rr(z,function(Ue){Ue!==z&&Ue.nodeType==Q&&("*"===H||Ue.tagName==H)&&ae.push(Ue)}),ae})},getElementsByTagNameNS:function(H,z){return new Ot(this,function(ae){var Ue=[];return Rr(ae,function(xt){xt!==ae&&xt.nodeType===Q&&("*"===H||xt.namespaceURI===H)&&("*"===z||xt.localName==z)&&Ue.push(xt)}),Ue})}}).getElementsByTagName,Ut.prototype.getElementsByTagNameNS=er.prototype.getElementsByTagNameNS,Y(er,fn),Ci.prototype.nodeType=Xe,Y(Ci,fn),rn.prototype={data:"",substringData:function(H,z){return this.data.substring(H,H+z)},appendData:function(H){this.nodeValue=this.data=H=this.data+H,this.length=H.length},insertData:function(H,z){this.replaceData(H,0,z)},appendChild:function(H){throw new Error(st[Ie])},deleteData:function(H,z){this.replaceData(H,z,"")},replaceData:function(H,z,ae){var Ue=this.data.substring(0,H),xt=this.data.substring(H+z);this.nodeValue=this.data=ae=Ue+ae+xt,this.length=ae.length}},Y(rn,fn),Ps.prototype={nodeName:"#text",nodeType:Re,splitText:function(H){var z=this.data,ae=z.substring(H);z=z.substring(0,H),this.data=this.nodeValue=z,this.length=z.length;var Ue=this.ownerDocument.createTextNode(ae);return this.parentNode&&this.parentNode.insertBefore(Ue,this.nextSibling),Ue}},Y(Ps,rn),Mn.prototype={nodeName:"#comment",nodeType:tt},Y(Mn,rn),qi.prototype={nodeName:"#cdata-section",nodeType:Je},Y(qi,rn),zr.prototype.nodeType=Ye,Y(zr,fn),dr.prototype.nodeType=je,Y(dr,fn),mr.prototype.nodeType=ze,Y(mr,fn),Rs.prototype.nodeType=Dt,Y(Rs,fn),_r.prototype.nodeName="#document-fragment",_r.prototype.nodeType=Ce,Y(_r,fn),rs.prototype.nodeType=we,Y(rs,fn),ni.prototype.serializeToString=function(H,z,ae){return pe.call(H,z,ae)},fn.prototype.toString=pe;try{if(Object.defineProperty){let H=function(z){switch(z.nodeType){case Q:case Ce:var ae=[];for(z=z.firstChild;z;)7!==z.nodeType&&8!==z.nodeType&&ae.push(H(z)),z=z.nextSibling;return ae.join("");default:return z.nodeValue}};Object.defineProperty(Ot.prototype,"length",{get:function(){return zt(this),this.$$length}}),Object.defineProperty(fn.prototype,"textContent",{get:function(){return H(this)},set:function(z){switch(this.nodeType){case Q:case Ce:for(;this.firstChild;)this.removeChild(this.firstChild);(z||String(z))&&this.appendChild(this.ownerDocument.createTextNode(z));break;default:this.data=z,this.value=z,this.nodeValue=z}}}),mn=function(z,ae,Ue){z["$$"+ae]=Ue}}}catch(H){}Se.DocumentType=zr,Se.DOMException=ve,Se.DOMImplementation=ar,Se.Element=er,Se.Node=fn,Se.NodeList=ut,Se.XMLSerializer=ni},4436:(it,Se,$)=>{"use strict";var h=$(9401).freeze;Se.XML_ENTITIES=h({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),Se.HTML_ENTITIES=h({Aacute:"\xc1",aacute:"\xe1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223e",acd:"\u223f",acE:"\u223e\u0333",Acirc:"\xc2",acirc:"\xe2",acute:"\xb4",Acy:"\u0410",acy:"\u0430",AElig:"\xc6",aelig:"\xe6",af:"\u2061",Afr:"\u{1d504}",afr:"\u{1d51e}",Agrave:"\xc0",agrave:"\xe0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03b1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2a3f",AMP:"&",amp:"&",And:"\u2a53",and:"\u2227",andand:"\u2a55",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",ange:"\u29a4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angst:"\xc5",angzarr:"\u237c",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1d538}",aopf:"\u{1d552}",ap:"\u2248",apacir:"\u2a6f",apE:"\u2a70",ape:"\u224a",apid:"\u224b",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224a",Aring:"\xc5",aring:"\xe5",Ascr:"\u{1d49c}",ascr:"\u{1d4b6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224d",Atilde:"\xc3",atilde:"\xe3",Auml:"\xc4",auml:"\xe4",awconint:"\u2233",awint:"\u2a11",backcong:"\u224c",backepsilon:"\u03f6",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",Backslash:"\u2216",Barv:"\u2ae7",barvee:"\u22bd",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23b5",bbrktbrk:"\u23b6",bcong:"\u224c",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201e",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29b0",bepsi:"\u03f6",bernou:"\u212c",Bernoullis:"\u212c",Beta:"\u0392",beta:"\u03b2",beth:"\u2136",between:"\u226c",Bfr:"\u{1d505}",bfr:"\u{1d51f}",bigcap:"\u22c2",bigcirc:"\u25ef",bigcup:"\u22c3",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",bigvee:"\u22c1",bigwedge:"\u22c0",bkarow:"\u290d",blacklozenge:"\u29eb",blacksquare:"\u25aa",blacktriangle:"\u25b4",blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",blacktriangleright:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20e5",bnequiv:"\u2261\u20e5",bNot:"\u2aed",bnot:"\u2310",Bopf:"\u{1d539}",bopf:"\u{1d553}",bot:"\u22a5",bottom:"\u22a5",bowtie:"\u22c8",boxbox:"\u29c9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250c",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252c",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229f",boxplus:"\u229e",boxtimes:"\u22a0",boxUL:"\u255d",boxUl:"\u255c",boxuL:"\u255b",boxul:"\u2518",boxUR:"\u255a",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256c",boxVh:"\u256b",boxvH:"\u256a",boxvh:"\u253c",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255f",boxvR:"\u255e",boxvr:"\u251c",bprime:"\u2035",Breve:"\u02d8",breve:"\u02d8",brvbar:"\xa6",Bscr:"\u212c",bscr:"\u{1d4b7}",bsemi:"\u204f",bsim:"\u223d",bsime:"\u22cd",bsol:"\\",bsolb:"\u29c5",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bump:"\u224e",bumpE:"\u2aae",bumpe:"\u224f",Bumpeq:"\u224e",bumpeq:"\u224f",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22d2",cap:"\u2229",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",capcup:"\u2a47",capdot:"\u2a40",CapitalDifferentialD:"\u2145",caps:"\u2229\ufe00",caret:"\u2041",caron:"\u02c7",Cayleys:"\u212d",ccaps:"\u2a4d",Ccaron:"\u010c",ccaron:"\u010d",Ccedil:"\xc7",ccedil:"\xe7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2a4c",ccupssm:"\u2a50",Cdot:"\u010a",cdot:"\u010b",cedil:"\xb8",Cedilla:"\xb8",cemptyv:"\u29b2",cent:"\xa2",CenterDot:"\xb7",centerdot:"\xb7",Cfr:"\u212d",cfr:"\u{1d520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03a7",chi:"\u03c7",cir:"\u25cb",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",circlearrowright:"\u21bb",circledast:"\u229b",circledcirc:"\u229a",circleddash:"\u229d",CircleDot:"\u2299",circledR:"\xae",circledS:"\u24c8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29c3",cire:"\u2257",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201d",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2a74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2a6d",Congruent:"\u2261",Conint:"\u222f",conint:"\u222e",ContourIntegral:"\u222e",Copf:"\u2102",copf:"\u{1d554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xa9",copy:"\xa9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21b5",Cross:"\u2a2f",cross:"\u2717",Cscr:"\u{1d49e}",cscr:"\u{1d4b8}",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22de",cuesc:"\u22df",cularr:"\u21b6",cularrp:"\u293d",Cup:"\u22d3",cup:"\u222a",cupbrcap:"\u2a48",CupCap:"\u224d",cupcap:"\u2a46",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curarrm:"\u293c",curlyeqprec:"\u22de",curlyeqsucc:"\u22df",curlyvee:"\u22ce",curlywedge:"\u22cf",curren:"\xa4",curvearrowleft:"\u21b6",curvearrowright:"\u21b7",cuvee:"\u22ce",cuwed:"\u22cf",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232d",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21a1",dArr:"\u21d3",darr:"\u2193",dash:"\u2010",Dashv:"\u2ae4",dashv:"\u22a3",dbkarow:"\u290f",dblac:"\u02dd",Dcaron:"\u010e",dcaron:"\u010f",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21ca",DDotrahd:"\u2911",ddotseq:"\u2a77",deg:"\xb0",Del:"\u2207",Delta:"\u0394",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",Dfr:"\u{1d507}",dfr:"\u{1d521}",dHar:"\u2965",dharl:"\u21c3",dharr:"\u21c2",DiacriticalAcute:"\xb4",DiacriticalDot:"\u02d9",DiacriticalDoubleAcute:"\u02dd",DiacriticalGrave:"`",DiacriticalTilde:"\u02dc",diam:"\u22c4",Diamond:"\u22c4",diamond:"\u22c4",diamondsuit:"\u2666",diams:"\u2666",die:"\xa8",DifferentialD:"\u2146",digamma:"\u03dd",disin:"\u22f2",div:"\xf7",divide:"\xf7",divideontimes:"\u22c7",divonx:"\u22c7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231e",dlcrop:"\u230d",dollar:"$",Dopf:"\u{1d53b}",dopf:"\u{1d555}",Dot:"\xa8",dot:"\u02d9",DotDot:"\u20dc",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22a1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222f",DoubleDot:"\xa8",DoubleDownArrow:"\u21d3",DoubleLeftArrow:"\u21d0",DoubleLeftRightArrow:"\u21d4",DoubleLeftTee:"\u2ae4",DoubleLongLeftArrow:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",DoubleLongRightArrow:"\u27f9",DoubleRightArrow:"\u21d2",DoubleRightTee:"\u22a8",DoubleUpArrow:"\u21d1",DoubleUpDownArrow:"\u21d5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21d3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21f5",DownBreve:"\u0311",downdownarrows:"\u21ca",downharpoonleft:"\u21c3",downharpoonright:"\u21c2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVector:"\u21bd",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295f",DownRightVector:"\u21c1",DownRightVectorBar:"\u2957",DownTee:"\u22a4",DownTeeArrow:"\u21a7",drbkarow:"\u2910",drcorn:"\u231f",drcrop:"\u230c",Dscr:"\u{1d49f}",dscr:"\u{1d4b9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29f6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",dtrif:"\u25be",duarr:"\u21f5",duhar:"\u296f",dwangle:"\u29a6",DZcy:"\u040f",dzcy:"\u045f",dzigrarr:"\u27ff",Eacute:"\xc9",eacute:"\xe9",easter:"\u2a6e",Ecaron:"\u011a",ecaron:"\u011b",ecir:"\u2256",Ecirc:"\xca",ecirc:"\xea",ecolon:"\u2255",Ecy:"\u042d",ecy:"\u044d",eDDot:"\u2a77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1d508}",efr:"\u{1d522}",eg:"\u2a9a",Egrave:"\xc8",egrave:"\xe8",egs:"\u2a96",egsdot:"\u2a98",el:"\u2a99",Element:"\u2208",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",elsdot:"\u2a97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25fb",emptyv:"\u2205",EmptyVerySmallSquare:"\u25ab",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014a",eng:"\u014b",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1d53c}",eopf:"\u{1d556}",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",Epsilon:"\u0395",epsilon:"\u03b5",epsiv:"\u03f5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2a96",eqslantless:"\u2a95",Equal:"\u2a75",equals:"=",EqualTilde:"\u2242",equest:"\u225f",Equilibrium:"\u21cc",equiv:"\u2261",equivDD:"\u2a78",eqvparsl:"\u29e5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212f",esdot:"\u2250",Esim:"\u2a73",esim:"\u2242",Eta:"\u0397",eta:"\u03b7",ETH:"\xd0",eth:"\xf0",Euml:"\xcb",euml:"\xeb",euro:"\u20ac",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",Ffr:"\u{1d509}",ffr:"\u{1d523}",filig:"\ufb01",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",Fopf:"\u{1d53d}",fopf:"\u{1d557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22d4",forkv:"\u2ad9",Fouriertrf:"\u2131",fpartint:"\u2a0d",frac12:"\xbd",frac13:"\u2153",frac14:"\xbc",frac15:"\u2155",frac16:"\u2159",frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\xbe",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1d4bb}",gacute:"\u01f5",Gamma:"\u0393",gamma:"\u03b3",Gammad:"\u03dc",gammad:"\u03dd",gap:"\u2a86",Gbreve:"\u011e",gbreve:"\u011f",Gcedil:"\u0122",Gcirc:"\u011c",gcirc:"\u011d",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2a8c",gel:"\u22db",geq:"\u2265",geqq:"\u2267",geqslant:"\u2a7e",ges:"\u2a7e",gescc:"\u2aa9",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",Gfr:"\u{1d50a}",gfr:"\u{1d524}",Gg:"\u22d9",gg:"\u226b",ggg:"\u22d9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2aa5",glE:"\u2a92",glj:"\u2aa4",gnap:"\u2a8a",gnapprox:"\u2a8a",gnE:"\u2269",gne:"\u2a88",gneq:"\u2a88",gneqq:"\u2269",gnsim:"\u22e7",Gopf:"\u{1d53e}",gopf:"\u{1d558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",GreaterFullEqual:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Gscr:"\u{1d4a2}",gscr:"\u210a",gsim:"\u2273",gsime:"\u2a8e",gsiml:"\u2a90",Gt:"\u226b",GT:">",gt:">",gtcc:"\u2aa7",gtcir:"\u2a7a",gtdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrapprox:"\u2a86",gtrarr:"\u2978",gtrdot:"\u22d7",gtreqless:"\u22db",gtreqqless:"\u2a8c",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",Hacek:"\u02c7",hairsp:"\u200a",half:"\xbd",hamilt:"\u210b",HARDcy:"\u042a",hardcy:"\u044a",hArr:"\u21d4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21ad",Hat:"^",hbar:"\u210f",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22b9",Hfr:"\u210c",hfr:"\u{1d525}",HilbertSpace:"\u210b",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",Hopf:"\u210d",hopf:"\u{1d559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210b",hscr:"\u{1d4bd}",hslash:"\u210f",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224e",HumpEqual:"\u224f",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xcd",iacute:"\xed",ic:"\u2063",Icirc:"\xce",icirc:"\xee",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xa1",iff:"\u21d4",Ifr:"\u2111",ifr:"\u{1d526}",Igrave:"\xcc",igrave:"\xec",ii:"\u2148",iiiint:"\u2a0c",iiint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012a",imacr:"\u012b",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22b7",imped:"\u01b5",Implies:"\u21d2",in:"\u2208",incare:"\u2105",infin:"\u221e",infintie:"\u29dd",inodot:"\u0131",Int:"\u222c",int:"\u222b",intcal:"\u22ba",integers:"\u2124",Integral:"\u222b",intercal:"\u22ba",Intersection:"\u22c2",intlarhk:"\u2a17",intprod:"\u2a3c",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012e",iogon:"\u012f",Iopf:"\u{1d540}",iopf:"\u{1d55a}",Iota:"\u0399",iota:"\u03b9",iprod:"\u2a3c",iquest:"\xbf",Iscr:"\u2110",iscr:"\u{1d4be}",isin:"\u2208",isindot:"\u22f5",isinE:"\u22f9",isins:"\u22f4",isinsv:"\u22f3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xcf",iuml:"\xef",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1d50d}",jfr:"\u{1d527}",jmath:"\u0237",Jopf:"\u{1d541}",jopf:"\u{1d55b}",Jscr:"\u{1d4a5}",jscr:"\u{1d4bf}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039a",kappa:"\u03ba",kappav:"\u03f0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041a",kcy:"\u043a",Kfr:"\u{1d50e}",kfr:"\u{1d528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040c",kjcy:"\u045c",Kopf:"\u{1d542}",kopf:"\u{1d55c}",Kscr:"\u{1d4a6}",kscr:"\u{1d4c0}",lAarr:"\u21da",Lacute:"\u0139",lacute:"\u013a",laemptyv:"\u29b4",lagran:"\u2112",Lambda:"\u039b",lambda:"\u03bb",Lang:"\u27ea",lang:"\u27e8",langd:"\u2991",langle:"\u27e8",lap:"\u2a85",Laplacetrf:"\u2112",laquo:"\xab",Larr:"\u219e",lArr:"\u21d0",larr:"\u2190",larrb:"\u21e4",larrbfs:"\u291f",larrfs:"\u291d",larrhk:"\u21a9",larrlp:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",lat:"\u2aab",lAtail:"\u291b",latail:"\u2919",late:"\u2aad",lates:"\u2aad\ufe00",lBarr:"\u290e",lbarr:"\u290c",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",Lcaron:"\u013d",lcaron:"\u013e",Lcedil:"\u013b",lcedil:"\u013c",lceil:"\u2308",lcub:"{",Lcy:"\u041b",lcy:"\u043b",ldca:"\u2936",ldquo:"\u201c",ldquor:"\u201e",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27e8",LeftArrow:"\u2190",Leftarrow:"\u21d0",leftarrow:"\u2190",LeftArrowBar:"\u21e4",LeftArrowRightArrow:"\u21c6",leftarrowtail:"\u21a2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21c3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230a",leftharpoondown:"\u21bd",leftharpoonup:"\u21bc",leftleftarrows:"\u21c7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21d4",leftrightarrow:"\u2194",leftrightarrows:"\u21c6",leftrightharpoons:"\u21cb",leftrightsquigarrow:"\u21ad",LeftRightVector:"\u294e",LeftTee:"\u22a3",LeftTeeArrow:"\u21a4",LeftTeeVector:"\u295a",leftthreetimes:"\u22cb",LeftTriangle:"\u22b2",LeftTriangleBar:"\u29cf",LeftTriangleEqual:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21bf",LeftUpVectorBar:"\u2958",LeftVector:"\u21bc",LeftVectorBar:"\u2952",lEg:"\u2a8b",leg:"\u22da",leq:"\u2264",leqq:"\u2266",leqslant:"\u2a7d",les:"\u2a7d",lescc:"\u2aa8",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessapprox:"\u2a85",lessdot:"\u22d6",lesseqgtr:"\u22da",lesseqqgtr:"\u2a8b",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2aa1",lesssim:"\u2272",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",lfisht:"\u297c",lfloor:"\u230a",Lfr:"\u{1d50f}",lfr:"\u{1d529}",lg:"\u2276",lgE:"\u2a91",lHar:"\u2962",lhard:"\u21bd",lharu:"\u21bc",lharul:"\u296a",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22d8",ll:"\u226a",llarr:"\u21c7",llcorner:"\u231e",Lleftarrow:"\u21da",llhard:"\u296b",lltri:"\u25fa",Lmidot:"\u013f",lmidot:"\u0140",lmoust:"\u23b0",lmoustache:"\u23b0",lnap:"\u2a89",lnapprox:"\u2a89",lnE:"\u2268",lne:"\u2a87",lneq:"\u2a87",lneqq:"\u2268",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",lobrk:"\u27e6",LongLeftArrow:"\u27f5",Longleftarrow:"\u27f8",longleftarrow:"\u27f5",LongLeftRightArrow:"\u27f7",Longleftrightarrow:"\u27fa",longleftrightarrow:"\u27f7",longmapsto:"\u27fc",LongRightArrow:"\u27f6",Longrightarrow:"\u27f9",longrightarrow:"\u27f6",looparrowleft:"\u21ab",looparrowright:"\u21ac",lopar:"\u2985",Lopf:"\u{1d543}",lopf:"\u{1d55d}",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25ca",lozenge:"\u25ca",lozf:"\u29eb",lpar:"(",lparlt:"\u2993",lrarr:"\u21c6",lrcorner:"\u231f",lrhar:"\u21cb",lrhard:"\u296d",lrm:"\u200e",lrtri:"\u22bf",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1d4c1}",Lsh:"\u21b0",lsh:"\u21b0",lsim:"\u2272",lsime:"\u2a8d",lsimg:"\u2a8f",lsqb:"[",lsquo:"\u2018",lsquor:"\u201a",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226a",LT:"<",lt:"<",ltcc:"\u2aa6",ltcir:"\u2a79",ltdot:"\u22d6",lthree:"\u22cb",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltri:"\u25c3",ltrie:"\u22b4",ltrif:"\u25c2",ltrPar:"\u2996",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",macr:"\xaf",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21a6",mapsto:"\u21a6",mapstodown:"\u21a7",mapstoleft:"\u21a4",mapstoup:"\u21a5",marker:"\u25ae",mcomma:"\u2a29",Mcy:"\u041c",mcy:"\u043c",mdash:"\u2014",mDDot:"\u223a",measuredangle:"\u2221",MediumSpace:"\u205f",Mellintrf:"\u2133",Mfr:"\u{1d510}",mfr:"\u{1d52a}",mho:"\u2127",micro:"\xb5",mid:"\u2223",midast:"*",midcir:"\u2af0",middot:"\xb7",minus:"\u2212",minusb:"\u229f",minusd:"\u2238",minusdu:"\u2a2a",MinusPlus:"\u2213",mlcp:"\u2adb",mldr:"\u2026",mnplus:"\u2213",models:"\u22a7",Mopf:"\u{1d544}",mopf:"\u{1d55e}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1d4c2}",mstpos:"\u223e",Mu:"\u039c",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20d2",nap:"\u2249",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266e",natural:"\u266e",naturals:"\u2115",nbsp:"\xa0",nbump:"\u224e\u0338",nbumpe:"\u224f\u0338",ncap:"\u2a43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",Ncy:"\u041d",ncy:"\u043d",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21d7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NewLine:"\n",nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1d511}",nfr:"\u{1d52b}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",nGg:"\u22d9\u0338",ngsim:"\u2275",nGt:"\u226b\u20d2",ngt:"\u226f",ngtr:"\u226f",nGtv:"\u226b\u0338",nhArr:"\u21ce",nharr:"\u21ae",nhpar:"\u2af2",ni:"\u220b",nis:"\u22fc",nisd:"\u22fa",niv:"\u220b",NJcy:"\u040a",njcy:"\u045a",nlArr:"\u21cd",nlarr:"\u219a",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21cd",nleftarrow:"\u219a",nLeftrightarrow:"\u21ce",nleftrightarrow:"\u21ae",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",nless:"\u226e",nLl:"\u22d8\u0338",nlsim:"\u2274",nLt:"\u226a\u20d2",nlt:"\u226e",nltri:"\u22ea",nltrie:"\u22ec",nLtv:"\u226a\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xa0",Nopf:"\u2115",nopf:"\u{1d55f}",Not:"\u2aec",not:"\xac",NotCongruent:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226f",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",notin:"\u2209",notindot:"\u22f5\u0338",notinE:"\u22f9\u0338",notinva:"\u2209",notinvb:"\u22f7",notinvc:"\u22f6",NotLeftTriangle:"\u22ea",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",notni:"\u220c",notniva:"\u220c",notnivb:"\u22fe",notnivc:"\u22fd",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",NotReverseElement:"\u220c",NotRightTriangle:"\u22eb",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangleEqual:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22e3",NotSubset:"\u2282\u20d2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",npr:"\u2280",nprcue:"\u22e0",npre:"\u2aaf\u0338",nprec:"\u2280",npreceq:"\u2aaf\u0338",nrArr:"\u21cf",nrarr:"\u219b",nrarrc:"\u2933\u0338",nrarrw:"\u219d\u0338",nRightarrow:"\u21cf",nrightarrow:"\u219b",nrtri:"\u22eb",nrtrie:"\u22ed",nsc:"\u2281",nsccue:"\u22e1",nsce:"\u2ab0\u0338",Nscr:"\u{1d4a9}",nscr:"\u{1d4c3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22e2",nsqsupe:"\u22e3",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsube:"\u2288",nsubset:"\u2282\u20d2",nsubseteq:"\u2288",nsubseteqq:"\u2ac5\u0338",nsucc:"\u2281",nsucceq:"\u2ab0\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20d2",nsupseteq:"\u2289",nsupseteqq:"\u2ac6\u0338",ntgl:"\u2279",Ntilde:"\xd1",ntilde:"\xf1",ntlg:"\u2278",ntriangleleft:"\u22ea",ntrianglelefteq:"\u22ec",ntriangleright:"\u22eb",ntrianglerighteq:"\u22ed",Nu:"\u039d",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224d\u20d2",nVDash:"\u22af",nVdash:"\u22ae",nvDash:"\u22ad",nvdash:"\u22ac",nvge:"\u2265\u20d2",nvgt:">\u20d2",nvHarr:"\u2904",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwarhk:"\u2923",nwArr:"\u21d6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xd3",oacute:"\xf3",oast:"\u229b",ocir:"\u229a",Ocirc:"\xd4",ocirc:"\xf4",Ocy:"\u041e",ocy:"\u043e",odash:"\u229d",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2a38",odot:"\u2299",odsold:"\u29bc",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29bf",Ofr:"\u{1d512}",ofr:"\u{1d52c}",ogon:"\u02db",Ograve:"\xd2",ograve:"\xf2",ogt:"\u29c1",ohbar:"\u29b5",ohm:"\u03a9",oint:"\u222e",olarr:"\u21ba",olcir:"\u29be",olcross:"\u29bb",oline:"\u203e",olt:"\u29c0",Omacr:"\u014c",omacr:"\u014d",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",omid:"\u29b6",ominus:"\u2296",Oopf:"\u{1d546}",oopf:"\u{1d560}",opar:"\u29b7",OpenCurlyDoubleQuote:"\u201c",OpenCurlyQuote:"\u2018",operp:"\u29b9",oplus:"\u2295",Or:"\u2a54",or:"\u2228",orarr:"\u21bb",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",ordf:"\xaa",ordm:"\xba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oS:"\u24c8",Oscr:"\u{1d4aa}",oscr:"\u2134",Oslash:"\xd8",oslash:"\xf8",osol:"\u2298",Otilde:"\xd5",otilde:"\xf5",Otimes:"\u2a37",otimes:"\u2297",otimesas:"\u2a36",Ouml:"\xd6",ouml:"\xf6",ovbar:"\u233d",OverBar:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",OverParenthesis:"\u23dc",par:"\u2225",para:"\xb6",parallel:"\u2225",parsim:"\u2af3",parsl:"\u2afd",part:"\u2202",PartialD:"\u2202",Pcy:"\u041f",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",perp:"\u22a5",pertenk:"\u2031",Pfr:"\u{1d513}",pfr:"\u{1d52d}",Phi:"\u03a6",phi:"\u03c6",phiv:"\u03d5",phmmat:"\u2133",phone:"\u260e",Pi:"\u03a0",pi:"\u03c0",pitchfork:"\u22d4",piv:"\u03d6",planck:"\u210f",planckh:"\u210e",plankv:"\u210f",plus:"+",plusacir:"\u2a23",plusb:"\u229e",pluscir:"\u2a22",plusdo:"\u2214",plusdu:"\u2a25",pluse:"\u2a72",PlusMinus:"\xb1",plusmn:"\xb1",plussim:"\u2a26",plustwo:"\u2a27",pm:"\xb1",Poincareplane:"\u210c",pointint:"\u2a15",Popf:"\u2119",popf:"\u{1d561}",pound:"\xa3",Pr:"\u2abb",pr:"\u227a",prap:"\u2ab7",prcue:"\u227c",prE:"\u2ab3",pre:"\u2aaf",prec:"\u227a",precapprox:"\u2ab7",preccurlyeq:"\u227c",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",preceq:"\u2aaf",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",precsim:"\u227e",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2ab9",prnE:"\u2ab5",prnsim:"\u22e8",prod:"\u220f",Product:"\u220f",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prop:"\u221d",Proportion:"\u2237",Proportional:"\u221d",propto:"\u221d",prsim:"\u227e",prurel:"\u22b0",Pscr:"\u{1d4ab}",pscr:"\u{1d4c5}",Psi:"\u03a8",psi:"\u03c8",puncsp:"\u2008",Qfr:"\u{1d514}",qfr:"\u{1d52e}",qint:"\u2a0c",Qopf:"\u211a",qopf:"\u{1d562}",qprime:"\u2057",Qscr:"\u{1d4ac}",qscr:"\u{1d4c6}",quaternions:"\u210d",quatint:"\u2a16",quest:"?",questeq:"\u225f",QUOT:'"',quot:'"',rAarr:"\u21db",race:"\u223d\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221a",raemptyv:"\u29b3",Rang:"\u27eb",rang:"\u27e9",rangd:"\u2992",range:"\u29a5",rangle:"\u27e9",raquo:"\xbb",Rarr:"\u21a0",rArr:"\u21d2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21e5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291e",rarrhk:"\u21aa",rarrlp:"\u21ac",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21a3",rarrw:"\u219d",rAtail:"\u291c",ratail:"\u291a",ratio:"\u2236",rationals:"\u211a",RBarr:"\u2910",rBarr:"\u290f",rbarr:"\u290d",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201d",rdquor:"\u201d",rdsh:"\u21b3",Re:"\u211c",real:"\u211c",realine:"\u211b",realpart:"\u211c",reals:"\u211d",rect:"\u25ad",REG:"\xae",reg:"\xae",ReverseElement:"\u220b",ReverseEquilibrium:"\u21cb",ReverseUpEquilibrium:"\u296f",rfisht:"\u297d",rfloor:"\u230b",Rfr:"\u211c",rfr:"\u{1d52f}",rHar:"\u2964",rhard:"\u21c1",rharu:"\u21c0",rharul:"\u296c",Rho:"\u03a1",rho:"\u03c1",rhov:"\u03f1",RightAngleBracket:"\u27e9",RightArrow:"\u2192",Rightarrow:"\u21d2",rightarrow:"\u2192",RightArrowBar:"\u21e5",RightArrowLeftArrow:"\u21c4",rightarrowtail:"\u21a3",RightCeiling:"\u2309",RightDoubleBracket:"\u27e7",RightDownTeeVector:"\u295d",RightDownVector:"\u21c2",RightDownVectorBar:"\u2955",RightFloor:"\u230b",rightharpoondown:"\u21c1",rightharpoonup:"\u21c0",rightleftarrows:"\u21c4",rightleftharpoons:"\u21cc",rightrightarrows:"\u21c9",rightsquigarrow:"\u219d",RightTee:"\u22a2",RightTeeArrow:"\u21a6",RightTeeVector:"\u295b",rightthreetimes:"\u22cc",RightTriangle:"\u22b3",RightTriangleBar:"\u29d0",RightTriangleEqual:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVector:"\u21be",RightUpVectorBar:"\u2954",RightVector:"\u21c0",RightVectorBar:"\u2953",ring:"\u02da",risingdotseq:"\u2253",rlarr:"\u21c4",rlhar:"\u21cc",rlm:"\u200f",rmoust:"\u23b1",rmoustache:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",robrk:"\u27e7",ropar:"\u2986",Ropf:"\u211d",ropf:"\u{1d563}",roplus:"\u2a2e",rotimes:"\u2a35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rrarr:"\u21c9",Rrightarrow:"\u21db",rsaquo:"\u203a",Rscr:"\u211b",rscr:"\u{1d4c7}",Rsh:"\u21b1",rsh:"\u21b1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22cc",rtimes:"\u22ca",rtri:"\u25b9",rtrie:"\u22b5",rtrif:"\u25b8",rtriltri:"\u29ce",RuleDelayed:"\u29f4",ruluhar:"\u2968",rx:"\u211e",Sacute:"\u015a",sacute:"\u015b",sbquo:"\u201a",Sc:"\u2abc",sc:"\u227b",scap:"\u2ab8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227d",scE:"\u2ab4",sce:"\u2ab0",Scedil:"\u015e",scedil:"\u015f",Scirc:"\u015c",scirc:"\u015d",scnap:"\u2aba",scnE:"\u2ab6",scnsim:"\u22e9",scpolint:"\u2a13",scsim:"\u227f",Scy:"\u0421",scy:"\u0441",sdot:"\u22c5",sdotb:"\u22a1",sdote:"\u2a66",searhk:"\u2925",seArr:"\u21d8",searr:"\u2198",searrow:"\u2198",sect:"\xa7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1d516}",sfr:"\u{1d530}",sfrown:"\u2322",sharp:"\u266f",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",sim:"\u223c",simdot:"\u2a6a",sime:"\u2243",simeq:"\u2243",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2a33",smeparsl:"\u29e4",smid:"\u2223",smile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",SOFTcy:"\u042c",softcy:"\u044c",sol:"/",solb:"\u29c4",solbar:"\u233f",Sopf:"\u{1d54a}",sopf:"\u{1d564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\ufe00",sqcup:"\u2294",sqcups:"\u2294\ufe00",Sqrt:"\u221a",sqsub:"\u228f",sqsube:"\u2291",sqsubset:"\u228f",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25a1",Square:"\u25a1",square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25aa",squf:"\u25aa",srarr:"\u2192",Sscr:"\u{1d4ae}",sscr:"\u{1d4c8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22c6",Star:"\u22c6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03f5",straightphi:"\u03d5",strns:"\xaf",Sub:"\u22d0",sub:"\u2282",subdot:"\u2abd",subE:"\u2ac5",sube:"\u2286",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subne:"\u228a",subplus:"\u2abf",subrarr:"\u2979",Subset:"\u22d0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2ac5",SubsetEqual:"\u2286",subsetneq:"\u228a",subsetneqq:"\u2acb",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",succ:"\u227b",succapprox:"\u2ab8",succcurlyeq:"\u227d",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",SucceedsTilde:"\u227f",succeq:"\u2ab0",succnapprox:"\u2aba",succneqq:"\u2ab6",succnsim:"\u22e9",succsim:"\u227f",SuchThat:"\u220b",Sum:"\u2211",sum:"\u2211",sung:"\u266a",Sup:"\u22d1",sup:"\u2283",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",supdot:"\u2abe",supdsub:"\u2ad8",supE:"\u2ac6",supe:"\u2287",supedot:"\u2ac4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supne:"\u228b",supplus:"\u2ac0",Supset:"\u22d1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2ac6",supsetneq:"\u228b",supsetneqq:"\u2acc",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swarhk:"\u2926",swArr:"\u21d9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292a",szlig:"\xdf",Tab:"\t",target:"\u2316",Tau:"\u03a4",tau:"\u03c4",tbrk:"\u23b4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20db",telrec:"\u2315",Tfr:"\u{1d517}",tfr:"\u{1d531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",thickapprox:"\u2248",thicksim:"\u223c",ThickSpace:"\u205f\u200a",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223c",THORN:"\xde",thorn:"\xfe",Tilde:"\u223c",tilde:"\u02dc",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xd7",timesb:"\u22a0",timesbar:"\u2a31",timesd:"\u2a30",tint:"\u222d",toea:"\u2928",top:"\u22a4",topbot:"\u2336",topcir:"\u2af1",Topf:"\u{1d54b}",topf:"\u{1d565}",topfork:"\u2ada",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25b5",triangledown:"\u25bf",triangleleft:"\u25c3",trianglelefteq:"\u22b4",triangleq:"\u225c",triangleright:"\u25b9",trianglerighteq:"\u22b5",tridot:"\u25ec",trie:"\u225c",triminus:"\u2a3a",TripleDot:"\u20db",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",Tscr:"\u{1d4af}",tscr:"\u{1d4c9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040b",tshcy:"\u045b",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226c",twoheadleftarrow:"\u219e",twoheadrightarrow:"\u21a0",Uacute:"\xda",uacute:"\xfa",Uarr:"\u219f",uArr:"\u21d1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040e",ubrcy:"\u045e",Ubreve:"\u016c",ubreve:"\u016d",Ucirc:"\xdb",ucirc:"\xfb",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21c5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296e",ufisht:"\u297e",Ufr:"\u{1d518}",ufr:"\u{1d532}",Ugrave:"\xd9",ugrave:"\xf9",uHar:"\u2963",uharl:"\u21bf",uharr:"\u21be",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",Umacr:"\u016a",umacr:"\u016b",uml:"\xa8",UnderBar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",UnionPlus:"\u228e",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1d54c}",uopf:"\u{1d566}",UpArrow:"\u2191",Uparrow:"\u21d1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21c5",UpDownArrow:"\u2195",Updownarrow:"\u21d5",updownarrow:"\u2195",UpEquilibrium:"\u296e",upharpoonleft:"\u21bf",upharpoonright:"\u21be",uplus:"\u228e",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03d2",upsi:"\u03c5",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",UpTee:"\u22a5",UpTeeArrow:"\u21a5",upuparrows:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",Uring:"\u016e",uring:"\u016f",urtri:"\u25f9",Uscr:"\u{1d4b0}",uscr:"\u{1d4ca}",utdot:"\u22f0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25b5",utrif:"\u25b4",uuarr:"\u21c8",Uuml:"\xdc",uuml:"\xfc",uwangle:"\u29a7",vangrt:"\u299c",varepsilon:"\u03f5",varkappa:"\u03f0",varnothing:"\u2205",varphi:"\u03d5",varpi:"\u03d6",varpropto:"\u221d",vArr:"\u21d5",varr:"\u2195",varrho:"\u03f1",varsigma:"\u03c2",varsubsetneq:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vartheta:"\u03d1",vartriangleleft:"\u22b2",vartriangleright:"\u22b3",Vbar:"\u2aeb",vBar:"\u2ae8",vBarv:"\u2ae9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22ab",Vdash:"\u22a9",vDash:"\u22a8",vdash:"\u22a2",Vdashl:"\u2ae6",Vee:"\u22c1",vee:"\u2228",veebar:"\u22bb",veeeq:"\u225a",vellip:"\u22ee",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200a",Vfr:"\u{1d519}",vfr:"\u{1d533}",vltri:"\u22b2",vnsub:"\u2282\u20d2",vnsup:"\u2283\u20d2",Vopf:"\u{1d54d}",vopf:"\u{1d567}",vprop:"\u221d",vrtri:"\u22b3",Vscr:"\u{1d4b1}",vscr:"\u{1d4cb}",vsubnE:"\u2acb\ufe00",vsubne:"\u228a\ufe00",vsupnE:"\u2acc\ufe00",vsupne:"\u228b\ufe00",Vvdash:"\u22aa",vzigzag:"\u299a",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2a5f",Wedge:"\u22c0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1d51a}",wfr:"\u{1d534}",Wopf:"\u{1d54e}",wopf:"\u{1d568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1d4b2}",wscr:"\u{1d4cc}",xcap:"\u22c2",xcirc:"\u25ef",xcup:"\u22c3",xdtri:"\u25bd",Xfr:"\u{1d51b}",xfr:"\u{1d535}",xhArr:"\u27fa",xharr:"\u27f7",Xi:"\u039e",xi:"\u03be",xlArr:"\u27f8",xlarr:"\u27f5",xmap:"\u27fc",xnis:"\u22fb",xodot:"\u2a00",Xopf:"\u{1d54f}",xopf:"\u{1d569}",xoplus:"\u2a01",xotime:"\u2a02",xrArr:"\u27f9",xrarr:"\u27f6",Xscr:"\u{1d4b3}",xscr:"\u{1d4cd}",xsqcup:"\u2a06",xuplus:"\u2a04",xutri:"\u25b3",xvee:"\u22c1",xwedge:"\u22c0",Yacute:"\xdd",yacute:"\xfd",YAcy:"\u042f",yacy:"\u044f",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042b",ycy:"\u044b",yen:"\xa5",Yfr:"\u{1d51c}",yfr:"\u{1d536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1d550}",yopf:"\u{1d56a}",Yscr:"\u{1d4b4}",yscr:"\u{1d4ce}",YUcy:"\u042e",yucy:"\u044e",Yuml:"\u0178",yuml:"\xff",Zacute:"\u0179",zacute:"\u017a",Zcaron:"\u017d",zcaron:"\u017e",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017b",zdot:"\u017c",zeetrf:"\u2128",ZeroWidthSpace:"\u200b",Zeta:"\u0396",zeta:"\u03b6",Zfr:"\u2128",zfr:"\u{1d537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21dd",Zopf:"\u2124",zopf:"\u{1d56b}",Zscr:"\u{1d4b5}",zscr:"\u{1d4cf}",zwj:"\u200d",zwnj:"\u200c"}),Se.entityMap=Se.HTML_ENTITIES},978:(it,Se,$)=>{$(6853);Se.DOMParser=$(1991).DOMParser},8702:(it,Se,$)=>{var h=$(9401).NAMESPACE,oe=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,j=new RegExp("[\\-\\.0-9"+oe.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),de=new RegExp("^"+oe.source+j.source+"*(?::"+oe.source+j.source+"*)?$");function Xe(W,V){this.message=W,this.locator=V,Error.captureStackTrace&&Error.captureStackTrace(this,Xe)}function Re(){}function Dt(W,V){return V.lineNumber=W.lineNumber,V.columnNumber=W.columnNumber,V}function ze(W,V,Ie,nt,We,mt){function he(Ve,Oe,ve){Ie.attributeNames.hasOwnProperty(Ve)&&mt.fatalError("Attribute "+Ve+" redefined"),Ie.addValue(Ve,Oe.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,We),ve)}for(var Fe,rt=++V,Z=0;;){var ne=W.charAt(rt);switch(ne){case"=":if(1===Z)Fe=W.slice(V,rt),Z=3;else{if(2!==Z)throw new Error("attribute equal must after attrName");Z=3}break;case"'":case'"':if(3===Z||1===Z){if(1===Z&&(mt.warning('attribute value must after "="'),Fe=W.slice(V,rt)),!((rt=W.indexOf(ne,V=rt+1))>0))throw new Error("attribute value no end '"+ne+"' match");he(Fe,qe=W.slice(V,rt),V-1),Z=5}else{if(4!=Z)throw new Error('attribute value must after "="');he(Fe,qe=W.slice(V,rt),V),mt.warning('attribute "'+Fe+'" missed start quot('+ne+")!!"),V=rt+1,Z=5}break;case"/":switch(Z){case 0:Ie.setTagName(W.slice(V,rt));case 5:case 6:case 7:Z=7,Ie.closed=!0;case 4:case 1:break;case 2:Ie.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return mt.error("unexpected end of input"),0==Z&&Ie.setTagName(W.slice(V,rt)),rt;case">":switch(Z){case 0:Ie.setTagName(W.slice(V,rt));case 5:case 6:case 7:break;case 4:case 1:"/"===(qe=W.slice(V,rt)).slice(-1)&&(Ie.closed=!0,qe=qe.slice(0,-1));case 2:2===Z&&(qe=Fe),4==Z?(mt.warning('attribute "'+qe+'" missed quot(")!'),he(Fe,qe,V)):((!h.isHTML(nt[""])||!qe.match(/^(?:disabled|checked|selected)$/i))&&mt.warning('attribute "'+qe+'" missed value!! "'+qe+'" instead!!'),he(qe,qe,V));break;case 3:throw new Error("attribute value missed!!")}return rt;case"\x80":ne=" ";default:if(ne<=" ")switch(Z){case 0:Ie.setTagName(W.slice(V,rt)),Z=6;break;case 1:Fe=W.slice(V,rt),Z=2;break;case 4:var qe=W.slice(V,rt);mt.warning('attribute "'+qe+'" missed quot(")!!'),he(Fe,qe,V);case 5:Z=6}else switch(Z){case 2:(!h.isHTML(nt[""])||!Fe.match(/^(?:disabled|checked|selected)$/i))&&mt.warning('attribute "'+Fe+'" missed value!! "'+Fe+'" instead2!!'),he(Fe,Fe,V),V=rt,Z=1;break;case 5:mt.warning('attribute space is required"'+Fe+'"!!');case 6:Z=1,V=rt;break;case 3:Z=4,V=rt;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}rt++}}function we(W,V,Ie){for(var nt=W.tagName,We=null,ne=W.length;ne--;){var mt=W[ne],he=mt.qName,Fe=mt.value;if((Pe=he.indexOf(":"))>0)var qe=mt.prefix=he.slice(0,Pe),rt=he.slice(Pe+1),Z="xmlns"===qe&&rt;else rt=he,qe=null,Z="xmlns"===he&&"";mt.localName=rt,!1!==Z&&(null==We&&(We={},Ye(Ie,Ie={})),Ie[Z]=We[Z]=Fe,mt.uri=h.XMLNS,V.startPrefixMapping(Z,Fe))}for(ne=W.length;ne--;)(qe=(mt=W[ne]).prefix)&&("xml"===qe&&(mt.uri=h.XML),"xmlns"!==qe&&(mt.uri=Ie[qe||""]));var Pe;(Pe=nt.indexOf(":"))>0?(qe=W.prefix=nt.slice(0,Pe),rt=W.localName=nt.slice(Pe+1)):(qe=null,rt=W.localName=nt);var Ve=W.uri=Ie[qe||""];if(V.startElement(Ve,rt,nt,W),!W.closed)return W.currentNSMap=Ie,W.localNSMap=We,!0;if(V.endElement(Ve,rt,nt),We)for(qe in We)Object.prototype.hasOwnProperty.call(We,qe)&&V.endPrefixMapping(qe)}function tt(W,V,Ie,nt,We){if(/^(?:script|textarea)$/i.test(Ie)){var mt=W.indexOf("</"+Ie+">",V),he=W.substring(V+1,mt);if(/[&<]/.test(he))return/^script$/i.test(Ie)?(We.characters(he,0,he.length),mt):(he=he.replace(/&#?\w+;/g,nt),We.characters(he,0,he.length),mt)}return V+1}function ft(W,V,Ie,nt){var We=nt[Ie];return null==We&&((We=W.lastIndexOf("</"+Ie+">"))<V&&(We=W.lastIndexOf("</"+Ie)),nt[Ie]=We),We<V}function Ye(W,V){for(var Ie in W)Object.prototype.hasOwnProperty.call(W,Ie)&&(V[Ie]=W[Ie])}function Ce(W,V,Ie,nt){if("-"===W.charAt(V+2))return"-"===W.charAt(V+3)?(mt=W.indexOf("--\x3e",V+4))>V?(Ie.comment(W,V+4,mt-V-4),mt+3):(nt.error("Unclosed comment"),-1):-1;if("CDATA["==W.substr(V+3,6)){var mt=W.indexOf("]]>",V+9);return Ie.startCDATA(),Ie.characters(W,V+9,mt-V-9),Ie.endCDATA(),mt+3}var he=function st(W,V){var Ie,nt=[],We=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(We.lastIndex=V,We.exec(W);Ie=We.exec(W);)if(nt.push(Ie),Ie[1])return nt}(W,V),Fe=he.length;if(Fe>1&&/!doctype/i.test(he[0][0])){var qe=he[1][0],rt=!1,Z=!1;Fe>3&&(/^public$/i.test(he[2][0])?(rt=he[3][0],Z=Fe>4&&he[4][0]):/^system$/i.test(he[2][0])&&(Z=he[3][0]));var ne=he[Fe-1];return Ie.startDTD(qe,rt,Z),Ie.endDTD(),ne.index+ne[0].length}return-1}function je(W,V,Ie){var nt=W.indexOf("?>",V);if(nt){var We=W.substring(V,nt).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return We?(Ie.processingInstruction(We[1],We[2]),nt+2):-1}return-1}function gt(){this.attributeNames={}}(Xe.prototype=new Error).name=Xe.name,Re.prototype={parse:function(W,V,Ie){var nt=this.domBuilder;nt.startDocument(),Ye(V,V={}),function Je(W,V,Ie,nt,We){function he(lr){var Hn=lr.slice(1,-1);return Object.hasOwnProperty.call(Ie,Hn)?Ie[Hn]:"#"===Hn.charAt(0)?function mt(lr){return lr>65535?(lr-=65536,String.fromCharCode(55296+(lr>>10),56320+(1023&lr))):String.fromCharCode(lr)}(parseInt(Hn.substr(1).replace("x","0x"))):(We.error("entity not found:"+lr),lr)}function Fe(lr){if(lr>ve){var Hn=W.substring(ve,lr).replace(/&#?\w+;/g,he);Pe&&qe(ve),nt.characters(Hn,0,lr-ve),ve=lr}}function qe(lr,Hn){for(;lr>=Z&&(Hn=ne.exec(W));)Z=(rt=Hn.index)+Hn[0].length,Pe.lineNumber++;Pe.columnNumber=lr-rt+1}for(var rt=0,Z=0,ne=/.*(?:\r\n?|\n)|.*$/g,Pe=nt.locator,Ve=[{currentNSMap:V}],Oe={},ve=0;;){try{var ut=W.indexOf("<",ve);if(ut<0){if(!W.substr(ve).match(/^\s*$/)){var Ot=nt.doc,zt=Ot.createTextNode(W.substr(ve));Ot.appendChild(zt),nt.currentElement=zt}return}switch(ut>ve&&Fe(ut),W.charAt(ut+1)){case"/":var Ut=W.indexOf(">",ut+3),kt=W.substring(ut+2,Ut).replace(/[ \t\n\r]+$/g,""),ln=Ve.pop();Ut<0?(kt=W.substring(ut+2).replace(/[\s<].*/,""),We.error("end tag name: "+kt+" is not complete:"+ln.tagName),Ut=ut+1+kt.length):kt.match(/\s</)&&(kt=kt.replace(/[\s<].*/,""),We.error("end tag name: "+kt+" maybe not complete"),Ut=ut+1+kt.length);var $n=ln.localNSMap,zn=ln.tagName==kt;if(zn||ln.tagName&&ln.tagName.toLowerCase()==kt.toLowerCase()){if(nt.endElement(ln.uri,ln.localName,kt),$n)for(var fn in $n)Object.prototype.hasOwnProperty.call($n,fn)&&nt.endPrefixMapping(fn);zn||We.fatalError("end tag name: "+kt+" is not match the current start tagName:"+ln.tagName)}else Ve.push(ln);Ut++;break;case"?":Pe&&qe(ut),Ut=je(W,ut,nt);break;case"!":Pe&&qe(ut),Ut=Ce(W,ut,nt,We);break;default:Pe&&qe(ut);var Bn=new gt,Rr=Ve[Ve.length-1].currentNSMap,Co=(Ut=ze(W,ut,Bn,Rr,he,We),Bn.length);if(!Bn.closed&&ft(W,Ut,Bn.tagName,Oe)&&(Bn.closed=!0,Ie.nbsp||We.warning("unclosed xml attribute")),Pe&&Co){for(var gr=Dt(Pe,{}),ur=0;ur<Co;ur++){var So=Bn[ur];qe(So.offset),So.locator=Dt(Pe,{})}nt.locator=gr,we(Bn,nt,Rr)&&Ve.push(Bn),nt.locator=Pe}else we(Bn,nt,Rr)&&Ve.push(Bn);h.isHTML(Bn.uri)&&!Bn.closed?Ut=tt(W,Ut,Bn.tagName,he,nt):Ut++}}catch(lr){if(lr instanceof Xe)throw lr;We.error("element parse error: "+lr),Ut=-1}Ut>ve?ve=Ut:Fe(Math.max(ut,ve)+1)}}(W,V,Ie,nt,this.errorHandler),nt.endDocument()}},gt.prototype={setTagName:function(W){if(!de.test(W))throw new Error("invalid tagName:"+W);this.tagName=W},addValue:function(W,V,Ie){if(!de.test(W))throw new Error("invalid attribute:"+W);this.attributeNames[W]=this.length,this[this.length++]={qName:W,value:V,offset:Ie}},length:0,getLocalName:function(W){return this[W].localName},getLocator:function(W){return this[W].locator},getQName:function(W){return this[W].qName},getURI:function(W){return this[W].uri},getValue:function(W){return this[W].value}},Se.XMLReader=Re,Se.ParseError=Xe},1421:(it,Se,$)=>{var j,h="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},oe=$(5893);"undefined"!=typeof document?j=document:(j=h["__GLOBAL_DOCUMENT_CACHE@4"])||(j=h["__GLOBAL_DOCUMENT_CACHE@4"]=oe),it.exports=j},9226:it=>{var Se;Se="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},it.exports=Se},2703:it=>{it.exports=function $(h){if(!h)return!1;var oe=Se.call(h);return"[object Function]"===oe||"function"==typeof h&&"[object RegExp]"!==oe||"undefined"!=typeof window&&(h===window.setTimeout||h===window.alert||h===window.confirm||h===window.prompt)};var Se=Object.prototype.toString},1234:(it,Se)=>{function $(ce){if(ce&&"object"==typeof ce){var me=ce.which||ce.keyCode||ce.charCode;me&&(ce=me)}if("number"==typeof ce)return de[ce];var De,ye=String(ce);return(De=h[ye.toLowerCase()])?De:(De=oe[ye.toLowerCase()])||(1===ye.length?ye.charCodeAt(0):void 0)}$.isEventKey=function(me,ye){if(me&&"object"==typeof me){var De=me.which||me.keyCode||me.charCode;if(null==De)return!1;if("string"==typeof ye){var Y;if(Y=h[ye.toLowerCase()])return Y===De;if(Y=oe[ye.toLowerCase()])return Y===De}else if("number"==typeof ye)return ye===De;return!1}};var h=(Se=it.exports=$).code=Se.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},oe=Se.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(j=97;j<123;j++)h[String.fromCharCode(j)]=j-32;for(var j=48;j<58;j++)h[j-48]=j;for(j=1;j<13;j++)h["f"+j]=j+111;for(j=0;j<10;j++)h["numpad "+j]=j+96;var de=Se.names=Se.title={};for(j in h)de[h[j]]=j;for(var re in oe)h[re]=oe[re]},7459:(it,Se,$)=>{var h=$(3357).getUint64;it.exports=function(j){var de=new DataView(j.buffer,j.byteOffset,j.byteLength),re={version:j[0],flags:new Uint8Array(j.subarray(1,4)),references:[],referenceId:de.getUint32(4),timescale:de.getUint32(8)},ce=12;0===re.version?(re.earliestPresentationTime=de.getUint32(ce),re.firstOffset=de.getUint32(ce+4),ce+=8):(re.earliestPresentationTime=h(j.subarray(ce)),re.firstOffset=h(j.subarray(ce+8)),ce+=16);var me=de.getUint16(ce+=2);for(ce+=2;me>0;ce+=12,me--)re.references.push({referenceType:(128&j[ce])>>>7,referencedSize:2147483647&de.getUint32(ce),subsegmentDuration:de.getUint32(ce+4),startsWithSap:!!(128&j[ce+8]),sapType:(112&j[ce+8])>>>4,sapDeltaTime:268435455&de.getUint32(ce+8)});return re}},6277:it=>{var $,h,oe,j,de,re,ce;de=function(me,ye){return $(j(me,ye))},re=function(me,ye){return h(oe(me),ye)},ce=function(me,ye,De){return oe(De?me:me-ye)},it.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:$=function(me){return 9e4*me},secondsToAudioTs:h=function(me,ye){return me*ye},videoTsToSeconds:oe=function(me){return me/9e4},audioTsToSeconds:j=function(me,ye){return me/ye},audioTsToVideoTs:de,videoTsToAudioTs:re,metadataTsToSeconds:ce}},3357:it=>{var Se=Math.pow(2,32);it.exports={getUint64:function(h){var j,oe=new DataView(h.buffer,h.byteOffset,h.byteLength);return oe.getBigUint64?(j=oe.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(j):j:oe.getUint32(0)*Se+oe.getUint32(4)},MAX_UINT32:Se}},7854:it=>{var Se=function($){"use strict";var j,h=Object.prototype,oe=h.hasOwnProperty,de="function"==typeof Symbol?Symbol:{},re=de.iterator||"@@iterator",ce=de.asyncIterator||"@@asyncIterator",me=de.toStringTag||"@@toStringTag";function ye(he,Fe,qe){return Object.defineProperty(he,Fe,{value:qe,enumerable:!0,configurable:!0,writable:!0}),he[Fe]}try{ye({},"")}catch(he){ye=function(Fe,qe,rt){return Fe[qe]=rt}}function De(he,Fe,qe,rt){var ne=Object.create((Fe&&Fe.prototype instanceof Dt?Fe:Dt).prototype),Pe=new nt(rt||[]);return ne._invoke=function st(he,Fe,qe){var rt=se;return function(ne,Pe){if(rt===Xe)throw new Error("Generator is already running");if(rt===Re){if("throw"===ne)throw Pe;return mt()}for(qe.method=ne,qe.arg=Pe;;){var Ve=qe.delegate;if(Ve){var Oe=W(Ve,qe);if(Oe){if(Oe===Je)continue;return Oe}}if("next"===qe.method)qe.sent=qe._sent=qe.arg;else if("throw"===qe.method){if(rt===se)throw rt=Re,qe.arg;qe.dispatchException(qe.arg)}else"return"===qe.method&&qe.abrupt("return",qe.arg);rt=Xe;var ve=Y(he,Fe,qe);if("normal"===ve.type){if(rt=qe.done?Re:Q,ve.arg===Je)continue;return{value:ve.arg,done:qe.done}}"throw"===ve.type&&(rt=Re,qe.method="throw",qe.arg=ve.arg)}}}(he,qe,Pe),ne}function Y(he,Fe,qe){try{return{type:"normal",arg:he.call(Fe,qe)}}catch(rt){return{type:"throw",arg:rt}}}$.wrap=De;var se="suspendedStart",Q="suspendedYield",Xe="executing",Re="completed",Je={};function Dt(){}function ze(){}function we(){}var tt={};ye(tt,re,function(){return this});var ft=Object.getPrototypeOf,Ye=ft&&ft(ft(We([])));Ye&&Ye!==h&&oe.call(Ye,re)&&(tt=Ye);var Ce=we.prototype=Dt.prototype=Object.create(tt);function je(he){["next","throw","return"].forEach(function(Fe){ye(he,Fe,function(qe){return this._invoke(Fe,qe)})})}function gt(he,Fe){function qe(ne,Pe,Ve,Oe){var ve=Y(he[ne],he,Pe);if("throw"!==ve.type){var ut=ve.arg,Ot=ut.value;return Ot&&"object"==typeof Ot&&oe.call(Ot,"__await")?Fe.resolve(Ot.__await).then(function(zt){qe("next",zt,Ve,Oe)},function(zt){qe("throw",zt,Ve,Oe)}):Fe.resolve(Ot).then(function(zt){ut.value=zt,Ve(ut)},function(zt){return qe("throw",zt,Ve,Oe)})}Oe(ve.arg)}var rt;this._invoke=function Z(ne,Pe){function Ve(){return new Fe(function(Oe,ve){qe(ne,Pe,Oe,ve)})}return rt=rt?rt.then(Ve,Ve):Ve()}}function W(he,Fe){var qe=he.iterator[Fe.method];if(qe===j){if(Fe.delegate=null,"throw"===Fe.method){if(he.iterator.return&&(Fe.method="return",Fe.arg=j,W(he,Fe),"throw"===Fe.method))return Je;Fe.method="throw",Fe.arg=new TypeError("The iterator does not provide a 'throw' method")}return Je}var rt=Y(qe,he.iterator,Fe.arg);if("throw"===rt.type)return Fe.method="throw",Fe.arg=rt.arg,Fe.delegate=null,Je;var Z=rt.arg;return Z?Z.done?(Fe[he.resultName]=Z.value,Fe.next=he.nextLoc,"return"!==Fe.method&&(Fe.method="next",Fe.arg=j),Fe.delegate=null,Je):Z:(Fe.method="throw",Fe.arg=new TypeError("iterator result is not an object"),Fe.delegate=null,Je)}function V(he){var Fe={tryLoc:he[0]};1 in he&&(Fe.catchLoc=he[1]),2 in he&&(Fe.finallyLoc=he[2],Fe.afterLoc=he[3]),this.tryEntries.push(Fe)}function Ie(he){var Fe=he.completion||{};Fe.type="normal",delete Fe.arg,he.completion=Fe}function nt(he){this.tryEntries=[{tryLoc:"root"}],he.forEach(V,this),this.reset(!0)}function We(he){if(he){var Fe=he[re];if(Fe)return Fe.call(he);if("function"==typeof he.next)return he;if(!isNaN(he.length)){var qe=-1,rt=function Z(){for(;++qe<he.length;)if(oe.call(he,qe))return Z.value=he[qe],Z.done=!1,Z;return Z.value=j,Z.done=!0,Z};return rt.next=rt}}return{next:mt}}function mt(){return{value:j,done:!0}}return ze.prototype=we,ye(Ce,"constructor",we),ye(we,"constructor",ze),ze.displayName=ye(we,me,"GeneratorFunction"),$.isGeneratorFunction=function(he){var Fe="function"==typeof he&&he.constructor;return!!Fe&&(Fe===ze||"GeneratorFunction"===(Fe.displayName||Fe.name))},$.mark=function(he){return Object.setPrototypeOf?Object.setPrototypeOf(he,we):(he.__proto__=we,ye(he,me,"GeneratorFunction")),he.prototype=Object.create(Ce),he},$.awrap=function(he){return{__await:he}},je(gt.prototype),ye(gt.prototype,ce,function(){return this}),$.AsyncIterator=gt,$.async=function(he,Fe,qe,rt,Z){void 0===Z&&(Z=Promise);var ne=new gt(De(he,Fe,qe,rt),Z);return $.isGeneratorFunction(Fe)?ne:ne.next().then(function(Pe){return Pe.done?Pe.value:ne.next()})},je(Ce),ye(Ce,me,"Generator"),ye(Ce,re,function(){return this}),ye(Ce,"toString",function(){return"[object Generator]"}),$.keys=function(he){var Fe=[];for(var qe in he)Fe.push(qe);return Fe.reverse(),function rt(){for(;Fe.length;){var Z=Fe.pop();if(Z in he)return rt.value=Z,rt.done=!1,rt}return rt.done=!0,rt}},$.values=We,nt.prototype={constructor:nt,reset:function(he){if(this.prev=0,this.next=0,this.sent=this._sent=j,this.done=!1,this.delegate=null,this.method="next",this.arg=j,this.tryEntries.forEach(Ie),!he)for(var Fe in this)"t"===Fe.charAt(0)&&oe.call(this,Fe)&&!isNaN(+Fe.slice(1))&&(this[Fe]=j)},stop:function(){this.done=!0;var Fe=this.tryEntries[0].completion;if("throw"===Fe.type)throw Fe.arg;return this.rval},dispatchException:function(he){if(this.done)throw he;var Fe=this;function qe(Oe,ve){return ne.type="throw",ne.arg=he,Fe.next=Oe,ve&&(Fe.method="next",Fe.arg=j),!!ve}for(var rt=this.tryEntries.length-1;rt>=0;--rt){var Z=this.tryEntries[rt],ne=Z.completion;if("root"===Z.tryLoc)return qe("end");if(Z.tryLoc<=this.prev){var Pe=oe.call(Z,"catchLoc"),Ve=oe.call(Z,"finallyLoc");if(Pe&&Ve){if(this.prev<Z.catchLoc)return qe(Z.catchLoc,!0);if(this.prev<Z.finallyLoc)return qe(Z.finallyLoc)}else if(Pe){if(this.prev<Z.catchLoc)return qe(Z.catchLoc,!0)}else{if(!Ve)throw new Error("try statement without catch or finally");if(this.prev<Z.finallyLoc)return qe(Z.finallyLoc)}}}},abrupt:function(he,Fe){for(var qe=this.tryEntries.length-1;qe>=0;--qe){var rt=this.tryEntries[qe];if(rt.tryLoc<=this.prev&&oe.call(rt,"finallyLoc")&&this.prev<rt.finallyLoc){var Z=rt;break}}Z&&("break"===he||"continue"===he)&&Z.tryLoc<=Fe&&Fe<=Z.finallyLoc&&(Z=null);var ne=Z?Z.completion:{};return ne.type=he,ne.arg=Fe,Z?(this.method="next",this.next=Z.finallyLoc,Je):this.complete(ne)},complete:function(he,Fe){if("throw"===he.type)throw he.arg;return"break"===he.type||"continue"===he.type?this.next=he.arg:"return"===he.type?(this.rval=this.arg=he.arg,this.method="return",this.next="end"):"normal"===he.type&&Fe&&(this.next=Fe),Je},finish:function(he){for(var Fe=this.tryEntries.length-1;Fe>=0;--Fe){var qe=this.tryEntries[Fe];if(qe.finallyLoc===he)return this.complete(qe.completion,qe.afterLoc),Ie(qe),Je}},catch:function(he){for(var Fe=this.tryEntries.length-1;Fe>=0;--Fe){var qe=this.tryEntries[Fe];if(qe.tryLoc===he){var rt=qe.completion;if("throw"===rt.type){var Z=rt.arg;Ie(qe)}return Z}}throw new Error("illegal catch attempt")},delegateYield:function(he,Fe,qe){return this.delegate={iterator:We(he),resultName:Fe,nextLoc:qe},"next"===this.method&&(this.arg=j),Je}},$}(it.exports);try{regeneratorRuntime=Se}catch($){"object"==typeof globalThis?globalThis.regeneratorRuntime=Se:Function("r","regeneratorRuntime = r")(Se)}},9751:(it,Se,$)=>{"use strict";$.d(Se,{y:()=>ye});var h=$(930),oe=$(727),j=$(8822),de=$(9635),re=$(2416),ce=$(576),me=$(2806);let ye=(()=>{class Q{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const Je=new Q;return Je.source=this,Je.operator=Re,Je}subscribe(Re,Je,Dt){const ze=function se(Q){return Q&&Q instanceof h.Lv||function Y(Q){return Q&&(0,ce.m)(Q.next)&&(0,ce.m)(Q.error)&&(0,ce.m)(Q.complete)}(Q)&&(0,oe.Nn)(Q)}(Re)?Re:new h.Hp(Re,Je,Dt);return(0,me.x)(()=>{const{operator:we,source:tt}=this;ze.add(we?we.call(ze,tt):tt?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(Re){try{return this._subscribe(Re)}catch(Je){Re.error(Je)}}forEach(Re,Je){return new(Je=De(Je))((Dt,ze)=>{const we=new h.Hp({next:tt=>{try{Re(tt)}catch(ft){ze(ft),we.unsubscribe()}},error:ze,complete:Dt});this.subscribe(we)})}_subscribe(Re){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(Re)}[j.L](){return this}pipe(...Re){return(0,de.U)(Re)(this)}toPromise(Re){return new(Re=De(Re))((Je,Dt)=>{let ze;this.subscribe(we=>ze=we,we=>Dt(we),()=>Je(ze))})}}return Q.create=Xe=>new Q(Xe),Q})();function De(Q){var Xe;return null!==(Xe=null!=Q?Q:re.v.Promise)&&void 0!==Xe?Xe:Promise}},7579:(it,Se,$)=>{"use strict";$.d(Se,{x:()=>me});var h=$(9751),oe=$(727);const de=(0,$(3888).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=$(8737),ce=$(2806);let me=(()=>{class De extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(se){const Q=new ye(this,this);return Q.operator=se,Q}_throwIfClosed(){if(this.closed)throw new de}next(se){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(se)}})}error(se){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=se;const{observers:Q}=this;for(;Q.length;)Q.shift().error(se)}})}complete(){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:se}=this;for(;se.length;)se.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var se;return(null===(se=this.observers)||void 0===se?void 0:se.length)>0}_trySubscribe(se){return this._throwIfClosed(),super._trySubscribe(se)}_subscribe(se){return this._throwIfClosed(),this._checkFinalizedStatuses(se),this._innerSubscribe(se)}_innerSubscribe(se){const{hasError:Q,isStopped:Xe,observers:Re}=this;return Q||Xe?oe.Lc:(this.currentObservers=null,Re.push(se),new oe.w0(()=>{this.currentObservers=null,(0,re.P)(Re,se)}))}_checkFinalizedStatuses(se){const{hasError:Q,thrownError:Xe,isStopped:Re}=this;Q?se.error(Xe):Re&&se.complete()}asObservable(){const se=new h.y;return se.source=this,se}}return De.create=(Y,se)=>new ye(Y,se),De})();class ye extends me{constructor(Y,se){super(),this.destination=Y,this.source=se}next(Y){var se,Q;null===(Q=null===(se=this.destination)||void 0===se?void 0:se.next)||void 0===Q||Q.call(se,Y)}error(Y){var se,Q;null===(Q=null===(se=this.destination)||void 0===se?void 0:se.error)||void 0===Q||Q.call(se,Y)}complete(){var Y,se;null===(se=null===(Y=this.destination)||void 0===Y?void 0:Y.complete)||void 0===se||se.call(Y)}_subscribe(Y){var se,Q;return null!==(Q=null===(se=this.source)||void 0===se?void 0:se.subscribe(Y))&&void 0!==Q?Q:oe.Lc}}},930:(it,Se,$)=>{"use strict";$.d(Se,{Hp:()=>Dt,Lv:()=>Q});var h=$(576),oe=$(727),j=$(2416),de=$(7849),re=$(5032);const ce=De("C",void 0,void 0);function De(Ye,Ce,je){return{kind:Ye,value:Ce,error:je}}var Y=$(3410),se=$(2806);class Q extends oe.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,oe.Nn)(Ce)&&Ce.add(this)):this.destination=ft}static create(Ce,je,gt){return new Dt(Ce,je,gt)}next(Ce){this.isStopped?tt(function ye(Ye){return De("N",Ye,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?tt(function me(Ye){return De("E",void 0,Ye)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?tt(ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Xe=Function.prototype.bind;function Re(Ye,Ce){return Xe.call(Ye,Ce)}class Je{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:je}=this;if(je.next)try{je.next(Ce)}catch(gt){ze(gt)}}error(Ce){const{partialObserver:je}=this;if(je.error)try{je.error(Ce)}catch(gt){ze(gt)}else ze(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(je){ze(je)}}}class Dt extends Q{constructor(Ce,je,gt){let st;if(super(),(0,h.m)(Ce)||!Ce)st={next:null!=Ce?Ce:void 0,error:null!=je?je:void 0,complete:null!=gt?gt:void 0};else{let W;this&&j.v.useDeprecatedNextContext?(W=Object.create(Ce),W.unsubscribe=()=>this.unsubscribe(),st={next:Ce.next&&Re(Ce.next,W),error:Ce.error&&Re(Ce.error,W),complete:Ce.complete&&Re(Ce.complete,W)}):st=Ce}this.destination=new Je(st)}}function ze(Ye){j.v.useDeprecatedSynchronousErrorHandling?(0,se.O)(Ye):(0,de.h)(Ye)}function tt(Ye,Ce){const{onStoppedNotification:je}=j.v;je&&Y.z.setTimeout(()=>je(Ye,Ce))}const ft={closed:!0,next:re.Z,error:function we(Ye){throw Ye},complete:re.Z}},727:(it,Se,$)=>{"use strict";$.d(Se,{Lc:()=>ce,w0:()=>re,Nn:()=>me});var h=$(576);const j=(0,$(3888).d)(De=>function(se){De(this),this.message=se?`${se.length} errors occurred during unsubscription:\n${se.map((Q,Xe)=>`${Xe+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=se});var de=$(8737);class re{constructor(Y){this.initialTeardown=Y,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Y;if(!this.closed){this.closed=!0;const{_parentage:se}=this;if(se)if(this._parentage=null,Array.isArray(se))for(const Re of se)Re.remove(this);else se.remove(this);const{initialTeardown:Q}=this;if((0,h.m)(Q))try{Q()}catch(Re){Y=Re instanceof j?Re.errors:[Re]}const{_finalizers:Xe}=this;if(Xe){this._finalizers=null;for(const Re of Xe)try{ye(Re)}catch(Je){Y=null!=Y?Y:[],Je instanceof j?Y=[...Y,...Je.errors]:Y.push(Je)}}if(Y)throw new j(Y)}}add(Y){var se;if(Y&&Y!==this)if(this.closed)ye(Y);else{if(Y instanceof re){if(Y.closed||Y._hasParent(this))return;Y._addParent(this)}(this._finalizers=null!==(se=this._finalizers)&&void 0!==se?se:[]).push(Y)}}_hasParent(Y){const{_parentage:se}=this;return se===Y||Array.isArray(se)&&se.includes(Y)}_addParent(Y){const{_parentage:se}=this;this._parentage=Array.isArray(se)?(se.push(Y),se):se?[se,Y]:Y}_removeParent(Y){const{_parentage:se}=this;se===Y?this._parentage=null:Array.isArray(se)&&(0,de.P)(se,Y)}remove(Y){const{_finalizers:se}=this;se&&(0,de.P)(se,Y),Y instanceof re&&Y._removeParent(this)}}re.EMPTY=(()=>{const De=new re;return De.closed=!0,De})();const ce=re.EMPTY;function me(De){return De instanceof re||De&&"closed"in De&&(0,h.m)(De.remove)&&(0,h.m)(De.add)&&(0,h.m)(De.unsubscribe)}function ye(De){(0,h.m)(De)?De():De.unsubscribe()}},2416:(it,Se,$)=>{"use strict";$.d(Se,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(it,Se,$)=>{"use strict";$.d(Se,{E:()=>oe});const oe=new($(9751).y)(re=>re.complete())},8996:(it,Se,$)=>{"use strict";$.d(Se,{D:()=>Ce});var h=$(8421),oe=$(5363),j=$(9468),ce=$(9751),ye=$(2202),De=$(576),Y=$(9672);function Q(je,gt){if(!je)throw new Error("Iterable cannot be null");return new ce.y(st=>{(0,Y.f)(st,gt,()=>{const W=je[Symbol.asyncIterator]();(0,Y.f)(st,gt,()=>{W.next().then(V=>{V.done?st.complete():st.next(V.value)})},0,!0)})})}var Xe=$(3670),Re=$(8239),Je=$(1144),Dt=$(6495),ze=$(2206),we=$(4532),tt=$(3260);function Ce(je,gt){return gt?function Ye(je,gt){if(null!=je){if((0,Xe.c)(je))return function de(je,gt){return(0,h.Xf)(je).pipe((0,j.R)(gt),(0,oe.Q)(gt))}(je,gt);if((0,Je.z)(je))return function me(je,gt){return new ce.y(st=>{let W=0;return gt.schedule(function(){W===je.length?st.complete():(st.next(je[W++]),st.closed||this.schedule())})})}(je,gt);if((0,Re.t)(je))return function re(je,gt){return(0,h.Xf)(je).pipe((0,j.R)(gt),(0,oe.Q)(gt))}(je,gt);if((0,ze.D)(je))return Q(je,gt);if((0,Dt.T)(je))return function se(je,gt){return new ce.y(st=>{let W;return(0,Y.f)(st,gt,()=>{W=je[ye.h](),(0,Y.f)(st,gt,()=>{let V,Ie;try{({value:V,done:Ie}=W.next())}catch(nt){return void st.error(nt)}Ie?st.complete():st.next(V)},0,!0)}),()=>(0,De.m)(null==W?void 0:W.return)&&W.return()})}(je,gt);if((0,tt.L)(je))return function ft(je,gt){return Q((0,tt.Q)(je),gt)}(je,gt)}throw(0,we.z)(je)}(je,gt):(0,h.Xf)(je)}},8421:(it,Se,$)=>{"use strict";$.d(Se,{Xf:()=>Xe});var h=$(7582),oe=$(1144),j=$(8239),de=$(9751),re=$(3670),ce=$(2206),me=$(4532),ye=$(6495),De=$(3260),Y=$(576),se=$(7849),Q=$(8822);function Xe(Ye){if(Ye instanceof de.y)return Ye;if(null!=Ye){if((0,re.c)(Ye))return function Re(Ye){return new de.y(Ce=>{const je=Ye[Q.L]();if((0,Y.m)(je.subscribe))return je.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ye);if((0,oe.z)(Ye))return function Je(Ye){return new de.y(Ce=>{for(let je=0;je<Ye.length&&!Ce.closed;je++)Ce.next(Ye[je]);Ce.complete()})}(Ye);if((0,j.t)(Ye))return function Dt(Ye){return new de.y(Ce=>{Ye.then(je=>{Ce.closed||(Ce.next(je),Ce.complete())},je=>Ce.error(je)).then(null,se.h)})}(Ye);if((0,ce.D)(Ye))return we(Ye);if((0,ye.T)(Ye))return function ze(Ye){return new de.y(Ce=>{for(const je of Ye)if(Ce.next(je),Ce.closed)return;Ce.complete()})}(Ye);if((0,De.L)(Ye))return function tt(Ye){return we((0,De.Q)(Ye))}(Ye)}throw(0,me.z)(Ye)}function we(Ye){return new de.y(Ce=>{(function ft(Ye,Ce){var je,gt,st,W;return(0,h.mG)(this,void 0,void 0,function*(){try{for(je=(0,h.KL)(Ye);!(gt=yield je.next()).done;)if(Ce.next(gt.value),Ce.closed)return}catch(V){st={error:V}}finally{try{gt&&!gt.done&&(W=je.return)&&(yield W.call(je))}finally{if(st)throw st.error}}Ce.complete()})})(Ye,Ce).catch(je=>Ce.error(je))})}},6451:(it,Se,$)=>{"use strict";$.d(Se,{T:()=>ce});var h=$(8189),oe=$(8421),j=$(515),de=$(3269),re=$(8996);function ce(...me){const ye=(0,de.yG)(me),De=(0,de._6)(me,1/0),Y=me;return Y.length?1===Y.length?(0,oe.Xf)(Y[0]):(0,h.J)(De)((0,re.D)(Y,ye)):j.E}},5403:(it,Se,$)=>{"use strict";$.d(Se,{x:()=>oe});var h=$(930);function oe(de,re,ce,me,ye){return new j(de,re,ce,me,ye)}class j extends h.Lv{constructor(re,ce,me,ye,De,Y){super(re),this.onFinalize=De,this.shouldUnsubscribe=Y,this._next=ce?function(se){try{ce(se)}catch(Q){re.error(Q)}}:super._next,this._error=ye?function(se){try{ye(se)}catch(Q){re.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(se){re.error(se)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ce}=this;super.unsubscribe(),!ce&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(it,Se,$)=>{"use strict";$.d(Se,{U:()=>j});var h=$(4482),oe=$(5403);function j(de,re){return(0,h.e)((ce,me)=>{let ye=0;ce.subscribe((0,oe.x)(me,De=>{me.next(de.call(re,De,ye++))}))})}},8189:(it,Se,$)=>{"use strict";$.d(Se,{J:()=>j});var h=$(5577),oe=$(4671);function j(de=1/0){return(0,h.z)(oe.y,de)}},5577:(it,Se,$)=>{"use strict";$.d(Se,{z:()=>ye});var h=$(4004),oe=$(8421),j=$(4482),de=$(9672),re=$(5403),me=$(576);function ye(De,Y,se=1/0){return(0,me.m)(Y)?ye((Q,Xe)=>(0,h.U)((Re,Je)=>Y(Q,Re,Xe,Je))((0,oe.Xf)(De(Q,Xe))),se):("number"==typeof Y&&(se=Y),(0,j.e)((Q,Xe)=>function ce(De,Y,se,Q,Xe,Re,Je,Dt){const ze=[];let we=0,tt=0,ft=!1;const Ye=()=>{ft&&!ze.length&&!we&&Y.complete()},Ce=gt=>we<Q?je(gt):ze.push(gt),je=gt=>{Re&&Y.next(gt),we++;let st=!1;(0,oe.Xf)(se(gt,tt++)).subscribe((0,re.x)(Y,W=>{null==Xe||Xe(W),Re?Ce(W):Y.next(W)},()=>{st=!0},void 0,()=>{if(st)try{for(we--;ze.length&&we<Q;){const W=ze.shift();Je?(0,de.f)(Y,Je,()=>je(W)):je(W)}Ye()}catch(W){Y.error(W)}}))};return De.subscribe((0,re.x)(Y,Ce,()=>{ft=!0,Ye()})),()=>{null==Dt||Dt()}}(Q,Xe,De,se)))}},5363:(it,Se,$)=>{"use strict";$.d(Se,{Q:()=>de});var h=$(9672),oe=$(4482),j=$(5403);function de(re,ce=0){return(0,oe.e)((me,ye)=>{me.subscribe((0,j.x)(ye,De=>(0,h.f)(ye,re,()=>ye.next(De),ce),()=>(0,h.f)(ye,re,()=>ye.complete(),ce),De=>(0,h.f)(ye,re,()=>ye.error(De),ce)))})}},3099:(it,Se,$)=>{"use strict";$.d(Se,{B:()=>re});var h=$(8421),oe=$(7579),j=$(930),de=$(4482);function re(me={}){const{connector:ye=(()=>new oe.x),resetOnError:De=!0,resetOnComplete:Y=!0,resetOnRefCountZero:se=!0}=me;return Q=>{let Xe,Re,Je,Dt=0,ze=!1,we=!1;const tt=()=>{null==Re||Re.unsubscribe(),Re=void 0},ft=()=>{tt(),Xe=Je=void 0,ze=we=!1},Ye=()=>{const Ce=Xe;ft(),null==Ce||Ce.unsubscribe()};return(0,de.e)((Ce,je)=>{Dt++,!we&&!ze&&tt();const gt=Je=null!=Je?Je:ye();je.add(()=>{Dt--,0===Dt&&!we&&!ze&&(Re=ce(Ye,se))}),gt.subscribe(je),!Xe&&Dt>0&&(Xe=new j.Hp({next:st=>gt.next(st),error:st=>{we=!0,tt(),Re=ce(ft,De,st),gt.error(st)},complete:()=>{ze=!0,tt(),Re=ce(ft,Y),gt.complete()}}),(0,h.Xf)(Ce).subscribe(Xe))})(Q)}}function ce(me,ye,...De){if(!0===ye)return void me();if(!1===ye)return;const Y=new j.Hp({next:()=>{Y.unsubscribe(),me()}});return ye(...De).subscribe(Y)}},9468:(it,Se,$)=>{"use strict";$.d(Se,{R:()=>oe});var h=$(4482);function oe(j,de=0){return(0,h.e)((re,ce)=>{ce.add(j.schedule(()=>re.subscribe(ce),de))})}},8505:(it,Se,$)=>{"use strict";$.d(Se,{b:()=>re});var h=$(576),oe=$(4482),j=$(5403),de=$(4671);function re(ce,me,ye){const De=(0,h.m)(ce)||me||ye?{next:ce,error:me,complete:ye}:ce;return De?(0,oe.e)((Y,se)=>{var Q;null===(Q=De.subscribe)||void 0===Q||Q.call(De);let Xe=!0;Y.subscribe((0,j.x)(se,Re=>{var Je;null===(Je=De.next)||void 0===Je||Je.call(De,Re),se.next(Re)},()=>{var Re;Xe=!1,null===(Re=De.complete)||void 0===Re||Re.call(De),se.complete()},Re=>{var Je;Xe=!1,null===(Je=De.error)||void 0===Je||Je.call(De,Re),se.error(Re)},()=>{var Re,Je;Xe&&(null===(Re=De.unsubscribe)||void 0===Re||Re.call(De)),null===(Je=De.finalize)||void 0===Je||Je.call(De)}))}):de.y}},4408:(it,Se,$)=>{"use strict";$.d(Se,{o:()=>re});var h=$(727);class oe extends h.w0{constructor(me,ye){super()}schedule(me,ye=0){return this}}const j={setInterval(ce,me,...ye){const{delegate:De}=j;return(null==De?void 0:De.setInterval)?De.setInterval(ce,me,...ye):setInterval(ce,me,...ye)},clearInterval(ce){const{delegate:me}=j;return((null==me?void 0:me.clearInterval)||clearInterval)(ce)},delegate:void 0};var de=$(8737);class re extends oe{constructor(me,ye){super(me,ye),this.scheduler=me,this.work=ye,this.pending=!1}schedule(me,ye=0){var De;if(this.closed)return this;this.state=me;const Y=this.id,se=this.scheduler;return null!=Y&&(this.id=this.recycleAsyncId(se,Y,ye)),this.pending=!0,this.delay=ye,this.id=null!==(De=this.id)&&void 0!==De?De:this.requestAsyncId(se,this.id,ye),this}requestAsyncId(me,ye,De=0){return j.setInterval(me.flush.bind(me,this),De)}recycleAsyncId(me,ye,De=0){if(null!=De&&this.delay===De&&!1===this.pending)return ye;null!=ye&&j.clearInterval(ye)}execute(me,ye){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const De=this._execute(me,ye);if(De)return De;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,ye){let Y,De=!1;try{this.work(me)}catch(se){De=!0,Y=se||new Error("Scheduled action threw falsy error")}if(De)return this.unsubscribe(),Y}unsubscribe(){if(!this.closed){const{id:me,scheduler:ye}=this,{actions:De}=ye;this.work=this.state=this.scheduler=null,this.pending=!1,(0,de.P)(De,this),null!=me&&(this.id=this.recycleAsyncId(ye,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(it,Se,$)=>{"use strict";$.d(Se,{v:()=>j});var h=$(6063);class oe{constructor(re,ce=oe.now){this.schedulerActionCtor=re,this.now=ce}schedule(re,ce=0,me){return new this.schedulerActionCtor(this,re).schedule(me,ce)}}oe.now=h.l.now;class j extends oe{constructor(re,ce=oe.now){super(re,ce),this.actions=[],this._active=!1}flush(re){const{actions:ce}=this;if(this._active)return void ce.push(re);let me;this._active=!0;do{if(me=re.execute(re.state,re.delay))break}while(re=ce.shift());if(this._active=!1,me){for(;re=ce.shift();)re.unsubscribe();throw me}}}},4986:(it,Se,$)=>{"use strict";$.d(Se,{P:()=>de,z:()=>j});var h=$(4408);const j=new($(7565).v)(h.o),de=j},6063:(it,Se,$)=>{"use strict";$.d(Se,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(it,Se,$)=>{"use strict";$.d(Se,{z:()=>h});const h={setTimeout(oe,j,...de){const{delegate:re}=h;return(null==re?void 0:re.setTimeout)?re.setTimeout(oe,j,...de):setTimeout(oe,j,...de)},clearTimeout(oe){const{delegate:j}=h;return((null==j?void 0:j.clearTimeout)||clearTimeout)(oe)},delegate:void 0}},2202:(it,Se,$)=>{"use strict";$.d(Se,{h:()=>oe});const oe=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(it,Se,$)=>{"use strict";$.d(Se,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(it,Se,$)=>{"use strict";$.d(Se,{_6:()=>ce,jO:()=>de,yG:()=>re});var h=$(576),oe=$(3532);function j(me){return me[me.length-1]}function de(me){return(0,h.m)(j(me))?me.pop():void 0}function re(me){return(0,oe.K)(j(me))?me.pop():void 0}function ce(me,ye){return"number"==typeof j(me)?me.pop():ye}},8737:(it,Se,$)=>{"use strict";function h(oe,j){if(oe){const de=oe.indexOf(j);0<=de&&oe.splice(de,1)}}$.d(Se,{P:()=>h})},3888:(it,Se,$)=>{"use strict";function h(oe){const de=oe(re=>{Error.call(re),re.stack=(new Error).stack});return de.prototype=Object.create(Error.prototype),de.prototype.constructor=de,de}$.d(Se,{d:()=>h})},2806:(it,Se,$)=>{"use strict";$.d(Se,{O:()=>de,x:()=>j});var h=$(2416);let oe=null;function j(re){if(h.v.useDeprecatedSynchronousErrorHandling){const ce=!oe;if(ce&&(oe={errorThrown:!1,error:null}),re(),ce){const{errorThrown:me,error:ye}=oe;if(oe=null,me)throw ye}}else re()}function de(re){h.v.useDeprecatedSynchronousErrorHandling&&oe&&(oe.errorThrown=!0,oe.error=re)}},9672:(it,Se,$)=>{"use strict";function h(oe,j,de,re=0,ce=!1){const me=j.schedule(function(){de(),ce?oe.add(this.schedule(null,re)):this.unsubscribe()},re);if(oe.add(me),!ce)return me}$.d(Se,{f:()=>h})},4671:(it,Se,$)=>{"use strict";function h(oe){return oe}$.d(Se,{y:()=>h})},1144:(it,Se,$)=>{"use strict";$.d(Se,{z:()=>h});const h=oe=>oe&&"number"==typeof oe.length&&"function"!=typeof oe},2206:(it,Se,$)=>{"use strict";$.d(Se,{D:()=>oe});var h=$(576);function oe(j){return Symbol.asyncIterator&&(0,h.m)(null==j?void 0:j[Symbol.asyncIterator])}},576:(it,Se,$)=>{"use strict";function h(oe){return"function"==typeof oe}$.d(Se,{m:()=>h})},3670:(it,Se,$)=>{"use strict";$.d(Se,{c:()=>j});var h=$(8822),oe=$(576);function j(de){return(0,oe.m)(de[h.L])}},6495:(it,Se,$)=>{"use strict";$.d(Se,{T:()=>j});var h=$(2202),oe=$(576);function j(de){return(0,oe.m)(null==de?void 0:de[h.h])}},8239:(it,Se,$)=>{"use strict";$.d(Se,{t:()=>oe});var h=$(576);function oe(j){return(0,h.m)(null==j?void 0:j.then)}},3260:(it,Se,$)=>{"use strict";$.d(Se,{L:()=>de,Q:()=>j});var h=$(7582),oe=$(576);function j(re){return(0,h.FC)(this,arguments,function*(){const me=re.getReader();try{for(;;){const{value:ye,done:De}=yield(0,h.qq)(me.read());if(De)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(ye)}}finally{me.releaseLock()}})}function de(re){return(0,oe.m)(null==re?void 0:re.getReader)}},3532:(it,Se,$)=>{"use strict";$.d(Se,{K:()=>oe});var h=$(576);function oe(j){return j&&(0,h.m)(j.schedule)}},4482:(it,Se,$)=>{"use strict";$.d(Se,{A:()=>oe,e:()=>j});var h=$(576);function oe(de){return(0,h.m)(null==de?void 0:de.lift)}function j(de){return re=>{if(oe(re))return re.lift(function(ce){try{return de(ce,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(it,Se,$)=>{"use strict";function h(){}$.d(Se,{Z:()=>h})},9635:(it,Se,$)=>{"use strict";$.d(Se,{U:()=>j,z:()=>oe});var h=$(4671);function oe(...de){return j(de)}function j(de){return 0===de.length?h.y:1===de.length?de[0]:function(ce){return de.reduce((me,ye)=>ye(me),ce)}}},7849:(it,Se,$)=>{"use strict";$.d(Se,{h:()=>j});var h=$(2416),oe=$(3410);function j(de){oe.z.setTimeout(()=>{const{onUnhandledError:re}=h.v;if(!re)throw de;re(de)})}},4532:(it,Se,$)=>{"use strict";function h(oe){return new TypeError(`You provided ${null!==oe&&"object"==typeof oe?"an invalid object":`'${oe}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}$.d(Se,{z:()=>h})},8099:it=>{it.exports=function Se($,h){var oe,j=null;try{oe=JSON.parse($,h)}catch(de){j=de}return[j,oe]}},3871:function(it){var $,h,oe,j,de;$=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,h=/^(?=([^\/?#]*))\1([^]*)$/,oe=/(?:\/|^)\.(?=\/)/g,j=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,it.exports=de={buildAbsoluteURL:function(re,ce,me){if(me=me||{},re=re.trim(),!(ce=ce.trim())){if(!me.alwaysNormalize)return re;var ye=de.parseURL(re);if(!ye)throw new Error("Error trying to parse base URL.");return ye.path=de.normalizePath(ye.path),de.buildURLFromParts(ye)}var De=de.parseURL(ce);if(!De)throw new Error("Error trying to parse relative URL.");if(De.scheme)return me.alwaysNormalize?(De.path=de.normalizePath(De.path),de.buildURLFromParts(De)):ce;var Y=de.parseURL(re);if(!Y)throw new Error("Error trying to parse base URL.");if(!Y.netLoc&&Y.path&&"/"!==Y.path[0]){var se=h.exec(Y.path);Y.netLoc=se[1],Y.path=se[2]}Y.netLoc&&!Y.path&&(Y.path="/");var Q={scheme:Y.scheme,netLoc:De.netLoc,path:null,params:De.params,query:De.query,fragment:De.fragment};if(!De.netLoc&&(Q.netLoc=Y.netLoc,"/"!==De.path[0]))if(De.path){var Xe=Y.path,Re=Xe.substring(0,Xe.lastIndexOf("/")+1)+De.path;Q.path=de.normalizePath(Re)}else Q.path=Y.path,De.params||(Q.params=Y.params,De.query||(Q.query=Y.query));return null===Q.path&&(Q.path=me.alwaysNormalize?de.normalizePath(De.path):De.path),de.buildURLFromParts(Q)},parseURL:function(re){var ce=$.exec(re);return ce?{scheme:ce[1]||"",netLoc:ce[2]||"",path:ce[3]||"",params:ce[4]||"",query:ce[5]||"",fragment:ce[6]||""}:null},normalizePath:function(re){for(re=re.split("").reverse().join("").replace(oe,"");re.length!==(re=re.replace(j,"")).length;);return re.split("").reverse().join("")},buildURLFromParts:function(re){return re.scheme+re.netLoc+re.path+re.params+re.query+re.fragment}}},3629:(it,Se,$)=>{var h=$(9226),oe=it.exports={WebVTT:$(8318),VTTCue:$(5713),VTTRegion:$(3872)};h.vttjs=oe,h.WebVTT=oe.WebVTT;var j=oe.VTTCue,de=oe.VTTRegion,re=h.VTTCue,ce=h.VTTRegion;oe.shim=function(){h.VTTCue=j,h.VTTRegion=de},oe.restore=function(){h.VTTCue=re,h.VTTRegion=ce},h.VTTCue||oe.shim()},8318:(it,Se,$)=>{var h=$(1421),oe=Object.create||function(){function W(){}return function(V){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return W.prototype=V,new W}}();function j(W,V){this.name="ParsingError",this.code=W.code,this.message=V||W.message}function de(W){function V(nt,We,mt,he){return 3600*(0|nt)+60*(0|We)+(0|mt)+(0|he)/1e3}var Ie=W.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return Ie?Ie[3]?V(Ie[1],Ie[2],Ie[3].replace(":",""),Ie[4]):Ie[1]>59?V(Ie[1],Ie[2],0,Ie[4]):V(0,Ie[1],Ie[2],Ie[4]):null}function re(){this.values=oe(null)}function ce(W,V,Ie,nt){var We=nt?W.split(nt):[W];for(var mt in We)if("string"==typeof We[mt]){var he=We[mt].split(Ie);2===he.length&&V(he[0].trim(),he[1].trim())}}function me(W,V,Ie){var nt=W;function We(){var Fe=de(W);if(null===Fe)throw new j(j.Errors.BadTimeStamp,"Malformed timestamp: "+nt);return W=W.replace(/^[^\sa-zA-Z-]+/,""),Fe}function he(){W=W.replace(/^\s+/,"")}if(he(),V.startTime=We(),he(),"--\x3e"!==W.substr(0,3))throw new j(j.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+nt);W=W.substr(3),he(),V.endTime=We(),he(),function mt(Fe,qe){var rt=new re;ce(Fe,function(Z,ne){switch(Z){case"region":for(var Pe=Ie.length-1;Pe>=0;Pe--)if(Ie[Pe].id===ne){rt.set(Z,Ie[Pe].region);break}break;case"vertical":rt.alt(Z,ne,["rl","lr"]);break;case"line":var Ve=ne.split(","),Oe=Ve[0];rt.integer(Z,Oe),rt.percent(Z,Oe)&&rt.set("snapToLines",!1),rt.alt(Z,Oe,["auto"]),2===Ve.length&&rt.alt("lineAlign",Ve[1],["start","center","end"]);break;case"position":Ve=ne.split(","),rt.percent(Z,Ve[0]),2===Ve.length&&rt.alt("positionAlign",Ve[1],["start","center","end"]);break;case"size":rt.percent(Z,ne);break;case"align":rt.alt(Z,ne,["start","center","end","left","right"])}},/:/,/\s/),qe.region=rt.get("region",null),qe.vertical=rt.get("vertical","");try{qe.line=rt.get("line","auto")}catch(Z){}qe.lineAlign=rt.get("lineAlign","start"),qe.snapToLines=rt.get("snapToLines",!0),qe.size=rt.get("size",100);try{qe.align=rt.get("align","center")}catch(Z){qe.align=rt.get("align","middle")}try{qe.position=rt.get("position","auto")}catch(Z){qe.position=rt.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},qe.align)}qe.positionAlign=rt.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},qe.align)}(W,V)}(j.prototype=oe(Error.prototype)).constructor=j,j.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},re.prototype={set:function(W,V){!this.get(W)&&""!==V&&(this.values[W]=V)},get:function(W,V,Ie){return Ie?this.has(W)?this.values[W]:V[Ie]:this.has(W)?this.values[W]:V},has:function(W){return W in this.values},alt:function(W,V,Ie){for(var nt=0;nt<Ie.length;++nt)if(V===Ie[nt]){this.set(W,V);break}},integer:function(W,V){/^-?\d+$/.test(V)&&this.set(W,parseInt(V,10))},percent:function(W,V){return!!(V.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(V=parseFloat(V),V>=0&&V<=100))&&(this.set(W,V),!0)}};var ye=h.createElement&&h.createElement("textarea"),De={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Y={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},se={v:"title",lang:"lang"},Q={rt:"ruby"};function Xe(W,V){function Ie(){if(!V)return null;var ve=V.match(/^([^<]*)(<[^>]*>?)?/);return function Oe(ut){return V=V.substr(ut.length),ut}(ve[1]?ve[1]:ve[2])}function nt(Oe){return ye.innerHTML=Oe,Oe=ye.textContent,ye.textContent="",Oe}function mt(Oe,ve){var ut=De[Oe];if(!ut)return null;var Ot=W.document.createElement(ut),zt=se[Oe];return zt&&ve&&(Ot[zt]=ve.trim()),Ot}for(var qe,he=W.document.createElement("div"),Fe=he,rt=[];null!==(qe=Ie());)if("<"!==qe[0])Fe.appendChild(W.document.createTextNode(nt(qe)));else{if("/"===qe[1]){rt.length&&rt[rt.length-1]===qe.substr(2).replace(">","")&&(rt.pop(),Fe=Fe.parentNode);continue}var ne,Z=de(qe.substr(1,qe.length-2));if(Z){ne=W.document.createProcessingInstruction("timestamp",Z),Fe.appendChild(ne);continue}var Pe=qe.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!Pe||!(ne=mt(Pe[1],Pe[3]))||Q[(ve=ne).localName]&&Q[ve.localName]!==Fe.localName)continue;if(Pe[2]){var Ve=Pe[2].split(".");Ve.forEach(function(Oe){var ve=/^bg_/.test(Oe),ut=ve?Oe.slice(3):Oe;Y.hasOwnProperty(ut)&&(ne.style[ve?"background-color":"color"]=Y[ut])}),ne.className=Ve.join(" ")}rt.push(Pe[1]),Fe.appendChild(ne),Fe=ne}var ve;return he}var Re=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Je(W){for(var V=0;V<Re.length;V++){var Ie=Re[V];if(W>=Ie[0]&&W<=Ie[1])return!0}return!1}function Dt(W){var V=[],Ie="";if(!W||!W.childNodes)return"ltr";function We(Fe,qe){for(var rt=qe.childNodes.length-1;rt>=0;rt--)Fe.push(qe.childNodes[rt])}function mt(Fe){if(!Fe||!Fe.length)return null;var qe=Fe.pop(),rt=qe.textContent||qe.innerText;if(rt){var Z=rt.match(/^.*(\n|\r)/);return Z?(Fe.length=0,Z[0]):rt}return"ruby"===qe.tagName?mt(Fe):qe.childNodes?(We(Fe,qe),mt(Fe)):void 0}for(We(V,W);Ie=mt(V);)for(var he=0;he<Ie.length;he++)if(Je(Ie.charCodeAt(he)))return"rtl";return"ltr"}function we(){}function tt(W,V,Ie){we.call(this),this.cue=V,this.cueDiv=Xe(W,V.text);var nt={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===V.vertical?"horizontal-tb":"lr"===V.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(nt,this.cueDiv),this.div=W.document.createElement("div"),nt={direction:Dt(this.cueDiv),writingMode:""===V.vertical?"horizontal-tb":"lr"===V.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===V.align?"center":V.align,font:Ie.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(nt),this.div.appendChild(this.cueDiv);var We=0;switch(V.positionAlign){case"start":case"line-left":We=V.position;break;case"center":We=V.position-V.size/2;break;case"end":case"line-right":We=V.position-V.size}this.applyStyles(""===V.vertical?{left:this.formatStyle(We,"%"),width:this.formatStyle(V.size,"%")}:{top:this.formatStyle(We,"%"),height:this.formatStyle(V.size,"%")}),this.move=function(mt){this.applyStyles({top:this.formatStyle(mt.top,"px"),bottom:this.formatStyle(mt.bottom,"px"),left:this.formatStyle(mt.left,"px"),right:this.formatStyle(mt.right,"px"),height:this.formatStyle(mt.height,"px"),width:this.formatStyle(mt.width,"px")})}}function ft(W){var V,Ie,nt,We;if(W.div){Ie=W.div.offsetHeight,nt=W.div.offsetWidth,We=W.div.offsetTop;var mt=(mt=W.div.childNodes)&&(mt=mt[0])&&mt.getClientRects&&mt.getClientRects();W=W.div.getBoundingClientRect(),V=mt?Math.max(mt[0]&&mt[0].height||0,W.height/mt.length):0}this.left=W.left,this.right=W.right,this.top=W.top||We,this.height=W.height||Ie,this.bottom=W.bottom||We+(W.height||Ie),this.width=W.width||nt,this.lineHeight=void 0!==V?V:W.lineHeight}function Ye(W,V,Ie,nt){var mt=new ft(V),he=V.cue,Fe=function ze(W){if("number"==typeof W.line&&(W.snapToLines||W.line>=0&&W.line<=100))return W.line;if(!W.track||!W.track.textTrackList||!W.track.textTrackList.mediaElement)return-1;for(var V=W.track,Ie=V.textTrackList,nt=0,We=0;We<Ie.length&&Ie[We]!==V;We++)"showing"===Ie[We].mode&&nt++;return-1*++nt}(he),qe=[];if(he.snapToLines){var rt;switch(he.vertical){case"":qe=["+y","-y"],rt="height";break;case"rl":qe=["+x","-x"],rt="width";break;case"lr":qe=["-x","+x"],rt="width"}var Z=mt.lineHeight,ne=Z*Math.round(Fe),Pe=Ie[rt]+Z,Ve=qe[0];Math.abs(ne)>Pe&&(ne=ne<0?-1:1,ne*=Math.ceil(Pe/Z)*Z),Fe<0&&(ne+=""===he.vertical?Ie.height:Ie.width,qe=qe.reverse()),mt.move(Ve,ne)}else{var Oe=mt.lineHeight/Ie.height*100;switch(he.lineAlign){case"center":Fe-=Oe/2;break;case"end":Fe-=Oe}switch(he.vertical){case"":V.applyStyles({top:V.formatStyle(Fe,"%")});break;case"rl":V.applyStyles({left:V.formatStyle(Fe,"%")});break;case"lr":V.applyStyles({right:V.formatStyle(Fe,"%")})}qe=["+y","-x","+x","-y"],mt=new ft(V)}var ve=function We(ut,Ot){for(var zt,kt=new ft(ut),ln=1,$n=0;$n<Ot.length;$n++){for(;ut.overlapsOppositeAxis(Ie,Ot[$n])||ut.within(Ie)&&ut.overlapsAny(nt);)ut.move(Ot[$n]);if(ut.within(Ie))return ut;var zn=ut.intersectPercentage(Ie);ln>zn&&(zt=new ft(ut),ln=zn),ut=new ft(kt)}return zt||kt}(mt,qe);V.move(ve.toCSSCompatValues(Ie))}function Ce(){}we.prototype.applyStyles=function(W,V){for(var Ie in V=V||this.div,W)W.hasOwnProperty(Ie)&&(V.style[Ie]=W[Ie])},we.prototype.formatStyle=function(W,V){return 0===W?0:W+V},(tt.prototype=oe(we.prototype)).constructor=tt,ft.prototype.move=function(W,V){switch(V=void 0!==V?V:this.lineHeight,W){case"+x":this.left+=V,this.right+=V;break;case"-x":this.left-=V,this.right-=V;break;case"+y":this.top+=V,this.bottom+=V;break;case"-y":this.top-=V,this.bottom-=V}},ft.prototype.overlaps=function(W){return this.left<W.right&&this.right>W.left&&this.top<W.bottom&&this.bottom>W.top},ft.prototype.overlapsAny=function(W){for(var V=0;V<W.length;V++)if(this.overlaps(W[V]))return!0;return!1},ft.prototype.within=function(W){return this.top>=W.top&&this.bottom<=W.bottom&&this.left>=W.left&&this.right<=W.right},ft.prototype.overlapsOppositeAxis=function(W,V){switch(V){case"+x":return this.left<W.left;case"-x":return this.right>W.right;case"+y":return this.top<W.top;case"-y":return this.bottom>W.bottom}},ft.prototype.intersectPercentage=function(W){return Math.max(0,Math.min(this.right,W.right)-Math.max(this.left,W.left))*Math.max(0,Math.min(this.bottom,W.bottom)-Math.max(this.top,W.top))/(this.height*this.width)},ft.prototype.toCSSCompatValues=function(W){return{top:this.top-W.top,bottom:W.bottom-this.bottom,left:this.left-W.left,right:W.right-this.right,height:this.height,width:this.width}},ft.getSimpleBoxPosition=function(W){var V=W.div?W.div.offsetHeight:W.tagName?W.offsetHeight:0,Ie=W.div?W.div.offsetWidth:W.tagName?W.offsetWidth:0,nt=W.div?W.div.offsetTop:W.tagName?W.offsetTop:0;return{left:(W=W.div?W.div.getBoundingClientRect():W.tagName?W.getBoundingClientRect():W).left,right:W.right,top:W.top||nt,height:W.height||V,bottom:W.bottom||nt+(W.height||V),width:W.width||Ie}},Ce.StringDecoder=function(){return{decode:function(W){if(!W)return"";if("string"!=typeof W)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(W))}}},Ce.convertCueToDOMTree=function(W,V){return W&&V?Xe(W,V):null},Ce.processCues=function(W,V,Ie){if(!W||!V||!Ie)return null;for(;Ie.firstChild;)Ie.removeChild(Ie.firstChild);var nt=W.document.createElement("div");if(nt.style.position="absolute",nt.style.left="0",nt.style.right="0",nt.style.top="0",nt.style.bottom="0",nt.style.margin="1.5%",Ie.appendChild(nt),function We(Z){for(var ne=0;ne<Z.length;ne++)if(Z[ne].hasBeenReset||!Z[ne].displayState)return!0;return!1}(V)){var he=[],Fe=ft.getSimpleBoxPosition(nt),rt={font:Math.round(.05*Fe.height*100)/100+"px sans-serif"};!function(){for(var Z,ne,Pe=0;Pe<V.length;Pe++)Z=new tt(W,ne=V[Pe],rt),nt.appendChild(Z.div),Ye(0,Z,Fe,he),ne.displayState=Z.div,he.push(ft.getSimpleBoxPosition(Z))}()}else for(var mt=0;mt<V.length;mt++)nt.appendChild(V[mt].displayState)},(Ce.Parser=function(W,V,Ie){Ie||(Ie=V,V={}),V||(V={}),this.window=W,this.vttjs=V,this.state="INITIAL",this.buffer="",this.decoder=Ie||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(W){if(!(W instanceof j))throw W;this.onparsingerror&&this.onparsingerror(W)},parse:function(W){var Z,V=this;function Ie(){for(var Z=V.buffer,ne=0;ne<Z.length&&"\r"!==Z[ne]&&"\n"!==Z[ne];)++ne;var Pe=Z.substr(0,ne);return"\r"===Z[ne]&&++ne,"\n"===Z[ne]&&++ne,V.buffer=Z.substr(ne),Pe}W&&(V.buffer+=V.decoder.decode(W,{stream:!0}));try{var he;if("INITIAL"===V.state){if(!/\r\n|\n/.test(V.buffer))return this;var Fe=(he=Ie()).match(/^WEBVTT([ \t].*)?$/);if(!Fe||!Fe[0])throw new j(j.Errors.BadSignature);V.state="HEADER"}for(var qe=!1;V.buffer;){if(!/\r\n|\n/.test(V.buffer))return this;switch(qe?qe=!1:he=Ie(),V.state){case"HEADER":/:/.test(he)?(Z=he).match(/X-TIMESTAMP-MAP/)?ce(Z,function(ne,Pe){"X-TIMESTAMP-MAP"===ne&&function We(Z){var ne=new re;ce(Z,function(Pe,Ve){switch(Pe){case"MPEGT":ne.integer(Pe+"S",Ve);break;case"LOCA":ne.set(Pe+"L",de(Ve))}},/[^\d]:/,/,/),V.ontimestampmap&&V.ontimestampmap({MPEGTS:ne.get("MPEGTS"),LOCAL:ne.get("LOCAL")})}(Pe)},/=/):ce(Z,function(ne,Pe){"Region"===ne&&function nt(Z){var ne=new re;if(ce(Z,function(Ve,Oe){switch(Ve){case"id":ne.set(Ve,Oe);break;case"width":ne.percent(Ve,Oe);break;case"lines":ne.integer(Ve,Oe);break;case"regionanchor":case"viewportanchor":var ve=Oe.split(",");if(2!==ve.length)break;var ut=new re;if(ut.percent("x",ve[0]),ut.percent("y",ve[1]),!ut.has("x")||!ut.has("y"))break;ne.set(Ve+"X",ut.get("x")),ne.set(Ve+"Y",ut.get("y"));break;case"scroll":ne.alt(Ve,Oe,["up"])}},/=/,/\s/),ne.has("id")){var Pe=new(V.vttjs.VTTRegion||V.window.VTTRegion);Pe.width=ne.get("width",100),Pe.lines=ne.get("lines",3),Pe.regionAnchorX=ne.get("regionanchorX",0),Pe.regionAnchorY=ne.get("regionanchorY",100),Pe.viewportAnchorX=ne.get("viewportanchorX",0),Pe.viewportAnchorY=ne.get("viewportanchorY",100),Pe.scroll=ne.get("scroll",""),V.onregion&&V.onregion(Pe),V.regionList.push({id:ne.get("id"),region:Pe})}}(Pe)},/:/):he||(V.state="ID");continue;case"NOTE":he||(V.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(he)){V.state="NOTE";break}if(!he)continue;V.cue=new(V.vttjs.VTTCue||V.window.VTTCue)(0,0,"");try{V.cue.align="center"}catch(Z){V.cue.align="middle"}if(V.state="CUE",-1===he.indexOf("--\x3e")){V.cue.id=he;continue}case"CUE":try{me(he,V.cue,V.regionList)}catch(Z){V.reportOrThrowError(Z),V.cue=null,V.state="BADCUE";continue}V.state="CUETEXT";continue;case"CUETEXT":var rt=-1!==he.indexOf("--\x3e");if(!he||rt&&(qe=!0)){V.oncue&&V.oncue(V.cue),V.cue=null,V.state="ID";continue}V.cue.text&&(V.cue.text+="\n"),V.cue.text+=he.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":he||(V.state="ID");continue}}}catch(Z){V.reportOrThrowError(Z),"CUETEXT"===V.state&&V.cue&&V.oncue&&V.oncue(V.cue),V.cue=null,V.state="INITIAL"===V.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var W=this;try{if(W.buffer+=W.decoder.decode(),(W.cue||"HEADER"===W.state)&&(W.buffer+="\n\n",W.parse()),"INITIAL"===W.state)throw new j(j.Errors.BadSignature)}catch(V){W.reportOrThrowError(V)}return W.onflush&&W.onflush(),this}},it.exports=Ce},5713:it=>{var $={"":1,lr:1,rl:1},h={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function j(re){return"string"==typeof re&&!!h[re.toLowerCase()]&&re.toLowerCase()}function de(re,ce,me){this.hasBeenReset=!1;var ye="",De=!1,Y=re,se=ce,Q=me,Xe=null,Re="",Je=!0,Dt="auto",ze="start",we="auto",tt="auto",ft=100,Ye="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return ye},set:function(Ce){ye=""+Ce}},pauseOnExit:{enumerable:!0,get:function(){return De},set:function(Ce){De=!!Ce}},startTime:{enumerable:!0,get:function(){return Y},set:function(Ce){if("number"!=typeof Ce)throw new TypeError("Start time must be set to a number.");Y=Ce,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return se},set:function(Ce){if("number"!=typeof Ce)throw new TypeError("End time must be set to a number.");se=Ce,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return Q},set:function(Ce){Q=""+Ce,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return Xe},set:function(Ce){Xe=Ce,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return Re},set:function(Ce){var je=function oe(re){return"string"==typeof re&&!!$[re.toLowerCase()]&&re.toLowerCase()}(Ce);if(!1===je)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");Re=je,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return Je},set:function(Ce){Je=!!Ce,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return Dt},set:function(Ce){if("number"!=typeof Ce&&"auto"!==Ce)throw new SyntaxError("Line: an invalid number or illegal string was specified.");Dt=Ce,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return ze},set:function(Ce){var je=j(Ce);je?(ze=je,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return we},set:function(Ce){if(Ce<0||Ce>100)throw new Error("Position must be between 0 and 100.");we=Ce,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return tt},set:function(Ce){var je=j(Ce);je?(tt=je,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return ft},set:function(Ce){if(Ce<0||Ce>100)throw new Error("Size must be between 0 and 100.");ft=Ce,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return Ye},set:function(Ce){var je=j(Ce);if(!je)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");Ye=je,this.hasBeenReset=!0}}}),this.displayState=void 0}de.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},it.exports=de},3872:it=>{var Se={"":!0,up:!0};function h(j){return"number"==typeof j&&j>=0&&j<=100}it.exports=function oe(){var j=100,de=3,re=0,ce=100,me=0,ye=100,De="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return j},set:function(Y){if(!h(Y))throw new Error("Width must be between 0 and 100.");j=Y}},lines:{enumerable:!0,get:function(){return de},set:function(Y){if("number"!=typeof Y)throw new TypeError("Lines must be set to a number.");de=Y}},regionAnchorY:{enumerable:!0,get:function(){return ce},set:function(Y){if(!h(Y))throw new Error("RegionAnchorX must be between 0 and 100.");ce=Y}},regionAnchorX:{enumerable:!0,get:function(){return re},set:function(Y){if(!h(Y))throw new Error("RegionAnchorY must be between 0 and 100.");re=Y}},viewportAnchorY:{enumerable:!0,get:function(){return ye},set:function(Y){if(!h(Y))throw new Error("ViewportAnchorY must be between 0 and 100.");ye=Y}},viewportAnchorX:{enumerable:!0,get:function(){return me},set:function(Y){if(!h(Y))throw new Error("ViewportAnchorX must be between 0 and 100.");me=Y}},scroll:{enumerable:!0,get:function(){return De},set:function(Y){var se=function $(j){return"string"==typeof j&&!!Se[j.toLowerCase()]&&j.toLowerCase()}(Y);!1===se?console.warn("Scroll: an invalid or illegal string was specified."):De=se}}})}},8926:it=>{function Se(h,oe,j,de,re,ce,me){try{var ye=h[ce](me),De=ye.value}catch(Y){return void j(Y)}ye.done?oe(De):Promise.resolve(De).then(de,re)}it.exports=function $(h){return function(){var oe=this,j=arguments;return new Promise(function(de,re){var ce=h.apply(oe,j);function me(De){Se(ce,de,re,me,ye,"next",De)}function ye(De){Se(ce,de,re,me,ye,"throw",De)}me(void 0)})}},it.exports.__esModule=!0,it.exports.default=it.exports},7154:it=>{function Se(){return it.exports=Se=Object.assign||function($){for(var h=1;h<arguments.length;h++){var oe=arguments[h];for(var j in oe)Object.prototype.hasOwnProperty.call(oe,j)&&($[j]=oe[j])}return $},it.exports.__esModule=!0,it.exports.default=it.exports,Se.apply(this,arguments)}it.exports=Se,it.exports.__esModule=!0,it.exports.default=it.exports},5893:()=>{},5e3:(it,Se,$)=>{"use strict";$.d(Se,{$8M:()=>Zr,$Z:()=>Bt,AFp:()=>KE,ALo:()=>L1,AaK:()=>ye,AsE:()=>vl,BQk:()=>Gs,CHM:()=>Wa,CRH:()=>q1,CZH:()=>ry,CqO:()=>Z0,DdM:()=>Kd,EJc:()=>iy,EiD:()=>ng,EpF:()=>qT,F$t:()=>GT,F4k:()=>wc,FYo:()=>pv,FiY:()=>iu,G48:()=>rm,Gf:()=>H1,GfV:()=>SE,Gpc:()=>se,Hsn:()=>Y0,JOm:()=>Cs,JVY:()=>Xy,L6k:()=>Jy,LAX:()=>Zm,LFG:()=>ai,LSH:()=>w,Lbi:()=>j2,MAs:()=>xS,NdJ:()=>Qe,O4$:()=>Mp,OlP:()=>xr,Oqu:()=>XT,PXZ:()=>nm,Q6J:()=>Eg,QGY:()=>K0,Qsj:()=>C1,R0b:()=>oa,RDi:()=>Ou,Rgc:()=>Hf,SBq:()=>Bg,Sil:()=>G2,Suo:()=>BE,TTD:()=>Fl,TgZ:()=>G0,VKq:()=>jg,VLi:()=>XE,W1O:()=>VE,WLB:()=>ME,X6Q:()=>iw,XFs:()=>Ut,Xpm:()=>_r,Y36:()=>Ur,YKP:()=>IE,YNc:()=>$0,Yjl:()=>mn,Yz7:()=>ve,ZZ4:()=>hw,_Bn:()=>T1,_UZ:()=>HT,_Vd:()=>fv,_c5:()=>om,_uU:()=>Ag,aQg:()=>cy,c2e:()=>$2,cJS:()=>Ot,cg1:()=>oE,dDg:()=>Mc,deG:()=>ld,dqk:()=>Sn,eBb:()=>Km,eFA:()=>Tx,ekj:()=>X0,g9A:()=>xv,h0i:()=>Eu,hGG:()=>Fx,hij:()=>yu,iGM:()=>UE,ifc:()=>bn,ip1:()=>Sv,kL8:()=>aE,kcU:()=>Rp,lG2:()=>Ht,lcZ:()=>Hg,mCW:()=>vc,n5z:()=>Ln,n_E:()=>Gg,oAB:()=>ke,oxw:()=>LS,pB0:()=>e0,q3G:()=>T,q4F:()=>D1,qLn:()=>Rd,qOj:()=>yf,qZA:()=>If,qzn:()=>xd,sBO:()=>im,sIi:()=>yg,s_b:()=>qf,soG:()=>em,tBr:()=>Ju,tb:()=>fx,tp0:()=>su,uIk:()=>pr,vHH:()=>Je,vpe:()=>Na,wAp:()=>En,xp6:()=>BC,yhl:()=>Qy,ynx:()=>D_,z2F:()=>ly,z3N:()=>cu,zSh:()=>ST,zs3:()=>ra});var h=$(7579),oe=$(727),j=$(9751),de=$(6451),re=$(3099);function ce(o){for(let u in o)if(o[u]===ce)return u;throw Error("Could not find renamed property on target object.")}function me(o,u){for(const l in u)u.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=u[l])}function ye(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ye).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const u=o.toString();if(null==u)return""+u;const l=u.indexOf("\n");return-1===l?u:u.substring(0,l)}function De(o,u){return null==o||""===o?null===u?"":u:null==u||""===u?o:o+" "+u}const Y=ce({__forward_ref__:ce});function se(o){return o.__forward_ref__=se,o.toString=function(){return ye(this())},o}function Q(o){return Xe(o)?o():o}function Xe(o){return"function"==typeof o&&o.hasOwnProperty(Y)&&o.__forward_ref__===se}class Je extends Error{constructor(u,l){super(function Dt(o,u){return`NG0${Math.abs(o)}${u?": "+u:""}`}(u,l)),this.code=u}}function ze(o){return"string"==typeof o?o:null==o?"":String(o)}function we(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():ze(o)}function Ce(o,u){const l=u?` in ${u}`:"";throw new Je(-201,`No provider for ${we(o)} found${l}`)}function Z(o,u){null==o&&function ne(o,u,l,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${l} ${d} ${u} <=Actual]`))}(u,o,null,"!=")}function ve(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Ot(o){return{providers:o.providers||[],imports:o.imports||[]}}function zt(o){return kt(o,ar)||kt(o,Bn)}function kt(o,u){return o.hasOwnProperty(u)?o[u]:null}function zn(o){return o&&(o.hasOwnProperty(fn)||o.hasOwnProperty(Rr))?o[fn]:null}const ar=ce({\u0275prov:ce}),fn=ce({\u0275inj:ce}),Bn=ce({ngInjectableDef:ce}),Rr=ce({ngInjectorDef:ce});var Ut=(()=>((Ut=Ut||{})[Ut.Default=0]="Default",Ut[Ut.Host=1]="Host",Ut[Ut.Self=2]="Self",Ut[Ut.SkipSelf=4]="SkipSelf",Ut[Ut.Optional=8]="Optional",Ut))();let Co;function ur(o){const u=Co;return Co=o,u}function So(o,u,l){const d=zt(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&Ut.Optional?null:void 0!==u?u:void Ce(ye(o),"Injector")}function Hn(o){return{toString:o}.toString()}var or=(()=>((or=or||{})[or.OnPush=0]="OnPush",or[or.Default=1]="Default",or))(),bn=(()=>{return(o=bn||(bn={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",bn;var o})();const tn="undefined"!=typeof globalThis&&globalThis,pn="undefined"!=typeof window&&window,xo="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Sn=tn||"undefined"!=typeof global&&global||pn||xo,Ci={},rn=[],Ps=ce({\u0275cmp:ce}),Mn=ce({\u0275dir:ce}),qi=ce({\u0275pipe:ce}),zr=ce({\u0275mod:ce}),dr=ce({\u0275fac:ce}),mr=ce({__NG_ELEMENT_ID__:ce});let Rs=0;function _r(o){return Hn(()=>{const l={},d={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===or.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||rn,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||bn.Emulated,id:"c",styles:o.styles||rn,_:null,setInput:null,schemas:o.schemas||null,tView:null},p=o.directives,_=o.features,E=o.pipes;return d.id+=Rs++,d.inputs=Ke(o.inputs,l),d.outputs=Ke(o.outputs),_&&_.forEach(x=>x(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(ni):null,d.pipeDefs=E?()=>("function"==typeof E?E():E).map(pe):null,d})}function ni(o){return _n(o)||function H(o){return o[Mn]||null}(o)}function pe(o){return function z(o){return o[qi]||null}(o)}const le={};function ke(o){return Hn(()=>{const u={type:o.type,bootstrap:o.bootstrap||rn,declarations:o.declarations||rn,imports:o.imports||rn,exports:o.exports||rn,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(le[o.id]=o.type),u})}function Ke(o,u){if(null==o)return Ci;const l={};for(const d in o)if(o.hasOwnProperty(d)){let p=o[d],_=p;Array.isArray(p)&&(_=p[1],p=p[0]),l[p]=d,u&&(u[p]=_)}return l}const Ht=_r;function mn(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function _n(o){return o[Ps]||null}function ae(o,u){const l=o[zr]||null;if(!l&&!0===u)throw new Error(`Type ${ye(o)} does not have '\u0275mod' property.`);return l}function gs(o){return Array.isArray(o)&&"object"==typeof o[1]}function Os(o){return Array.isArray(o)&&!0===o[1]}function wh(o){return 0!=(8&o.flags)}function ba(o){return 2==(2&o.flags)}function ku(o){return 1==(1&o.flags)}function zi(o){return null!==o.template}function Ch(o){return 0!=(512&o[2])}function Ta(o,u){return o.hasOwnProperty(dr)?o[dr]:null}class Do{constructor(u,l,d){this.previousValue=u,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function Fl(){return Mu}function Mu(o){return o.type.prototype.ngOnChanges&&(o.setInput=Cp),km}function km(){const o=Bl(this),u=null==o?void 0:o.current;if(u){const l=o.previous;if(l===Ci)o.previous=u;else for(let d in u)l[d]=u[d];o.current=null,this.ngOnChanges(u)}}function Cp(o,u,l,d){const p=Bl(o)||function Mm(o,u){return o[Ul]=u}(o,{previous:Ci,current:null}),_=p.current||(p.current={}),E=p.previous,x=this.declaredInputs[l],M=E[x];_[x]=new Do(M&&M.currentValue,u,E===Ci),o[d]=u}Fl.ngInherit=!0;const Ul="__ngSimpleChanges__";function Bl(o){return o[Ul]||null}let Qs;function Ou(o){Qs=o}function Cr(o){return!!o.listen}const kh={createRenderer:(o,u)=>function Io(){return void 0!==Qs?Qs:"undefined"!=typeof document?document:void 0}()};function tr(o){for(;Array.isArray(o);)o=o[0];return o}function Lu(o,u){return tr(u[o])}function ii(o,u){return tr(u[o.index])}function Ni(o,u){return o.data[u]}function Xs(o,u){return o[u]}function _s(o,u){const l=u[o];return gs(l)?l:l[0]}function qa(o){return 4==(4&o[2])}function Js(o){return 128==(128&o[2])}function Ao(o,u){return null==u?null:o[u]}function Fu(o){o[18]=0}function is(o,u){o[5]+=u;let l=o,d=o[3];for(;null!==d&&(1===u&&1===l[5]||-1===u&&0===l[5]);)d[5]+=u,l=d,d=d[3]}const gn={lFrame:Rh(null),bindingsEnabled:!0};function Zc(){return gn.bindingsEnabled}function Et(){return gn.lFrame.lView}function Wn(){return gn.lFrame.tView}function Wa(o){return gn.lFrame.contextLView=o,o[8]}function Or(){let o=Yc();for(;null!==o&&64===o.type;)o=o.parent;return o}function Yc(){return gn.lFrame.currentTNode}function eo(o,u){const l=gn.lFrame;l.currentTNode=o,l.isParent=u}function Ea(){return gn.lFrame.isParent}function ys(){gn.lFrame.isParent=!1}function Ki(){const o=gn.lFrame;let u=o.bindingRootIndex;return-1===u&&(u=o.bindingRootIndex=o.tView.bindingStartIndex),u}function wa(){return gn.lFrame.bindingIndex++}function Zo(o){const u=gn.lFrame,l=u.bindingIndex;return u.bindingIndex=u.bindingIndex+o,l}function ql(o,u){const l=gn.lFrame;l.bindingIndex=l.bindingRootIndex=o,Ka(u)}function Ka(o){gn.lFrame.currentDirectiveIndex=o}function Vu(){return gn.lFrame.currentQueryIndex}function Ap(o){gn.lFrame.currentQueryIndex=o}function kp(o){const u=o[1];return 2===u.type?u.declTNode:1===u.type?o[6]:null}function ju(o,u,l){if(l&Ut.SkipSelf){let p=u,_=o;for(;!(p=p.parent,null!==p||l&Ut.Host||(p=kp(_),null===p||(_=_[15],10&p.type))););if(null===p)return!1;u=p,o=_}const d=gn.lFrame=gi();return d.currentTNode=u,d.lView=o,!0}function Xc(o){const u=gi(),l=o[1];gn.lFrame=u,u.currentTNode=l.firstChild,u.lView=o,u.tView=l,u.contextLView=o,u.bindingIndex=l.bindingStartIndex,u.inI18n=!1}function gi(){const o=gn.lFrame,u=null===o?null:o.child;return null===u?Rh(o):u}function Rh(o){const u={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=u),u}function Oh(){const o=gn.lFrame;return gn.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Gl=Oh;function bs(){const o=Oh();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Vr(){return gn.lFrame.selectedIndex}function no(o){gn.lFrame.selectedIndex=o}function br(){const o=gn.lFrame;return Ni(o.tView,o.selectedIndex)}function Mp(){gn.lFrame.currentNamespace="svg"}function Rp(){!function ed(){gn.lFrame.currentNamespace=null}()}function td(o,u){for(let l=u.directiveStart,d=u.directiveEnd;l<d;l++){const _=o.data[l].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:x,ngAfterViewInit:M,ngAfterViewChecked:L,ngOnDestroy:q}=_;E&&(o.contentHooks||(o.contentHooks=[])).push(-l,E),x&&((o.contentHooks||(o.contentHooks=[])).push(l,x),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(l,x)),M&&(o.viewHooks||(o.viewHooks=[])).push(-l,M),L&&((o.viewHooks||(o.viewHooks=[])).push(l,L),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(l,L)),null!=q&&(o.destroyHooks||(o.destroyHooks=[])).push(l,q)}}function Za(o,u,l){Lp(o,u,3,l)}function zl(o,u,l,d){(3&o[2])===l&&Lp(o,u,l,d)}function Qo(o,u){let l=o[2];(3&l)===u&&(l&=2047,l+=1,o[2]=l)}function Lp(o,u,l,d){const _=null!=d?d:-1,E=u.length-1;let x=0;for(let M=void 0!==d?65535&o[18]:0;M<E;M++)if("number"==typeof u[M+1]){if(x=u[M],null!=d&&x>=d)break}else u[M]<0&&(o[18]+=65536),(x<_||-1==_)&&(Fp(o,l,u,M),o[18]=(4294901760&o[18])+M+2),M++}function Fp(o,u,l,d){const p=l[d]<0,_=l[d+1],x=o[p?-l[d]:l[d]];if(p){if(o[2]>>11<o[18]>>16&&(3&o[2])===u){o[2]+=2048;try{_.call(x)}finally{}}}else try{_.call(x)}finally{}}class Wl{constructor(u,l,d){this.factory=u,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function ro(o,u,l){const d=Cr(o);let p=0;for(;p<l.length;){const _=l[p];if("number"==typeof _){if(0!==_)break;p++;const E=l[p++],x=l[p++],M=l[p++];d?o.setAttribute(u,x,M,E):u.setAttributeNS(E,x,M)}else{const E=_,x=l[++p];Ls(E)?d&&o.setProperty(u,E,x):d?o.setAttribute(u,E,x):u.setAttribute(E,x),p++}}return p}function ss(o){return 3===o||4===o||6===o}function Ls(o){return 64===o.charCodeAt(0)}function Ca(o,u){if(null!==u&&0!==u.length)if(null===o||0===o.length)o=u.slice();else{let l=-1;for(let d=0;d<u.length;d++){const p=u[d];"number"==typeof p?l=p:0===l||Sa(o,l,p,null,-1===l||2===l?u[++d]:null)}}return o}function Sa(o,u,l,d,p){let _=0,E=o.length;if(-1===u)E=-1;else for(;_<o.length;){const x=o[_++];if("number"==typeof x){if(x===u){E=-1;break}if(x>u){E=_-1;break}}}for(;_<o.length;){const x=o[_];if("number"==typeof x)break;if(x===l){if(null===d)return void(null!==p&&(o[_+1]=p));if(d===o[_+1])return void(o[_+2]=p)}_++,null!==d&&_++,null!==p&&_++}-1!==E&&(o.splice(E,0,u),_=E+1),o.splice(_++,0,l),null!==d&&o.splice(_++,0,d),null!==p&&o.splice(_++,0,p)}function Hu(o){return-1!==o}function Qa(o){return 32767&o}function qu(o,u){let l=function rd(o){return o>>16}(o),d=u;for(;l>0;)d=d[15],l--;return d}let xa=!0;function vn(o){const u=xa;return xa=o,u}let Fh=0;function Wu(o,u){const l=id(o,u);if(-1!==l)return l;const d=u[1];d.firstCreatePass&&(o.injectorIndex=u.length,Kl(d.data,o),Kl(u,null),Kl(d.blueprint,null));const p=Xa(o,u),_=o.injectorIndex;if(Hu(p)){const E=Qa(p),x=qu(p,u),M=x[1].data;for(let L=0;L<8;L++)u[_+L]=x[E+L]|M[E+L]}return u[_+8]=p,_}function Kl(o,u){o.push(0,0,0,0,0,0,0,0,u)}function id(o,u){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===u[o.injectorIndex+8]?-1:o.injectorIndex}function Xa(o,u){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,d=null,p=u;for(;null!==p;){const _=p[1],E=_.type;if(d=2===E?_.declTNode:1===E?p[6]:null,null===d)return-1;if(l++,p=p[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function Zl(o,u,l){!function Kr(o,u,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(mr)&&(d=l[mr]),null==d&&(d=l[mr]=Fh++);const p=255&d;u.data[o+(p>>5)]|=1<<p}(o,u,l)}function Om(o,u,l){if(l&Ut.Optional)return o;Ce(u,"NodeInjector")}function io(o,u,l,d){if(l&Ut.Optional&&void 0===d&&(d=null),0==(l&(Ut.Self|Ut.Host))){const p=o[9],_=ur(void 0);try{return p?p.get(u,d,l&Ut.Optional):So(u,d,l&Ut.Optional)}finally{ur(_)}}return Om(d,u,l)}function sd(o,u,l,d=Ut.Default,p){if(null!==o){const _=function ad(o){if("string"==typeof o)return o.charCodeAt(0)||0;const u=o.hasOwnProperty(mr)?o[mr]:void 0;return"number"==typeof u?u>=0?255&u:Ja:u}(l);if("function"==typeof _){if(!ju(u,o,d))return d&Ut.Host?Om(p,l,d):io(u,l,d,p);try{const E=_(d);if(null!=E||d&Ut.Optional)return E;Ce(l)}finally{Gl()}}else if("number"==typeof _){let E=null,x=id(o,u),M=-1,L=d&Ut.Host?u[16][6]:null;for((-1===x||d&Ut.SkipSelf)&&(M=-1===x?Xa(o,u):u[x+8],-1!==M&&Yl(d,!1)?(E=u[1],x=Qa(M),u=qu(M,u)):x=-1);-1!==x;){const q=u[1];if(xi(_,x,q.data)){const ee=Uh(x,u,l,E,d,L);if(ee!==od)return ee}M=u[x+8],-1!==M&&Yl(d,u[1].data[x+8]===L)&&xi(_,x,u)?(E=q,x=Qa(M),u=qu(M,u)):x=-1}}}return io(u,l,d,p)}const od={};function Ja(){return new Da(Or(),Et())}function Uh(o,u,l,d,p,_){const E=u[1],x=E.data[o+8],q=fr(x,E,l,null==d?ba(x)&&xa:d!=E&&0!=(3&x.type),p&Ut.Host&&_===x);return null!==q?so(u,E,q,x):od}function fr(o,u,l,d,p){const _=o.providerIndexes,E=u.data,x=1048575&_,M=o.directiveStart,q=_>>20,Te=p?x+q:o.directiveEnd;for(let $e=d?x:x+q;$e<Te;$e++){const _t=E[$e];if($e<M&&l===_t||$e>=M&&_t.type===l)return $e}if(p){const $e=E[M];if($e&&zi($e)&&$e.type===l)return M}return null}function so(o,u,l,d){let p=o[l];const _=u.data;if(function $y(o){return o instanceof Wl}(p)){const E=p;E.resolving&&function tt(o,u){const l=u?`. Dependency path: ${u.join(" > ")} > ${o}`:"";throw new Je(-200,`Circular dependency in DI detected for ${o}${l}`)}(we(_[l]));const x=vn(E.canSeeViewProviders);E.resolving=!0;const M=E.injectImpl?ur(E.injectImpl):null;ju(o,d,Ut.Default);try{p=o[l]=E.factory(void 0,_,o,d),u.firstCreatePass&&l>=d.directiveStart&&function Np(o,u,l){const{ngOnChanges:d,ngOnInit:p,ngDoCheck:_}=u.type.prototype;if(d){const E=Mu(u);(l.preOrderHooks||(l.preOrderHooks=[])).push(o,E),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,E)}p&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-o,p),_&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o,_),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,_))}(l,_[l],u)}finally{null!==M&&ur(M),vn(x),E.resolving=!1,Gl()}}return p}function xi(o,u,l){return!!(l[u+(o>>5)]&1<<o)}function Yl(o,u){return!(o&Ut.Self||o&Ut.Host&&u)}class Da{constructor(u,l){this._tNode=u,this._lView=l}get(u,l,d){return sd(this._tNode,this._lView,u,d,l)}}function Ln(o){return Hn(()=>{const u=o.prototype.constructor,l=u[dr]||Jo(u),d=Object.prototype;let p=Object.getPrototypeOf(o.prototype).constructor;for(;p&&p!==d;){const _=p[dr]||Jo(p);if(_&&_!==l)return _;p=Object.getPrototypeOf(p)}return _=>new _})}function Jo(o){return Xe(o)?()=>{const u=Jo(Q(o));return u&&u()}:Ta(o)}function Zr(o){return function Xo(o,u){if("class"===u)return o.classes;if("style"===u)return o.styles;const l=o.attrs;if(l){const d=l.length;let p=0;for(;p<d;){const _=l[p];if(ss(_))break;if(0===_)p+=2;else if("number"==typeof _)for(p++;p<d&&"string"==typeof l[p];)p++;else{if(_===u)return l[p+1];p+=2}}}return null}(Or(),o)}const Fs="__parameters__";function Bs(o,u,l){return Hn(()=>{const d=function oi(o){return function(...l){if(o){const d=o(...l);for(const p in d)this[p]=d[p]}}}(u);function p(..._){if(this instanceof p)return d.apply(this,_),this;const E=new p(..._);return x.annotation=E,x;function x(M,L,q){const ee=M.hasOwnProperty(Fs)?M[Fs]:Object.defineProperty(M,Fs,{value:[]})[Fs];for(;ee.length<=q;)ee.push(null);return(ee[q]=ee[q]||[]).push(E),M}}return l&&(p.prototype=Object.create(l.prototype)),p.prototype.ngMetadataName=o,p.annotationCls=p,p})}class xr{constructor(u,l){this._desc=u,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=ve({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ld=new xr("AnalyzeForEntryComponents");function js(o,u){void 0===u&&(u=o);for(let l=0;l<o.length;l++){let d=o[l];Array.isArray(d)?(u===o&&(u=o.slice(0,l)),js(d,u)):u!==o&&u.push(d)}return u}function Es(o,u){o.forEach(l=>Array.isArray(l)?Es(l,u):u(l))}function $h(o,u,l){u>=o.length?o.push(l):o.splice(u,0,l)}function Zu(o,u){return u>=o.length-1?o.pop():o.splice(u,1)[0]}function Xl(o,u){const l=[];for(let d=0;d<o;d++)l.push(u);return l}function mi(o,u,l){let d=Po(o,u);return d>=0?o[1|d]=l:(d=~d,function Jl(o,u,l,d){let p=o.length;if(p==u)o.push(l,d);else if(1===p)o.push(d,o[0]),o[0]=l;else{for(p--,o.push(o[p-1],o[p]);p>u;)o[p]=o[p-2],p--;o[u]=l,o[u+1]=d}}(o,d,u,l)),d}function ec(o,u){const l=Po(o,u);if(l>=0)return o[1|l]}function Po(o,u){return function Yu(o,u,l){let d=0,p=o.length>>l;for(;p!==d;){const _=d+(p-d>>1),E=o[_<<l];if(u===E)return _<<l;E>u?p=_:d=_+1}return~(p<<l)}(o,u,1)}const tu={},nc="__NG_DI_FLAG__",nu="ngTempTokenPath",Hh=/\n/gm,ic="__source",sc=ce({provide:String,useValue:ce});let uo;function Nn(o){const u=uo;return uo=o,u}function hd(o,u=Ut.Default){if(void 0===uo)throw new Je(203,"");return null===uo?So(o,void 0,u):uo.get(o,u&Ut.Optional?null:void 0,u)}function ai(o,u=Ut.Default){return(function gr(){return Co}()||hd)(Q(o),u)}const qh=ai;function ru(o){const u=[];for(let l=0;l<o.length;l++){const d=Q(o[l]);if(Array.isArray(d)){if(0===d.length)throw new Je(900,"");let p,_=Ut.Default;for(let E=0;E<d.length;E++){const x=d[E],M=Gh(x);"number"==typeof M?-1===M?p=x.token:_|=M:p=x}u.push(ai(p,_))}else u.push(ai(d))}return u}function oc(o,u){return o[nc]=u,o.prototype[nc]=u,o}function Gh(o){return o[nc]}const Ju=oc(Bs("Inject",o=>({token:o})),-1),iu=oc(Bs("Optional"),8),su=oc(Bs("SkipSelf"),4);var Cs=(()=>((Cs=Cs||{})[Cs.Important=1]="Important",Cs[Cs.DashCase=2]="DashCase",Cs))();const hc="__ngContext__";function yi(o,u){o[hc]=u}function Ss(o){const u=function sl(o){return o[hc]||null}(o);return u?Array.isArray(u)?u:u.lView:null}function F(o,u){return undefined(o,u)}function Ne(o){const u=o[3];return Os(u)?u[3]:u}function Pt(o){return Tn(o[13])}function Xt(o){return Tn(o[4])}function Tn(o){for(;null!==o&&!Os(o);)o=o[4];return o}function Di(o,u,l,d,p){if(null!=d){let _,E=!1;Os(d)?_=d:gs(d)&&(E=!0,d=d[0]);const x=tr(d);0===o&&null!==l?null==p?zy(u,l,x):pc(u,l,x,p||null,!0):1===o&&null!==l?pc(u,l,x,p||null,!0):2===o?function Td(o,u,l){const d=Wp(o,u);d&&function Lo(o,u,l,d){Cr(o)?o.removeChild(u,l,d):u.removeChild(l)}(o,d,u,l)}(u,x,E):3===o&&u.destroyNode(x),null!=_&&function jb(o,u,l,d,p){const _=l[7];_!==tr(l)&&Di(u,o,d,_,p);for(let x=10;x<l.length;x++){const M=l[x];lu(M[1],M,o,u,d,_)}}(u,o,_,l,p)}}function Fi(o,u,l){if(Cr(o))return o.createElement(u,l);{const d=null!==l?function Ah(o){const u=o.toLowerCase();return"svg"===u?"http://www.w3.org/2000/svg":"math"===u?"http://www.w3.org/1998/MathML/":null}(l):null;return null===d?o.createElement(u):o.createElementNS(d,u)}}function ol(o,u){const l=o[9],d=l.indexOf(u),p=u[3];1024&u[2]&&(u[2]&=-1025,is(p,-1)),l.splice(d,1)}function al(o,u){if(o.length<=10)return;const l=10+u,d=o[l];if(d){const p=d[17];null!==p&&p!==o&&ol(p,d),u>0&&(o[l-1][4]=d[4]);const _=Zu(o,10+u);!function co(o,u){lu(o,u,u[11],2,null,null),u[0]=null,u[6]=null}(d[1],d);const E=_[19];null!==E&&E.detachView(_[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function Yh(o,u){if(!(256&u[2])){const l=u[11];Cr(l)&&l.destroyNode&&lu(o,u,l,3,null,null),function jm(o){let u=o[13];if(!u)return ul(o[1],o);for(;u;){let l=null;if(gs(u))l=u[13];else{const d=u[10];d&&(l=d)}if(!l){for(;u&&!u[4]&&u!==o;)gs(u)&&ul(u[1],u),u=u[3];null===u&&(u=o),gs(u)&&ul(u[1],u),l=u&&u[4]}u=l}}(u)}}function ul(o,u){if(!(256&u[2])){u[2]&=-129,u[2]|=256,function Vb(o,u){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let d=0;d<l.length;d+=2){const p=u[l[d]];if(!(p instanceof Wl)){const _=l[d+1];if(Array.isArray(_))for(let E=0;E<_.length;E+=2){const x=p[_[E]],M=_[E+1];try{M.call(x)}finally{}}else try{_.call(p)}finally{}}}}(o,u),function zp(o,u){const l=o.cleanup,d=u[7];let p=-1;if(null!==l)for(let _=0;_<l.length-1;_+=2)if("string"==typeof l[_]){const E=l[_+1],x="function"==typeof E?E(u):tr(u[E]),M=d[p=l[_+2]],L=l[_+3];"boolean"==typeof L?x.removeEventListener(l[_],M,L):L>=0?d[p=L]():d[p=-L].unsubscribe(),_+=2}else{const E=d[p=l[_+1]];l[_].call(E)}if(null!==d){for(let _=p+1;_<d.length;_++)d[_]();u[7]=null}}(o,u),1===u[1].type&&Cr(u[11])&&u[11].destroy();const l=u[17];if(null!==l&&Os(u[3])){l!==u[3]&&ol(l,u);const d=u[19];null!==d&&d.detachView(o)}}}function $m(o,u,l){return function Hm(o,u,l){let d=u;for(;null!==d&&40&d.type;)d=(u=d).parent;if(null===d)return l[0];if(2&d.flags){const p=o.data[d.directiveStart].encapsulation;if(p===bn.None||p===bn.Emulated)return null}return ii(d,l)}(o,u.parent,l)}function pc(o,u,l,d,p){Cr(o)?o.insertBefore(u,l,d,p):u.insertBefore(l,d,p)}function zy(o,u,l){Cr(o)?o.appendChild(u,l):u.appendChild(l)}function Qh(o,u,l,d,p){null!==d?pc(o,u,l,d,p):zy(o,u,l)}function Wp(o,u){return Cr(o)?o.parentNode(u):u.parentNode}function Xh(o,u,l){return Kp(o,u,l)}let wd,Kp=function Jh(o,u,l){return 40&o.type?ii(o,l):null};function Yp(o,u,l,d){const p=$m(o,d,u),_=u[11],x=Xh(d.parent||u[6],d,u);if(null!=p)if(Array.isArray(l))for(let M=0;M<l.length;M++)Qh(_,p,l[M],x,!1);else Qh(_,p,l,x,!1)}function gc(o,u){if(null!==u){const l=u.type;if(3&l)return ii(u,o);if(4&l)return Qp(-1,o[u.index]);if(8&l){const d=u.child;if(null!==d)return gc(o,d);{const p=o[u.index];return Os(p)?Qp(-1,p):tr(p)}}if(32&l)return F(u,o)()||tr(o[u.index]);{const d=ef(o,u);return null!==d?Array.isArray(d)?d[0]:gc(Ne(o[16]),d):gc(o,u.next)}}return null}function ef(o,u){return null!==u?o[16][6].projection[u.projection]:null}function Qp(o,u){const l=10+o+1;if(l<u.length){const d=u[l],p=d[1].firstChild;if(null!==p)return gc(d,p)}return u[7]}function Ed(o,u,l,d,p,_,E){for(;null!=l;){const x=d[l.index],M=l.type;if(E&&0===u&&(x&&yi(tr(x),d),l.flags|=4),64!=(64&l.flags))if(8&M)Ed(o,u,l.child,d,p,_,!1),Di(u,o,p,x,_);else if(32&M){const L=F(l,d);let q;for(;q=L();)Di(u,o,p,q,_);Di(u,o,p,x,_)}else 16&M?Ky(o,u,d,l,p,_):Di(u,o,p,x,_);l=E?l.projectionNext:l.next}}function lu(o,u,l,d,p,_){Ed(l,d,o.firstChild,u,p,_,!1)}function Ky(o,u,l,d,p,_){const E=l[16],M=E[6].projection[d.projection];if(Array.isArray(M))for(let L=0;L<M.length;L++)Di(u,o,p,M[L],_);else Ed(o,u,M,E[3],p,_,!0)}function Gm(o,u,l){Cr(o)?o.setAttribute(u,"style",l):u.style.cssText=l}function tf(o,u,l){Cr(o)?""===l?o.removeAttribute(u,"class"):o.setAttribute(u,"class",l):u.className=l}function Aa(o){var u;return(null===(u=function zm(){if(void 0===wd&&(wd=null,Sn.trustedTypes))try{wd=Sn.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return wd}())||void 0===u?void 0:u.createHTML(o))||o}class yc{constructor(u){this.changingThisBreaksApplicationSecurity=u}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class qb extends yc{getTypeName(){return"HTML"}}class Gb extends yc{getTypeName(){return"Style"}}class nf extends yc{getTypeName(){return"Script"}}class zb extends yc{getTypeName(){return"URL"}}class Yy extends yc{getTypeName(){return"ResourceURL"}}function cu(o){return o instanceof yc?o.changingThisBreaksApplicationSecurity:o}function xd(o,u){const l=Qy(o);if(null!=l&&l!==u){if("ResourceURL"===l&&"URL"===u)return!0;throw new Error(`Required a safe ${u}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===u}function Qy(o){return o instanceof yc&&o.getTypeName()||null}function Xy(o){return new qb(o)}function Jy(o){return new Gb(o)}function Km(o){return new nf(o)}function Zm(o){return new zb(o)}function e0(o){return new Yy(o)}class Jp{constructor(u){this.inertDocumentHelper=u}getInertBodyElement(u){u="<body><remove></remove>"+u;try{const l=(new window.DOMParser).parseFromString(Aa(u),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(u):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class RC{constructor(u){if(this.defaultDoc=u,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const d=this.inertDocument.createElement("body");l.appendChild(d)}}getInertBodyElement(u){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=Aa(u),l;const d=this.inertDocument.createElement("body");return d.innerHTML=Aa(u),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(u){const l=u.attributes;for(let p=l.length-1;0<p;p--){const E=l.item(p).name;("xmlns:ns1"===E||0===E.indexOf("ns1:"))&&u.removeAttribute(E)}let d=u.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const Dd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,r0=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function vc(o){return(o=String(o)).match(Dd)||o.match(r0)?o:"unsafe:"+o}function ka(o){const u={};for(const l of o.split(","))u[l]=!0;return u}function Id(...o){const u={};for(const l of o)for(const d in l)l.hasOwnProperty(d)&&(u[d]=!0);return u}const Ym=ka("area,br,col,hr,img,wbr"),du=ka("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),rf=ka("rp,rt"),Ad=Id(Ym,Id(du,ka("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Id(rf,ka("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Id(rf,du)),Yi=ka("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sf=ka("srcset"),Ma=Id(Yi,sf,ka("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ka("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),kd=ka("script,style,template");class o0{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(u){let l=u.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let p=this.checkClobberedElement(l,l.nextSibling);if(p){l=p;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(u){const l=u.nodeName.toLowerCase();if(!Ad.hasOwnProperty(l))return this.sanitizedSomething=!0,!kd.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=u.attributes;for(let p=0;p<d.length;p++){const _=d.item(p),E=_.name,x=E.toLowerCase();if(!Ma.hasOwnProperty(x)){this.sanitizedSomething=!0;continue}let M=_.value;Yi[x]&&(M=vc(M)),sf[x]&&(o=M,M=(o=String(o)).split(",").map(u=>vc(u.trim())).join(", ")),this.buf.push(" ",E,'="',tg(M),'"')}var o;return this.buf.push(">"),!0}endElement(u){const l=u.nodeName.toLowerCase();Ad.hasOwnProperty(l)&&!Ym.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(u){this.buf.push(tg(u))}checkClobberedElement(u,l){if(l&&(u.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${u.outerHTML}`);return l}}const a0=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qi=/([^\#-~ |!])/g;function tg(o){return o.replace(/&/g,"&amp;").replace(a0,function(u){return"&#"+(1024*(u.charCodeAt(0)-55296)+(u.charCodeAt(1)-56320)+65536)+";"}).replace(Qi,function(u){return"&#"+u.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let af;function ng(o,u){let l=null;try{af=af||function t0(o){const u=new RC(o);return function Hs(){try{return!!(new window.DOMParser).parseFromString(Aa(""),"text/html")}catch(o){return!1}}()?new Jp(u):u}(o);let d=u?String(u):"";l=af.getInertBodyElement(d);let p=5,_=d;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,d=_,_=l.innerHTML,l=af.getInertBodyElement(d)}while(d!==_);return Aa((new o0).sanitizeChildren(cl(l)||l))}finally{if(l){const d=cl(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function cl(o){return"content"in o&&function Md(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var T=(()=>((T=T||{})[T.NONE=0]="NONE",T[T.HTML=1]="HTML",T[T.STYLE=2]="STYLE",T[T.SCRIPT=3]="SCRIPT",T[T.URL=4]="URL",T[T.RESOURCE_URL=5]="RESOURCE_URL",T))();function w(o){const u=function hr(){const o=Et();return o&&o[12]}();return u?u.sanitize(T.URL,o)||"":xd(o,"URL")?cu(o):vc(ze(o))}function Pd(o){return o.ngOriginalError}function c0(o,...u){o.error(...u)}class Rd{constructor(){this._console=console}handleError(u){const l=this._findOriginalError(u),d=function l0(o){return o&&o.ngErrorLogger||c0}(u);d(this._console,"ERROR",u),l&&d(this._console,"ORIGINAL ERROR",l)}_findOriginalError(u){let l=u&&Pd(u);for(;l&&Pd(l);)l=Pd(l);return l||null}}const at=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Sn))();function dl(o){return o instanceof Function?o():o}function uf(o,u,l){let d=o.length;for(;;){const p=o.indexOf(u,l);if(-1===p)return p;if(0===p||o.charCodeAt(p-1)<=32){const _=u.length;if(p+_===d||o.charCodeAt(p+_)<=32)return p}l=p+1}}const Rn="ng-template";function rA(o,u,l){let d=0;for(;d<o.length;){let p=o[d++];if(l&&"class"===p){if(p=o[d],-1!==uf(p.toLowerCase(),u,0))return!0}else if(1===p){for(;d<o.length&&"string"==typeof(p=o[d++]);)if(p.toLowerCase()===u)return!0;return!1}}return!1}function Pa(o){return 4===o.type&&o.value!==Rn}function qt(o,u,l){return u===(4!==o.type||l?o.value:Rn)}function Yb(o,u,l){let d=4;const p=o.attrs||[],_=function Qb(o){for(let u=0;u<o.length;u++)if(ss(o[u]))return u;return o.length}(p);let E=!1;for(let x=0;x<u.length;x++){const M=u[x];if("number"!=typeof M){if(!E)if(4&d){if(d=2|1&d,""!==M&&!qt(o,M,l)||""===M&&1===u.length){if(cn(d))return!1;E=!0}}else{const L=8&d?M:u[++x];if(8&d&&null!==o.attrs){if(!rA(o.attrs,L,l)){if(cn(d))return!1;E=!0}continue}const ee=p0(8&d?"class":M,p,Pa(o),l);if(-1===ee){if(cn(d))return!1;E=!0;continue}if(""!==L){let Te;Te=ee>_?"":p[ee+1].toLowerCase();const $e=8&d?Te:null;if($e&&-1!==uf($e,L,0)||2&d&&L!==Te){if(cn(d))return!1;E=!0}}}}else{if(!E&&!cn(d)&&!cn(M))return!1;if(E&&cn(M))continue;E=!1,d=M|1&d}}return cn(d)||E}function cn(o){return 0==(1&o)}function p0(o,u,l,d){if(null===u)return-1;let p=0;if(d||!l){let _=!1;for(;p<u.length;){const E=u[p];if(E===o)return p;if(3===E||6===E)_=!0;else{if(1===E||2===E){let x=u[++p];for(;"string"==typeof x;)x=u[++p];continue}if(4===E)break;if(0===E){p+=4;continue}}p+=_?1:2}return-1}return function sA(o,u){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const d=o[l];if("number"==typeof d)return-1;if(d===u)return l;l++}return-1}(u,o)}function og(o,u,l=!1){for(let d=0;d<u.length;d++)if(Yb(o,u[d],l))return!0;return!1}function oA(o,u){e:for(let l=0;l<u.length;l++){const d=u[l];if(o.length===d.length){for(let p=0;p<o.length;p++)if(o[p]!==d[p])continue e;return!0}}return!1}function UC(o,u){return o?":not("+u.trim()+")":u}function qs(o){let u=o[0],l=1,d=2,p="",_=!1;for(;l<o.length;){let E=o[l];if("string"==typeof E)if(2&d){const x=o[++l];p+="["+E+(x.length>0?'="'+x+'"':"")+"]"}else 8&d?p+="."+E:4&d&&(p+=" "+E);else""!==p&&!cn(E)&&(u+=UC(_,p),p=""),d=E,_=_||!cn(d);l++}return""!==p&&(u+=UC(_,p)),u}const wn={};function BC(o){Xb(Wn(),Et(),Vr()+o,!1)}function Xb(o,u,l,d){if(!d)if(3==(3&u[2])){const _=o.preOrderCheckHooks;null!==_&&Za(u,_,l)}else{const _=o.preOrderHooks;null!==_&&zl(u,_,0,l)}no(l)}function Jm(o,u){return o<<17|u<<2}function Nr(o){return o>>17&32767}function ag(o){return 2|o}function as(o){return(131068&o)>>2}function t_(o,u){return-131069&o|u<<2}function Jb(o){return 1|o}function XC(o,u){const l=o.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const p=l[d],_=l[d+1];if(-1!==_){const E=o.data[_];Ap(p),E.contentQueries(2,u[_],_)}}}function cg(o,u,l,d,p,_,E,x,M,L){const q=u.blueprint.slice();return q[0]=p,q[2]=140|d,Fu(q),q[3]=q[15]=o,q[8]=l,q[10]=E||o&&o[10],q[11]=x||o&&o[11],q[12]=M||o&&o[12]||null,q[9]=L||o&&o[9]||null,q[6]=_,q[16]=2==u.type?o[16]:q,q}function dg(o,u,l,d,p){let _=o.data[u];if(null===_)_=function uT(o,u,l,d,p){const _=Yc(),E=Ea(),M=o.data[u]=function w0(o,u,l,d,p,_){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:u?u.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:u,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?_:_&&_.parent,l,u,d,p);return null===o.firstChild&&(o.firstChild=M),null!==_&&(E?null==_.child&&null!==M.parent&&(_.child=M):null===_.next&&(_.next=M)),M}(o,u,l,d,p),function Yo(){return gn.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=l,_.value=d,_.attrs=p;const E=function Bu(){const o=gn.lFrame,u=o.currentTNode;return o.isParent?u:u.parent}();_.injectorIndex=null===E?-1:E.injectorIndex}return eo(_,!0),_}function hg(o,u,l,d){if(0===l)return-1;const p=u.length;for(let _=0;_<l;_++)u.push(d),o.blueprint.push(d),o.data.push(null);return p}function bc(o,u,l){Xc(u);try{const d=o.viewQuery;null!==d&&ET(1,d,l);const p=o.template;null!==p&&cT(o,u,p,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&XC(o,u),o.staticViewQueries&&ET(2,o.viewQuery,l);const _=o.components;null!==_&&function pA(o,u){for(let l=0;l<u.length;l++)f_(o,u[l])}(u,_)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{u[2]&=-5,bs()}}function pl(o,u,l,d){const p=u[2];if(256!=(256&p)){Xc(u);try{Fu(u),function Dp(o){return gn.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&cT(o,u,l,2,d);const E=3==(3&p);if(E){const L=o.preOrderCheckHooks;null!==L&&Za(u,L,null)}else{const L=o.preOrderHooks;null!==L&&zl(u,L,0,null),Qo(u,0)}if(function sS(o){for(let u=Pt(o);null!==u;u=Xt(u)){if(!u[2])continue;const l=u[9];for(let d=0;d<l.length;d++){const p=l[d],_=p[3];0==(1024&p[2])&&is(_,1),p[2]|=1024}}}(u),function iS(o){for(let u=Pt(o);null!==u;u=Xt(u))for(let l=10;l<u.length;l++){const d=u[l],p=d[1];Js(d)&&pl(p,d,p.template,d[8])}}(u),null!==o.contentQueries&&XC(o,u),E){const L=o.contentCheckHooks;null!==L&&Za(u,L)}else{const L=o.contentHooks;null!==L&&zl(u,L,1),Qo(u,1)}!function aT(o,u){const l=o.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const p=l[d];if(p<0)no(~p);else{const _=p,E=l[++d],x=l[++d];ql(E,_),x(2,u[_])}}}finally{no(-1)}}(o,u);const x=o.components;null!==x&&function fA(o,u){for(let l=0;l<u.length;l++)oS(o,u[l])}(u,x);const M=o.viewQuery;if(null!==M&&ET(2,M,d),E){const L=o.viewCheckHooks;null!==L&&Za(u,L)}else{const L=o.viewHooks;null!==L&&zl(u,L,2),Qo(u,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),u[2]&=-73,1024&u[2]&&(u[2]&=-1025,is(u[3],-1))}finally{bs()}}}function lT(o,u,l,d){const p=u[10],E=qa(u);try{!E&&p.begin&&p.begin(),E&&bc(o,u,d),pl(o,u,l,d)}finally{!E&&p.end&&p.end()}}function cT(o,u,l,d,p){const _=Vr(),E=2&d;try{no(-1),E&&u.length>20&&Xb(o,u,20,!1),l(d,p)}finally{no(_)}}function JC(o,u,l){if(wh(u)){const p=u.directiveEnd;for(let _=u.directiveStart;_<p;_++){const E=o.data[_];E.contentQueries&&E.contentQueries(1,l[_],_)}}}function fg(o,u,l){!Zc()||(function S0(o,u,l,d){const p=l.directiveStart,_=l.directiveEnd;o.firstCreatePass||Wu(l,u),yi(d,u);const E=l.initialInputs;for(let x=p;x<_;x++){const M=o.data[x],L=zi(M);L&&A0(u,l,M);const q=so(u,o,x,l);yi(q,u),null!==E&&bA(0,x-p,q,M,0,E),L&&(_s(l.index,u)[8]=q)}}(o,u,l,ii(l,u)),128==(128&l.flags)&&function nS(o,u,l){const d=l.directiveStart,p=l.directiveEnd,E=l.index,x=function Ip(){return gn.lFrame.currentDirectiveIndex}();try{no(E);for(let M=d;M<p;M++){const L=o.data[M],q=u[M];Ka(M),(null!==L.hostBindings||0!==L.hostVars||null!==L.hostAttrs)&&x0(L,q)}}finally{no(-1),Ka(x)}}(o,u,l))}function l_(o,u,l=ii){const d=u.localNames;if(null!==d){let p=u.index+1;for(let _=0;_<d.length;_+=2){const E=d[_+1],x=-1===E?l(u,o):o[E];o[p++]=x}}}function E0(o){const u=o.tView;return null===u||u.incompleteFirstPass?o.tView=c_(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):u}function c_(o,u,l,d,p,_,E,x,M,L){const q=20+d,ee=q+p,Te=function gA(o,u){const l=[];for(let d=0;d<u;d++)l.push(d<o?null:wn);return l}(q,ee),$e="function"==typeof L?L():L;return Te[1]={type:o,blueprint:Te,template:l,queries:null,viewQuery:x,declTNode:u,data:Te.slice().fill(null,q),bindingStartIndex:q,expandoStartIndex:ee,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:M,consts:$e,incompleteFirstPass:!1}}function hT(o,u,l,d){const p=g_(u);null===l?p.push(d):(p.push(l),o.firstCreatePass&&m_(o).push(d,p.length-1))}function eS(o,u,l){for(let d in o)if(o.hasOwnProperty(d)){const p=o[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(u,p):l[d]=[u,p]}return l}function Ds(o,u,l,d){let p=!1;if(Zc()){const _=function rS(o,u,l){const d=o.directiveRegistry;let p=null;if(d)for(let _=0;_<d.length;_++){const E=d[_];og(l,E.selectors,!1)&&(p||(p=[]),Zl(Wu(l,u),o,E.type),zi(E)?(mT(o,l),p.unshift(E)):p.push(E))}return p}(o,u,l),E=null===d?null:{"":-1};if(null!==_){p=!0,D0(l,o.data.length,_.length);for(let q=0;q<_.length;q++){const ee=_[q];ee.providersResolver&&ee.providersResolver(ee)}let x=!1,M=!1,L=hg(o,u,_.length,null);for(let q=0;q<_.length;q++){const ee=_[q];l.mergedAttrs=Ca(l.mergedAttrs,ee.hostAttrs),I0(o,l,u,L,ee),_T(L,ee,E),null!==ee.contentQueries&&(l.flags|=8),(null!==ee.hostBindings||null!==ee.hostAttrs||0!==ee.hostVars)&&(l.flags|=128);const Te=ee.type.prototype;!x&&(Te.ngOnChanges||Te.ngOnInit||Te.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l.index),x=!0),!M&&(Te.ngOnChanges||Te.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l.index),M=!0),L++}!function _A(o,u){const d=u.directiveEnd,p=o.data,_=u.attrs,E=[];let x=null,M=null;for(let L=u.directiveStart;L<d;L++){const q=p[L],ee=q.inputs,Te=null===_||Pa(u)?null:yT(ee,_);E.push(Te),x=eS(ee,L,x),M=eS(q.outputs,L,M)}null!==x&&(x.hasOwnProperty("class")&&(u.flags|=16),x.hasOwnProperty("style")&&(u.flags|=32)),u.initialInputs=E,u.inputs=x,u.outputs=M}(o,l)}E&&function h_(o,u,l){if(u){const d=o.localNames=[];for(let p=0;p<u.length;p+=2){const _=l[u[p+1]];if(null==_)throw new Je(-301,!1);d.push(u[p],_)}}}(l,d,E)}return l.mergedAttrs=Ca(l.mergedAttrs,l.attrs),p}function gT(o,u,l,d,p,_){const E=_.hostBindings;if(E){let x=o.hostBindingOpCodes;null===x&&(x=o.hostBindingOpCodes=[]);const M=~u.index;(function d_(o){let u=o.length;for(;u>0;){const l=o[--u];if("number"==typeof l&&l<0)return l}return 0})(x)!=M&&x.push(M),x.push(d,p,E)}}function x0(o,u){null!==o.hostBindings&&o.hostBindings(1,u)}function mT(o,u){u.flags|=2,(o.components||(o.components=[])).push(u.index)}function _T(o,u,l){if(l){if(u.exportAs)for(let d=0;d<u.exportAs.length;d++)l[u.exportAs[d]]=o;zi(u)&&(l[""]=o)}}function D0(o,u,l){o.flags|=1,o.directiveStart=u,o.directiveEnd=u+l,o.providerIndexes=u}function I0(o,u,l,d,p){o.data[d]=p;const _=p.factory||(p.factory=Ta(p.type)),E=new Wl(_,zi(p),null);o.blueprint[d]=E,l[d]=E,gT(o,u,0,d,hg(o,l,p.hostVars,wn),p)}function A0(o,u,l){const d=ii(u,o),p=E0(l),_=o[10],E=df(o,cg(o,p,null,l.onPush?64:16,d,u,_,_.createRenderer(d,l),null,null));o[u.index]=E}function Uo(o,u,l,d,p,_){const E=ii(o,u);!function k0(o,u,l,d,p,_,E){if(null==_)Cr(o)?o.removeAttribute(u,p,l):u.removeAttribute(p);else{const x=null==E?ze(_):E(_,d||"",p);Cr(o)?o.setAttribute(u,p,x,l):l?u.setAttributeNS(l,p,x):u.setAttribute(p,x)}}(u[11],E,_,o.value,l,d,p)}function bA(o,u,l,d,p,_){const E=_[u];if(null!==E){const x=d.setInput;for(let M=0;M<E.length;){const L=E[M++],q=E[M++],ee=E[M++];null!==x?d.setInput(l,ee,L,q):l[q]=ee}}}function yT(o,u){let l=null,d=0;for(;d<u.length;){const p=u[d];if(0!==p)if(5!==p){if("number"==typeof p)break;o.hasOwnProperty(p)&&(null===l&&(l=[]),l.push(p,o[p],u[d+1])),d+=2}else d+=2;else d+=4}return l}function M0(o,u,l,d){return new Array(o,!0,!1,u,null,0,d,l,null,null)}function oS(o,u){const l=_s(u,o);if(Js(l)){const d=l[1];80&l[2]?pl(d,l,d.template,l[8]):l[5]>0&&bT(l)}}function bT(o){for(let d=Pt(o);null!==d;d=Xt(d))for(let p=10;p<d.length;p++){const _=d[p];if(1024&_[2]){const E=_[1];pl(E,_,E.template,_[8])}else _[5]>0&&bT(_)}const l=o[1].components;if(null!==l)for(let d=0;d<l.length;d++){const p=_s(l[d],o);Js(p)&&p[5]>0&&bT(p)}}function f_(o,u){const l=_s(u,o),d=l[1];(function aS(o,u){for(let l=u.length;l<o.blueprint.length;l++)u.push(o.blueprint[l])})(d,l),bc(d,l,l[8])}function df(o,u){return o[13]?o[14][4]=u:o[13]=u,o[14]=u,u}function hf(o){for(;o;){o[2]|=64;const u=Ne(o);if(Ch(o)&&!u)return o;o=u}return null}function uS(o){!function p_(o){for(let u=0;u<o.components.length;u++){const l=o.components[u],d=Ss(l),p=d[1];lT(p,d,p.template,l)}}(o[8])}function ET(o,u,l){Ap(0),u(o,l)}const Tc=(()=>Promise.resolve(null))();function g_(o){return o[7]||(o[7]=[])}function m_(o){return o.cleanup||(o.cleanup=[])}function Lr(o,u){const l=o[9],d=l?l.get(Rd,null):null;d&&d.handleError(u)}function __(o,u,l,d,p){for(let _=0;_<l.length;){const E=l[_++],x=l[_++],M=u[E],L=o.data[E];null!==L.setInput?L.setInput(M,p,d,x):M[x]=p}}function na(o,u,l){const d=Lu(u,o);!function uu(o,u,l){Cr(o)?o.setValue(u,l):u.textContent=l}(o[11],d,l)}function Nd(o,u,l){let d=l?o.styles:null,p=l?o.classes:null,_=0;if(null!==u)for(let E=0;E<u.length;E++){const x=u[E];"number"==typeof x?_=x:1==_?p=De(p,x):2==_&&(d=De(d,x+": "+u[++E]+";"))}l?o.styles=d:o.stylesWithoutHost=d,l?o.classes=p:o.classesWithoutHost=p}const CT=new xr("INJECTOR",-1);class cS{get(u,l=tu){if(l===tu){const d=new Error(`NullInjectorError: No provider for ${ye(u)}!`);throw d.name="NullInjectorError",d}return l}}const ST=new xr("Set Injector scope."),Ec={},Ld={};let P0;function xT(){return void 0===P0&&(P0=new cS),P0}function DT(o,u=null,l=null,d){const p=pf(o,u,l,d);return p._resolveInjectorDefTypes(),p}function pf(o,u=null,l=null,d){return new CA(o,l,u||xT(),d)}class CA{constructor(u,l,d,p=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];l&&Es(l,x=>this.processProvider(x,u,l)),Es([u],x=>this.processInjectorType(x,[],_)),this.records.set(CT,gf(void 0,this));const E=this.records.get(ST);this.scope=null!=E?E.value:null,this.source=p||("object"==typeof u?null:ye(u))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(u=>u.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(u,l=tu,d=Ut.Default){this.assertNotDestroyed();const p=Nn(this),_=ur(void 0);try{if(!(d&Ut.SkipSelf)){let x=this.records.get(u);if(void 0===x){const M=function AA(o){return"function"==typeof o||"object"==typeof o&&o instanceof xr}(u)&&zt(u);x=M&&this.injectableDefInScope(M)?gf(IT(u),Ec):null,this.records.set(u,x)}if(null!=x)return this.hydrate(u,x)}return(d&Ut.Self?xT():this.parent).get(u,l=d&Ut.Optional&&l===tu?null:l)}catch(E){if("NullInjectorError"===E.name){if((E[nu]=E[nu]||[]).unshift(ye(u)),p)throw E;return function ac(o,u,l,d){const p=o[nu];throw u[ic]&&p.unshift(u[ic]),o.message=function Xu(o,u,l,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let p=ye(u);if(Array.isArray(u))p=u.map(ye).join(" -> ");else if("object"==typeof u){let _=[];for(let E in u)if(u.hasOwnProperty(E)){let x=u[E];_.push(E+":"+("string"==typeof x?JSON.stringify(x):ye(x)))}p=`{${_.join(", ")}}`}return`${l}${d?"("+d+")":""}[${p}]: ${o.replace(Hh,"\n  ")}`}("\n"+o.message,p,l,d),o.ngTokenPath=p,o[nu]=null,o}(E,u,"R3InjectorError",this.source)}throw E}finally{ur(_),Nn(p)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(u=>this.get(u))}toString(){const u=[];return this.records.forEach((d,p)=>u.push(ye(p))),`R3Injector[${u.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Je(205,!1)}processInjectorType(u,l,d){if(!(u=Q(u)))return!1;let p=zn(u);const _=null==p&&u.ngModule||void 0,E=void 0===_?u:_,x=-1!==d.indexOf(E);if(void 0!==_&&(p=zn(_)),null==p)return!1;if(null!=p.imports&&!x){let q;d.push(E);try{Es(p.imports,ee=>{this.processInjectorType(ee,l,d)&&(void 0===q&&(q=[]),q.push(ee))})}finally{}if(void 0!==q)for(let ee=0;ee<q.length;ee++){const{ngModule:Te,providers:$e}=q[ee];Es($e,_t=>this.processProvider(_t,Te,$e||rn))}}this.injectorDefTypes.add(E);const M=Ta(E)||(()=>new E);this.records.set(E,gf(M,Ec));const L=p.providers;if(null!=L&&!x){const q=u;Es(L,ee=>this.processProvider(ee,q,L))}return void 0!==_&&void 0!==u.providers}processProvider(u,l,d){let p=mf(u=Q(u))?u:Q(u&&u.provide);const _=function SA(o,u,l){return R0(o)?gf(void 0,o.useValue):gf(AT(o),Ec)}(u);if(mf(u)||!0!==u.multi)this.records.get(p);else{let E=this.records.get(p);E||(E=gf(void 0,Ec,!0),E.factory=()=>ru(E.multi),this.records.set(p,E)),p=u,E.multi.push(u)}this.records.set(p,_)}hydrate(u,l){return l.value===Ec&&(l.value=Ld,l.value=l.factory()),"object"==typeof l.value&&l.value&&function IA(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(u){if(!u.providedIn)return!1;const l=Q(u.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function IT(o){const u=zt(o),l=null!==u?u.factory:Ta(o);if(null!==l)return l;if(o instanceof xr)throw new Je(204,!1);if(o instanceof Function)return function dS(o){const u=o.length;if(u>0)throw Xl(u,"?"),new Je(204,!1);const l=function ln(o){const u=o&&(o[ar]||o[Bn]);if(u){const l=function $n(o){if(o.hasOwnProperty("name"))return o.name;const u=(""+o).match(/^function\s*([^\s(]+)/);return null===u?"":u[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),u}return null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new Je(204,!1)}function AT(o,u,l){let d;if(mf(o)){const p=Q(o);return Ta(p)||IT(p)}if(R0(o))d=()=>Q(o.useValue);else if(function hS(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...ru(o.deps||[]));else if(function kT(o){return!(!o||!o.useExisting)}(o))d=()=>ai(Q(o.useExisting));else{const p=Q(o&&(o.useClass||o.provide));if(!function DA(o){return!!o.deps}(o))return Ta(p)||IT(p);d=()=>new p(...ru(o.deps))}return d}function gf(o,u,l=!1){return{factory:o,value:u,multi:l?[]:void 0}}function R0(o){return null!==o&&"object"==typeof o&&sc in o}function mf(o){return"function"==typeof o}let ra=(()=>{class o{static create(l,d){var p;if(Array.isArray(l))return DT({name:""},d,l,"");{const _=null!==(p=l.name)&&void 0!==p?p:"";return DT({name:_},l.parent,l.providers,_)}}}return o.THROW_IF_NOT_FOUND=tu,o.NULL=new cS,o.\u0275prov=ve({token:o,providedIn:"any",factory:()=>ai(CT)}),o.__NG_ELEMENT_ID__=-1,o})();function U0(o,u){td(Ss(o)[1],Or())}function yf(o){let u=function NT(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const d=[o];for(;u;){let p;if(zi(o))p=u.\u0275cmp||u.\u0275dir;else{if(u.\u0275cmp)throw new Je(903,"");p=u.\u0275dir}if(p){if(l){d.push(p);const E=o;E.inputs=B0(o.inputs),E.declaredInputs=B0(o.declaredInputs),E.outputs=B0(o.outputs);const x=p.hostBindings;x&&bS(o,x);const M=p.viewQuery,L=p.contentQueries;if(M&&LT(o,M),L&&FT(o,L),me(o.inputs,p.inputs),me(o.declaredInputs,p.declaredInputs),me(o.outputs,p.outputs),zi(p)&&p.data.animation){const q=o.data;q.animation=(q.animation||[]).concat(p.data.animation)}}const _=p.features;if(_)for(let E=0;E<_.length;E++){const x=_[E];x&&x.ngInherit&&x(o),x===yf&&(l=!1)}}u=Object.getPrototypeOf(u)}!function vS(o){let u=0,l=null;for(let d=o.length-1;d>=0;d--){const p=o[d];p.hostVars=u+=p.hostVars,p.hostAttrs=Ca(p.hostAttrs,l=Ca(l,p.hostAttrs))}}(d)}function B0(o){return o===Ci?{}:o===rn?[]:o}function LT(o,u){const l=o.viewQuery;o.viewQuery=l?(d,p)=>{u(d,p),l(d,p)}:u}function FT(o,u){const l=o.contentQueries;o.contentQueries=l?(d,p,_)=>{u(d,p,_),l(d,p,_)}:u}function bS(o,u){const l=o.hostBindings;o.hostBindings=l?(d,p)=>{u(d,p),l(d,p)}:u}let ml=null;function vf(){if(!ml){const o=Sn.Symbol;if(o&&o.iterator)ml=o.iterator;else{const u=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<u.length;++l){const d=u[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(ml=d)}}}return ml}function yg(o){return!!fo(o)&&(Array.isArray(o)||!(o instanceof Map)&&vf()in o)}function fo(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function hu(o,u,l){return o[u]=l}function Ii(o,u,l){return!Object.is(o[u],l)&&(o[u]=l,!0)}function bf(o,u,l,d){const p=Ii(o,u,l);return Ii(o,u+1,d)||p}function pr(o,u,l,d){const p=Et();return Ii(p,wa(),u)&&(Wn(),Uo(br(),p,o,u,l,d)),pr}function po(o,u,l,d,p,_){const x=bf(o,function vs(){return gn.lFrame.bindingIndex}(),l,p);return Zo(2),x?u+ze(l)+d+ze(p)+_:wn}function $0(o,u,l,d,p,_,E,x){const M=Et(),L=Wn(),q=o+20,ee=L.firstCreatePass?function OA(o,u,l,d,p,_,E,x,M){const L=u.consts,q=dg(u,o,4,E||null,Ao(L,x));Ds(u,l,q,Ao(L,M)),td(u,q);const ee=q.tViews=c_(2,q,d,p,_,u.directiveRegistry,u.pipeRegistry,null,u.schemas,L);return null!==u.queries&&(u.queries.template(u,q),ee.queries=u.queries.embeddedTView(q)),q}(q,L,M,u,l,d,p,_,E):L.data[q];eo(ee,!1);const Te=M[11].createComment("");Yp(L,M,Te,ee),yi(Te,M),df(M,M[q]=M0(Te,M,Te,ee)),ku(ee)&&fg(L,M,ee),null!=E&&l_(M,ee,x)}function xS(o){return Xs(function $l(){return gn.lFrame.contextLView}(),20+o)}function Ur(o,u=Ut.Default){const l=Et();return null===l?ai(o,u):sd(Or(),l,Q(o),u)}function Bt(){throw new Error("invalid")}function Eg(o,u,l){const d=Et();return Ii(d,wa(),u)&&function ta(o,u,l,d,p,_,E,x){const M=ii(u,l);let q,L=u.inputs;!x&&null!=L&&(q=L[d])?(__(o,l,q,d,p),ba(u)&&function yA(o,u){const l=_s(u,o);16&l[2]||(l[2]|=64)}(l,u.index)):3&u.type&&(d=function gg(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),p=null!=E?E(p,u.value||"",d):p,Cr(_)?_.setProperty(M,d,p):Ls(d)||(M.setProperty?M.setProperty(d,p):M[d]=p))}(Wn(),br(),d,o,u,d[11],l,!1),Eg}function x_(o,u,l,d,p){const E=p?"class":"style";__(o,l,u.inputs[E],E,d)}function G0(o,u,l,d){const p=Et(),_=Wn(),E=20+o,x=p[11],M=p[E]=Fi(x,u,function Op(){return gn.lFrame.currentNamespace}()),L=_.firstCreatePass?function Df(o,u,l,d,p,_,E){const x=u.consts,L=dg(u,o,2,p,Ao(x,_));return Ds(u,l,L,Ao(x,E)),null!==L.attrs&&Nd(L,L.attrs,!1),null!==L.mergedAttrs&&Nd(L,L.mergedAttrs,!0),null!==u.queries&&u.queries.elementStart(u,L),L}(E,_,p,0,u,l,d):_.data[E];eo(L,!0);const q=L.mergedAttrs;null!==q&&ro(x,M,q);const ee=L.classes;null!==ee&&tf(x,M,ee);const Te=L.styles;return null!==Te&&Gm(x,M,Te),64!=(64&L.flags)&&Yp(_,p,M,L),0===function Kc(){return gn.lFrame.elementDepthCount}()&&yi(M,p),function Sp(){gn.lFrame.elementDepthCount++}(),ku(L)&&(fg(_,p,L),JC(_,L,p)),null!==d&&l_(p,L),G0}function If(){let o=Or();Ea()?ys():(o=o.parent,eo(o,!1));const u=o;!function Vl(){gn.lFrame.elementDepthCount--}();const l=Wn();return l.firstCreatePass&&(td(l,o),wh(o)&&l.queries.elementEnd(o)),null!=u.classesWithoutHost&&function Rm(o){return 0!=(16&o.flags)}(u)&&x_(l,u,Et(),u.classesWithoutHost,!0),null!=u.stylesWithoutHost&&function Tr(o){return 0!=(32&o.flags)}(u)&&x_(l,u,Et(),u.stylesWithoutHost,!1),If}function HT(o,u,l,d){return G0(o,u,l,d),If(),HT}function D_(o,u,l){const d=Et(),p=Wn(),_=o+20,E=p.firstCreatePass?function OS(o,u,l,d,p){const _=u.consts,E=Ao(_,d),x=dg(u,o,8,"ng-container",E);return null!==E&&Nd(x,E,!0),Ds(u,l,x,Ao(_,p)),null!==u.queries&&u.queries.elementStart(u,x),x}(_,p,d,u,l):p.data[_];eo(E,!0);const x=d[_]=d[11].createComment("");return Yp(p,d,x,E),yi(x,d),ku(E)&&(fg(p,d,E),JC(p,E,d)),null!=l&&l_(d,E),D_}function Gs(){let o=Or();const u=Wn();return Ea()?ys():(o=o.parent,eo(o,!1)),u.firstCreatePass&&(td(u,o),wh(o)&&u.queries.elementEnd(o)),Gs}function qT(){return Et()}function K0(o){return!!o&&"function"==typeof o.then}function wc(o){return!!o&&"function"==typeof o.subscribe}const Z0=wc;function Qe(o,u,l,d){const p=Et(),_=Wn(),E=Or();return function NS(o,u,l,d,p,_,E,x){const M=ku(d),q=o.firstCreatePass&&m_(o),ee=u[8],Te=g_(u);let $e=!0;if(3&d.type||x){const Vt=ii(d,u),Kt=x?x(Vt):Vt,Ct=Te.length,an=x?Kn=>x(tr(Kn[d.index])):d.index;if(Cr(l)){let Kn=null;if(!x&&M&&(Kn=function gu(o,u,l,d){const p=o.cleanup;if(null!=p)for(let _=0;_<p.length-1;_+=2){const E=p[_];if(E===l&&p[_+1]===d){const x=u[7],M=p[_+2];return x.length>M?x[M]:null}"string"==typeof E&&(_+=2)}return null}(o,u,p,d.index)),null!==Kn)(Kn.__ngLastListenerFn__||Kn).__ngNextListenerFn__=_,Kn.__ngLastListenerFn__=_,$e=!1;else{_=_l(d,u,ee,_,!1);const Xn=l.listen(Kt,p,_);Te.push(_,Xn),q&&q.push(p,an,Ct,Ct+1)}}else _=_l(d,u,ee,_,!0),Kt.addEventListener(p,_,E),Te.push(_),q&&q.push(p,an,Ct,E)}else _=_l(d,u,ee,_,!1);const _t=d.outputs;let Mt;if($e&&null!==_t&&(Mt=_t[p])){const Vt=Mt.length;if(Vt)for(let Kt=0;Kt<Vt;Kt+=2){const Ho=u[Mt[Kt]][Mt[Kt+1]].subscribe(_),xl=Te.length;Te.push(_,Ho),q&&q.push(p,d.index,xl,-(xl+1))}}}(_,p,p[11],E,o,u,!!l,d),Qe}function wg(o,u,l,d){try{return!1!==l(d)}catch(p){return Lr(o,p),!1}}function _l(o,u,l,d,p){return function _(E){if(E===Function)return d;const x=2&o.flags?_s(o.index,u):u;0==(32&u[2])&&hf(x);let M=wg(u,0,d,E),L=_.__ngNextListenerFn__;for(;L;)M=wg(u,0,L,E)&&M,L=L.__ngNextListenerFn__;return p&&!1===M&&(E.preventDefault(),E.returnValue=!1),M}}function LS(o=1){return function Jc(o){return(gn.lFrame.contextLView=function Nh(o,u){for(;o>0;)u=u[15],o--;return u}(o,gn.lFrame.contextLView))[8]}(o)}function Af(o,u){let l=null;const d=function iA(o){const u=o.attrs;if(null!=u){const l=u.indexOf(5);if(0==(1&l))return u[l+1]}return null}(o);for(let p=0;p<u.length;p++){const _=u[p];if("*"!==_){if(null===d?og(o,_,!0):oA(d,_))return p}else l=p}return l}function GT(o){const u=Et()[16][6];if(!u.projection){const d=u.projection=Xl(o?o.length:1,null),p=d.slice();let _=u.child;for(;null!==_;){const E=o?Af(_,o):0;null!==E&&(p[E]?p[E].projectionNext=_:d[E]=_,p[E]=_),_=_.next}}}function Y0(o,u=0,l){const d=Et(),p=Wn(),_=dg(p,20+o,16,null,l||null);null===_.projection&&(_.projection=u),ys(),64!=(64&_.flags)&&function Wy(o,u,l){Ky(u[11],0,u,l,$m(o,l,u),Xh(l.parent||u[6],l,u))}(p,d,_)}function VS(o,u,l,d,p){const _=o[l+1],E=null===u;let x=d?Nr(_):as(_),M=!1;for(;0!==x&&(!1===M||E);){const q=o[x+1];HA(o[x],u)&&(M=!0,o[x+1]=d?Jb(q):ag(q)),x=d?Nr(q):as(q)}M&&(o[l+1]=d?ag(_):Jb(_))}function HA(o,u){return null===o||null==u||(Array.isArray(o)?o[1]:o)===u||!(!Array.isArray(o)||"string"!=typeof u)&&Po(o,u)>=0}function X0(o,u){return function ds(o,u,l,d){const p=Et(),_=Wn(),E=Zo(2);_.firstUpdatePass&&function A_(o,u,l,d){const p=o.data;if(null===p[l+1]){const _=p[Vr()],E=function Mr(o,u){return u>=o.expandoStartIndex}(o,l);(function k_(o,u){return 0!=(o.flags&(u?16:32))})(_,d)&&null===u&&!E&&(u=!1),u=function As(o,u,l,d){const p=function Qc(o){const u=gn.lFrame.currentDirectiveIndex;return-1===u?null:o[u]}(o);let _=d?u.residualClasses:u.residualStyles;if(null===p)0===(d?u.classBindings:u.styleBindings)&&(l=Ig(l=zs(null,o,u,l,d),u.attrs,d),_=null);else{const E=u.directiveStylingLast;if(-1===E||o[E]!==p)if(l=zs(p,o,u,l,d),null===_){let M=function Hr(o,u,l){const d=l?u.classBindings:u.styleBindings;if(0!==as(d))return o[Nr(d)]}(o,u,d);void 0!==M&&Array.isArray(M)&&(M=zs(null,o,u,M[1],d),M=Ig(M,u.attrs,d),function zS(o,u,l,d){o[Nr(l?u.classBindings:u.styleBindings)]=d}(o,u,d,M))}else _=function Dg(o,u,l){let d;const p=u.directiveEnd;for(let _=1+u.directiveStylingLast;_<p;_++)d=Ig(d,o[_].hostAttrs,l);return Ig(d,u.attrs,l)}(o,u,d)}return void 0!==_&&(d?u.residualClasses=_:u.residualStyles=_),l}(p,_,u,d),function Q0(o,u,l,d,p,_){let E=_?u.classBindings:u.styleBindings,x=Nr(E),M=as(E);o[d]=l;let q,L=!1;if(Array.isArray(l)){const ee=l;q=ee[1],(null===q||Po(ee,q)>0)&&(L=!0)}else q=l;if(p)if(0!==M){const Te=Nr(o[x+1]);o[d+1]=Jm(Te,x),0!==Te&&(o[Te+1]=t_(o[Te+1],d)),o[x+1]=function e_(o,u){return 131071&o|u<<17}(o[x+1],d)}else o[d+1]=Jm(x,0),0!==x&&(o[x+1]=t_(o[x+1],d)),x=d;else o[d+1]=Jm(M,0),0===x?x=d:o[M+1]=t_(o[M+1],d),M=d;L&&(o[d+1]=ag(o[d+1])),VS(o,q,d,!0),VS(o,q,d,!1),function BS(o,u,l,d,p){const _=p?o.residualClasses:o.residualStyles;null!=_&&"string"==typeof u&&Po(_,u)>=0&&(l[d+1]=Jb(l[d+1]))}(u,q,o,d,_),E=Jm(x,M),_?u.classBindings=E:u.styleBindings=E}(p,_,u,l,E,d)}}(_,o,E,d),u!==wn&&Ii(p,E,u)&&function Cc(o,u,l,d,p,_,E,x){if(!(3&u.type))return;const M=o.data,L=M[x+1];Oa(function jC(o){return 1==(1&o)}(L)?ui(M,u,l,p,as(L),E):void 0)||(Oa(_)||function VC(o){return 2==(2&o)}(L)&&(_=ui(M,null,l,p,x,E)),function $b(o,u,l,d,p){const _=Cr(o);if(u)p?_?o.addClass(l,d):l.classList.add(d):_?o.removeClass(l,d):l.classList.remove(d);else{let E=-1===d.indexOf("-")?void 0:Cs.DashCase;if(null==p)_?o.removeStyle(l,d,E):l.style.removeProperty(d);else{const x="string"==typeof p&&p.endsWith("!important");x&&(p=p.slice(0,-10),E|=Cs.Important),_?o.setStyle(l,d,p,E):l.style.setProperty(d,p,x?"important":"")}}}(d,E,Lu(Vr(),l),p,_))}(_,_.data[Vr()],p,p[11],o,p[E+1]=function J0(o,u){return null==o||("string"==typeof u?o+=u:"object"==typeof o&&(o=ye(cu(o)))),o}(u,l),d,E)}(o,u,null,!0),X0}function zs(o,u,l,d,p){let _=null;const E=l.directiveEnd;let x=l.directiveStylingLast;for(-1===x?x=l.directiveStart:x++;x<E&&(_=u[x],d=Ig(d,_.hostAttrs,p),_!==o);)x++;return null!==o&&(l.directiveStylingLast=x),d}function Ig(o,u,l){const d=l?1:2;let p=-1;if(null!==u)for(let _=0;_<u.length;_++){const E=u[_];"number"==typeof E?p=E:p===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),mi(o,E,!!l||u[++_]))}return void 0===o?null:o}function ui(o,u,l,d,p,_){const E=null===u;let x;for(;p>0;){const M=o[p],L=Array.isArray(M),q=L?M[1]:M,ee=null===q;let Te=l[p+1];Te===wn&&(Te=ee?rn:void 0);let $e=ee?ec(Te,d):q===d?Te:void 0;if(L&&!Oa($e)&&($e=ec(M,d)),Oa($e)&&(x=$e,E))return x;const _t=o[p+1];p=E?Nr(_t):as(_t)}if(null!==u){let M=_?u.residualClasses:u.residualStyles;null!=M&&(x=ec(M,d))}return x}function Oa(o){return void 0!==o}function Ag(o,u=""){const l=Et(),d=Wn(),p=o+20,_=d.firstCreatePass?dg(d,p,1,u,null):d.data[p],E=l[p]=function $r(o,u){return Cr(o)?o.createText(u):o.createTextNode(u)}(l[11],u);Yp(d,l,E,_),eo(_,!1)}function XT(o){return yu("",o,""),XT}function yu(o,u,l){const d=Et(),p=function Fd(o,u,l,d){return Ii(o,wa(),l)?u+ze(l)+d:wn}(d,o,u,l);return p!==wn&&na(d,Vr(),p),yu}function vl(o,u,l,d,p){const _=Et(),E=po(_,o,u,l,d,p);return E!==wn&&na(_,Vr(),E),vl}const Dc=void 0;var t1=["en",[["a","p"],["AM","PM"],Dc],[["AM","PM"],Dc,Dc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Dc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Dc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Dc,"{1} 'at' {0}",Dc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function e1(o){const l=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Of={};function oE(o){const u=function t2(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=n1(u);if(l)return l;const d=u.split("-")[0];if(l=n1(d),l)return l;if("en"===d)return t1;throw new Error(`Missing locale data for the locale "${o}".`)}function aE(o){return oE(o)[En.PluralCase]}function n1(o){return o in Of||(Of[o]=Sn.ng&&Sn.ng.common&&Sn.ng.common.locales&&Sn.ng.common.locales[o]),Of[o]}var En=(()=>((En=En||{})[En.LocaleId=0]="LocaleId",En[En.DayPeriodsFormat=1]="DayPeriodsFormat",En[En.DayPeriodsStandalone=2]="DayPeriodsStandalone",En[En.DaysFormat=3]="DaysFormat",En[En.DaysStandalone=4]="DaysStandalone",En[En.MonthsFormat=5]="MonthsFormat",En[En.MonthsStandalone=6]="MonthsStandalone",En[En.Eras=7]="Eras",En[En.FirstDayOfWeek=8]="FirstDayOfWeek",En[En.WeekendRange=9]="WeekendRange",En[En.DateFormat=10]="DateFormat",En[En.TimeFormat=11]="TimeFormat",En[En.DateTimeFormat=12]="DateTimeFormat",En[En.NumberSymbols=13]="NumberSymbols",En[En.NumberFormats=14]="NumberFormats",En[En.CurrencyCode=15]="CurrencyCode",En[En.CurrencySymbol=16]="CurrencySymbol",En[En.CurrencyName=17]="CurrencyName",En[En.Currencies=18]="Currencies",En[En.Directionality=19]="Directionality",En[En.PluralCase=20]="PluralCase",En[En.ExtraData=21]="ExtraData",En))();const bl="en-US";let Tl=bl;function Vf(o,u,l,d,p){if(o=Q(o),Array.isArray(o))for(let _=0;_<o.length;_++)Vf(o[_],u,l,d,p);else{const _=Wn(),E=Et();let x=mf(o)?o:Q(o.provide),M=AT(o);const L=Or(),q=1048575&L.providerIndexes,ee=L.directiveStart,Te=L.providerIndexes>>20;if(mf(o)||!o.multi){const $e=new Wl(M,p,Ur),_t=cv(x,u,p?q:q+Te,ee);-1===_t?(Zl(Wu(L,E),_,x),Ug(_,o,u.length),u.push(x),L.directiveStart++,L.directiveEnd++,p&&(L.providerIndexes+=1048576),l.push($e),E.push($e)):(l[_t]=$e,E[_t]=$e)}else{const $e=cv(x,u,q+Te,ee),_t=cv(x,u,q,q+Te),Mt=$e>=0&&l[$e],Vt=_t>=0&&l[_t];if(p&&!Vt||!p&&!Mt){Zl(Wu(L,E),_,x);const Kt=function b1(o,u,l,d,p){const _=new Wl(o,l,Ur);return _.multi=[],_.index=u,_.componentProviders=0,CE(_,p,d&&!l),_}(p?m2:v1,l.length,p,d,M);!p&&Vt&&(l[_t].providerFactory=Kt),Ug(_,o,u.length,0),u.push(x),L.directiveStart++,L.directiveEnd++,p&&(L.providerIndexes+=1048576),l.push(Kt),E.push(Kt)}else Ug(_,o,$e>-1?$e:_t,CE(l[p?_t:$e],M,!p&&d));!p&&d&&Vt&&l[_t].componentProviders++}}}function Ug(o,u,l,d){const p=mf(u),_=function xA(o){return!!o.useClass}(u);if(p||_){const M=(_?Q(u.useClass):u).prototype.ngOnDestroy;if(M){const L=o.destroyHooks||(o.destroyHooks=[]);if(!p&&u.multi){const q=L.indexOf(l);-1===q?L.push(l,[d,M]):L[q+1].push(d,M)}else L.push(l,M)}}}function CE(o,u,l){return l&&o.componentProviders++,o.multi.push(u)-1}function cv(o,u,l,d){for(let p=l;p<d;p++)if(u[p]===o)return p;return-1}function v1(o,u,l,d){return dv(this.multi,[])}function m2(o,u,l,d){const p=this.multi;let _;if(this.providerFactory){const E=this.providerFactory.componentProviders,x=so(l,l[1],this.providerFactory.index,d);_=x.slice(0,E),dv(p,_);for(let M=E;M<x.length;M++)_.push(x[M])}else _=[],dv(p,_);return _}function dv(o,u){for(let l=0;l<o.length;l++)u.push((0,o[l])());return u}function T1(o,u=[]){return l=>{l.providersResolver=(d,p)=>function G_(o,u,l){const d=Wn();if(d.firstCreatePass){const p=zi(o);Vf(l,d.data,d.blueprint,p,!0),Vf(u,d.data,d.blueprint,p,!1)}}(d,p?p(o):o,u)}}class E1{}class w1{resolveComponentFactory(u){throw function y2(o){const u=Error(`No component factory found for ${ye(o)}. Did you add it to @NgModule.entryComponents?`);return u.ngComponent=o,u}(u)}}let fv=(()=>{class o{}return o.NULL=new w1,o})();function Ai(){return qd(Or(),Et())}function qd(o,u){return new Bg(ii(o,u))}let Bg=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=Ai,o})();function W_(o){return o instanceof Bg?o.nativeElement:o}class pv{}let C1=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function S1(){const o=Et(),l=_s(Or().index,o);return function K_(o){return o[11]}(gs(l)?l:o)}(),o})(),x1=(()=>{class o{}return o.\u0275prov=ve({token:o,providedIn:"root",factory:()=>null}),o})();class SE{constructor(u){this.full=u,this.major=u.split(".")[0],this.minor=u.split(".")[1],this.patch=u.split(".").slice(2).join(".")}}const D1=new SE("13.3.12"),xE={};function Gd(o,u,l,d,p=!1){for(;null!==l;){const _=u[l.index];if(null!==_&&d.push(tr(_)),Os(_))for(let x=10;x<_.length;x++){const M=_[x],L=M[1].firstChild;null!==L&&Gd(M[1],M,L,d)}const E=l.type;if(8&E)Gd(o,u,l.child,d);else if(32&E){const x=F(l,u);let M;for(;M=x();)d.push(M)}else if(16&E){const x=ef(u,l);if(Array.isArray(x))d.push(...x);else{const M=Ne(u[16]);Gd(M[1],M,x,d,!0)}}l=p?l.projectionNext:l.next}return d}class jf{constructor(u,l){this._lView=u,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const u=this._lView,l=u[1];return Gd(l,u,l.firstChild,[])}get context(){return this._lView[8]}set context(u){this._lView[8]=u}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const u=this._lView[3];if(Os(u)){const l=u[8],d=l?l.indexOf(this):-1;d>-1&&(al(u,d),Zu(l,d))}this._attachedToViewContainer=!1}Yh(this._lView[1],this._lView)}onDestroy(u){hT(this._lView[1],this._lView,null,u)}markForCheck(){hf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function TT(o,u,l){const d=u[10];d.begin&&d.begin();try{pl(o,u,o.template,l)}catch(p){throw Lr(u,p),p}finally{d.end&&d.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Je(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Gp(o,u){lu(o,u,u[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(u){if(this._attachedToViewContainer)throw new Je(902,"");this._appRef=u}}class v2 extends jf{constructor(u){super(u),this._view=u}detectChanges(){uS(this._view)}checkNoChanges(){}get context(){return null}}class DE extends fv{constructor(u){super(),this.ngModule=u}resolveComponentFactory(u){const l=_n(u);return new mv(l,this.ngModule)}}function gv(o){const u=[];for(let l in o)o.hasOwnProperty(l)&&u.push({propName:o[l],templateName:l});return u}class mv extends E1{constructor(u,l){super(),this.componentDef=u,this.ngModule=l,this.componentType=u.type,this.selector=function g0(o){return o.map(qs).join(",")}(u.selectors),this.ngContentSelectors=u.ngContentSelectors?u.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return gv(this.componentDef.inputs)}get outputs(){return gv(this.componentDef.outputs)}create(u,l,d,p){const _=(p=p||this.ngModule)?function b2(o,u){return{get:(l,d,p)=>{const _=o.get(l,xE,p);return _!==xE||d===xE?_:u.get(l,d,p)}}}(u,p.injector):u,E=_.get(pv,kh),x=_.get(x1,null),M=E.createRenderer(null,this.componentDef),L=this.componentDef.selectors[0][0]||"div",q=d?function dT(o,u,l){if(Cr(o))return o.selectRootElement(u,l===bn.ShadowDom);let d="string"==typeof u?o.querySelector(u):u;return d.textContent="",d}(M,d,this.componentDef.encapsulation):Fi(E.createRenderer(null,this.componentDef),L,function I1(o){const u=o.toLowerCase();return"svg"===u?"svg":"math"===u?"math":null}(L)),ee=this.componentDef.onPush?576:528,Te=function OT(o,u){return{components:[],scheduler:o||at,clean:Tc,playerHandler:u||null,flags:0}}(),$e=c_(0,null,null,1,0,null,null,null,null,null),_t=cg(null,$e,Te,ee,null,null,E,M,x,_);let Mt,Vt;Xc(_t);try{const Kt=function F0(o,u,l,d,p,_){const E=l[1];l[20]=o;const M=dg(E,20,2,"#host",null),L=M.mergedAttrs=u.hostAttrs;null!==L&&(Nd(M,L,!0),null!==o&&(ro(p,o,L),null!==M.classes&&tf(p,o,M.classes),null!==M.styles&&Gm(p,o,M.styles)));const q=d.createRenderer(o,u),ee=cg(l,E0(u),null,u.onPush?64:16,l[20],M,d,q,_||null,null);return E.firstCreatePass&&(Zl(Wu(M,l),E,u.type),mT(E,M),D0(M,l.length,1)),df(l,ee),l[20]=ee}(q,this.componentDef,_t,E,M);if(q)if(d)ro(M,q,["ng-version",D1.full]);else{const{attrs:Ct,classes:an}=function os(o){const u=[],l=[];let d=1,p=2;for(;d<o.length;){let _=o[d];if("string"==typeof _)2===p?""!==_&&u.push(_,o[++d]):8===p&&l.push(_);else{if(!cn(p))break;p=_}d++}return{attrs:u,classes:l}}(this.componentDef.selectors[0]);Ct&&ro(M,q,Ct),an&&an.length>0&&tf(M,q,an.join(" "))}if(Vt=Ni($e,20),void 0!==l){const Ct=Vt.projection=[];for(let an=0;an<this.ngContentSelectors.length;an++){const Kn=l[an];Ct.push(null!=Kn?Array.from(Kn):null)}}Mt=function b_(o,u,l,d,p){const _=l[1],E=function tS(o,u,l){const d=Or();o.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),I0(o,d,u,hg(o,u,1,null),l));const p=so(u,o,d.directiveStart,d);yi(p,u);const _=ii(d,u);return _&&yi(_,u),p}(_,l,u);if(d.components.push(E),o[8]=E,p&&p.forEach(M=>M(E,u)),u.contentQueries){const M=Or();u.contentQueries(1,E,M.directiveStart)}const x=Or();return!_.firstCreatePass||null===u.hostBindings&&null===u.hostAttrs||(no(x.index),gT(l[1],x,0,x.directiveStart,x.directiveEnd,u),x0(u,E)),E}(Kt,this.componentDef,_t,Te,[U0]),bc($e,_t,null)}finally{bs()}return new E2(this.componentType,Mt,qd(Vt,_t),_t,Vt)}}class E2 extends class _2{}{constructor(u,l,d,p,_){super(),this.location=d,this._rootLView=p,this._tNode=_,this.instance=l,this.hostView=this.changeDetectorRef=new v2(p),this.componentType=u}get injector(){return new Da(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(u){this.hostView.onDestroy(u)}}class Eu{}class IE{}const Vg=new Map;class Wd extends Eu{constructor(u,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new DE(this);const d=ae(u);this._bootstrapComponents=dl(d.bootstrap),this._r3Injector=pf(u,l,[{provide:Eu,useValue:this},{provide:fv,useValue:this.componentFactoryResolver}],ye(u)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(u)}get(u,l=ra.THROW_IF_NOT_FOUND,d=Ut.Default){return u===ra||u===Eu||u===CT?this:this._r3Injector.get(u,l,d)}destroy(){const u=this._r3Injector;!u.destroyed&&u.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(u){this.destroyCbs.push(u)}}class kc extends IE{constructor(u){super(),this.moduleType=u,null!==ae(u)&&function A1(o){const u=new Set;!function l(d){const p=ae(d,!0),_=p.id;null!==_&&(function wl(o,u,l){if(u&&u!==l)throw new Error(`Duplicate module registered for ${o} - ${ye(u)} vs ${ye(u.name)}`)}(_,Vg.get(_),d),Vg.set(_,d));const E=dl(p.imports);for(const x of E)u.has(x)||(u.add(x),l(x))}(o)}(u)}create(u){return new Wd(this.moduleType,u)}}function Kd(o,u,l){const d=Ki()+o,p=Et();return p[d]===wn?hu(p,d,l?u.call(l):u()):function vg(o,u){return o[u]}(p,d)}function jg(o,u,l,d){return $g(Et(),Ki(),o,u,l,d)}function ME(o,u,l,d,p){return function Yd(o,u,l,d,p,_,E){const x=u+l;return bf(o,x,p,_)?hu(o,x+2,E?d.call(E,p,_):d(p,_)):Zd(o,x+2)}(Et(),Ki(),o,u,l,d,p)}function Zd(o,u){const l=o[u];return l===wn?void 0:l}function $g(o,u,l,d,p,_){const E=u+l;return Ii(o,E,p)?hu(o,E+1,_?d.call(_,p):d(p)):Zd(o,E+1)}function L1(o,u){const l=Wn();let d;const p=o+20;l.firstCreatePass?(d=function S2(o,u){if(u)for(let l=u.length-1;l>=0;l--){const d=u[l];if(o===d.name)return d}}(u,l.pipeRegistry),l.data[p]=d,d.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(p,d.onDestroy)):d=l.data[p];const _=d.factory||(d.factory=Ta(d.type)),E=ur(Ur);try{const x=vn(!1),M=_();return vn(x),function NA(o,u,l,d){l>=o.data.length&&(o.data[l]=null,o.blueprint[l]=null),u[l]=d}(l,Et(),p,M),M}finally{ur(E)}}function Hg(o,u,l){const d=o+20,p=Et(),_=Xs(p,d);return function qg(o,u){return o[1].data[u].pure}(p,d)?$g(p,Ki(),u,_.transform,l,_):_.transform(l)}function Z_(o){return u=>{setTimeout(o,void 0,u)}}const Na=class D2 extends h.x{constructor(u=!1){super(),this.__isAsync=u}emit(u){super.next(u)}subscribe(u,l,d){var p,_,E;let x=u,M=l||(()=>null),L=d;if(u&&"object"==typeof u){const ee=u;x=null===(p=ee.next)||void 0===p?void 0:p.bind(ee),M=null===(_=ee.error)||void 0===_?void 0:_.bind(ee),L=null===(E=ee.complete)||void 0===E?void 0:E.bind(ee)}this.__isAsync&&(M=Z_(M),x&&(x=Z_(x)),L&&(L=Z_(L)));const q=super.subscribe({next:x,error:M,complete:L});return u instanceof oe.w0&&u.add(q),q}};function U1(){return this._results[vf()]()}class Gg{constructor(u=!1){this._emitDistinctChangesOnly=u,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=vf(),d=Gg.prototype;d[l]||(d[l]=U1)}get changes(){return this._changes||(this._changes=new Na)}get(u){return this._results[u]}map(u){return this._results.map(u)}filter(u){return this._results.filter(u)}find(u){return this._results.find(u)}reduce(u,l){return this._results.reduce(u,l)}forEach(u){this._results.forEach(u)}some(u){return this._results.some(u)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(u,l){const d=this;d.dirty=!1;const p=js(u);(this._changesDetected=!function jh(o,u,l){if(o.length!==u.length)return!1;for(let d=0;d<o.length;d++){let p=o[d],_=u[d];if(l&&(p=l(p),_=l(_)),_!==p)return!1}return!0}(d._results,p,l))&&(d._results=p,d.length=p.length,d.last=p[this.length-1],d.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Hf=(()=>{class o{}return o.__NG_ELEMENT_ID__=I2,o})();const B1=Hf,_v=class extends B1{constructor(u,l,d){super(),this._declarationLView=u,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(u){const l=this._declarationTContainer.tViews,d=cg(this._declarationLView,l,u,16,null,l.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(l)),bc(l,d,u),new jf(d)}};function I2(){return zg(Or(),Et())}function zg(o,u){return 4&o.type?new _v(u,o,qd(o,u)):null}let qf=(()=>{class o{}return o.__NG_ELEMENT_ID__=A2,o})();function A2(){return NE(Or(),Et())}const V1=qf,Wg=class extends V1{constructor(u,l,d){super(),this._lContainer=u,this._hostTNode=l,this._hostLView=d}get element(){return qd(this._hostTNode,this._hostLView)}get injector(){return new Da(this._hostTNode,this._hostLView)}get parentInjector(){const u=Xa(this._hostTNode,this._hostLView);if(Hu(u)){const l=qu(u,this._hostLView),d=Qa(u);return new Da(l[1].data[d+8],l)}return new Da(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(u){const l=Y_(this._lContainer);return null!==l&&l[u]||null}get length(){return this._lContainer.length-10}createEmbeddedView(u,l,d){const p=u.createEmbeddedView(l||{});return this.insert(p,d),p}createComponent(u,l,d,p,_){const E=u&&!function Mo(o){return"function"==typeof o}(u);let x;if(E)x=l;else{const ee=l||{};x=ee.index,d=ee.injector,p=ee.projectableNodes,_=ee.ngModuleRef}const M=E?u:new mv(_n(u)),L=d||this.parentInjector;if(!_&&null==M.ngModule){const Te=(E?L:this.parentInjector).get(Eu,null);Te&&(_=Te)}const q=M.create(L,p,void 0,_);return this.insert(q.hostView,x),q}insert(u,l){const d=u._lView,p=d[1];if(function Mh(o){return Os(o[3])}(d)){const q=this.indexOf(u);if(-1!==q)this.detach(q);else{const ee=d[3],Te=new Wg(ee,ee[6],ee[3]);Te.detach(Te.indexOf(u))}}const _=this._adjustIndex(l),E=this._lContainer;!function Bb(o,u,l,d){const p=10+d,_=l.length;d>0&&(l[p-1][4]=u),d<_-10?(u[4]=l[p],$h(l,10+d,u)):(l.push(u),u[4]=null),u[3]=l;const E=u[17];null!==E&&l!==E&&function MC(o,u){const l=o[9];u[16]!==u[3][3][16]&&(o[2]=!0),null===l?o[9]=[u]:l.push(u)}(E,u);const x=u[19];null!==x&&x.insertView(o),u[2]|=128}(p,d,E,_);const x=Qp(_,E),M=d[11],L=Wp(M,E[7]);return null!==L&&function Zi(o,u,l,d,p,_){d[0]=p,d[6]=u,lu(o,d,l,1,p,_)}(p,E[6],M,d,L,x),u.attachToViewContainerRef(),$h(Gf(E),_,u),u}move(u,l){return this.insert(u,l)}indexOf(u){const l=Y_(this._lContainer);return null!==l?l.indexOf(u):-1}remove(u){const l=this._adjustIndex(u,-1),d=al(this._lContainer,l);d&&(Zu(Gf(this._lContainer),l),Yh(d[1],d))}detach(u){const l=this._adjustIndex(u,-1),d=al(this._lContainer,l);return d&&null!=Zu(Gf(this._lContainer),l)?new jf(d):null}_adjustIndex(u,l=0){return null==u?this.length+l:u}};function Y_(o){return o[8]}function Gf(o){return o[8]||(o[8]=[])}function NE(o,u){let l;const d=u[o.index];if(Os(d))l=d;else{let p;if(8&o.type)p=tr(d);else{const _=u[11];p=_.createComment("");const E=ii(o,u);pc(_,Wp(_,E),p,function ll(o,u){return Cr(o)?o.nextSibling(u):u.nextSibling}(_,E),!1)}u[o.index]=l=M0(d,u,p,o),df(u,l)}return new Wg(l,o,u)}class Kg{constructor(u){this.queryList=u,this.matches=null}clone(){return new Kg(this.queryList)}setDirty(){this.queryList.setDirty()}}class Zg{constructor(u=[]){this.queries=u}createEmbeddedView(u){const l=u.queries;if(null!==l){const d=null!==u.contentQueries?u.contentQueries[0]:l.length,p=[];for(let _=0;_<d;_++){const E=l.getByIndex(_);p.push(this.queries[E.indexInDeclarationView].clone())}return new Zg(p)}return null}insertView(u){this.dirtyQueriesWithMatches(u)}detachView(u){this.dirtyQueriesWithMatches(u)}dirtyQueriesWithMatches(u){for(let l=0;l<this.queries.length;l++)null!==K1(u,l).matches&&this.queries[l].setDirty()}}class LE{constructor(u,l,d=null){this.predicate=u,this.flags=l,this.read=d}}class Cl{constructor(u=[]){this.queries=u}elementStart(u,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(u,l)}elementEnd(u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(u)}embeddedTView(u){let l=null;for(let d=0;d<this.length;d++){const p=null!==l?l.length:0,_=this.getByIndex(d).embeddedTView(u,p);_&&(_.indexInDeclarationView=d,null!==l?l.push(_):l=[_])}return null!==l?new Cl(l):null}template(u,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(u,l)}getByIndex(u){return this.queries[u]}get length(){return this.queries.length}track(u){this.queries.push(u)}}class Xd{constructor(u,l=-1){this.metadata=u,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(u,l){this.isApplyingToNode(l)&&this.matchTNode(u,l)}elementEnd(u){this._declarationNodeIndex===u.index&&(this._appliesToNextNode=!1)}template(u,l){this.elementStart(u,l)}embeddedTView(u,l){return this.isApplyingToNode(u)?(this.crossesNgTemplate=!0,this.addMatch(-u.index,l),new Xd(this.metadata)):null}isApplyingToNode(u){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=u.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(u,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let p=0;p<d.length;p++){const _=d[p];this.matchTNodeWithReadOption(u,l,$1(l,_)),this.matchTNodeWithReadOption(u,l,fr(l,u,_,!1,!1))}else d===Hf?4&l.type&&this.matchTNodeWithReadOption(u,l,-1):this.matchTNodeWithReadOption(u,l,fr(l,u,d,!1,!1))}matchTNodeWithReadOption(u,l,d){if(null!==d){const p=this.metadata.read;if(null!==p)if(p===Bg||p===qf||p===Hf&&4&l.type)this.addMatch(l.index,-2);else{const _=fr(l,u,p,!1,!1);null!==_&&this.addMatch(l.index,_)}else this.addMatch(l.index,d)}}addMatch(u,l){null===this.matches?this.matches=[u,l]:this.matches.push(u,l)}}function $1(o,u){const l=o.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===u)return l[d+1];return null}function M2(o,u,l,d){return-1===l?function zf(o,u){return 11&o.type?qd(o,u):4&o.type?zg(o,u):null}(u,o):-2===l?function Yg(o,u,l){return l===Bg?qd(u,o):l===Hf?zg(u,o):l===qf?NE(u,o):void 0}(o,u,d):so(o,o[1],l,u)}function FE(o,u,l,d){const p=u[19].queries[d];if(null===p.matches){const _=o.data,E=l.matches,x=[];for(let M=0;M<E.length;M+=2){const L=E[M];x.push(L<0?null:M2(u,_[L],E[M+1],l.metadata.read))}p.matches=x}return p.matches}function Sl(o,u,l,d){const p=o.queries.getByIndex(l),_=p.matches;if(null!==_){const E=FE(o,u,p,l);for(let x=0;x<_.length;x+=2){const M=_[x];if(M>0)d.push(E[x/2]);else{const L=_[x+1],q=u[-M];for(let ee=10;ee<q.length;ee++){const Te=q[ee];Te[17]===Te[3]&&Sl(Te[1],Te,L,d)}if(null!==q[9]){const ee=q[9];for(let Te=0;Te<ee.length;Te++){const $e=ee[Te];Sl($e[1],$e,L,d)}}}}}return d}function UE(o){const u=Et(),l=Wn(),d=Vu();Ap(d+1);const p=K1(l,d);if(o.dirty&&qa(u)===(2==(2&p.metadata.flags))){if(null===p.matches)o.reset([]);else{const _=p.crossesNgTemplate?Sl(l,u,d,[]):FE(l,u,p,d);o.reset(_,W_),o.notifyOnChanges()}return!0}return!1}function H1(o,u,l){const d=Wn();d.firstCreatePass&&(Q_(d,new LE(o,u,l),-1),2==(2&u)&&(d.staticViewQueries=!0)),z1(d,Et(),u)}function BE(o,u,l,d){const p=Wn();if(p.firstCreatePass){const _=Or();Q_(p,new LE(u,l,d),_.index),function W1(o,u){const l=o.contentQueries||(o.contentQueries=[]);u!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,u)}(p,o),2==(2&l)&&(p.staticContentQueries=!0)}z1(p,Et(),l)}function q1(){return function G1(o,u){return o[19].queries[u].queryList}(Et(),Vu())}function z1(o,u,l){const d=new Gg(4==(4&l));hT(o,u,d,d.destroy),null===u[19]&&(u[19]=new Zg),u[19].queries.push(new Kg(d))}function Q_(o,u,l){null===o.queries&&(o.queries=new Cl),o.queries.track(new Xd(u,l))}function K1(o,u){return o.queries.getByIndex(u)}function VE(o,u){return zg(o,u)}function Xf(...o){}const Sv=new xr("Application Initializer");let ry=(()=>{class o{constructor(l){this.appInits=l,this.resolve=Xf,this.reject=Xf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,p)=>{this.resolve=d,this.reject=p})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const _=this.appInits[p]();if(K0(_))l.push(_);else if(Z0(_)){const E=new Promise((x,M)=>{_.subscribe({complete:x,error:M})});l.push(E)}}Promise.all(l).then(()=>{d()}).catch(p=>{this.reject(p)}),0===l.length&&d(),this.initialized=!0}}return o.\u0275fac=function(l){return new(l||o)(ai(Sv,8))},o.\u0275prov=ve({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const KE=new xr("AppId",{providedIn:"root",factory:function hx(){return`${Jg()}${Jg()}${Jg()}`}});function Jg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const xv=new xr("Platform Initializer"),j2=new xr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),fx=new xr("appBootstrapListener");let $2=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=ve({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const em=new xr("LocaleId",{providedIn:"root",factory:()=>qh(em,Ut.Optional|Ut.SkipSelf)||function px(){return"undefined"!=typeof $localize&&$localize.locale||bl}()}),iy=new xr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class q2{constructor(u,l){this.ngModuleFactory=u,this.componentFactories=l}}let G2=(()=>{class o{compileModuleSync(l){return new kc(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),_=dl(ae(l).declarations).reduce((E,x)=>{const M=_n(x);return M&&E.push(new mv(M)),E},[]);return new q2(d,_)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=ve({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const W2=(()=>Promise.resolve(0))();function ZE(o){"undefined"==typeof Zone?W2.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class oa{constructor({enableLongStackTrace:u=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Na(!1),this.onMicrotaskEmpty=new Na(!1),this.onStable=new Na(!1),this.onError=new Na(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),u&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!d&&l,p.shouldCoalesceRunChangeDetection=d,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function sy(){let o=Sn.requestAnimationFrame,u=Sn.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&u){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=u[Zone.__symbol__("OriginalDelegate")];d&&(u=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function ay(o){const u=()=>{!function Dv(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Sn,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,uy(o),o.isCheckStableRunning=!0,oy(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),uy(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,p,_,E,x)=>{try{return YE(o),l.invokeTask(p,_,E,x)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||o.shouldCoalesceRunChangeDetection)&&u(),Iv(o)}},onInvoke:(l,d,p,_,E,x,M)=>{try{return YE(o),l.invoke(p,_,E,x,M)}finally{o.shouldCoalesceRunChangeDetection&&u(),Iv(o)}},onHasTask:(l,d,p,_)=>{l.hasTask(p,_),d===p&&("microTask"==_.change?(o._hasPendingMicrotasks=_.microTask,uy(o),oy(o)):"macroTask"==_.change&&(o.hasPendingMacrotasks=_.macroTask))},onHandleError:(l,d,p,_)=>(l.handleError(p,_),o.runOutsideAngular(()=>o.onError.emit(_)),!1)})}(p)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!oa.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(oa.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(u,l,d){return this._inner.run(u,l,d)}runTask(u,l,d,p){const _=this._inner,E=_.scheduleEventTask("NgZoneEvent: "+p,u,tm,Xf,Xf);try{return _.runTask(E,l,d)}finally{_.cancelTask(E)}}runGuarded(u,l,d){return this._inner.runGuarded(u,l,d)}runOutsideAngular(u){return this._outer.run(u)}}const tm={};function oy(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function uy(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function YE(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function Iv(o){o._nesting--,oy(o)}class QE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Na,this.onMicrotaskEmpty=new Na,this.onStable=new Na,this.onError=new Na}run(u,l,d){return u.apply(l,d)}runGuarded(u,l,d){return u.apply(l,d)}runOutsideAngular(u){return u()}runTask(u,l,d,p){return u.apply(l,d)}}let Mc=(()=>{class o{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{oa.assertNotInAngularZone(),ZE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ZE(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,p){let _=-1;d&&d>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==_),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:_,updateCb:p})}whenStable(l,d,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,d,p){return[]}}return o.\u0275fac=function(l){return new(l||o)(ai(oa))},o.\u0275prov=ve({token:o,factory:o.\u0275fac}),o})(),_x=(()=>{class o{constructor(){this._applications=new Map,JE.addToWindow(this)}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return JE.findTestabilityInTree(this,l,d)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=ve({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();class K2{addToWindow(u){}findTestabilityInTree(u,l,d){return null}}function XE(o){JE=o}let JE=new K2,Pc=null;const yx=new xr("AllowMultipleToken"),Av=new xr("PlatformOnDestroy");class nm{constructor(u,l){this.name=u,this.token=l}}function Tx(o,u,l=[]){const d=`Platform: ${u}`,p=new xr(d);return(_=[])=>{let E=tw();if(!E||E.injector.get(yx,!1)){const x=[...l,..._,{provide:p,useValue:!0}];o?o(x):function ew(o){if(Pc&&!Pc.get(yx,!1))throw new Je(400,"");Pc=o;const u=o.get(Mv),l=o.get(xv,null);l&&l.forEach(d=>d())}(function Ex(o=[],u){return ra.create({name:u,providers:[{provide:ST,useValue:"platform"},{provide:Av,useValue:()=>Pc=null},...o]})}(x,d))}return function Z2(o){const u=tw();if(!u)throw new Je(401,"");return u}()}}function tw(){var o;return null!==(o=null==Pc?void 0:Pc.get(Mv))&&void 0!==o?o:null}let Mv=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const x=function Q2(o,u){let l;return l="noop"===o?new QE:("zone.js"===o?void 0:o)||new oa({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==u?void 0:u.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==u?void 0:u.ngZoneRunCoalescing)}),l}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),M=[{provide:oa,useValue:x}];return x.run(()=>{const L=ra.create({providers:M,parent:this.injector,name:l.moduleType.name}),q=l.create(L),ee=q.injector.get(Rd,null);if(!ee)throw new Je(402,"");return x.runOutsideAngular(()=>{const Te=x.onError.subscribe({next:$e=>{ee.handleError($e)}});q.onDestroy(()=>{rw(this._modules,q),Te.unsubscribe()})}),function nw(o,u,l){try{const d=l();return K0(d)?d.catch(p=>{throw u.runOutsideAngular(()=>o.handleError(p)),p}):d}catch(d){throw u.runOutsideAngular(()=>o.handleError(d)),d}}(ee,x,()=>{const Te=q.injector.get(ry);return Te.runInitializers(),Te.donePromise.then(()=>(function r1(o){Z(o,"Expected localeId to be defined"),"string"==typeof o&&(Tl=o.toLowerCase().replace(/_/g,"-"))}(q.injector.get(em,bl)||bl),this._moduleDoBootstrap(q),q))})})}bootstrapModule(l,d=[]){const p=wx({},d);return function kv(o,u,l){const d=new kc(l);return Promise.resolve(d)}(0,0,l).then(_=>this.bootstrapModuleFactory(_,p))}_moduleDoBootstrap(l){const d=l.injector.get(ly);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(p=>d.bootstrap(p));else{if(!l.instance.ngDoBootstrap)throw new Je(403,"");l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Je(404,"");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const l=this._injector.get(Av,null);null==l||l(),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(l){return new(l||o)(ai(ra))},o.\u0275prov=ve({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function wx(o,u){return Array.isArray(u)?u.reduce(wx,o):Object.assign(Object.assign({},o),u)}let ly=(()=>{class o{constructor(l,d,p,_){this._zone=l,this._injector=d,this._exceptionHandler=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new j.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),x=new j.y(M=>{let L;this._zone.runOutsideAngular(()=>{L=this._zone.onStable.subscribe(()=>{oa.assertNotInAngularZone(),ZE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const q=this._zone.onUnstable.subscribe(()=>{oa.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{L.unsubscribe(),q.unsubscribe()}});this.isStable=(0,de.T)(E,x.pipe((0,re.B)()))}bootstrap(l,d){if(!this._initStatus.done)throw new Je(405,"");let p;p=l instanceof E1?l:this._injector.get(fv).resolveComponentFactory(l),this.componentTypes.push(p.componentType);const _=function bx(o){return o.isBoundToModule}(p)?void 0:this._injector.get(Eu),x=p.create(ra.NULL,[],d||p.selector,_),M=x.location.nativeElement,L=x.injector.get(Mc,null),q=L&&x.injector.get(_x);return L&&q&&q.registerApplication(M,L),x.onDestroy(()=>{this.detachView(x.hostView),rw(this.components,x),q&&q.unregisterApplication(M)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new Je(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;rw(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(fx,[]).concat(this._bootstrapListeners).forEach(p=>p(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(l){return new(l||o)(ai(oa),ai(ra),ai(Rd),ai(ry))},o.\u0275prov=ve({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function rw(o,u){const l=o.indexOf(u);l>-1&&o.splice(l,1)}let Rv=!0,Ov=!1;function iw(){return Ov=!0,Rv}function rm(){if(Ov)throw new Error("Cannot enable prod mode after platform setup.");Rv=!1}let im=(()=>{class o{}return o.__NG_ELEMENT_ID__=xx,o})();function xx(o){return function sm(o,u,l){if(ba(o)&&!l){const d=_s(o.index,u);return new jf(d,d)}return 47&o.type?new jf(u[16],u):null}(Or(),Et(),16==(16&o))}class jv{constructor(){}supports(u){return yg(u)}create(u){return new J2(u)}}const lw=(o,u)=>u;class J2{constructor(u){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=u||lw}forEachItem(u){let l;for(l=this._itHead;null!==l;l=l._next)u(l)}forEachOperation(u){let l=this._itHead,d=this._removalsHead,p=0,_=null;for(;l||d;){const E=!d||l&&l.currentIndex<dw(d,p,_)?l:d,x=dw(E,p,_),M=E.currentIndex;if(E===d)p--,d=d._nextRemoved;else if(l=l._next,null==E.previousIndex)p++;else{_||(_=[]);const L=x-p,q=M-p;if(L!=q){for(let Te=0;Te<L;Te++){const $e=Te<_.length?_[Te]:_[Te]=0,_t=$e+Te;q<=_t&&_t<L&&(_[Te]=$e+1)}_[E.previousIndex]=q-L}}x!==M&&u(E,x,M)}}forEachPreviousItem(u){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)u(l)}forEachAddedItem(u){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)u(l)}forEachMovedItem(u){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)u(l)}forEachRemovedItem(u){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)u(l)}forEachIdentityChange(u){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)u(l)}diff(u){if(null==u&&(u=[]),!yg(u))throw new Je(900,"");return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let p,_,E,l=this._itHead,d=!1;if(Array.isArray(u)){this.length=u.length;for(let x=0;x<this.length;x++)_=u[x],E=this._trackByFn(x,_),null!==l&&Object.is(l.trackById,E)?(d&&(l=this._verifyReinsertion(l,_,E,x)),Object.is(l.item,_)||this._addIdentityChange(l,_)):(l=this._mismatch(l,_,E,x),d=!0),l=l._next}else p=0,function j0(o,u){if(Array.isArray(o))for(let l=0;l<o.length;l++)u(o[l]);else{const l=o[vf()]();let d;for(;!(d=l.next()).done;)u(d.value)}}(u,x=>{E=this._trackByFn(p,x),null!==l&&Object.is(l.trackById,E)?(d&&(l=this._verifyReinsertion(l,x,E,p)),Object.is(l.item,x)||this._addIdentityChange(l,x)):(l=this._mismatch(l,x,E,p),d=!0),l=l._next,p++}),this.length=p;return this._truncate(l),this.collection=u,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let u;for(u=this._previousItHead=this._itHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._additionsHead;null!==u;u=u._nextAdded)u.previousIndex=u.currentIndex;for(this._additionsHead=this._additionsTail=null,u=this._movesHead;null!==u;u=u._nextMoved)u.previousIndex=u.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(u,l,d,p){let _;return null===u?_=this._itTail:(_=u._prev,this._remove(u)),null!==(u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(u.item,l)||this._addIdentityChange(u,l),this._reinsertAfter(u,_,p)):null!==(u=null===this._linkedRecords?null:this._linkedRecords.get(d,p))?(Object.is(u.item,l)||this._addIdentityChange(u,l),this._moveAfter(u,_,p)):u=this._addAfter(new cw(l,d),_,p),u}_verifyReinsertion(u,l,d,p){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==_?u=this._reinsertAfter(_,u._prev,p):u.currentIndex!=p&&(u.currentIndex=p,this._addToMoves(u,p)),u}_truncate(u){for(;null!==u;){const l=u._next;this._addToRemovals(this._unlink(u)),u=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(u,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(u);const p=u._prevRemoved,_=u._nextRemoved;return null===p?this._removalsHead=_:p._nextRemoved=_,null===_?this._removalsTail=p:_._prevRemoved=p,this._insertAfter(u,l,d),this._addToMoves(u,d),u}_moveAfter(u,l,d){return this._unlink(u),this._insertAfter(u,l,d),this._addToMoves(u,d),u}_addAfter(u,l,d){return this._insertAfter(u,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=u:this._additionsTail._nextAdded=u,u}_insertAfter(u,l,d){const p=null===l?this._itHead:l._next;return u._next=p,u._prev=l,null===p?this._itTail=u:p._prev=u,null===l?this._itHead=u:l._next=u,null===this._linkedRecords&&(this._linkedRecords=new $v),this._linkedRecords.put(u),u.currentIndex=d,u}_remove(u){return this._addToRemovals(this._unlink(u))}_unlink(u){null!==this._linkedRecords&&this._linkedRecords.remove(u);const l=u._prev,d=u._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,u}_addToMoves(u,l){return u.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=u:this._movesTail._nextMoved=u),u}_addToRemovals(u){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $v),this._unlinkedRecords.put(u),u.currentIndex=null,u._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=u,u._prevRemoved=null):(u._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=u),u}_addIdentityChange(u,l){return u.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=u:this._identityChangesTail._nextIdentityChange=u,u}}class cw{constructor(u,l){this.item=u,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ek{constructor(){this._head=null,this._tail=null}add(u){null===this._head?(this._head=this._tail=u,u._nextDup=null,u._prevDup=null):(this._tail._nextDup=u,u._prevDup=this._tail,u._nextDup=null,this._tail=u)}get(u,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,u))return d;return null}remove(u){const l=u._prevDup,d=u._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class $v{constructor(){this.map=new Map}put(u){const l=u.trackById;let d=this.map.get(l);d||(d=new ek,this.map.set(l,d)),d.add(u)}get(u,l){const p=this.map.get(u);return p?p.get(u,l):null}remove(u){const l=u.trackById;return this.map.get(l).remove(u)&&this.map.delete(l),u}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function dw(o,u,l){const d=o.previousIndex;if(null===d)return d;let p=0;return l&&d<l.length&&(p=l[d]),d+u+p}class Hv{constructor(){}supports(u){return u instanceof Map||fo(u)}create(){return new Px}}class Px{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(u){let l;for(l=this._mapHead;null!==l;l=l._next)u(l)}forEachPreviousItem(u){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)u(l)}forEachChangedItem(u){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)u(l)}forEachAddedItem(u){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)u(l)}forEachRemovedItem(u){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)u(l)}diff(u){if(u){if(!(u instanceof Map||fo(u)))throw new Je(900,"")}else u=new Map;return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(u,(d,p)=>{if(l&&l.key===p)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const _=this._getOrCreateRecordForKey(p,d);l=this._insertBeforeOrAppend(l,_)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(u,l){if(u){const d=u._prev;return l._next=u,l._prev=d,u._prev=l,d&&(d._next=l),u===this._mapHead&&(this._mapHead=l),this._appendAfter=u,u}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(u,l){if(this._records.has(u)){const p=this._records.get(u);this._maybeAddToChanges(p,l);const _=p._prev,E=p._next;return _&&(_._next=E),E&&(E._prev=_),p._next=null,p._prev=null,p}const d=new tk(u);return this._records.set(u,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let u;for(this._previousMapHead=this._mapHead,u=this._previousMapHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._changesHead;null!==u;u=u._nextChanged)u.previousValue=u.currentValue;for(u=this._additionsHead;null!=u;u=u._nextAdded)u.previousValue=u.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(u,l){Object.is(l,u.currentValue)||(u.previousValue=u.currentValue,u.currentValue=l,this._addToChanges(u))}_addToAdditions(u){null===this._additionsHead?this._additionsHead=this._additionsTail=u:(this._additionsTail._nextAdded=u,this._additionsTail=u)}_addToChanges(u){null===this._changesHead?this._changesHead=this._changesTail=u:(this._changesTail._nextChanged=u,this._changesTail=u)}_forEach(u,l){u instanceof Map?u.forEach(l):Object.keys(u).forEach(d=>l(u[d],d))}}class tk{constructor(u){this.key=u,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function qv(){return new hw([new jv])}let hw=(()=>{class o{constructor(l){this.factories=l}static create(l,d){if(null!=d){const p=d.factories.slice();l=l.concat(p)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||qv()),deps:[[o,new su,new iu]]}}find(l){const d=this.factories.find(p=>p.supports(l));if(null!=d)return d;throw new Je(901,"")}}return o.\u0275prov=ve({token:o,providedIn:"root",factory:qv}),o})();function Ox(){return new cy([new Hv])}let cy=(()=>{class o{constructor(l){this.factories=l}static create(l,d){if(d){const p=d.factories.slice();l=l.concat(p)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||Ox()),deps:[[o,new su,new iu]]}}find(l){const d=this.factories.find(_=>_.supports(l));if(d)return d;throw new Je(901,"")}}return o.\u0275prov=ve({token:o,providedIn:"root",factory:Ox}),o})();const om=Tx(null,"core",[]);let Fx=(()=>{class o{constructor(l){}}return o.\u0275fac=function(l){return new(l||o)(ai(ly))},o.\u0275mod=ke({type:o}),o.\u0275inj=Ot({}),o})()},3942:(it,Se,$)=>{"use strict";$.d(Se,{Z:()=>Je});var h=$(2090),oe=$(4859),j=$(6881),de=$(1877);class re{constructor(ze,we){this._delegate=ze,this.firebase=we,(0,j._addComponent)(ze,new oe.wA("app-compat",()=>this,"PUBLIC")),this.container=ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this._delegate.automaticDataCollectionEnabled=ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ze=>{this._delegate.checkDestroyed(),ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(ze,we=j._DEFAULT_ENTRY_NAME){var tt;this._delegate.checkDestroyed();const ft=this._delegate.container.getProvider(ze);return!ft.isInitialized()&&"EXPLICIT"===(null===(tt=ft.getComponent())||void 0===tt?void 0:tt.instantiationMode)&&ft.initialize(),ft.getImmediate({identifier:we})}_removeServiceInstance(ze,we=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ze).clearInstance(we)}_addComponent(ze){(0,j._addComponent)(this._delegate,ze)}_addOrOverwriteComponent(ze){(0,j._addOrOverwriteComponent)(this._delegate,ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Y=function De(){const Dt=function ye(Dt){const ze={},we={__esModule:!0,initializeApp:function Ye(st,W={}){const V=j.initializeApp(st,W);if((0,h.r3)(ze,V.name))return ze[V.name];const Ie=new Dt(V,we);return ze[V.name]=Ie,Ie},app:ft,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function je(st){const W=st.name,V=W.replace("-compat","");if(j._registerComponent(st)&&"PUBLIC"===st.type){const Ie=(nt=ft())=>{if("function"!=typeof nt[V])throw me.create("invalid-app-argument",{appName:W});return nt[V]()};void 0!==st.serviceProps&&(0,h.ZB)(Ie,st.serviceProps),we[V]=Ie,Dt.prototype[V]=function(...nt){return this._getService.bind(this,W).apply(this,st.multipleInstances?nt:[])}}return"PUBLIC"===st.type?we[V]:null},removeApp:function tt(st){delete ze[st]},useAsService:function gt(st,W){return"serverAuth"===W?null:W},modularAPIs:j}};function ft(st){if(!(0,h.r3)(ze,st=st||j._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:st});return ze[st]}return we.default=we,Object.defineProperty(we,"apps",{get:function Ce(){return Object.keys(ze).map(st=>ze[st])}}),ft.App=Dt,we}(re);return Dt.INTERNAL=Object.assign(Object.assign({},Dt.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function ze(we){(0,h.ZB)(Dt,we)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Dt}(),se=new de.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){se.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Dt=self.firebase.SDK_VERSION;Dt&&Dt.indexOf("LITE")>=0&&se.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=Y;!function Re(Dt){(0,j.registerVersion)("@firebase/app-compat","0.2.13",Dt)}()},6881:(it,Se,$)=>{"use strict";$.r(Se),$.d(Se,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>rn,_DEFAULT_ENTRY_NAME:()=>Hn,_addComponent:()=>bn,_addOrOverwriteComponent:()=>tn,_apps:()=>cr,_clearComponents:()=>Sn,_components:()=>wi,_getProvider:()=>xo,_registerComponent:()=>pn,_removeServiceInstance:()=>Ys,deleteApp:()=>zr,getApp:()=>Mn,getApps:()=>qi,initializeApp:()=>Ps,onLog:()=>Rs,registerVersion:()=>mr,setLogLevel:()=>_r});var h=$(5861),oe=$(4859),j=$(1877),de=$(2090);let ce,me;const Y=new WeakMap,se=new WeakMap,Q=new WeakMap,Xe=new WeakMap,Re=new WeakMap;let ze={get(Ze,He,vt){if(Ze instanceof IDBTransaction){if("done"===He)return se.get(Ze);if("objectStoreNames"===He)return Ze.objectStoreNames||Q.get(Ze);if("store"===He)return vt.objectStoreNames[1]?void 0:vt.objectStore(vt.objectStoreNames[0])}return Ye(Ze[He])},set:(Ze,He,vt)=>(Ze[He]=vt,!0),has:(Ze,He)=>Ze instanceof IDBTransaction&&("done"===He||"store"===He)||He in Ze};function ft(Ze){return"function"==typeof Ze?function tt(Ze){return Ze!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function De(){return me||(me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ze)?function(...He){return Ze.apply(Ce(this),He),Ye(Y.get(this))}:function(...He){return Ye(Ze.apply(Ce(this),He))}:function(He,...vt){const lt=Ze.call(Ce(this),He,...vt);return Q.set(lt,He.sort?He.sort():[He]),Ye(lt)}}(Ze):(Ze instanceof IDBTransaction&&function Dt(Ze){if(se.has(Ze))return;const He=new Promise((vt,lt)=>{const At=()=>{Ze.removeEventListener("complete",$t),Ze.removeEventListener("error",un),Ze.removeEventListener("abort",un)},$t=()=>{vt(),At()},un=()=>{lt(Ze.error||new DOMException("AbortError","AbortError")),At()};Ze.addEventListener("complete",$t),Ze.addEventListener("error",un),Ze.addEventListener("abort",un)});se.set(Ze,He)}(Ze),((Ze,He)=>He.some(vt=>Ze instanceof vt))(Ze,function ye(){return ce||(ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ze,ze):Ze)}function Ye(Ze){if(Ze instanceof IDBRequest)return function Je(Ze){const He=new Promise((vt,lt)=>{const At=()=>{Ze.removeEventListener("success",$t),Ze.removeEventListener("error",un)},$t=()=>{vt(Ye(Ze.result)),At()},un=()=>{lt(Ze.error),At()};Ze.addEventListener("success",$t),Ze.addEventListener("error",un)});return He.then(vt=>{vt instanceof IDBCursor&&Y.set(vt,Ze)}).catch(()=>{}),Re.set(He,Ze),He}(Ze);if(Xe.has(Ze))return Xe.get(Ze);const He=ft(Ze);return He!==Ze&&(Xe.set(Ze,He),Re.set(He,Ze)),He}const Ce=Ze=>Re.get(Ze),st=["get","getKey","getAll","getAllKeys","count"],W=["put","add","delete","clear"],V=new Map;function Ie(Ze,He){if(!(Ze instanceof IDBDatabase)||He in Ze||"string"!=typeof He)return;if(V.get(He))return V.get(He);const vt=He.replace(/FromIndex$/,""),lt=He!==vt,At=W.includes(vt);if(!(vt in(lt?IDBIndex:IDBObjectStore).prototype)||!At&&!st.includes(vt))return;const $t=function(){var un=(0,h.Z)(function*(Qn,...An){const qn=this.transaction(Qn,At?"readwrite":"readonly");let Yn=qn.store;return lt&&(Yn=Yn.index(An.shift())),(yield Promise.all([Yn[vt](...An),At&&qn.done]))[0]});return function(An){return un.apply(this,arguments)}}();return V.set(He,$t),$t}!function we(Ze){ze=Ze(ze)}(Ze=>nA(By({},Ze),{get:(He,vt,lt)=>Ie(He,vt)||Ze.get(He,vt,lt),has:(He,vt)=>!!Ie(He,vt)||Ze.has(He,vt)}));class nt{constructor(He){this.container=He}getPlatformInfoString(){return this.container.getProviders().map(vt=>{if(function We(Ze){const He=Ze.getComponent();return"VERSION"===(null==He?void 0:He.type)}(vt)){const lt=vt.getImmediate();return`${lt.library}/${lt.version}`}return null}).filter(vt=>vt).join(" ")}}const mt="@firebase/app",Fe=new j.Yd("@firebase/app"),Hn="[DEFAULT]",or={[mt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},cr=new Map,wi=new Map;function bn(Ze,He){try{Ze.container.addComponent(He)}catch(vt){Fe.debug(`Component ${He.name} failed to register with FirebaseApp ${Ze.name}`,vt)}}function tn(Ze,He){Ze.container.addOrOverwriteComponent(He)}function pn(Ze){const He=Ze.name;if(wi.has(He))return Fe.debug(`There were multiple attempts to register component ${He}.`),!1;wi.set(He,Ze);for(const vt of cr.values())bn(vt,Ze);return!0}function xo(Ze,He){const vt=Ze.container.getProvider("heartbeat").getImmediate({optional:!0});return vt&&vt.triggerHeartbeat(),Ze.container.getProvider(He)}function Ys(Ze,He,vt=Hn){xo(Ze,He).clearInstance(vt)}function Sn(){wi.clear()}const er=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ci{constructor(He,vt,lt){this._isDeleted=!1,this._options=Object.assign({},He),this._config=Object.assign({},vt),this._name=vt.name,this._automaticDataCollectionEnabled=vt.automaticDataCollectionEnabled,this._container=lt,this.container.addComponent(new oe.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(He){this.checkDestroyed(),this._automaticDataCollectionEnabled=He}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(He){this._isDeleted=He}checkDestroyed(){if(this.isDeleted)throw er.create("app-deleted",{appName:this._name})}}const rn="9.23.0";function Ps(Ze,He={}){let vt=Ze;"object"!=typeof He&&(He={name:He});const lt=Object.assign({name:Hn,automaticDataCollectionEnabled:!1},He),At=lt.name;if("string"!=typeof At||!At)throw er.create("bad-app-name",{appName:String(At)});if(vt||(vt=(0,de.aH)()),!vt)throw er.create("no-options");const $t=cr.get(At);if($t){if((0,de.vZ)(vt,$t.options)&&(0,de.vZ)(lt,$t.config))return $t;throw er.create("duplicate-app",{appName:At})}const un=new oe.H0(At);for(const An of wi.values())un.addComponent(An);const Qn=new Ci(vt,lt,un);return cr.set(At,Qn),Qn}function Mn(Ze=Hn){const He=cr.get(Ze);if(!He&&Ze===Hn&&(0,de.aH)())return Ps();if(!He)throw er.create("no-app",{appName:Ze});return He}function qi(){return Array.from(cr.values())}function zr(Ze){return dr.apply(this,arguments)}function dr(){return(dr=(0,h.Z)(function*(Ze){const He=Ze.name;cr.has(He)&&(cr.delete(He),yield Promise.all(Ze.container.getProviders().map(vt=>vt.delete())),Ze.isDeleted=!0)})).apply(this,arguments)}function mr(Ze,He,vt){var lt;let At=null!==(lt=or[Ze])&&void 0!==lt?lt:Ze;vt&&(At+=`-${vt}`);const $t=At.match(/\s|\//),un=He.match(/\s|\//);if($t||un){const Qn=[`Unable to register library "${At}" with version "${He}":`];return $t&&Qn.push(`library name "${At}" contains illegal characters (whitespace or "/")`),$t&&un&&Qn.push("and"),un&&Qn.push(`version name "${He}" contains illegal characters (whitespace or "/")`),void Fe.warn(Qn.join(" "))}pn(new oe.wA(`${At}-version`,()=>({library:At,version:He}),"VERSION"))}function Rs(Ze,He){if(null!==Ze&&"function"!=typeof Ze)throw er.create("invalid-log-argument");(0,j.Am)(Ze,He)}function _r(Ze){(0,j.Ub)(Ze)}const pe="firebase-heartbeat-store";let le=null;function ke(){return le||(le=function je(Ze,He,{blocked:vt,upgrade:lt,blocking:At,terminated:$t}={}){const un=indexedDB.open(Ze,He),Qn=Ye(un);return lt&&un.addEventListener("upgradeneeded",An=>{lt(Ye(un.result),An.oldVersion,An.newVersion,Ye(un.transaction),An)}),vt&&un.addEventListener("blocked",An=>vt(An.oldVersion,An.newVersion,An)),Qn.then(An=>{$t&&An.addEventListener("close",()=>$t()),At&&An.addEventListener("versionchange",qn=>At(qn.oldVersion,qn.newVersion,qn))}).catch(()=>{}),Qn}("firebase-heartbeat-database",1,{upgrade:(Ze,He)=>{0===He&&Ze.createObjectStore(pe)}}).catch(Ze=>{throw er.create("idb-open",{originalErrorMessage:Ze.message})})),le}function Ke(){return(Ke=(0,h.Z)(function*(Ze){try{return yield(yield ke()).transaction(pe).objectStore(pe).get(_n(Ze))}catch(He){if(He instanceof de.ZR)Fe.warn(He.message);else{const vt=er.create("idb-get",{originalErrorMessage:null==He?void 0:He.message});Fe.warn(vt.message)}}})).apply(this,arguments)}function Ht(Ze,He){return mn.apply(this,arguments)}function mn(){return(mn=(0,h.Z)(function*(Ze,He){try{const lt=(yield ke()).transaction(pe,"readwrite");yield lt.objectStore(pe).put(He,_n(Ze)),yield lt.done}catch(vt){if(vt instanceof de.ZR)Fe.warn(vt.message);else{const lt=er.create("idb-set",{originalErrorMessage:null==vt?void 0:vt.message});Fe.warn(lt.message)}}})).apply(this,arguments)}function _n(Ze){return`${Ze.name}!${Ze.options.appId}`}class ae{constructor(He){this.container=He,this._heartbeatsCache=null;const vt=this.container.getProvider("app").getImmediate();this._storage=new en(vt),this._heartbeatsCachePromise=this._storage.read().then(lt=>(this._heartbeatsCache=lt,lt))}triggerHeartbeat(){var He=this;return(0,h.Z)(function*(){const lt=He.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),At=Ue();if(null===He._heartbeatsCache&&(He._heartbeatsCache=yield He._heartbeatsCachePromise),He._heartbeatsCache.lastSentHeartbeatDate!==At&&!He._heartbeatsCache.heartbeats.some($t=>$t.date===At))return He._heartbeatsCache.heartbeats.push({date:At,agent:lt}),He._heartbeatsCache.heartbeats=He._heartbeatsCache.heartbeats.filter($t=>{const un=new Date($t.date).valueOf();return Date.now()-un<=2592e6}),He._storage.overwrite(He._heartbeatsCache)})()}getHeartbeatsHeader(){var He=this;return(0,h.Z)(function*(){if(null===He._heartbeatsCache&&(yield He._heartbeatsCachePromise),null===He._heartbeatsCache||0===He._heartbeatsCache.heartbeats.length)return"";const vt=Ue(),{heartbeatsToSend:lt,unsentEntries:At}=function xt(Ze,He=1024){const vt=[];let lt=Ze.slice();for(const At of Ze){const $t=vt.find(un=>un.agent===At.agent);if($t){if($t.dates.push(At.date),Pn(vt)>He){$t.dates.pop();break}}else if(vt.push({agent:At.agent,dates:[At.date]}),Pn(vt)>He){vt.pop();break}lt=lt.slice(1)}return{heartbeatsToSend:vt,unsentEntries:lt}}(He._heartbeatsCache.heartbeats),$t=(0,de.L)(JSON.stringify({version:2,heartbeats:lt}));return He._heartbeatsCache.lastSentHeartbeatDate=vt,At.length>0?(He._heartbeatsCache.heartbeats=At,yield He._storage.overwrite(He._heartbeatsCache)):(He._heartbeatsCache.heartbeats=[],He._storage.overwrite(He._heartbeatsCache)),$t})()}}function Ue(){return(new Date).toISOString().substring(0,10)}class en{constructor(He){this.app=He,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,de.hl)()&&(0,de.eu)().then(()=>!0).catch(()=>!1)})()}read(){var He=this;return(0,h.Z)(function*(){return(yield He._canUseIndexedDBPromise)&&(yield function yt(Ze){return Ke.apply(this,arguments)}(He.app))||{heartbeats:[]}})()}overwrite(He){var vt=this;return(0,h.Z)(function*(){var lt;if(yield vt._canUseIndexedDBPromise){const $t=yield vt.read();return Ht(vt.app,{lastSentHeartbeatDate:null!==(lt=He.lastSentHeartbeatDate)&&void 0!==lt?lt:$t.lastSentHeartbeatDate,heartbeats:He.heartbeats})}})()}add(He){var vt=this;return(0,h.Z)(function*(){var lt;if(yield vt._canUseIndexedDBPromise){const $t=yield vt.read();return Ht(vt.app,{lastSentHeartbeatDate:null!==(lt=He.lastSentHeartbeatDate)&&void 0!==lt?lt:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...He.heartbeats]})}})()}}function Pn(Ze){return(0,de.L)(JSON.stringify({version:2,heartbeats:Ze})).length}!function yr(Ze){pn(new oe.wA("platform-logger",He=>new nt(He),"PRIVATE")),pn(new oe.wA("heartbeat",He=>new ae(He),"PRIVATE")),mr(mt,"0.9.13",Ze),mr(mt,"0.9.13","esm2017"),mr("fire-js","")}("")},4859:(it,Se,$)=>{"use strict";$.d(Se,{H0:()=>ye,wA:()=>j});var h=$(5861),oe=$(2090);class j{constructor(Y,se,Q){this.name=Y,this.instanceFactory=se,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Y){return this.instantiationMode=Y,this}setMultipleInstances(Y){return this.multipleInstances=Y,this}setServiceProps(Y){return this.serviceProps=Y,this}setInstanceCreatedCallback(Y){return this.onInstanceCreated=Y,this}}const de="[DEFAULT]";class re{constructor(Y,se){this.name=Y,this.container=se,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Y){const se=this.normalizeInstanceIdentifier(Y);if(!this.instancesDeferred.has(se)){const Q=new oe.BH;if(this.instancesDeferred.set(se,Q),this.isInitialized(se)||this.shouldAutoInitialize())try{const Xe=this.getOrInitializeService({instanceIdentifier:se});Xe&&Q.resolve(Xe)}catch(Xe){}}return this.instancesDeferred.get(se).promise}getImmediate(Y){var se;const Q=this.normalizeInstanceIdentifier(null==Y?void 0:Y.identifier),Xe=null!==(se=null==Y?void 0:Y.optional)&&void 0!==se&&se;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Xe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Re){if(Xe)return null;throw Re}}getComponent(){return this.component}setComponent(Y){if(Y.name!==this.name)throw Error(`Mismatching Component ${Y.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Y,this.shouldAutoInitialize()){if(function me(De){return"EAGER"===De.instantiationMode}(Y))try{this.getOrInitializeService({instanceIdentifier:de})}catch(se){}for(const[se,Q]of this.instancesDeferred.entries()){const Xe=this.normalizeInstanceIdentifier(se);try{const Re=this.getOrInitializeService({instanceIdentifier:Xe});Q.resolve(Re)}catch(Re){}}}}clearInstance(Y=de){this.instancesDeferred.delete(Y),this.instancesOptions.delete(Y),this.instances.delete(Y)}delete(){var Y=this;return(0,h.Z)(function*(){const se=Array.from(Y.instances.values());yield Promise.all([...se.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...se.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Y=de){return this.instances.has(Y)}getOptions(Y=de){return this.instancesOptions.get(Y)||{}}initialize(Y={}){const{options:se={}}=Y,Q=this.normalizeInstanceIdentifier(Y.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Xe=this.getOrInitializeService({instanceIdentifier:Q,options:se});for(const[Re,Je]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Re)&&Je.resolve(Xe);return Xe}onInit(Y,se){var Q;const Xe=this.normalizeInstanceIdentifier(se),Re=null!==(Q=this.onInitCallbacks.get(Xe))&&void 0!==Q?Q:new Set;Re.add(Y),this.onInitCallbacks.set(Xe,Re);const Je=this.instances.get(Xe);return Je&&Y(Je,Xe),()=>{Re.delete(Y)}}invokeOnInitCallbacks(Y,se){const Q=this.onInitCallbacks.get(se);if(Q)for(const Xe of Q)try{Xe(Y,se)}catch(Re){}}getOrInitializeService({instanceIdentifier:Y,options:se={}}){let Q=this.instances.get(Y);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(De=Y,De===de?void 0:De),options:se}),this.instances.set(Y,Q),this.instancesOptions.set(Y,se),this.invokeOnInitCallbacks(Q,Y),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Y,Q)}catch(Xe){}var De;return Q||null}normalizeInstanceIdentifier(Y=de){return this.component?this.component.multipleInstances?Y:de:Y}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ye{constructor(Y){this.name=Y,this.providers=new Map}addComponent(Y){const se=this.getProvider(Y.name);if(se.isComponentSet())throw new Error(`Component ${Y.name} has already been registered with ${this.name}`);se.setComponent(Y)}addOrOverwriteComponent(Y){this.getProvider(Y.name).isComponentSet()&&this.providers.delete(Y.name),this.addComponent(Y)}getProvider(Y){if(this.providers.has(Y))return this.providers.get(Y);const se=new re(Y,this);return this.providers.set(Y,se),se}getProviders(){return Array.from(this.providers.values())}}},1877:(it,Se,$)=>{"use strict";$.d(Se,{Am:()=>De,Ub:()=>ye,Yd:()=>me,in:()=>oe});const h=[];var oe=(()=>{return(Y=oe||(oe={}))[Y.DEBUG=0]="DEBUG",Y[Y.VERBOSE=1]="VERBOSE",Y[Y.INFO=2]="INFO",Y[Y.WARN=3]="WARN",Y[Y.ERROR=4]="ERROR",Y[Y.SILENT=5]="SILENT",oe;var Y})();const j={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},de=oe.INFO,re={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},ce=(Y,se,...Q)=>{if(se<Y.logLevel)return;const Xe=(new Date).toISOString(),Re=re[se];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${se})`);console[Re](`[${Xe}]  ${Y.name}:`,...Q)};class me{constructor(se){this.name=se,this._logLevel=de,this._logHandler=ce,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(se){if(!(se in oe))throw new TypeError(`Invalid value "${se}" assigned to \`logLevel\``);this._logLevel=se}setLogLevel(se){this._logLevel="string"==typeof se?j[se]:se}get logHandler(){return this._logHandler}set logHandler(se){if("function"!=typeof se)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=se}get userLogHandler(){return this._userLogHandler}set userLogHandler(se){this._userLogHandler=se}debug(...se){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...se),this._logHandler(this,oe.DEBUG,...se)}log(...se){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...se),this._logHandler(this,oe.VERBOSE,...se)}info(...se){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...se),this._logHandler(this,oe.INFO,...se)}warn(...se){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...se),this._logHandler(this,oe.WARN,...se)}error(...se){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...se),this._logHandler(this,oe.ERROR,...se)}}function ye(Y){h.forEach(se=>{se.setLogLevel(Y)})}function De(Y,se){for(const Q of h){let Xe=null;se&&se.level&&(Xe=j[se.level]),Q.userLogHandler=null===Y?null:(Re,Je,...Dt)=>{const ze=Dt.map(we=>{if(null==we)return null;if("string"==typeof we)return we;if("number"==typeof we||"boolean"==typeof we)return we.toString();if(we instanceof Error)return we.message;try{return JSON.stringify(we)}catch(tt){return null}}).filter(we=>we).join(" ");Je>=(null!=Xe?Xe:Re.logLevel)&&Y({level:oe[Je].toLowerCase(),message:ze,args:Dt,type:Re.name})}}}},259:(it,Se,$)=>{"use strict";$.d(Se,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=$(6881);(0,h.registerVersion)("firebase","9.23.0","app")},9260:(it,Se,$)=>{"use strict";$.d(Se,{Z:()=>h.Z});var h=$(3942);h.Z.registerVersion("firebase","9.23.0","app-compat")},2644:(it,Se,$)=>{"use strict";$.r(Se);var h=$(5861),oe=$(3942),j=$(2090),de=$(6881),re=$(7582),ce=$(1877),me=$(4859);const Je=function Xe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Dt=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ze=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tt=new ce.Yd("@firebase/auth");function Ye(T,...g){tt.logLevel<=ce.in.ERROR&&tt.error(`Auth (${de.SDK_VERSION}): ${T}`,...g)}function Ce(T,...g){throw W(T,...g)}function je(T,...g){return W(T,...g)}function gt(T,g,m){const w=Object.assign(Object.assign({},Dt()),{[g]:m});return new j.LL("auth","Firebase",w).create(g,{appName:T.name})}function st(T,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&Ce(T,"argument-error"),gt(T,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function W(T,...g){if("string"!=typeof T){const m=g[0],w=[...g.slice(1)];return w[0]&&(w[0].appName=T.name),T._errorFactory.create(m,...w)}return ze.create(T,...g)}function V(T,g,...m){if(!T)throw W(g,...m)}function Ie(T){const g="INTERNAL ASSERTION FAILED: "+T;throw Ye(g),new Error(g)}function nt(T,g){T||Ie(g)}function We(){var T;return"undefined"!=typeof self&&(null===(T=self.location)||void 0===T?void 0:T.href)||""}function mt(){return"http:"===he()||"https:"===he()}function he(){var T;return"undefined"!=typeof self&&(null===(T=self.location)||void 0===T?void 0:T.protocol)||null}class rt{constructor(g,m){this.shortDelay=g,this.longDelay=m,nt(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function Fe(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(mt()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Z(T,g){nt(T.emulator,"Emulator should always be set here");const{url:m}=T.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class ne{static initialize(g,m,w){this.fetchImpl=g,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ie("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ie("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ie("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Pe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ve=new rt(3e4,6e4);function Oe(T,g){return T.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:T.tenantId}):g}function ve(T,g,m,w){return ut.apply(this,arguments)}function ut(){return(ut=(0,h.Z)(function*(T,g,m,w,R={}){return Ot(T,R,(0,h.Z)(function*(){let G={},_e={};w&&("GET"===g?_e=w:G={body:JSON.stringify(w)});const Ge=(0,j.xO)(Object.assign({key:T.config.apiKey},_e)).slice(1),Tt=yield T._getAdditionalHeaders();return Tt["Content-Type"]="application/json",T.languageCode&&(Tt["X-Firebase-Locale"]=T.languageCode),ne.fetch()($n(T,T.config.apiHost,m,Ge),Object.assign({method:g,headers:Tt,referrerPolicy:"no-referrer"},G))}))})).apply(this,arguments)}function Ot(T,g,m){return zt.apply(this,arguments)}function zt(){return(zt=(0,h.Z)(function*(T,g,m){T._canInitEmulator=!1;const w=Object.assign(Object.assign({},Pe),g);try{const R=new zn(T),G=yield Promise.race([m(),R.promise]);R.clearNetworkTimeout();const _e=yield G.json();if("needConfirmation"in _e)throw ar(T,"account-exists-with-different-credential",_e);if(G.ok&&!("errorMessage"in _e))return _e;{const Ge=G.ok?_e.errorMessage:_e.error.message,[Tt,Rt]=Ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Tt)throw ar(T,"credential-already-in-use",_e);if("EMAIL_EXISTS"===Tt)throw ar(T,"email-already-in-use",_e);if("USER_DISABLED"===Tt)throw ar(T,"user-disabled",_e);const Wt=w[Tt]||Tt.toLowerCase().replace(/[_\s]+/g,"-");if(Rt)throw gt(T,Wt,Rt);Ce(T,Wt)}}catch(R){if(R instanceof j.ZR)throw R;Ce(T,"network-request-failed",{message:String(R)})}})).apply(this,arguments)}function kt(T,g,m,w){return ln.apply(this,arguments)}function ln(){return(ln=(0,h.Z)(function*(T,g,m,w,R={}){const G=yield ve(T,g,m,w,R);return"mfaPendingCredential"in G&&Ce(T,"multi-factor-auth-required",{_serverResponse:G}),G})).apply(this,arguments)}function $n(T,g,m,w){const R=`${g}${m}?${w}`;return T.config.emulator?Z(T.config,R):`${T.config.apiScheme}://${R}`}class zn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(je(this.auth,"network-request-failed")),Ve.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ar(T,g,m){const w={appName:T.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const R=je(T,g,w);return R.customData._tokenResponse=m,R}function Bn(){return(Bn=(0,h.Z)(function*(T,g){return ve(T,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Rr(T,g){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,h.Z)(function*(T,g){return ve(T,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Co(T,g){return gr.apply(this,arguments)}function gr(){return(gr=(0,h.Z)(function*(T,g){return ve(T,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function ur(T){if(T)try{const g=new Date(Number(T));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Hn(){return(Hn=(0,h.Z)(function*(T,g=!1){const m=(0,j.m9)(T),w=yield m.getIdToken(g),R=cr(w);V(R&&R.exp&&R.auth_time&&R.iat,m.auth,"internal-error");const G="object"==typeof R.firebase?R.firebase:void 0,_e=null==G?void 0:G.sign_in_provider;return{claims:R,token:w,authTime:ur(or(R.auth_time)),issuedAtTime:ur(or(R.iat)),expirationTime:ur(or(R.exp)),signInProvider:_e||null,signInSecondFactor:(null==G?void 0:G.sign_in_second_factor)||null}})).apply(this,arguments)}function or(T){return 1e3*Number(T)}function cr(T){const[g,m,w]=T.split(".");if(void 0===g||void 0===m||void 0===w)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,j.tV)(m);return R?JSON.parse(R):(Ye("Failed to decode base64 JWT payload"),null)}catch(R){return Ye("Caught error parsing JWT payload as JSON",null==R?void 0:R.toString()),null}}function bn(T,g){return tn.apply(this,arguments)}function tn(){return(tn=(0,h.Z)(function*(T,g,m=!1){if(m)return g;try{return yield g}catch(w){throw w instanceof j.ZR&&pn(w)&&T.auth.currentUser===T&&(yield T.auth.signOut()),w}})).apply(this,arguments)}function pn({code:T}){return"auth/user-disabled"===T||"auth/user-token-expired"===T}class xo{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const R=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(g);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),w)}iteration(){var g=this;return(0,h.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===(null==m?void 0:m.code)&&g.schedule(!0))}g.schedule()})()}}class Ys{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=ur(this.lastLoginAt),this.creationTime=ur(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Sn(T){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,h.Z)(function*(T){var g;const m=T.auth,w=yield T.getIdToken(),R=yield bn(T,Co(m,{idToken:w}));V(null==R?void 0:R.users.length,m,"internal-error");const G=R.users[0];T._notifyReloadListener(G);const _e=(null===(g=G.providerUserInfo)||void 0===g?void 0:g.length)?Ps(G.providerUserInfo):[],Ge=rn(T.providerData,_e),Wt=!!T.isAnonymous&&!(T.email&&G.passwordHash||(null==Ge?void 0:Ge.length)),Zt={uid:G.localId,displayName:G.displayName||null,photoURL:G.photoUrl||null,email:G.email||null,emailVerified:G.emailVerified||!1,phoneNumber:G.phoneNumber||null,tenantId:G.tenantId||null,providerData:Ge,metadata:new Ys(G.createdAt,G.lastLoginAt),isAnonymous:Wt};Object.assign(T,Zt)})).apply(this,arguments)}function Ci(){return(Ci=(0,h.Z)(function*(T){const g=(0,j.m9)(T);yield Sn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function rn(T,g){return[...T.filter(w=>!g.some(R=>R.providerId===w.providerId)),...g]}function Ps(T){return T.map(g=>{var{providerId:m}=g,w=(0,re._T)(g,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function qi(){return(qi=(0,h.Z)(function*(T,g){const m=yield Ot(T,{},(0,h.Z)(function*(){const w=(0,j.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:R,apiKey:G}=T.config,_e=$n(T,R,"/v1/token",`key=${G}`),Ge=yield T._getAdditionalHeaders();return Ge["Content-Type"]="application/x-www-form-urlencoded",ne.fetch()(_e,{method:"POST",headers:Ge,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class zr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){V(g.idToken,"internal-error"),V(void 0!==g.idToken,"internal-error"),V(void 0!==g.refreshToken,"internal-error");const m="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function wi(T){const g=cr(T);return V(g,"internal-error"),V(void 0!==g.exp,"internal-error"),V(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var w=this;return(0,h.Z)(function*(){return V(!w.accessToken||w.refreshToken,g,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(g,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var w=this;return(0,h.Z)(function*(){const{accessToken:R,refreshToken:G,expiresIn:_e}=yield function Mn(T,g){return qi.apply(this,arguments)}(g,m);w.updateTokensAndExpiration(R,G,Number(_e))})()}updateTokensAndExpiration(g,m,w){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(g,m){const{refreshToken:w,accessToken:R,expirationTime:G}=m,_e=new zr;return w&&(V("string"==typeof w,"internal-error",{appName:g}),_e.refreshToken=w),R&&(V("string"==typeof R,"internal-error",{appName:g}),_e.accessToken=R),G&&(V("number"==typeof G,"internal-error",{appName:g}),_e.expirationTime=G),_e}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new zr,this.toJSON())}_performRefresh(){return Ie("not implemented")}}function dr(T,g){V("string"==typeof T||void 0===T,"internal-error",{appName:g})}class mr{constructor(g){var{uid:m,auth:w,stsTokenManager:R}=g,G=(0,re._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=G.displayName||null,this.email=G.email||null,this.emailVerified=G.emailVerified||!1,this.phoneNumber=G.phoneNumber||null,this.photoURL=G.photoURL||null,this.isAnonymous=G.isAnonymous||!1,this.tenantId=G.tenantId||null,this.providerData=G.providerData?[...G.providerData]:[],this.metadata=new Ys(G.createdAt||void 0,G.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,h.Z)(function*(){const w=yield bn(m,m.stsTokenManager.getToken(m.auth,g));return V(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(g){return function lr(T){return Hn.apply(this,arguments)}(this,g)}reload(){return function er(T){return Ci.apply(this,arguments)}(this)}_assign(g){this!==g&&(V(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const m=new mr(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(g){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var w=this;return(0,h.Z)(function*(){let R=!1;g.idToken&&g.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(g),R=!0),m&&(yield Sn(w)),yield w.auth._persistUserIfCurrent(w),R&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var g=this;return(0,h.Z)(function*(){const m=yield g.getIdToken();return yield bn(g,function fn(T,g){return Bn.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var w,R,G,_e,Ge,Tt,Rt,Wt;const Zt=null!==(w=m.displayName)&&void 0!==w?w:void 0,hr=null!==(R=m.email)&&void 0!==R?R:void 0,ho=null!==(G=m.phoneNumber)&&void 0!==G?G:void 0,rg=null!==(_e=m.photoURL)&&void 0!==_e?_e:void 0,u0=null!==(Ge=m.tenantId)&&void 0!==Ge?Ge:void 0,Pd=null!==(Tt=m._redirectEventId)&&void 0!==Tt?Tt:void 0,l0=null!==(Rt=m.createdAt)&&void 0!==Rt?Rt:void 0,c0=null!==(Wt=m.lastLoginAt)&&void 0!==Wt?Wt:void 0,{uid:Rd,emailVerified:ig,isAnonymous:d0,providerData:Qm,stsTokenManager:Xm}=m;V(Rd&&Xm,g,"internal-error");const Wb=zr.fromJSON(this.name,Xm);V("string"==typeof Rd,g,"internal-error"),dr(Zt,g.name),dr(hr,g.name),V("boolean"==typeof ig,g,"internal-error"),V("boolean"==typeof d0,g,"internal-error"),dr(ho,g.name),dr(rg,g.name),dr(u0,g.name),dr(Pd,g.name),dr(l0,g.name),dr(c0,g.name);const h0=new mr({uid:Rd,auth:g,email:hr,emailVerified:ig,displayName:Zt,isAnonymous:d0,photoURL:rg,phoneNumber:ho,tenantId:u0,stsTokenManager:Wb,createdAt:l0,lastLoginAt:c0});return Qm&&Array.isArray(Qm)&&(h0.providerData=Qm.map(at=>Object.assign({},at))),Pd&&(h0._redirectEventId=Pd),h0}static _fromIdTokenResponse(g,m,w=!1){return(0,h.Z)(function*(){const R=new zr;R.updateFromServerResponse(m);const G=new mr({uid:m.localId,auth:g,stsTokenManager:R,isAnonymous:w});return yield Sn(G),G})()}}const Rs=new Map;function _r(T){nt(T instanceof Function,"Expected a class definition");let g=Rs.get(T);return g?(nt(g instanceof T,"Instance stored in cache mismatched with class"),g):(g=new T,Rs.set(T,g),g)}const ni=(()=>{class T{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,w){var R=this;return(0,h.Z)(function*(){R.storage[m]=w})()}_get(m){var w=this;return(0,h.Z)(function*(){const R=w.storage[m];return void 0===R?null:R})()}_remove(m){var w=this;return(0,h.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return T.type="NONE",T})();function pe(T,g,m){return`firebase:${T}:${g}:${m}`}class le{constructor(g,m,w){this.persistence=g,this.auth=m,this.userKey=w;const{config:R,name:G}=this.auth;this.fullUserKey=pe(this.userKey,R.apiKey,G),this.fullPersistenceKey=pe("persistence",R.apiKey,G),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,h.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?mr._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,h.Z)(function*(){if(m.persistence===g)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,w="authUser"){return(0,h.Z)(function*(){if(!m.length)return new le(_r(ni),g,w);const R=(yield Promise.all(m.map(function(){var Rt=(0,h.Z)(function*(Wt){if(yield Wt._isAvailable())return Wt});return function(Wt){return Rt.apply(this,arguments)}}()))).filter(Rt=>Rt);let G=R[0]||_r(ni);const _e=pe(w,g.config.apiKey,g.name);let Ge=null;for(const Rt of m)try{const Wt=yield Rt._get(_e);if(Wt){const Zt=mr._fromJSON(g,Wt);Rt!==G&&(Ge=Zt),G=Rt;break}}catch(Wt){}const Tt=R.filter(Rt=>Rt._shouldAllowMigration);return G._shouldAllowMigration&&Tt.length?(G=Tt[0],Ge&&(yield G._set(_e,Ge.toJSON())),yield Promise.all(m.map(function(){var Rt=(0,h.Z)(function*(Wt){if(Wt!==G)try{yield Wt._remove(_e)}catch(Zt){}});return function(Wt){return Rt.apply(this,arguments)}}())),new le(G,g,w)):new le(G,g,w)})()}}function ke(T){const g=T.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(mn(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(yt(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(H(g))return"Blackberry";if(z(g))return"Webos";if(Ke(g))return"Safari";if((g.includes("chrome/")||Ht(g))&&!g.includes("edge/"))return"Chrome";if(_n(g))return"Android";{const w=T.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function yt(T=(0,j.z$)()){return/firefox\//i.test(T)}function Ke(T=(0,j.z$)()){const g=T.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Ht(T=(0,j.z$)()){return/crios\//i.test(T)}function mn(T=(0,j.z$)()){return/iemobile/i.test(T)}function _n(T=(0,j.z$)()){return/android/i.test(T)}function H(T=(0,j.z$)()){return/blackberry/i.test(T)}function z(T=(0,j.z$)()){return/webos/i.test(T)}function ae(T=(0,j.z$)()){return/iphone|ipad|ipod/i.test(T)||/macintosh/i.test(T)&&/mobile/i.test(T)}function Pn(T=(0,j.z$)()){return ae(T)||_n(T)||z(T)||H(T)||/windows phone/i.test(T)||mn(T)}function Ze(T,g=[]){let m;switch(T){case"Browser":m=ke((0,j.z$)());break;case"Worker":m=`${ke((0,j.z$)())}-${T}`;break;default:m=T}const w=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${de.SDK_VERSION}/${w}`}function vt(){return(vt=(0,h.Z)(function*(T){return(yield ve(T,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function lt(T,g){return At.apply(this,arguments)}function At(){return(At=(0,h.Z)(function*(T,g){return ve(T,"GET","/v2/recaptchaConfig",Oe(T,g))})).apply(this,arguments)}function $t(T){return void 0!==T&&void 0!==T.getResponse}function un(T){return void 0!==T&&void 0!==T.enterprise}class Qn{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function qn(T){return new Promise((g,m)=>{const w=document.createElement("script");w.setAttribute("src",T),w.onload=g,w.onerror=R=>{const G=je("internal-error");G.customData=R,m(G)},w.type="text/javascript",w.charset="UTF-8",function An(){var T,g;return null!==(g=null===(T=document.getElementsByTagName("head"))||void 0===T?void 0:T[0])&&void 0!==g?g:document}().appendChild(w)})}function Yn(T){return`__${T}${Math.floor(1e6*Math.random())}`}class Nl{constructor(g){this.type="recaptcha-enterprise",this.auth=vr(g)}verify(g="verify",m=!1){var w=this;return(0,h.Z)(function*(){function G(){return G=(0,h.Z)(function*(Ge){if(!m){if(null==Ge.tenantId&&null!=Ge._agentRecaptchaConfig)return Ge._agentRecaptchaConfig.siteKey;if(null!=Ge.tenantId&&void 0!==Ge._tenantRecaptchaConfigs[Ge.tenantId])return Ge._tenantRecaptchaConfigs[Ge.tenantId].siteKey}return new Promise(function(){var Tt=(0,h.Z)(function*(Rt,Wt){lt(Ge,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Zt=>{if(void 0!==Zt.recaptchaKey){const hr=new Qn(Zt);return null==Ge.tenantId?Ge._agentRecaptchaConfig=hr:Ge._tenantRecaptchaConfigs[Ge.tenantId]=hr,Rt(hr.siteKey)}Wt(new Error("recaptcha Enterprise site key undefined"))}).catch(Zt=>{Wt(Zt)})});return function(Rt,Wt){return Tt.apply(this,arguments)}}())}),G.apply(this,arguments)}function _e(Ge,Tt,Rt){const Wt=window.grecaptcha;un(Wt)?Wt.enterprise.ready(()=>{Wt.enterprise.execute(Ge,{action:g}).then(Zt=>{Tt(Zt)}).catch(()=>{Tt("NO_RECAPTCHA")})}):Rt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ge,Tt)=>{(function R(Ge){return G.apply(this,arguments)})(w.auth).then(Rt=>{if(!m&&un(window.grecaptcha))_e(Rt,Ge,Tt);else{if("undefined"==typeof window)return void Tt(new Error("RecaptchaVerifier is only supported in browser"));qn("https://www.google.com/recaptcha/enterprise.js?render="+Rt).then(()=>{_e(Rt,Ge,Tt)}).catch(Wt=>{Tt(Wt)})}}).catch(Rt=>{Tt(Rt)})})})()}}function Wr(T,g,m){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,h.Z)(function*(T,g,m,w=!1){const R=new Nl(T);let G;try{G=yield R.verify(m)}catch(Ge){G=yield R.verify(m,!0)}const _e=Object.assign({},g);return Object.assign(_e,w?{captchaResp:G}:{captchaResponse:G}),Object.assign(_e,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(_e,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),_e})).apply(this,arguments)}class ya{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,m){const w=G=>new Promise((_e,Ge)=>{try{_e(g(G))}catch(Tt){Ge(Tt)}});w.onAbort=m,this.queue.push(w);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(g){var m=this;return(0,h.Z)(function*(){if(m.auth.currentUser===g)return;const w=[];try{for(const R of m.queue)yield R(g),R.onAbort&&w.push(R.onAbort)}catch(R){w.reverse();for(const G of w)try{G()}catch(_e){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null==R?void 0:R.message})}})()}}class ri{constructor(g,m,w,R){this.app=g,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=w,this.config=R,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new va(this),this.idTokenSubscription=new va(this),this.beforeStateQueue=new ya(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ze,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=R.sdkClientVersion}_initializeWithPersistence(g,m){var w=this;return m&&(this._popupRedirectResolver=_r(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var R,G;if(!w._deleted&&(w.persistenceManager=yield le.create(w,g),!w._deleted)){if(null===(R=w._popupRedirectResolver)||void 0===R?void 0:R._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(_e){}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(G=w.currentUser)||void 0===G?void 0:G.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,h.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m,!0)}})()}initializeCurrentUser(g){var m=this;return(0,h.Z)(function*(){var w;const R=yield m.assertedPersistence.getCurrentUser();let G=R,_e=!1;if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Ge=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,Tt=null==G?void 0:G._redirectEventId,Rt=yield m.tryRedirectSignIn(g);(!Ge||Ge===Tt)&&(null==Rt?void 0:Rt.user)&&(G=Rt.user,_e=!0)}if(!G)return m.directlySetCurrentUser(null);if(!G._redirectEventId){if(_e)try{yield m.beforeStateQueue.runMiddleware(G)}catch(Ge){G=R,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Ge))}return G?m.reloadAndSetCurrentUserOrClear(G):m.directlySetCurrentUser(null)}return V(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===G._redirectEventId?m.directlySetCurrentUser(G):m.reloadAndSetCurrentUserOrClear(G)})()}tryRedirectSignIn(g){var m=this;return(0,h.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch(R){yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,h.Z)(function*(){try{yield Sn(g)}catch(w){if("auth/network-request-failed"!==(null==w?void 0:w.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function qe(){if("undefined"==typeof navigator)return null;const T=navigator;return T.languages&&T.languages[0]||T.language||null}()}_delete(){var g=this;return(0,h.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,h.Z)(function*(){const w=g?(0,j.m9)(g):null;return w&&V(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(g,m=!1){var w=this;return(0,h.Z)(function*(){if(!w._deleted)return g&&V(w.tenantId===g.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(g)),w.queue((0,h.Z)(function*(){yield w.directlySetCurrentUser(g),w.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,h.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(_r(g))}))}initializeRecaptchaConfig(){var g=this;return(0,h.Z)(function*(){const m=yield lt(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),w=new Qn(m);null==g.tenantId?g._agentRecaptchaConfig=w:g._tenantRecaptchaConfigs[g.tenantId]=w,w.emailPasswordEnabled&&new Nl(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new j.LL("auth","Firebase",g())}onAuthStateChanged(g,m,w){return this.registerStateListener(this.authStateSubscription,g,m,w)}beforeAuthStateChanged(g,m){return this.beforeStateQueue.pushCallback(g,m)}onIdTokenChanged(g,m,w){return this.registerStateListener(this.idTokenSubscription,g,m,w)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var w=this;return(0,h.Z)(function*(){const R=yield w.getOrInitRedirectPersistenceManager(m);return null===g?R.removeCurrentUser():R.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const w=g&&_r(g)||m._popupRedirectResolver;V(w,m,"argument-error"),m.redirectPersistenceManager=yield le.create(m,[_r(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,h.Z)(function*(){var w,R;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===g?m._currentUser:(null===(R=m.redirectUser)||void 0===R?void 0:R._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,h.Z)(function*(){if(g===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,w,R){if(this._deleted)return()=>{};const G="function"==typeof m?m:m.next.bind(m),_e=this._isInitialized?Promise.resolve():this._initializationPromise;return V(_e,this,"internal-error"),_e.then(()=>G(this.currentUser)),"function"==typeof m?g.addObserver(m,w,R):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==g&&m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh(),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Ze(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,h.Z)(function*(){var m;const w={"X-Client-Version":g.clientVersion};g.app.options.appId&&(w["X-Firebase-gmpid"]=g.app.options.appId);const R=yield null===(m=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();R&&(w["X-Firebase-Client"]=R);const G=yield g._getAppCheckToken();return G&&(w["X-Firebase-AppCheck"]=G),w})()}_getAppCheckToken(){var g=this;return(0,h.Z)(function*(){var m;const w=yield null===(m=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return(null==w?void 0:w.error)&&function ft(T,...g){tt.logLevel<=ce.in.WARN&&tt.warn(`Auth (${de.SDK_VERSION}): ${T}`,...g)}(`Error while retrieving App Check token: ${w.error}`),null==w?void 0:w.token})()}}function vr(T){return(0,j.m9)(T)}class va{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,j.ne)(m=>this.observer=m)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Au(T){const g=T.indexOf(":");return g<0?"":T.substr(0,g+1)}function Os(T){if(!T)return null;const g=Number(T);return isNaN(g)?null:g}class ba{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return Ie("not implemented")}_getIdTokenResponse(g){return Ie("not implemented")}_linkToIdToken(g,m){return Ie("not implemented")}_getReauthenticationResolver(g){return Ie("not implemented")}}function ku(T,g){return zi.apply(this,arguments)}function zi(){return(zi=(0,h.Z)(function*(T,g){return ve(T,"POST","/v1/accounts:resetPassword",Oe(T,g))})).apply(this,arguments)}function Ch(T,g){return mp.apply(this,arguments)}function mp(){return(mp=(0,h.Z)(function*(T,g){return ve(T,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Sm(T,g){return ms.apply(this,arguments)}function ms(){return(ms=(0,h.Z)(function*(T,g){return ve(T,"POST","/v1/accounts:update",Oe(T,g))})).apply(this,arguments)}function Wi(T,g){return _p.apply(this,arguments)}function _p(){return(_p=(0,h.Z)(function*(T,g){return kt(T,"POST","/v1/accounts:signInWithPassword",Oe(T,g))})).apply(this,arguments)}function Sh(T,g){return yp.apply(this,arguments)}function yp(){return(yp=(0,h.Z)(function*(T,g){return ve(T,"POST","/v1/accounts:sendOobCode",Oe(T,g))})).apply(this,arguments)}function xh(T,g){return vp.apply(this,arguments)}function vp(){return(vp=(0,h.Z)(function*(T,g){return Sh(T,g)})).apply(this,arguments)}function $c(T,g){return xm.apply(this,arguments)}function xm(){return(xm=(0,h.Z)(function*(T,g){return Sh(T,g)})).apply(this,arguments)}function bp(T,g){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,h.Z)(function*(T,g){return Sh(T,g)})).apply(this,arguments)}function Tp(T,g){return Ep.apply(this,arguments)}function Ep(){return(Ep=(0,h.Z)(function*(T,g){return Sh(T,g)})).apply(this,arguments)}function Dm(){return(Dm=(0,h.Z)(function*(T,g){return kt(T,"POST","/v1/accounts:signInWithEmailLink",Oe(T,g))})).apply(this,arguments)}function qc(){return(qc=(0,h.Z)(function*(T,g){return kt(T,"POST","/v1/accounts:signInWithEmailLink",Oe(T,g))})).apply(this,arguments)}class Dh extends ba{constructor(g,m,w,R=null){super("password",w),this._email=g,this._password=m,this._tenantId=R}static _fromEmailAndPassword(g,m){return new Dh(g,m,"password")}static _fromEmailAndCode(g,m,w=null){return new Dh(g,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,h.Z)(function*(){var w;switch(m.signInMethod){case"password":const R={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null===(w=g._getRecaptchaConfig())||void 0===w?void 0:w.emailPasswordEnabled){const G=yield Wr(g,R,"signInWithPassword");return Wi(g,G)}return Wi(g,R).catch(function(){var G=(0,h.Z)(function*(_e){if("auth/missing-recaptcha-token"===_e.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ge=yield Wr(g,R,"signInWithPassword");return Wi(g,Ge)}return Promise.reject(_e)});return function(_e){return G.apply(this,arguments)}}());case"emailLink":return function wp(T,g){return Dm.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:Ce(g,"internal-error")}})()}_linkToIdToken(g,m){var w=this;return(0,h.Z)(function*(){switch(w.signInMethod){case"password":return Ch(g,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Im(T,g){return qc.apply(this,arguments)}(g,{idToken:m,email:w._email,oobCode:w._password});default:Ce(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Ns(T,g){return Am.apply(this,arguments)}function Am(){return(Am=(0,h.Z)(function*(T,g){return kt(T,"POST","/v1/accounts:signInWithIdp",Oe(T,g))})).apply(this,arguments)}class Do extends ba{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new Do(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):Ce("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:R}=m,G=(0,re._T)(m,["providerId","signInMethod"]);if(!w||!R)return null;const _e=new Do(w,R);return _e.idToken=G.idToken||void 0,_e.accessToken=G.accessToken||void 0,_e.secret=G.secret,_e.nonce=G.nonce,_e.pendingToken=G.pendingToken||null,_e}_getIdTokenResponse(g){return Ns(g,this.buildRequest())}_linkToIdToken(g,m){const w=this.buildRequest();return w.idToken=m,Ns(g,w)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Ns(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,j.xO)(m)}return g}}function Fl(T,g){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,h.Z)(function*(T,g){return ve(T,"POST","/v1/accounts:sendVerificationCode",Oe(T,g))})).apply(this,arguments)}function Cp(){return(Cp=(0,h.Z)(function*(T,g){return kt(T,"POST","/v1/accounts:signInWithPhoneNumber",Oe(T,g))})).apply(this,arguments)}function Bl(){return(Bl=(0,h.Z)(function*(T,g){const m=yield kt(T,"POST","/v1/accounts:signInWithPhoneNumber",Oe(T,g));if(m.temporaryProof)throw ar(T,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Mm={USER_NOT_FOUND:"user-not-found"};function Pu(){return(Pu=(0,h.Z)(function*(T,g){return kt(T,"POST","/v1/accounts:signInWithPhoneNumber",Oe(T,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Mm)})).apply(this,arguments)}class kr extends ba{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new kr({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new kr({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function km(T,g){return Cp.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function Ul(T,g){return Bl.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Ih(T,g){return Pu.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:w,verificationCode:R}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:w,code:R}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:w,phoneNumber:R,temporaryProof:G}=g;return w||m||R||G?new kr({verificationId:m,verificationCode:w,phoneNumber:R,temporaryProof:G}):null}}class Ru{constructor(g){var m,w,R,G,_e,Ge;const Tt=(0,j.zd)((0,j.pd)(g)),Rt=null!==(m=Tt.apiKey)&&void 0!==m?m:null,Wt=null!==(w=Tt.oobCode)&&void 0!==w?w:null,Zt=function Gc(T){switch(T){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=Tt.mode)&&void 0!==R?R:null);V(Rt&&Wt&&Zt,"argument-error"),this.apiKey=Rt,this.operation=Zt,this.code=Wt,this.continueUrl=null!==(G=Tt.continueUrl)&&void 0!==G?G:null,this.languageCode=null!==(_e=Tt.languageCode)&&void 0!==_e?_e:null,this.tenantId=null!==(Ge=Tt.tenantId)&&void 0!==Ge?Ge:null}static parseLink(g){const m=function Vy(T){const g=(0,j.zd)((0,j.pd)(T)).link,m=g?(0,j.zd)((0,j.pd)(g)).deep_link_id:null,w=(0,j.zd)((0,j.pd)(T)).deep_link_id;return(w?(0,j.zd)((0,j.pd)(w)).link:null)||w||m||g||T}(g);try{return new Ru(m)}catch(w){return null}}}let Ah=(()=>{class T{constructor(){this.providerId=T.PROVIDER_ID}static credential(m,w){return Dh._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const R=Ru.parseLink(w);return V(R,"argument-error"),Dh._fromEmailAndCode(m,R.code,R.tenantId)}}return T.PROVIDER_ID="password",T.EMAIL_PASSWORD_SIGN_IN_METHOD="password",T.EMAIL_LINK_SIGN_IN_METHOD="emailLink",T})();class Qs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ou extends Qs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Io extends Ou{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return V("providerId"in m&&"signInMethod"in m,"argument-error"),Do._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return V(g.idToken||g.accessToken,"argument-error"),Do._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Io.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Io.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:R,pendingToken:G,nonce:_e,providerId:Ge}=g;if(!w&&!R&&!m&&!G||!Ge)return null;try{return new Io(Ge)._credential({idToken:m,accessToken:w,nonce:_e,pendingToken:G})}catch(Tt){return null}}}let jy=(()=>{class T extends Ou{constructor(){super("facebook.com")}static credential(m){return Do._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return T.credentialFromTaggedObject(m)}static credentialFromError(m){return T.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return T.credential(m.oauthAccessToken)}catch(w){return null}}}return T.FACEBOOK_SIGN_IN_METHOD="facebook.com",T.PROVIDER_ID="facebook.com",T})(),Cr=(()=>{class T extends Ou{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return Do._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return T.credentialFromTaggedObject(m)}static credentialFromError(m){return T.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:R}=m;if(!w&&!R)return null;try{return T.credential(w,R)}catch(G){return null}}}return T.GOOGLE_SIGN_IN_METHOD="google.com",T.PROVIDER_ID="google.com",T})(),kh=(()=>{class T extends Ou{constructor(){super("github.com")}static credential(m){return Do._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return T.credentialFromTaggedObject(m)}static credentialFromError(m){return T.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return T.credential(m.oauthAccessToken)}catch(w){return null}}}return T.GITHUB_SIGN_IN_METHOD="github.com",T.PROVIDER_ID="github.com",T})();class tr extends ba{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return Ns(g,this.buildRequest())}_linkToIdToken(g,m){const w=this.buildRequest();return w.idToken=m,Ns(g,w)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Ns(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:R,pendingToken:G}=m;return w&&R&&G&&w===R?new tr(w,G):null}static _create(g,m){return new tr(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Nu extends Qs{constructor(g){V(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Nu.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Nu.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=tr.fromJSON(g);return V(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:w}=g;if(!m||!w)return null;try{return tr._create(w,m)}catch(R){return null}}}let Lu=(()=>{class T extends Ou{constructor(){super("twitter.com")}static credential(m,w){return Do._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return T.credentialFromTaggedObject(m)}static credentialFromError(m){return T.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:R}=m;if(!w||!R)return null;try{return T.credential(w,R)}catch(G){return null}}}return T.TWITTER_SIGN_IN_METHOD="twitter.com",T.PROVIDER_ID="twitter.com",T})();function ii(T,g){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,h.Z)(function*(T,g){return kt(T,"POST","/v1/accounts:signUp",Oe(T,g))})).apply(this,arguments)}class Ni{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,w,R=!1){return(0,h.Z)(function*(){const G=yield mr._fromIdTokenResponse(g,w,R),_e=Xs(w);return new Ni({user:G,providerId:_e,_tokenResponse:w,operationType:m})})()}static _forOperation(g,m,w){return(0,h.Z)(function*(){yield g._updateTokensIfNecessary(w,!0);const R=Xs(w);return new Ni({user:g,providerId:R,_tokenResponse:w,operationType:m})})()}}function Xs(T){return T.providerId?T.providerId:"phoneNumber"in T?"phone":null}function qa(){return(qa=(0,h.Z)(function*(T){var g;const m=vr(T);if(yield m._initializationPromise,null===(g=m.currentUser)||void 0===g?void 0:g.isAnonymous)return new Ni({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield ii(m,{returnSecureToken:!0}),R=yield Ni._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(R.user),R})).apply(this,arguments)}class Js extends j.ZR{constructor(g,m,w,R){var G;super(m.code,m.message),this.operationType=w,this.user=R,Object.setPrototypeOf(this,Js.prototype),this.customData={appName:g.name,tenantId:null!==(G=g.tenantId)&&void 0!==G?G:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(g,m,w,R){return new Js(g,m,w,R)}}function Mh(T,g,m,w){return("reauthenticate"===g?m._getReauthenticationResolver(T):m._getIdTokenResponse(T)).catch(G=>{throw"auth/multi-factor-auth-required"===G.code?Js._fromErrorAndOperation(T,G,g,w):G})}function Ao(T){return new Set(T.map(({providerId:g})=>g).filter(g=>!!g))}function is(){return(is=(0,h.Z)(function*(T,g){const m=(0,j.m9)(T);yield Uu(!0,m,g);const{providerUserInfo:w}=yield Rr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),R=Ao(w||[]);return m.providerData=m.providerData.filter(G=>R.has(G.providerId)),R.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function gn(T,g){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,h.Z)(function*(T,g,m=!1){const w=yield bn(T,g._linkToIdToken(T.auth,yield T.getIdToken()),m);return Ni._forOperation(T,"link",w)})).apply(this,arguments)}function Uu(T,g,m){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,h.Z)(function*(T,g,m){yield Sn(g);const R=!1===T?"provider-already-linked":"no-such-provider";V(Ao(g.providerData).has(m)===T,g.auth,R)})).apply(this,arguments)}function Sp(T,g){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,h.Z)(function*(T,g,m=!1){const{auth:w}=T,R="reauthenticate";try{const G=yield bn(T,Mh(w,R,g,T),m);V(G.idToken,w,"internal-error");const _e=cr(G.idToken);V(_e,w,"internal-error");const{sub:Ge}=_e;return V(T.uid===Ge,w,"user-mismatch"),Ni._forOperation(T,R,G)}catch(G){throw"auth/user-not-found"===(null==G?void 0:G.code)&&Ce(w,"user-mismatch"),G}})).apply(this,arguments)}function Zc(T,g){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,h.Z)(function*(T,g,m=!1){const w="signIn",R=yield Mh(T,w,g),G=yield Ni._fromIdTokenResponse(T,w,R);return m||(yield T._updateCurrentUser(G.user)),G})).apply(this,arguments)}function za(T,g){return Et.apply(this,arguments)}function Et(){return(Et=(0,h.Z)(function*(T,g){return Zc(vr(T),g)})).apply(this,arguments)}function Wn(T,g){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,h.Z)(function*(T,g){const m=(0,j.m9)(T);return yield Uu(!1,m,g.providerId),gn(m,g)})).apply(this,arguments)}function Or(T,g){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,h.Z)(function*(T,g){return Sp((0,j.m9)(T),g)})).apply(this,arguments)}function Bu(T,g){return eo.apply(this,arguments)}function eo(){return(eo=(0,h.Z)(function*(T,g){return kt(T,"POST","/v1/accounts:signInWithCustomToken",Oe(T,g))})).apply(this,arguments)}function ys(){return(ys=(0,h.Z)(function*(T,g){const m=vr(T),w=yield Bu(m,{token:g,returnSecureToken:!0}),R=yield Ni._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(R.user),R})).apply(this,arguments)}class jl{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?$l._fromServerResponse(g,m):"totpInfo"in m?xp._fromServerResponse(g,m):Ce(g,"internal-error")}}class $l extends jl{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new $l(m)}}class xp extends jl{constructor(g){super("totp",g)}static _fromServerResponse(g,m){return new xp(m)}}function to(T,g,m){var w;V((null===(w=m.url)||void 0===w?void 0:w.length)>0,T,"invalid-continue-uri"),V(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,T,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(V(m.iOS.bundleId.length>0,T,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(V(m.android.packageName.length>0,T,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function vs(){return vs=(0,h.Z)(function*(T,g,m){var w;const R=vr(T),G={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null===(w=R._getRecaptchaConfig())||void 0===w?void 0:w.emailPasswordEnabled){const _e=yield Wr(R,G,"getOobCode",!0);m&&to(R,_e,m),yield $c(R,_e)}else m&&to(R,G,m),yield $c(R,G).catch(function(){var _e=(0,h.Z)(function*(Ge){if("auth/missing-recaptcha-token"!==Ge.code)return Promise.reject(Ge);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Tt=yield Wr(R,G,"getOobCode",!0);m&&to(R,Tt,m),yield $c(R,Tt)}});return function(Ge){return _e.apply(this,arguments)}}())}),vs.apply(this,arguments)}function wa(){return(wa=(0,h.Z)(function*(T,g,m){yield ku((0,j.m9)(T),{oobCode:g,newPassword:m})})).apply(this,arguments)}function Yo(){return(Yo=(0,h.Z)(function*(T,g){yield Sm((0,j.m9)(T),{oobCode:g})})).apply(this,arguments)}function Hl(T,g){return ql.apply(this,arguments)}function ql(){return(ql=(0,h.Z)(function*(T,g){const m=(0,j.m9)(T),w=yield ku(m,{oobCode:g}),R=w.requestType;switch(V(R,m,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(w.mfaInfo,m,"internal-error");default:V(w.email,m,"internal-error")}let G=null;return w.mfaInfo&&(G=jl._fromServerResponse(vr(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:G},operation:R}})).apply(this,arguments)}function Ka(){return(Ka=(0,h.Z)(function*(T,g){const{data:m}=yield Hl((0,j.m9)(T),g);return m.email})).apply(this,arguments)}function Vu(){return Vu=(0,h.Z)(function*(T,g,m){var w;const R=vr(T),G={returnSecureToken:!0,email:g,password:m,clientType:"CLIENT_TYPE_WEB"};let _e;if(null===(w=R._getRecaptchaConfig())||void 0===w?void 0:w.emailPasswordEnabled){const Rt=yield Wr(R,G,"signUpPassword");_e=ii(R,Rt)}else _e=ii(R,G).catch(function(){var Rt=(0,h.Z)(function*(Wt){if("auth/missing-recaptcha-token"===Wt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Zt=yield Wr(R,G,"signUpPassword");return ii(R,Zt)}return Promise.reject(Wt)});return function(Wt){return Rt.apply(this,arguments)}}());const Ge=yield _e.catch(Rt=>Promise.reject(Rt)),Tt=yield Ni._fromIdTokenResponse(R,"signIn",Ge);return yield R._updateCurrentUser(Tt.user),Tt}),Vu.apply(this,arguments)}function ju(){return ju=(0,h.Z)(function*(T,g,m){var w;const R=vr(T),G={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function _e(Ge,Tt){V(Tt.handleCodeInApp,R,"argument-error"),Tt&&to(R,Ge,Tt)}if(null===(w=R._getRecaptchaConfig())||void 0===w?void 0:w.emailPasswordEnabled){const Ge=yield Wr(R,G,"getOobCode",!0);_e(Ge,m),yield bp(R,Ge)}else _e(G,m),yield bp(R,G).catch(function(){var Ge=(0,h.Z)(function*(Tt){if("auth/missing-recaptcha-token"!==Tt.code)return Promise.reject(Tt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Rt=yield Wr(R,G,"getOobCode",!0);_e(Rt,m),yield bp(R,Rt)}});return function(Tt){return Ge.apply(this,arguments)}}())}),ju.apply(this,arguments)}function Rh(){return(Rh=(0,h.Z)(function*(T,g,m){const w=(0,j.m9)(T),R=Ah.credentialWithLink(g,m||We());return V(R._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),za(w,R)})).apply(this,arguments)}function Oh(T,g){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,h.Z)(function*(T,g){return ve(T,"POST","/v1/accounts:createAuthUri",Oe(T,g))})).apply(this,arguments)}function Jc(){return(Jc=(0,h.Z)(function*(T,g){const w={identifier:g,continueUri:mt()?We():"http://localhost"},{signinMethods:R}=yield Oh((0,j.m9)(T),w);return R||[]})).apply(this,arguments)}function Vr(){return(Vr=(0,h.Z)(function*(T,g){const m=(0,j.m9)(T),R={requestType:"VERIFY_EMAIL",idToken:yield T.getIdToken()};g&&to(m.auth,R,g);const{email:G}=yield xh(m.auth,R);G!==T.email&&(yield T.reload())})).apply(this,arguments)}function br(){return(br=(0,h.Z)(function*(T,g,m){const w=(0,j.m9)(T),G={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield T.getIdToken(),newEmail:g};m&&to(w.auth,G,m);const{email:_e}=yield Tp(w.auth,G);_e!==T.email&&(yield T.reload())})).apply(this,arguments)}function Mp(T,g){return Pp.apply(this,arguments)}function Pp(){return(Pp=(0,h.Z)(function*(T,g){return ve(T,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ed(){return(ed=(0,h.Z)(function*(T,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const w=(0,j.m9)(T),G={idToken:yield w.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},_e=yield bn(w,Mp(w.auth,G));w.displayName=_e.displayName||null,w.photoURL=_e.photoUrl||null;const Ge=w.providerData.find(({providerId:Tt})=>"password"===Tt);Ge&&(Ge.displayName=w.displayName,Ge.photoURL=w.photoURL),yield w._updateTokensIfNecessary(_e)})).apply(this,arguments)}function td(T,g,m){return Za.apply(this,arguments)}function Za(){return(Za=(0,h.Z)(function*(T,g,m){const{auth:w}=T,G={idToken:yield T.getIdToken(),returnSecureToken:!0};g&&(G.email=g),m&&(G.password=m);const _e=yield bn(T,Ch(w,G));yield T._updateTokensIfNecessary(_e,!0)})).apply(this,arguments)}class Qo{constructor(g,m,w={}){this.isNewUser=g,this.providerId=m,this.profile=w}}class Lp extends Qo{constructor(g,m,w,R){super(g,m,w),this.username=R}}class Fp extends Qo{constructor(g,m){super(g,"facebook.com",m)}}class Ya extends Lp{constructor(g,m){super(g,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Wl extends Qo{constructor(g,m){super(g,"google.com",m)}}class $y extends Lp{constructor(g,m,w){super(g,"twitter.com",m,w)}}function Up(T){const{user:g,_tokenResponse:m}=T;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function zl(T){var g,m;if(!T)return null;const{providerId:w}=T,R=T.rawUserInfo?JSON.parse(T.rawUserInfo):{},G=T.isNewUser||"identitytoolkit#SignupNewUserResponse"===T.kind;if(!w&&(null==T?void 0:T.idToken)){const _e=null===(m=null===(g=cr(T.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(_e)return new Qo(G,"anonymous"!==_e&&"custom"!==_e?_e:null)}if(!w)return null;switch(w){case"facebook.com":return new Fp(G,R);case"github.com":return new Ya(G,R);case"google.com":return new Wl(G,R);case"twitter.com":return new $y(G,R,T.screenName||null);case"custom":case"anonymous":return new Qo(G,null);default:return new Qo(G,w,R)}}(m)}class Sa{constructor(g,m,w){this.type=g,this.credential=m,this.auth=w}static _fromIdtoken(g,m){return new Sa("enroll",g,m)}static _fromMfaPendingCredential(g){return new Sa("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,w;if(null==g?void 0:g.multiFactorSession){if(null===(m=g.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return Sa._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(w=g.multiFactorSession)||void 0===w?void 0:w.idToken)return Sa._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Hu{constructor(g,m,w){this.session=g,this.hints=m,this.signInResolver=w}static _fromError(g,m){const w=vr(g),R=m.customData._serverResponse,G=(R.mfaInfo||[]).map(Ge=>jl._fromServerResponse(w,Ge));V(R.mfaPendingCredential,w,"internal-error");const _e=Sa._fromMfaPendingCredential(R.mfaPendingCredential);return new Hu(_e,G,function(){var Ge=(0,h.Z)(function*(Tt){const Rt=yield Tt._process(w,_e);delete R.mfaInfo,delete R.mfaPendingCredential;const Wt=Object.assign(Object.assign({},R),{idToken:Rt.idToken,refreshToken:Rt.refreshToken});switch(m.operationType){case"signIn":const Zt=yield Ni._fromIdTokenResponse(w,m.operationType,Wt);return yield w._updateCurrentUser(Zt.user),Zt;case"reauthenticate":return V(m.user,w,"internal-error"),Ni._forOperation(m.user,m.operationType,Wt);default:Ce(w,"internal-error")}});return function(Tt){return Ge.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,h.Z)(function*(){return m.signInResolver(g)})()}}function rd(T,g){return ve(T,"POST","/v2/accounts/mfaEnrollment:start",Oe(T,g))}class Gu{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>jl._fromServerResponse(g.auth,w)))})}static _fromUser(g){return new Gu(g)}getSession(){var g=this;return(0,h.Z)(function*(){return Sa._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,m){var w=this;return(0,h.Z)(function*(){const R=g,G=yield w.getSession(),_e=yield bn(w.user,R._process(w.user.auth,G,m));return yield w.user._updateTokensIfNecessary(_e),w.user.reload()})()}unenroll(g){var m=this;return(0,h.Z)(function*(){const w="string"==typeof g?g:g.uid,R=yield m.user.getIdToken();try{const G=yield bn(m.user,function Hy(T,g){return ve(T,"POST","/v2/accounts/mfaEnrollment:withdraw",Oe(T,g))}(m.user.auth,{idToken:R,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:_e})=>_e!==w),yield m.user._updateTokensIfNecessary(G),yield m.user.reload()}catch(G){throw G}})()}}const zu=new WeakMap,Kr="__sak";class Wu{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Kr,"1"),this.storage.removeItem(Kr),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Xo=(()=>{class T extends Wu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Kl(){const T=(0,j.z$)();return Ke(T)||ae(T)}()&&function yr(){try{return!(!window||window===window.top)}catch(T){return!1}}(),this.fallbackToPolling=Pn(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const R=this.storage.getItem(w),G=this.localCache[w];R!==G&&m(w,G,R)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((Ge,Tt,Rt)=>{this.notifyListeners(Ge,Rt)});const R=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ge=this.storage.getItem(R);if(m.newValue!==Ge)null!==m.newValue?this.storage.setItem(R,m.newValue):this.storage.removeItem(R);else if(this.localCache[R]===m.newValue&&!w)return}const G=()=>{const Ge=this.storage.getItem(R);!w&&this.localCache[R]===Ge||this.notifyListeners(R,Ge)},_e=this.storage.getItem(R);!function en(){return(0,j.w1)()&&10===document.documentMode}()||_e===m.newValue||m.newValue===m.oldValue?G():setTimeout(G,10)}notifyListeners(m,w){this.localCache[m]=w;const R=this.listeners[m];if(R)for(const G of Array.from(R))G(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var R=()=>super._set,G=this;return(0,h.Z)(function*(){yield R().call(G,m,w),G.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,R=this;return(0,h.Z)(function*(){const G=yield w().call(R,m);return R.localCache[m]=JSON.stringify(G),G})()}_remove(m){var w=()=>super._remove,R=this;return(0,h.Z)(function*(){yield w().call(R,m),delete R.localCache[m]})()}}return T.type="LOCAL",T})(),io=(()=>{class T extends Wu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return T.type="SESSION",T})();let od=(()=>{class T{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(G=>G.isListeningto(m));if(w)return w;const R=new T(m);return this.receivers.push(R),R}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,h.Z)(function*(){const R=m,{eventId:G,eventType:_e,data:Ge}=R.data,Tt=w.handlersMap[_e];if(!(null==Tt?void 0:Tt.size))return;R.ports[0].postMessage({status:"ack",eventId:G,eventType:_e});const Rt=Array.from(Tt).map(function(){var Zt=(0,h.Z)(function*(hr){return hr(R.origin,Ge)});return function(hr){return Zt.apply(this,arguments)}}()),Wt=yield function sd(T){return Promise.all(T.map(function(){var g=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return g.apply(this,arguments)}}()))}(Rt);R.ports[0].postMessage({status:"done",eventId:G,eventType:_e,response:Wt})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return T.receivers=[],T})();function Ja(T="",g=10){let m="";for(let w=0;w<g;w++)m+=Math.floor(10*Math.random());return T+m}class Uh{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,w=50){var R=this;return(0,h.Z)(function*(){const G="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!G)throw new Error("connection_unavailable");let _e,Ge;return new Promise((Tt,Rt)=>{const Wt=Ja("",20);G.port1.start();const Zt=setTimeout(()=>{Rt(new Error("unsupported_event"))},w);Ge={messageChannel:G,onMessage(hr){const ho=hr;if(ho.data.eventId===Wt)switch(ho.data.status){case"ack":clearTimeout(Zt),_e=setTimeout(()=>{Rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(_e),Tt(ho.data.response);break;default:clearTimeout(Zt),clearTimeout(_e),Rt(new Error("invalid_response"))}}},R.handlers.add(Ge),G.port1.addEventListener("message",Ge.onMessage),R.target.postMessage({eventType:g,eventId:Wt,data:m},[G.port2])}).finally(()=>{Ge&&R.removeMessageHandler(Ge)})})()}}function fr(){return window}function ad(){return void 0!==fr().WorkerGlobalScope&&"function"==typeof fr().importScripts}function Yl(){return(Yl=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(T){return null}})).apply(this,arguments)}const Jo="firebaseLocalStorageDb",ea="firebaseLocalStorage",Fs="fbase_key";class si{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Us(T,g){return T.transaction([ea],g?"readwrite":"readonly").objectStore(ea)}function Bs(){const T=indexedDB.open(Jo,1);return new Promise((g,m)=>{T.addEventListener("error",()=>{m(T.error)}),T.addEventListener("upgradeneeded",()=>{const w=T.result;try{w.createObjectStore(ea,{keyPath:Fs})}catch(R){m(R)}}),T.addEventListener("success",(0,h.Z)(function*(){const w=T.result;w.objectStoreNames.contains(ea)?g(w):(w.close(),yield function oi(){const T=indexedDB.deleteDatabase(Jo);return new si(T).toPromise()}(),g(yield Bs()))}))})}function Ql(T,g,m){return ud.apply(this,arguments)}function ud(){return(ud=(0,h.Z)(function*(T,g,m){const w=Us(T,!0).put({[Fs]:g,value:m});return new si(w).toPromise()})).apply(this,arguments)}function ld(){return(ld=(0,h.Z)(function*(T,g){const m=Us(T,!1).get(g),w=yield new si(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Nm(T,g){const m=Us(T,!0).delete(g);return new si(m).toPromise()}const Ts=(()=>{class T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield Bs()),m.db})()}_withRetries(m){var w=this;return(0,h.Z)(function*(){let R=0;for(;;)try{const G=yield w._openDb();return yield m(G)}catch(G){if(R++>3)throw G;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return ad()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=od._getInstance(function Ln(){return ad()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,h.Z)(function*(R,G){return{keyProcessed:(yield m._poll()).includes(G.key)}});return function(R,G){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,h.Z)(function*(R,G){return["keyChanged"]});return function(R,G){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var w,R;if(m.activeServiceWorker=yield function xi(){return Yl.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Uh(m.activeServiceWorker);const G=yield m.sender._send("ping",{},800);!G||(null===(w=G[0])||void 0===w?void 0:w.fulfilled)&&(null===(R=G[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,h.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Da(){var T;return(null===(T=null==navigator?void 0:navigator.serviceWorker)||void 0===T?void 0:T.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch(R){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Bs();return yield Ql(m,Kr,"1"),yield Nm(m,Kr),!0}catch(m){}return!1})()}_withPendingWrite(m){var w=this;return(0,h.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var R=this;return(0,h.Z)(function*(){return R._withPendingWrite((0,h.Z)(function*(){return yield R._withRetries(G=>Ql(G,m,w)),R.localCache[m]=w,R.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,h.Z)(function*(){const R=yield w._withRetries(G=>function xr(T,g){return ld.apply(this,arguments)}(G,m));return w.localCache[m]=R,R})()}_remove(m){var w=this;return(0,h.Z)(function*(){return w._withPendingWrite((0,h.Z)(function*(){return yield w._withRetries(R=>Nm(R,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const w=yield m._withRetries(_e=>{const Ge=Us(_e,!1).getAll();return new si(Ge).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const R=[],G=new Set;for(const{fbase_key:_e,value:Ge}of w)G.add(_e),JSON.stringify(m.localCache[_e])!==JSON.stringify(Ge)&&(m.notifyListeners(_e,Ge),R.push(_e));for(const _e of Object.keys(m.localCache))m.localCache[_e]&&!G.has(_e)&&(m.notifyListeners(_e,null),R.push(_e));return R})()}notifyListeners(m,w){this.localCache[m]=w;const R=this.listeners[m];if(R)for(const G of Array.from(R))G(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return T.type="LOCAL",T})();function Bh(T,g){return ve(T,"POST","/v2/accounts/mfaSignIn:start",Oe(T,g))}const Mo=1e12;class Fm{constructor(g){this.auth=g,this.counter=Mo,this._widgets=new Map}render(g,m){const w=this.counter;return this._widgets.set(w,new jh(g,this.auth.name,m||{})),this.counter++,w}reset(g){var m;const w=g||Mo;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(g){var m;return(null===(m=this._widgets.get(g||Mo))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,h.Z)(function*(){var w;return null===(w=m._widgets.get(g||Mo))||void 0===w||w.execute(),""})()}}class jh{constructor(g,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof g?document.getElementById(g):g;V(R,"argument-error",{appName:m}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function js(T){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<T;w++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}(50);const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Es=Yn("rcb"),$h=new rt(3e4,6e4);class Xl{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(g=fr().grecaptcha)||void 0===g?void 0:g.render)}load(g,m=""){return V(function cd(T){return T.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(T)}(m),g,"argument-error"),this.shouldResolveImmediately(m)&&$t(fr().grecaptcha)?Promise.resolve(fr().grecaptcha):new Promise((w,R)=>{const G=fr().setTimeout(()=>{R(je(g,"network-request-failed"))},$h.get());fr()[Es]=()=>{fr().clearTimeout(G),delete fr()[Es];const Ge=fr().grecaptcha;if(!Ge||!$t(Ge))return void R(je(g,"internal-error"));const Tt=Ge.render;Ge.render=(Rt,Wt)=>{const Zt=Tt(Rt,Wt);return this.counter++,Zt},this.hostLanguage=m,w(Ge)},qn(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:Es,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(G),R(je(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var m;return!!(null===(m=fr().grecaptcha)||void 0===m?void 0:m.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Um{load(g){return(0,h.Z)(function*(){return new Fm(g)})()}clearedOneInstance(){}}const Jl="recaptcha",Vn={theme:"light",type:"image"};class Bp{constructor(g,m=Object.assign({},Vn),w){this.parameters=m,this.type=Jl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vr(w),this.isInvisible="invisible"===this.parameters.size,V("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof g?document.getElementById(g):g;V(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Um:new Xl,this.validateStartingState()}verify(){var g=this;return(0,h.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),w=g.getAssertedRecaptcha();return w.getResponse(m)||new Promise(G=>{const _e=Ge=>{!Ge||(g.tokenChangeListeners.delete(_e),G(Ge))};g.tokenChangeListeners.add(_e),g.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof g)g(m);else if("string"==typeof g){const w=fr()[g];"function"==typeof w&&w(m)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,h.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,h.Z)(function*(){V(mt()&&!ad(),g.auth,"internal-error"),yield function eu(){let T=null;return new Promise(g=>{"complete"!==document.readyState?(T=()=>g(),window.addEventListener("load",T)):g()}).catch(g=>{throw T&&window.removeEventListener("load",T),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function He(T){return vt.apply(this,arguments)}(g.auth);V(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class mi{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=kr._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function Po(){return(Po=(0,h.Z)(function*(T,g,m){const w=vr(T),R=yield Qu(w,g,(0,j.m9)(m));return new mi(R,G=>za(w,G))})).apply(this,arguments)}function Yu(){return(Yu=(0,h.Z)(function*(T,g,m){const w=(0,j.m9)(T);yield Uu(!1,w,"phone");const R=yield Qu(w.auth,g,(0,j.m9)(m));return new mi(R,G=>Wn(w,G))})).apply(this,arguments)}function tc(){return(tc=(0,h.Z)(function*(T,g,m){const w=(0,j.m9)(T),R=yield Qu(w.auth,g,(0,j.m9)(m));return new mi(R,G=>Or(w,G))})).apply(this,arguments)}function Qu(T,g,m){return dd.apply(this,arguments)}function dd(){return(dd=(0,h.Z)(function*(T,g,m){var w;const R=yield m.verify();try{let G;if(V("string"==typeof R,T,"argument-error"),V(m.type===Jl,T,"argument-error"),G="string"==typeof g?{phoneNumber:g}:g,"session"in G){const _e=G.session;if("phoneNumber"in G)return V("enroll"===_e.type,T,"internal-error"),(yield rd(T,{idToken:_e.credential,phoneEnrollmentInfo:{phoneNumber:G.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{V("signin"===_e.type,T,"internal-error");const Ge=(null===(w=G.multiFactorHint)||void 0===w?void 0:w.uid)||G.multiFactorUid;return V(Ge,T,"missing-multi-factor-info"),(yield Bh(T,{mfaPendingCredential:_e.credential,mfaEnrollmentId:Ge,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:_e}=yield Fl(T,{phoneNumber:G.phoneNumber,recaptchaToken:R});return _e}}finally{m._reset()}})).apply(this,arguments)}function Yr(){return(Yr=(0,h.Z)(function*(T,g){yield gn((0,j.m9)(T),g)})).apply(this,arguments)}let _i=(()=>{class T{constructor(m){this.providerId=T.PROVIDER_ID,this.auth=vr(m)}verifyPhoneNumber(m,w){return Qu(this.auth,m,(0,j.m9)(w))}static credential(m,w){return kr._fromVerification(m,w)}static credentialFromResult(m){return T.credentialFromTaggedObject(m)}static credentialFromError(m){return T.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:R}=m;return w&&R?kr._fromTokenResponse(w,R):null}}return T.PROVIDER_ID="phone",T.PHONE_SIGN_IN_METHOD="phone",T})();function Ro(T,g){return g?_r(g):(V(T._popupRedirectResolver,T,"argument-error"),T._popupRedirectResolver)}class oo extends ba{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Ns(g,this._buildIdpRequest())}_linkToIdToken(g,m){return Ns(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return Ns(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function tu(T){return Zc(T.auth,new oo(T),T.bypassAuthState)}function nc(T){const{auth:g,user:m}=T;return V(m,g,"internal-error"),Sp(m,new oo(T),T.bypassAuthState)}function nu(T){return rc.apply(this,arguments)}function rc(){return(rc=(0,h.Z)(function*(T){const{auth:g,user:m}=T;return V(m,g,"internal-error"),gn(m,new oo(T),T.bypassAuthState)})).apply(this,arguments)}class Hh{constructor(g,m,w,R,G=!1){this.auth=g,this.resolver=w,this.user=R,this.bypassAuthState=G,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,h.Z)(function*(w,R){g.pendingPromise={resolve:w,reject:R};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(G){g.reject(G)}});return function(w,R){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,h.Z)(function*(){const{urlResponse:w,sessionId:R,postBody:G,tenantId:_e,error:Ge,type:Tt}=g;if(Ge)return void m.reject(Ge);const Rt={auth:m.auth,requestUri:w,sessionId:R,tenantId:_e||void 0,postBody:G||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Tt)(Rt))}catch(Wt){m.reject(Wt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return tu;case"linkViaPopup":case"linkViaRedirect":return nu;case"reauthViaPopup":case"reauthViaRedirect":return nc;default:Ce(this.auth,"internal-error")}}resolve(g){nt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){nt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ao=new rt(2e3,1e4);function sc(){return(sc=(0,h.Z)(function*(T,g,m){const w=vr(T);st(T,g,Qs);const R=Ro(w,m);return new Oo(w,"signInViaPopup",g,R).executeNotNull()})).apply(this,arguments)}function Nn(){return(Nn=(0,h.Z)(function*(T,g,m){const w=(0,j.m9)(T);st(w.auth,g,Qs);const R=Ro(w.auth,m);return new Oo(w.auth,"reauthViaPopup",g,R,w).executeNotNull()})).apply(this,arguments)}function ai(){return(ai=(0,h.Z)(function*(T,g,m){const w=(0,j.m9)(T);st(w.auth,g,Qs);const R=Ro(w.auth,m);return new Oo(w.auth,"linkViaPopup",g,R,w).executeNotNull()})).apply(this,arguments)}let Oo=(()=>{class T extends Hh{constructor(m,w,R,G,_e){super(m,w,G,_e),this.provider=R,this.authWindow=null,this.pollId=null,T.currentPopupAction&&T.currentPopupAction.cancel(),T.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const w=yield m.execute();return V(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,h.Z)(function*(){nt(1===m.filter.length,"Popup operations only handle one event");const w=Ja();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(R=>{m.reject(R)}),m.resolver._isIframeWebStorageSupported(m.auth,R=>{R||m.reject(je(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(je(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,R;this.pollId=(null===(R=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===R?void 0:R.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(je(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,ao.get())};m()}}return T.currentPopupAction=null,T})();const ru=new Map;class oc extends Hh{constructor(g,m,w=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,h.Z)(function*(){let w=ru.get(m.auth._key());if(!w){try{const G=(yield function Gh(T,g){return ac.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;w=()=>Promise.resolve(G)}catch(R){w=()=>Promise.reject(R)}ru.set(m.auth._key(),w)}return m.bypassAuthState||ru.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,w=this;return(0,h.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(w,g);if("unknown"!==g.type){if(g.eventId){const R=yield w.auth._redirectUserForId(g.eventId);if(R)return w.user=R,m().call(w,g);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function ac(){return(ac=(0,h.Z)(function*(T,g){const m=el(g),w=su(T);if(!(yield w._isAvailable()))return!1;const R="true"===(yield w._get(m));return yield w._remove(m),R})).apply(this,arguments)}function Xu(T,g){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,h.Z)(function*(T,g){return su(T)._set(el(g),"true")})).apply(this,arguments)}function fd(T,g){ru.set(T._key(),g)}function su(T){return _r(T._redirectPersistence)}function el(T){return pe("pendingRedirect",T.config.apiKey,T.name)}function tl(){return(tl=(0,h.Z)(function*(T,g,m){const w=vr(T);st(T,g,Qs),yield w._initializationPromise;const R=Ro(w,m);return yield Xu(R,w),R._openRedirect(w,g,"signInViaRedirect")})).apply(this,arguments)}function nl(){return(nl=(0,h.Z)(function*(T,g,m){const w=(0,j.m9)(T);st(w.auth,g,Qs),yield w.auth._initializationPromise;const R=Ro(w.auth,m);yield Xu(R,w.auth);const G=yield il(w);return R._openRedirect(w.auth,g,"reauthViaRedirect",G)})).apply(this,arguments)}function zh(){return(zh=(0,h.Z)(function*(T,g,m){const w=(0,j.m9)(T);st(w.auth,g,Qs),yield w.auth._initializationPromise;const R=Ro(w.auth,m);yield Uu(!1,w,g.providerId),yield Xu(R,w.auth);const G=yield il(w);return R._openRedirect(w.auth,g,"linkViaRedirect",G)})).apply(this,arguments)}function uc(){return(uc=(0,h.Z)(function*(T,g){return yield vr(T)._initializationPromise,lc(T,g,!1)})).apply(this,arguments)}function lc(T,g){return _d.apply(this,arguments)}function _d(){return(_d=(0,h.Z)(function*(T,g,m=!1){const w=vr(T),R=Ro(w,g),_e=yield new oc(w,R,m).execute();return _e&&!m&&(delete _e.user._redirectEventId,yield w._persistUserIfCurrent(_e.user),yield w._setRedirectUser(null,g)),_e})).apply(this,arguments)}function il(T){return ws.apply(this,arguments)}function ws(){return(ws=(0,h.Z)(function*(T){const g=Ja(`${T.uid}:::`);return T._redirectEventId=g,yield T.auth._setRedirectUser(T),yield T.auth._persistUserIfCurrent(T),g})).apply(this,arguments)}class cc{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(g,w)&&(m=!0,this.sendToConsumer(g,w),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function lo(T){switch(T.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cs(T);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var w;if(g.error&&!Cs(g)){const R=(null===(w=g.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(je(this.auth,R))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const w=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&w}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(yd(g))}saveEventToCache(g){this.cachedEventUids.add(yd(g)),this.lastProcessedEventTime=Date.now()}}function yd(T){return[T.type,T.eventId,T.sessionId,T.tenantId].filter(g=>g).join("-")}function Cs({type:T,error:g}){return"unknown"===T&&"auth/no-auth-event"===(null==g?void 0:g.code)}function $p(T){return Hp.apply(this,arguments)}function Hp(){return(Hp=(0,h.Z)(function*(T,g={}){return ve(T,"GET","/v1/projects",g)})).apply(this,arguments)}const vd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Li=/^https?/;function No(){return(No=(0,h.Z)(function*(T){if(T.config.emulator)return;const{authorizedDomains:g}=yield $p(T);for(const m of g)try{if(hc(m))return}catch(w){}Ce(T,"unauthorized-domain")})).apply(this,arguments)}function hc(T){const g=We(),{protocol:m,hostname:w}=new URL(g);if(T.startsWith("chrome-extension://")){const _e=new URL(T);return""===_e.hostname&&""===w?"chrome-extension:"===m&&T.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&_e.hostname===w}if(!Li.test(m))return!1;if(vd.test(T))return w===T;const R=T.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(w)}const yi=new rt(3e4,6e4);function sl(){const T=fr().___jsl;if(null==T?void 0:T.H)for(const g of Object.keys(T.H))if(T.H[g].r=T.H[g].r||[],T.H[g].L=T.H[g].L||[],T.H[g].r=[...T.H[g].L],T.CP)for(let m=0;m<T.CP.length;m++)T.CP[m]=null}let bd=null;function ou(T){return bd=bd||function Ss(T){return new Promise((g,m)=>{var w,R,G;function _e(){sl(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{sl(),m(je(T,"network-request-failed"))},timeout:yi.get()})}if(null===(R=null===(w=fr().gapi)||void 0===w?void 0:w.iframes)||void 0===R?void 0:R.Iframe)g(gapi.iframes.getContext());else{if(!(null===(G=fr().gapi)||void 0===G?void 0:G.load)){const Ge=Yn("iframefcb");return fr()[Ge]=()=>{gapi.load?_e():m(je(T,"network-request-failed"))},qn(`https://apis.google.com/js/api.js?onload=${Ge}`).catch(Tt=>m(Tt))}_e()}}).catch(g=>{throw bd=null,g})}(T),bd}const qp=new rt(5e3,15e3),Kh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vm(T){const g=T.config;V(g.authDomain,T,"auth-domain-config-required");const m=g.emulator?Z(g,"emulator/auth/iframe"):`https://${T.config.authDomain}/__/auth/iframe`,w={apiKey:g.apiKey,appName:T.name,v:de.SDK_VERSION},R=Zh.get(T.config.apiHost);R&&(w.eid=R);const G=T._getFrameworks();return G.length&&(w.fw=G.join(",")),`${m}?${(0,j.xO)(w).slice(1)}`}function k(){return k=(0,h.Z)(function*(T){const g=yield ou(T),m=fr().gapi;return V(m,T,"internal-error"),g.open({where:document.body,url:Vm(T),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kh,dontclear:!0},w=>new Promise(function(){var R=(0,h.Z)(function*(G,_e){yield w.restyle({setHideOnLeave:!1});const Ge=je(T,"network-request-failed"),Tt=fr().setTimeout(()=>{_e(Ge)},qp.get());function Rt(){fr().clearTimeout(Tt),G(w)}w.ping(Rt).then(Rt,()=>{_e(Ge)})});return function(G,_e){return R.apply(this,arguments)}}()))}),k.apply(this,arguments)}const F={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ft{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}const Di=encodeURIComponent("fac");function $r(T,g,m,w,R,G){return uu.apply(this,arguments)}function uu(){return(uu=(0,h.Z)(function*(T,g,m,w,R,G){V(T.config.authDomain,T,"auth-domain-config-required"),V(T.config.apiKey,T,"invalid-api-key");const _e={apiKey:T.config.apiKey,appName:T.name,authType:m,redirectUrl:w,v:de.SDK_VERSION,eventId:R};if(g instanceof Qs){g.setDefaultLanguage(T.languageCode),_e.providerId=g.providerId||"",(0,j.xb)(g.getCustomParameters())||(_e.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Wt,Zt]of Object.entries(G||{}))_e[Wt]=Zt}if(g instanceof Ou){const Wt=g.getScopes().filter(Zt=>""!==Zt);Wt.length>0&&(_e.scopes=Wt.join(","))}T.tenantId&&(_e.tid=T.tenantId);const Ge=_e;for(const Wt of Object.keys(Ge))void 0===Ge[Wt]&&delete Ge[Wt];const Tt=yield T._getAppCheckToken(),Rt=Tt?`#${Di}=${encodeURIComponent(Tt)}`:"";return`${fc(T)}?${(0,j.xO)(Ge).slice(1)}${Rt}`})).apply(this,arguments)}function fc({config:T}){return T.emulator?Z(T,"emulator/auth/handler"):`https://${T.authDomain}/__/auth/handler`}const Fi="webStorageSupport";class jm extends class Gp{constructor(g){this.factorId=g}_process(g,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,w);case"signin":return this._finalizeSignIn(g,m.credential);default:return Ie("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new jm(g)}_finalizeEnroll(g,m,w){return function qu(T,g){return ve(T,"POST","/v2/accounts/mfaEnrollment:finalize",Oe(T,g))}(g,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function ko(T,g){return ve(T,"POST","/v2/accounts/mfaSignIn:finalize",Oe(T,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Bb=(()=>{class T{constructor(){}static assertion(m){return jm._fromCredential(m)}}return T.FACTOR_ID="phone",T})();var ul="@firebase/auth";class Vb{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(w=>{g((null==w?void 0:w.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);!m||(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ll(){return window}function Kp(){return(Kp=(0,h.Z)(function*(T,g,m){var w;const{BuildInfo:R}=ll();nt(g.sessionId,"AuthEvent did not contain a session ID");const G=yield Td(g.sessionId),_e={};return ae()?_e.ibi=R.packageName:_n()?_e.apn=R.packageName:Ce(T,"operation-not-supported-in-this-environment"),R.displayName&&(_e.appDisplayName=R.displayName),_e.sessionId=G,$r(T,m,g.type,void 0,null!==(w=g.eventId)&&void 0!==w?w:void 0,_e)})).apply(this,arguments)}function Zp(){return(Zp=(0,h.Z)(function*(T){const{BuildInfo:g}=ll(),m={};ae()?m.iosBundleId=g.packageName:_n()?m.androidPackageName=g.packageName:Ce(T,"operation-not-supported-in-this-environment"),yield $p(T,m)})).apply(this,arguments)}function ef(){return(ef=(0,h.Z)(function*(T,g,m){const{cordova:w}=ll();let R=()=>{};try{yield new Promise((G,_e)=>{let Ge=null;function Tt(){var Zt;G();const hr=null===(Zt=w.plugins.browsertab)||void 0===Zt?void 0:Zt.close;"function"==typeof hr&&hr(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Rt(){Ge||(Ge=window.setTimeout(()=>{_e(je(T,"redirect-cancelled-by-user"))},2e3))}function Wt(){"visible"===(null==document?void 0:document.visibilityState)&&Rt()}g.addPassiveListener(Tt),document.addEventListener("resume",Rt,!1),_n()&&document.addEventListener("visibilitychange",Wt,!1),R=()=>{g.removePassiveListener(Tt),document.removeEventListener("resume",Rt,!1),document.removeEventListener("visibilitychange",Wt,!1),Ge&&window.clearTimeout(Ge)}})}finally{R()}})).apply(this,arguments)}function Td(T){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,h.Z)(function*(T){const g=lu(T),m=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(m)).map(R=>R.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function lu(T){if(nt(/[0-9a-zA-Z]+/.test(T),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(T);const g=new ArrayBuffer(T.length),m=new Uint8Array(g);for(let w=0;w<T.length;w++)m[w]=T.charCodeAt(w);return m}(0,j.Pz)("authIdTokenMaxAge"),function Hm(T){(0,de._registerComponent)(new me.wA("auth",(g,{options:m})=>{const w=g.getProvider("app").getImmediate(),R=g.getProvider("heartbeat"),G=g.getProvider("app-check-internal"),{apiKey:_e,authDomain:Ge}=w.options;V(_e&&!_e.includes(":"),"invalid-api-key",{appName:w.name});const Tt={apiKey:_e,authDomain:Ge,clientPlatform:T,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ze(T)},Rt=new ri(w,R,G,Tt);return function wr(T,g){const m=(null==g?void 0:g.persistence)||[],w=(Array.isArray(m)?m:[m]).map(_r);(null==g?void 0:g.errorMap)&&T._updateErrorMap(g.errorMap),T._initializeWithPersistence(w,null==g?void 0:g.popupRedirectResolver)}(Rt,m),Rt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,w)=>{g.getProvider("auth-internal").initialize()})),(0,de._registerComponent)(new me.wA("auth-internal",g=>{const m=vr(g.getProvider("auth").getImmediate());return new Vb(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,de.registerVersion)(ul,"0.23.2",function $m(T){switch(T){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(T)),(0,de.registerVersion)(ul,"0.23.2","esm2017")}("Browser");class Ky extends cc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(g)),super.onEvent(g)}initialized(){var g=this;return(0,h.Z)(function*(){yield g.initPromise})()}}function Gm(T){return tf.apply(this,arguments)}function tf(){return(tf=(0,h.Z)(function*(T){const g=yield Aa()._get(Cd(T));return g&&(yield Aa()._remove(Cd(T))),g})).apply(this,arguments)}function zm(){const T=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const w=Math.floor(Math.random()*g.length);T.push(g.charAt(w))}return T.join("")}function Aa(){return _r(Xo)}function Cd(T){return pe("authEvent",T.config.apiKey,T.name)}function mc(T){if(!(null==T?void 0:T.includes("?")))return{};const[g,...m]=T.split("?");return(0,j.zd)(m.join("?"))}function Wm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:je("no-auth-event")}}function nf(){var T;return(null===(T=null==self?void 0:self.location)||void 0===T?void 0:T.protocol)||null}function Yy(T=(0,j.z$)()){return!("file:"!==nf()&&"ionic:"!==nf()&&"capacitor:"!==nf()||!T.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jy(){try{const T=self.localStorage,g=Ja();if(T)return T.setItem(g,"1"),T.removeItem(g),!function Xy(T=(0,j.z$)()){return function xd(){return(0,j.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Qy(T=(0,j.z$)()){return/Edge\/\d+/.test(T)}(T)}()||(0,j.hl)()}catch(T){return Km()&&(0,j.hl)()}return!1}function Km(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Zm(){return(function zb(){return"http:"===nf()||"https:"===nf()}()||(0,j.ru)()||Yy())&&!function cu(){return(0,j.b$)()||(0,j.UG)()}()&&Jy()&&!Km()}function e0(){return Yy()&&"undefined"!=typeof document}function Jp(){return(Jp=(0,h.Z)(function*(){return!!e0()&&new Promise(T=>{const g=setTimeout(()=>{T(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),T(!0)})})})).apply(this,arguments)}const Hs={LOCAL:"local",NONE:"none",SESSION:"session"},Dd=V,n0="persistence";function vc(T){return eg.apply(this,arguments)}function eg(){return(eg=(0,h.Z)(function*(T){yield T._initializationPromise;const g=Id(),m=pe(n0,T.config.apiKey,T.name);g&&g.setItem(m,T._getPersistence())})).apply(this,arguments)}function Id(){var T;try{return(null===(T=function RC(){return"undefined"!=typeof window?window:null}())||void 0===T?void 0:T.sessionStorage)||null}catch(g){return null}}const Ym=V;class du{constructor(){this.browserResolver=_r(class co{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=io,this._completeRedirectFn=lc,this._overrideRedirectResult=fd}_openPopup(g,m,w,R){var G=this;return(0,h.Z)(function*(){var _e;nt(null===(_e=G.eventManagers[g._key()])||void 0===_e?void 0:_e.manager,"_initialize() not called before _openPopup()");const Ge=yield $r(g,m,w,We(),R);return function Pt(T,g,m,w=500,R=600){const G=Math.max((window.screen.availHeight-R)/2,0).toString(),_e=Math.max((window.screen.availWidth-w)/2,0).toString();let Ge="";const Tt=Object.assign(Object.assign({},F),{width:w.toString(),height:R.toString(),top:G,left:_e}),Rt=(0,j.z$)().toLowerCase();m&&(Ge=Ht(Rt)?"_blank":m),yt(Rt)&&(g=g||"http://localhost",Tt.scrollbars="yes");const Wt=Object.entries(Tt).reduce((hr,[ho,rg])=>`${hr}${ho}=${rg},`,"");if(function xt(T=(0,j.z$)()){var g;return ae(T)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Rt)&&"_self"!==Ge)return function Xt(T,g){const m=document.createElement("a");m.href=T,m.target=g;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(g||"",Ge),new Ft(null);const Zt=window.open(g||"",Ge,Wt);V(Zt,T,"popup-blocked");try{Zt.focus()}catch(hr){}return new Ft(Zt)}(g,Ge,Ja())})()}_openRedirect(g,m,w,R){var G=this;return(0,h.Z)(function*(){return yield G._originValidation(g),function so(T){fr().location.href=T}(yield $r(g,m,w,We(),R)),new Promise(()=>{})})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:R,promise:G}=this.eventManagers[m];return R?Promise.resolve(R):(nt(G,"If manager is not set, promise should be"),G)}const w=this.initAndGetManager(g);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(g){var m=this;return(0,h.Z)(function*(){const w=yield function S(T){return k.apply(this,arguments)}(g),R=new cc(g);return w.register("authEvent",G=>(V(null==G?void 0:G.authEvent,g,"invalid-auth-event"),{status:R.onEvent(G.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:R},m.iframes[g._key()]=w,R})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(Fi,{type:Fi},R=>{var G;const _e=null===(G=null==R?void 0:R[0])||void 0===G?void 0:G[Fi];void 0!==_e&&m(!!_e),Ce(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function dc(T){return No.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return Pn()||Ke()||ae()}}),this.cordovaResolver=_r(class _c{constructor(){this._redirectPersistence=io,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=lc,this._overrideRedirectResult=fd}_initialize(g){var m=this;return(0,h.Z)(function*(){const w=g._key();let R=m.eventManagers.get(w);return R||(R=new Ky(g),m.eventManagers.set(w,R),m.attachCallbackListeners(g,R)),R})()}_openPopup(g){Ce(g,"operation-not-supported-in-this-environment")}_openRedirect(g,m,w,R){var G=this;return(0,h.Z)(function*(){!function Qp(T){var g,m,w,R,G,_e,Ge,Tt,Rt,Wt;const Zt=ll();V("function"==typeof(null===(g=null==Zt?void 0:Zt.universalLinks)||void 0===g?void 0:g.subscribe),T,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(void 0!==(null===(m=null==Zt?void 0:Zt.BuildInfo)||void 0===m?void 0:m.packageName),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(G=null===(R=null===(w=null==Zt?void 0:Zt.cordova)||void 0===w?void 0:w.plugins)||void 0===R?void 0:R.browsertab)||void 0===G?void 0:G.openUrl),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Tt=null===(Ge=null===(_e=null==Zt?void 0:Zt.cordova)||void 0===_e?void 0:_e.plugins)||void 0===Ge?void 0:Ge.browsertab)||void 0===Tt?void 0:Tt.isAvailable),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Wt=null===(Rt=null==Zt?void 0:Zt.cordova)||void 0===Rt?void 0:Rt.InAppBrowser)||void 0===Wt?void 0:Wt.open),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const _e=yield G._initialize(g);yield _e.initialized(),_e.resetRedirect(),function iu(){ru.clear()}(),yield G._originValidation(g);const Ge=function jb(T,g,m=null){return{type:g,eventId:m,urlResponse:null,sessionId:zm(),postBody:null,tenantId:T.tenantId,error:je(T,"no-auth-event")}}(g,w,R);yield function $b(T,g){return Aa()._set(Cd(T),g)}(g,Ge);const Tt=yield function Jh(T,g,m){return Kp.apply(this,arguments)}(g,Ge,m),Rt=yield function Yp(T){const{cordova:g}=ll();return new Promise(m=>{g.plugins.browsertab.isAvailable(w=>{let R=null;w?g.plugins.browsertab.openUrl(T):R=g.InAppBrowser.open(T,function Ue(T=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(T)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(T)}()?"_blank":"_system","location=yes"),m(R)})})}(Tt);return function gc(T,g,m){return ef.apply(this,arguments)}(g,_e,Rt)})()}_isIframeWebStorageSupported(g,m){throw new Error("Method not implemented.")}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function qm(T){return Zp.apply(this,arguments)}(g)),this.originValidationPromises[m]}attachCallbackListeners(g,m){const{universalLinks:w,handleOpenURL:R,BuildInfo:G}=ll(),_e=setTimeout((0,h.Z)(function*(){yield Gm(g),m.onEvent(Wm())}),500),Ge=function(){var Wt=(0,h.Z)(function*(Zt){clearTimeout(_e);const hr=yield Gm(g);let ho=null;hr&&(null==Zt?void 0:Zt.url)&&(ho=function wd(T,g){var m,w;const R=function PC(T){const g=mc(T),m=g.link?decodeURIComponent(g.link):void 0,w=mc(m).link,R=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return mc(R).link||R||w||m||T}(g);if(R.includes("/__/auth/callback")){const G=mc(R),_e=G.firebaseError?function Hb(T){try{return JSON.parse(T)}catch(g){return null}}(decodeURIComponent(G.firebaseError)):null,Ge=null===(w=null===(m=null==_e?void 0:_e.code)||void 0===m?void 0:m.split("auth/"))||void 0===w?void 0:w[1],Tt=Ge?je(Ge):null;return Tt?{type:T.type,eventId:T.eventId,tenantId:T.tenantId,error:Tt,urlResponse:null,sessionId:null,postBody:null}:{type:T.type,eventId:T.eventId,tenantId:T.tenantId,sessionId:T.sessionId,urlResponse:R,postBody:null}}return null}(hr,Zt.url)),m.onEvent(ho||Wm())});return function(hr){return Wt.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,Ge);const Tt=R,Rt=`${G.packageName.toLowerCase()}://`;ll().handleOpenURL=function(){var Wt=(0,h.Z)(function*(Zt){if(Zt.toLowerCase().startsWith(Rt)&&Ge({url:Zt}),"function"==typeof Tt)try{Tt(Zt)}catch(hr){console.error(hr)}});return function(Zt){return Wt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=io,this._completeRedirectFn=lc,this._overrideRedirectResult=fd}_initialize(g){var m=this;return(0,h.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,m,w,R){var G=this;return(0,h.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._openPopup(g,m,w,R)})()}_openRedirect(g,m,w,R){var G=this;return(0,h.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._openRedirect(g,m,w,R)})()}_isIframeWebStorageSupported(g,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,m)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return e0()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ym(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,h.Z)(function*(){if(g.underlyingResolver)return;const m=yield function t0(){return Jp.apply(this,arguments)}();g.underlyingResolver=m?g.cordovaResolver:g.browserResolver})()}}function rf(T){return T.unwrap()}function NC(T){return Ad(T)}function Ad(T){const{_tokenResponse:g}=T instanceof j.ZR?T.customData:T;if(!g)return null;if(!(T instanceof j.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return _i.credentialFromResult(T);const m=g.providerId;if(!m||"password"===m)return null;let w;switch(m){case"google.com":w=Cr;break;case"facebook.com":w=jy;break;case"github.com":w=kh;break;case"twitter.com":w=Lu;break;default:const{oauthIdToken:R,oauthAccessToken:G,oauthTokenSecret:_e,pendingToken:Ge,nonce:Tt}=g;return G||_e||R||Ge?Ge?m.startsWith("saml.")?tr._create(m,Ge):Do._fromParams({providerId:m,signInMethod:m,pendingToken:Ge,idToken:R,accessToken:G}):new Io(m).credential({idToken:R,accessToken:G,rawNonce:Tt}):null}return T instanceof j.ZR?w.credentialFromError(T):w.credentialFromResult(T)}function Yi(T,g){return g.catch(m=>{throw m instanceof j.ZR&&function LC(T,g){var m;const w=null===(m=g.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null==g?void 0:g.code))g.resolver=new FC(T,function Qa(T,g){var m;const w=(0,j.m9)(T),R=g;return V(g.customData.operationType,w,"argument-error"),V(null===(m=R.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),Hu._fromError(w,R)}(T,g));else if(w){const R=Ad(g),G=g;R&&(G.credential=R,G.tenantId=w.tenantId||void 0,G.email=w.email||void 0,G.phoneNumber=w.phoneNumber||void 0)}}(T,m),m}).then(m=>{const R=m.user;return{operationType:m.operationType,credential:NC(m),additionalUserInfo:Up(m),user:Ma.getOrCreate(R)}})}function sf(T,g){return s0.apply(this,arguments)}function s0(){return(s0=(0,h.Z)(function*(T,g){const m=yield g;return{verificationId:m.verificationId,confirm:w=>Yi(T,m.confirm(w))}})).apply(this,arguments)}class FC{constructor(g,m){this.resolver=m,this.auth=function OC(T){return T.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Yi(rf(this.auth),this.resolver.resolveSignIn(g))}}class Ma{constructor(g){this._delegate=g,this.multiFactor=function Fh(T){const g=(0,j.m9)(T);return zu.has(g)||zu.set(g,Gu._fromUser(g)),zu.get(g)}(g)}static getOrCreate(g){return Ma.USER_MAP.has(g)||Ma.USER_MAP.set(g,new Ma(g)),Ma.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var m=this;return(0,h.Z)(function*(){return Yi(m.auth,Wn(m._delegate,g))})()}linkWithPhoneNumber(g,m){var w=this;return(0,h.Z)(function*(){return sf(w.auth,function qy(T,g,m){return Yu.apply(this,arguments)}(w._delegate,g,m))})()}linkWithPopup(g){var m=this;return(0,h.Z)(function*(){return Yi(m.auth,function hd(T,g,m){return ai.apply(this,arguments)}(m._delegate,g,du))})()}linkWithRedirect(g){var m=this;return(0,h.Z)(function*(){return yield vc(vr(m.auth)),function rl(T,g,m){return function md(T,g,m){return zh.apply(this,arguments)}(T,g,m)}(m._delegate,g,du)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var m=this;return(0,h.Z)(function*(){return Yi(m.auth,Or(m._delegate,g))})()}reauthenticateWithPhoneNumber(g,m){return sf(this.auth,function $s(T,g,m){return tc.apply(this,arguments)}(this._delegate,g,m))}reauthenticateWithPopup(g){return Yi(this.auth,function uo(T,g,m){return Nn.apply(this,arguments)}(this._delegate,g,du))}reauthenticateWithRedirect(g){var m=this;return(0,h.Z)(function*(){return yield vc(vr(m.auth)),function jp(T,g,m){return function Bm(T,g,m){return nl.apply(this,arguments)}(T,g,m)}(m._delegate,g,du)})()}sendEmailVerification(g){return function Nh(T,g){return Vr.apply(this,arguments)}(this._delegate,g)}unlink(g){var m=this;return(0,h.Z)(function*(){return yield function Fu(T,g){return is.apply(this,arguments)}(m._delegate,g),m})()}updateEmail(g){return function Op(T,g){return td((0,j.m9)(T),g,null)}(this._delegate,g)}updatePassword(g){return function Np(T,g){return td((0,j.m9)(T),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Vp(T,g){return Yr.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function Rp(T,g){return ed.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,m){return function no(T,g,m){return br.apply(this,arguments)}(this._delegate,g,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ma.USER_MAP=new WeakMap;const kd=V;let o0=(()=>{class T{constructor(m,w){if(this.app=m,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:R}=m.options;kd(R,"invalid-api-key",{appName:m.name}),kd(R,"invalid-api-key",{appName:m.name});const G="undefined"!=typeof window?du:void 0;this._delegate=w.initialize({options:{persistence:Qi(R,m.name),popupRedirectResolver:G}}),this._delegate._updateErrorMap(Je),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ma.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,w){!function Eh(T,g,m){const w=vr(T);V(w._canInitEmulator,w,"emulator-config-failed"),V(/^https?:\/\//.test(g),w,"invalid-emulator-scheme");const R=!!(null==m?void 0:m.disableWarnings),G=Au(g),{host:_e,port:Ge}=function gs(T){const g=Au(T),m=/(\/\/)?([^?#/]+)/.exec(T.substr(g.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(w);if(R){const G=R[1];return{host:G,port:Os(w.substr(G.length+1))}}{const[G,_e]=w.split(":");return{host:G,port:Os(_e)}}}(g);w.config.emulator={url:`${G}//${_e}${null===Ge?"":`:${Ge}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:_e,port:Ge,protocol:G.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function wh(){function T(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",T):T())}()}(this._delegate,m,w)}applyActionCode(m){return function Zo(T,g){return Yo.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Hl(this._delegate,m)}confirmPasswordReset(m,w){return function Dp(T,g,m){return wa.apply(this,arguments)}(this._delegate,m,w)}createUserWithEmailAndPassword(m,w){var R=this;return(0,h.Z)(function*(){return Yi(R._delegate,function Qc(T,g,m){return Vu.apply(this,arguments)}(R._delegate,m,w))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function bs(T,g){return Jc.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Xc(T,g){const m=Ru.parseLink(g);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,h.Z)(function*(){kd(Zm(),m._delegate,"operation-not-supported-in-this-environment");const w=yield function Gy(T,g){return uc.apply(this,arguments)}(m._delegate,du);return w?Yi(m._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Sd(T,g){vr(T)._logFramework(g)}(this._delegate,m)}onAuthStateChanged(m,w,R){const{next:G,error:_e,complete:Ge}=a0(m,w,R);return this._delegate.onAuthStateChanged(G,_e,Ge)}onIdTokenChanged(m,w,R){const{next:G,error:_e,complete:Ge}=a0(m,w,R);return this._delegate.onIdTokenChanged(G,_e,Ge)}sendSignInLinkToEmail(m,w){return function kp(T,g,m){return ju.apply(this,arguments)}(this._delegate,m,w)}sendPasswordResetEmail(m,w){return function Ki(T,g,m){return vs.apply(this,arguments)}(this._delegate,m,w||void 0)}setPersistence(m){var w=this;return(0,h.Z)(function*(){let R;switch(function r0(T,g){Dd(Object.values(Hs).includes(g),T,"invalid-persistence-type"),(0,j.b$)()?Dd(g!==Hs.SESSION,T,"unsupported-persistence-type"):(0,j.UG)()?Dd(g===Hs.NONE,T,"unsupported-persistence-type"):Km()?Dd(g===Hs.NONE||g===Hs.LOCAL&&(0,j.hl)(),T,"unsupported-persistence-type"):Dd(g===Hs.NONE||Jy(),T,"unsupported-persistence-type")}(w._delegate,m),m){case Hs.SESSION:R=io;break;case Hs.LOCAL:R=(yield _r(Ts)._isAvailable())?Ts:Xo;break;case Hs.NONE:R=ni;break;default:return Ce("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(R)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Yi(this._delegate,function _s(T){return qa.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Yi(this._delegate,za(this._delegate,m))}signInWithCustomToken(m){return Yi(this._delegate,function Ea(T,g){return ys.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,w){return Yi(this._delegate,function Ap(T,g,m){return za((0,j.m9)(T),Ah.credential(g,m))}(this._delegate,m,w))}signInWithEmailLink(m,w){return Yi(this._delegate,function gi(T,g,m){return Rh.apply(this,arguments)}(this._delegate,m,w))}signInWithPhoneNumber(m,w){return sf(this._delegate,function ec(T,g,m){return Po.apply(this,arguments)}(this._delegate,m,w))}signInWithPopup(m){var w=this;return(0,h.Z)(function*(){return kd(Zm(),w._delegate,"operation-not-supported-in-this-environment"),Yi(w._delegate,function ic(T,g,m){return sc.apply(this,arguments)}(w._delegate,m,du))})()}signInWithRedirect(m){var w=this;return(0,h.Z)(function*(){return kd(Zm(),w._delegate,"operation-not-supported-in-this-environment"),yield vc(w._delegate),function pd(T,g,m){return function gd(T,g,m){return tl.apply(this,arguments)}(T,g,m)}(w._delegate,m,du)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Ip(T,g){return Ka.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return T.Persistence=Hs,T})();function a0(T,g,m){let w=T;"function"!=typeof T&&({next:w,error:g,complete:m}=T);const R=w;return{next:_e=>R(_e&&Ma.getOrCreate(_e)),error:g,complete:m}}function Qi(T,g){const m=function ka(T,g){const m=Id();if(!m)return[];const w=pe(n0,T,g);switch(m.getItem(w)){case Hs.NONE:return[ni];case Hs.LOCAL:return[Ts,io];case Hs.SESSION:return[io];default:return[]}}(T,g);if("undefined"!=typeof self&&!m.includes(Ts)&&m.push(Ts),"undefined"!=typeof window)for(const w of[Xo,io])m.includes(w)||m.push(w);return m.includes(ni)||m.push(ni),m}class tg{constructor(){this.providerId="phone",this._delegate=new _i(rf(oe.Z.auth()))}static credential(g,m){return _i.credential(g,m)}verifyPhoneNumber(g,m){return this._delegate.verifyPhoneNumber(g,m)}unwrap(){return this._delegate}}tg.PHONE_SIGN_IN_METHOD=_i.PHONE_SIGN_IN_METHOD,tg.PROVIDER_ID=_i.PROVIDER_ID;const af=V;class ng{constructor(g,m,w=oe.Z.app()){var R;af(null===(R=w.options)||void 0===R?void 0:R.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Bp(g,m,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Md(T){T.INTERNAL.registerComponent(new me.wA("auth-compat",g=>{const m=g.getProvider("app-compat").getImmediate(),w=g.getProvider("auth");return new o0(m,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ah,FacebookAuthProvider:jy,GithubAuthProvider:kh,GoogleAuthProvider:Cr,OAuthProvider:Io,SAMLAuthProvider:Nu,PhoneAuthProvider:tg,PhoneMultiFactorGenerator:Bb,RecaptchaVerifier:ng,TwitterAuthProvider:Lu,Auth:o0,AuthCredential:ba,Error:j.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),T.registerVersion("@firebase/auth-compat","0.4.2")}(oe.Z)},5861:(it,Se,$)=>{"use strict";function h(j,de,re,ce,me,ye,De){try{var Y=j[ye](De),se=Y.value}catch(Q){return void re(Q)}Y.done?de(se):Promise.resolve(se).then(ce,me)}function oe(j){return function(){var de=this,re=arguments;return new Promise(function(ce,me){var ye=j.apply(de,re);function De(se){h(ye,ce,me,De,Y,"next",se)}function Y(se){h(ye,ce,me,De,Y,"throw",se)}De(void 0)})}}$.d(Se,{Z:()=>oe})},7582:(it,Se,$)=>{"use strict";function de(Z,ne){var Pe={};for(var Ve in Z)Object.prototype.hasOwnProperty.call(Z,Ve)&&ne.indexOf(Ve)<0&&(Pe[Ve]=Z[Ve]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(Ve=Object.getOwnPropertySymbols(Z);Oe<Ve.length;Oe++)ne.indexOf(Ve[Oe])<0&&Object.prototype.propertyIsEnumerable.call(Z,Ve[Oe])&&(Pe[Ve[Oe]]=Z[Ve[Oe]])}return Pe}function Q(Z,ne,Pe,Ve){return new(Pe||(Pe=Promise))(function(ve,ut){function Ot(ln){try{kt(Ve.next(ln))}catch($n){ut($n)}}function zt(ln){try{kt(Ve.throw(ln))}catch($n){ut($n)}}function kt(ln){ln.done?ve(ln.value):function Oe(ve){return ve instanceof Pe?ve:new Pe(function(ut){ut(ve)})}(ln.value).then(Ot,zt)}kt((Ve=Ve.apply(Z,ne||[])).next())})}function Ye(Z){return this instanceof Ye?(this.v=Z,this):new Ye(Z)}function Ce(Z,ne,Pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,Ve=Pe.apply(Z,ne||[]),ve=[];return Oe={},ut("next"),ut("throw"),ut("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function ut(zn){Ve[zn]&&(Oe[zn]=function(ar){return new Promise(function(fn,Bn){ve.push([zn,ar,fn,Bn])>1||Ot(zn,ar)})})}function Ot(zn,ar){try{!function zt(zn){zn.value instanceof Ye?Promise.resolve(zn.value.v).then(kt,ln):$n(ve[0][2],zn)}(Ve[zn](ar))}catch(fn){$n(ve[0][3],fn)}}function kt(zn){Ot("next",zn)}function ln(zn){Ot("throw",zn)}function $n(zn,ar){zn(ar),ve.shift(),ve.length&&Ot(ve[0][0],ve[0][1])}}function gt(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,ne=Z[Symbol.asyncIterator];return ne?ne.call(Z):(Z=function Dt(Z){var ne="function"==typeof Symbol&&Symbol.iterator,Pe=ne&&Z[ne],Ve=0;if(Pe)return Pe.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&Ve>=Z.length&&(Z=void 0),{value:Z&&Z[Ve++],done:!Z}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),Pe={},Ve("next"),Ve("throw"),Ve("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe);function Ve(ve){Pe[ve]=Z[ve]&&function(ut){return new Promise(function(Ot,zt){!function Oe(ve,ut,Ot,zt){Promise.resolve(zt).then(function(kt){ve({value:kt,done:Ot})},ut)}(Ot,zt,(ut=Z[ve](ut)).done,ut.value)})}}}$.d(Se,{FC:()=>Ce,KL:()=>gt,_T:()=>de,mG:()=>Q,qq:()=>Ye}),"function"==typeof SuppressedError&&SuppressedError},3681:it=>{"use strict";it.exports=JSON.parse('{"name":"@ffmpeg/ffmpeg","version":"0.11.6","description":"FFmpeg WebAssembly version","main":"src/index.js","types":"src/index.d.ts","directories":{"example":"examples"},"scripts":{"start":"node scripts/server.js","start:worker":"node scripts/worker-server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","build:worker":"rimraf dist && webpack --config scripts/webpack.config.worker.prod.js","prepublishOnly":"npm run build","lint":"eslint src","wait":"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node node_modules/mocha/bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},"browser":{"./src/node/index.js":"./src/browser/index.js"},"repository":{"type":"git","url":"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},"keywords":["ffmpeg","WebAssembly","video"],"author":"Jerome Wu <jeromewus@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},"engines":{"node":">=12.16.1"},"homepage":"https://github.com/ffmpegwasm/ffmpeg.wasm#readme","dependencies":{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},"devDependencies":{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.11.0","@types/emscripten":"^1.39.4","babel-eslint":"^10.1.0","babel-loader":"^8.1.0","chai":"^4.2.0","cors":"^2.8.5","eslint":"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1","express":"^4.17.1","mocha":"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0","webpack":"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"}}')}},it=>{it(it.s=6631)}]);